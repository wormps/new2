(()=>{var A5=Object.defineProperty,E5=Object.defineProperties,P5=Object.getOwnPropertyDescriptors,Cf=Object.getOwnPropertySymbols,R5=Object.prototype.hasOwnProperty,M5=Object.prototype.propertyIsEnumerable,Of=(a,e,t)=>e in a?A5(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,If=(a,e)=>{for(var t in e||(e={}))R5.call(e,t)&&Of(a,t,e[t]);if(Cf)for(var t of Cf(e))M5.call(e,t)&&Of(a,t,e[t]);return a},C5=(a,e)=>E5(a,P5(e)),I=(a=>(a.Application="application",a.WebGLPipes="webgl-pipes",a.WebGLPipesAdaptor="webgl-pipes-adaptor",a.WebGLSystem="webgl-system",a.WebGPUPipes="webgpu-pipes",a.WebGPUPipesAdaptor="webgpu-pipes-adaptor",a.WebGPUSystem="webgpu-system",a.CanvasSystem="canvas-system",a.CanvasPipesAdaptor="canvas-pipes-adaptor",a.CanvasPipes="canvas-pipes",a.Asset="asset",a.LoadParser="load-parser",a.ResolveParser="resolve-parser",a.CacheParser="cache-parser",a.DetectionParser="detection-parser",a.MaskEffect="mask-effect",a.BlendMode="blend-mode",a.TextureSource="texture-source",a.Environment="environment",a.ShapeBuilder="shape-builder",a.Batcher="batcher",a))(I||{}),vd=a=>{if(typeof a=="function"||typeof a=="object"&&a.extension){let e=typeof a.extension!="object"?{type:a.extension}:a.extension;a=C5(If({},e),{ref:a})}if(typeof a=="object")a=If({},a);else throw new Error("Invalid extension type");return typeof a.type=="string"&&(a.type=[a.type]),a},cr=(a,e)=>{var t;return(t=vd(a).priority)!=null?t:e},ue={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...a){return a.map(vd).forEach(e=>{e.type.forEach(t=>{var i,s;return(s=(i=this._removeHandlers)[t])==null?void 0:s.call(i,e)})}),this},add(...a){return a.map(vd).forEach(e=>{e.type.forEach(t=>{var i,s;let r=this._addHandlers,n=this._queue;r[t]?(s=r[t])==null||s.call(r,e):(n[t]=n[t]||[],(i=n[t])==null||i.push(e))})}),this},handle(a,e,t){var i;let s=this._addHandlers,r=this._removeHandlers;s[a]=e,r[a]=t;let n=this._queue;return n[a]&&((i=n[a])==null||i.forEach(d=>e(d)),delete n[a]),this},handleByMap(a,e){return this.handle(a,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(a,e,t=-1){return this.handle(a,i=>{e.findIndex(s=>s.name===i.name)>=0||(e.push({name:i.name,value:i.ref}),e.sort((s,r)=>cr(r.value,t)-cr(s.value,t)))},i=>{let s=e.findIndex(r=>r.name===i.name);s!==-1&&e.splice(s,1)})},handleByList(a,e,t=-1){return this.handle(a,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((s,r)=>cr(r,t)-cr(s,t)))},i=>{let s=e.indexOf(i.ref);s!==-1&&e.splice(s,1)})}};function hl(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ll={exports:{}},eS=ll.exports;(function(a){"use strict";var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function s(h,l,u){this.fn=h,this.context=l,this.once=u||!1}function r(h,l,u,p,_){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new s(u,p||h,_),v=t?t+l:l;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],m]:h._events[v].push(m):(h._events[v]=m,h._eventsCount++),h}function n(h,l){--h._eventsCount===0?h._events=new i:delete h._events[l]}function d(){this._events=new i,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],l,u;if(this._eventsCount===0)return h;for(u in l=this._events)e.call(l,u)&&h.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(l)):h},d.prototype.listeners=function(h){var l=t?t+h:h,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,_=u.length,m=new Array(_);p<_;p++)m[p]=u[p].fn;return m},d.prototype.listenerCount=function(h){var l=t?t+h:h,u=this._events[l];return u?u.fn?1:u.length:0},d.prototype.emit=function(h,l,u,p,_,m){var v=t?t+h:h;if(!this._events[v])return!1;var T=this._events[v],w=arguments.length,P,C;if(T.fn){switch(T.once&&this.removeListener(h,T.fn,void 0,!0),w){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,l),!0;case 3:return T.fn.call(T.context,l,u),!0;case 4:return T.fn.call(T.context,l,u,p),!0;case 5:return T.fn.call(T.context,l,u,p,_),!0;case 6:return T.fn.call(T.context,l,u,p,_,m),!0}for(C=1,P=new Array(w-1);C<w;C++)P[C-1]=arguments[C];T.fn.apply(T.context,P)}else{var B=T.length,D;for(C=0;C<B;C++)switch(T[C].once&&this.removeListener(h,T[C].fn,void 0,!0),w){case 1:T[C].fn.call(T[C].context);break;case 2:T[C].fn.call(T[C].context,l);break;case 3:T[C].fn.call(T[C].context,l,u);break;case 4:T[C].fn.call(T[C].context,l,u,p);break;default:if(!P)for(D=1,P=new Array(w-1);D<w;D++)P[D-1]=arguments[D];T[C].fn.apply(T[C].context,P)}}return!0},d.prototype.on=function(h,l,u){return r(this,h,l,u,!1)},d.prototype.once=function(h,l,u){return r(this,h,l,u,!0)},d.prototype.removeListener=function(h,l,u,p){var _=t?t+h:h;if(!this._events[_])return this;if(!l)return n(this,_),this;var m=this._events[_];if(m.fn)m.fn===l&&(!p||m.once)&&(!u||m.context===u)&&n(this,_);else{for(var v=0,T=[],w=m.length;v<w;v++)(m[v].fn!==l||p&&!m[v].once||u&&m[v].context!==u)&&T.push(m[v]);T.length?this._events[_]=T.length===1?T[0]:T:n(this,_)}return this},d.prototype.removeAllListeners=function(h){var l;return h?(l=t?t+h:h,this._events[l]&&n(this,l)):(this._events=new i,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,a.exports=d})(ll);var O5=ll.exports,xt=hl(O5),I5={grad:.9,turn:360,rad:360/(2*Math.PI)},sa=function(a){return typeof a=="string"?a.length>0:typeof a=="number"},qe=function(a,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*a)/t+0},Et=function(a,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),a>t?t:a>e?a:e},ip=function(a){return(a=isFinite(a)?a%360:0)>0?a:a+360},Gf=function(a){return{r:Et(a.r,0,255),g:Et(a.g,0,255),b:Et(a.b,0,255),a:Et(a.a)}},vc=function(a){return{r:qe(a.r),g:qe(a.g),b:qe(a.b),a:qe(a.a,3)}},G5=/^#([0-9a-f]{3,8})$/i,dr=function(a){var e=a.toString(16);return e.length<2?"0"+e:e},sp=function(a){var e=a.r,t=a.g,i=a.b,s=a.a,r=Math.max(e,t,i),n=r-Math.min(e,t,i),d=n?r===e?(t-i)/n:r===t?2+(i-e)/n:4+(e-t)/n:0;return{h:60*(d<0?d+6:d),s:r?n/r*100:0,v:r/255*100,a:s}},rp=function(a){var e=a.h,t=a.s,i=a.v,s=a.a;e=e/360*6,t/=100,i/=100;var r=Math.floor(e),n=i*(1-t),d=i*(1-(e-r)*t),h=i*(1-(1-e+r)*t),l=r%6;return{r:255*[i,d,n,n,h,i][l],g:255*[h,i,i,d,n,n][l],b:255*[n,n,h,i,i,d][l],a:s}},Bf=function(a){return{h:ip(a.h),s:Et(a.s,0,100),l:Et(a.l,0,100),a:Et(a.a)}},Ff=function(a){return{h:qe(a.h),s:qe(a.s),l:qe(a.l),a:qe(a.a,3)}},Df=function(a){return rp((t=(e=a).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},gs=function(a){return{h:(e=sp(a)).h,s:(s=(200-(t=e.s))*(i=e.v)/100)>0&&s<200?t*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,t,i,s},B5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,F5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,D5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,k5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Td={string:[[function(a){var e=G5.exec(a);return e?(a=e[1]).length<=4?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:a.length===4?qe(parseInt(a[3]+a[3],16)/255,2):1}:a.length===6||a.length===8?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16),a:a.length===8?qe(parseInt(a.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(a){var e=D5.exec(a)||k5.exec(a);return e?e[2]!==e[4]||e[4]!==e[6]?null:Gf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(a){var e=B5.exec(a)||F5.exec(a);if(!e)return null;var t,i,s=Bf({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(I5[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Df(s)},"hsl"]],object:[[function(a){var e=a.r,t=a.g,i=a.b,s=a.a,r=s===void 0?1:s;return sa(e)&&sa(t)&&sa(i)?Gf({r:Number(e),g:Number(t),b:Number(i),a:Number(r)}):null},"rgb"],[function(a){var e=a.h,t=a.s,i=a.l,s=a.a,r=s===void 0?1:s;if(!sa(e)||!sa(t)||!sa(i))return null;var n=Bf({h:Number(e),s:Number(t),l:Number(i),a:Number(r)});return Df(n)},"hsl"],[function(a){var e=a.h,t=a.s,i=a.v,s=a.a,r=s===void 0?1:s;if(!sa(e)||!sa(t)||!sa(i))return null;var n=function(d){return{h:ip(d.h),s:Et(d.s,0,100),v:Et(d.v,0,100),a:Et(d.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(r)});return rp(n)},"hsv"]]},kf=function(a,e){for(var t=0;t<e.length;t++){var i=e[t][0](a);if(i)return[i,e[t][1]]}return[null,void 0]},U5=function(a){return typeof a=="string"?kf(a.trim(),Td.string):typeof a=="object"&&a!==null?kf(a,Td.object):[null,void 0]};var Tc=function(a,e){var t=gs(a);return{h:t.h,s:Et(t.s+100*e,0,100),l:t.l,a:t.a}},Sc=function(a){return(299*a.r+587*a.g+114*a.b)/1e3/255},Uf=function(a,e){var t=gs(a);return{h:t.h,s:t.s,l:Et(t.l+100*e,0,100),a:t.a}},Sd=function(){function a(e){this.parsed=U5(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return a.prototype.isValid=function(){return this.parsed!==null},a.prototype.brightness=function(){return qe(Sc(this.rgba),2)},a.prototype.isDark=function(){return Sc(this.rgba)<.5},a.prototype.isLight=function(){return Sc(this.rgba)>=.5},a.prototype.toHex=function(){return e=vc(this.rgba),t=e.r,i=e.g,s=e.b,n=(r=e.a)<1?dr(qe(255*r)):"","#"+dr(t)+dr(i)+dr(s)+n;var e,t,i,s,r,n},a.prototype.toRgb=function(){return vc(this.rgba)},a.prototype.toRgbString=function(){return e=vc(this.rgba),t=e.r,i=e.g,s=e.b,(r=e.a)<1?"rgba("+t+", "+i+", "+s+", "+r+")":"rgb("+t+", "+i+", "+s+")";var e,t,i,s,r},a.prototype.toHsl=function(){return Ff(gs(this.rgba))},a.prototype.toHslString=function(){return e=Ff(gs(this.rgba)),t=e.h,i=e.s,s=e.l,(r=e.a)<1?"hsla("+t+", "+i+"%, "+s+"%, "+r+")":"hsl("+t+", "+i+"%, "+s+"%)";var e,t,i,s,r},a.prototype.toHsv=function(){return e=sp(this.rgba),{h:qe(e.h),s:qe(e.s),v:qe(e.v),a:qe(e.a,3)};var e},a.prototype.invert=function(){return Yt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},a.prototype.saturate=function(e){return e===void 0&&(e=.1),Yt(Tc(this.rgba,e))},a.prototype.desaturate=function(e){return e===void 0&&(e=.1),Yt(Tc(this.rgba,-e))},a.prototype.grayscale=function(){return Yt(Tc(this.rgba,-1))},a.prototype.lighten=function(e){return e===void 0&&(e=.1),Yt(Uf(this.rgba,e))},a.prototype.darken=function(e){return e===void 0&&(e=.1),Yt(Uf(this.rgba,-e))},a.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},a.prototype.alpha=function(e){return typeof e=="number"?Yt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):qe(this.rgba.a,3);var t},a.prototype.hue=function(e){var t=gs(this.rgba);return typeof e=="number"?Yt({h:e,s:t.s,l:t.l,a:t.a}):qe(t.h)},a.prototype.isEqual=function(e){return this.toHex()===Yt(e).toHex()},a}(),Yt=function(a){return a instanceof Sd?a:new Sd(a)},Lf=[],L5=function(a){a.forEach(function(e){Lf.indexOf(e)<0&&(e(Sd,Td),Lf.push(e))})};function N5(a,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in t)i[t[s]]=s;var r={};a.prototype.toName=function(n){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var d,h,l=i[this.toHex()];if(l)return l;if(n!=null&&n.closest){var u=this.toRgb(),p=1/0,_="black";if(!r.length)for(var m in t)r[m]=new a(t[m]).toRgb();for(var v in t){var T=(d=u,h=r[v],Math.pow(d.r-h.r,2)+Math.pow(d.g-h.g,2)+Math.pow(d.b-h.b,2));T<p&&(p=T,_=v)}return _}},e.string.push([function(n){var d=n.toLowerCase(),h=d==="transparent"?"#0000":t[d];return h?new a(h).toRgb():null},"name"])}var j5=Object.defineProperty,Nf=Object.getOwnPropertySymbols,X5=Object.prototype.hasOwnProperty,H5=Object.prototype.propertyIsEnumerable,jf=(a,e,t)=>e in a?j5(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,z5=(a,e)=>{for(var t in e||(e={}))X5.call(e,t)&&jf(a,t,e[t]);if(Nf)for(var t of Nf(e))H5.call(e,t)&&jf(a,t,e[t]);return a};L5([N5]);var gi=class us{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof us)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?z5({},e):e}_isSourceEqual(e,t){let i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,r)=>s===t[r]);if(e!==null&&t!==null){let s=Object.keys(e),r=Object.keys(t);return s.length!==r.length?!1:s.every(n=>e[n]===t[n])}return e===t}toRgba(){let[e,t,i,s]=this._components;return{r:e,g:t,b:i,a:s}}toRgb(){let[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){let[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){let[t,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);let[t,i,s,r]=this._components;return e[0]=t,e[1]=i,e[2]=s,e[3]=r,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);let[t,i,s]=this._components;return e[0]=t,e[1]=i,e[2]=s,e}toNumber(){return this._int}toBgrNumber(){let[e,t,i]=this.toUint8RgbArray();return(i<<16)+(t<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[t,i,s,r]=us._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=s,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,r=this._int&255;return t&&(i=i*e+.5|0,s=s*e+.5|0,r=r*e+.5|0),(e*255<<24)+(i<<16)+(s<<8)+r}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,i,s,r;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let n=e;t=(n>>16&255)/255,i=(n>>8&255)/255,s=(n&255)/255,r=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,s,r=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,s,r=255]=e,t/=255,i/=255,s/=255,r/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let d=us.HEX_PATTERN.exec(e);d&&(e=`#${d[2]}`)}let n=Yt(e);n.isValid()&&({r:t,g:i,b:s,a:r}=n.rgba,t/=255,i/=255,s/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=s,this._components[3]=r,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);let[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((s,r)=>{e[r]=Math.min(Math.max(s,t),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof us||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};gi.shared=new gi,gi._temp=new gi,gi.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var Se=gi,V5={cullArea:null,cullable:!1,cullableChildren:!0},W5=Math.PI*2,Y5=180/Math.PI,$5=Math.PI/180,Pe=class a{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new a(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}static get shared(){return wc.x=0,wc.y=0,wc}},wc=new Pe,ae=class a{constructor(e=1,t=0,i=0,s=1,r=0,n=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=s,this.tx=r,this.ty=n}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,s,r,n){return this.a=e,this.b=t,this.c=i,this.d=s,this.tx=r,this.ty=n,this}toArray(e,t){this.array||(this.array=new Float32Array(9));let i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new Pe;let i=e.x,s=e.y;return t.x=this.a*i+this.c*s+this.tx,t.y=this.b*i+this.d*s+this.ty,t}applyInverse(e,t){t=t||new Pe;let i=this.a,s=this.b,r=this.c,n=this.d,d=this.tx,h=this.ty,l=1/(i*n+r*-s),u=e.x,p=e.y;return t.x=n*l*u+-r*l*p+(h*r-d*n)*l,t.y=i*l*p+-s*l*u+(-h*i+d*s)*l,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),i=Math.sin(e),s=this.a,r=this.c,n=this.tx;return this.a=s*t-this.b*i,this.b=s*i+this.b*t,this.c=r*t-this.d*i,this.d=r*i+this.d*t,this.tx=n*t-this.ty*i,this.ty=n*i+this.ty*t,this}append(e){let t=this.a,i=this.b,s=this.c,r=this.d;return this.a=e.a*t+e.b*s,this.b=e.a*i+e.b*r,this.c=e.c*t+e.d*s,this.d=e.c*i+e.d*r,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*r+this.ty,this}appendFrom(e,t){let i=e.a,s=e.b,r=e.c,n=e.d,d=e.tx,h=e.ty,l=t.a,u=t.b,p=t.c,_=t.d;return this.a=i*l+s*p,this.b=i*u+s*_,this.c=r*l+n*p,this.d=r*u+n*_,this.tx=d*l+h*p+t.tx,this.ty=d*u+h*_+t.ty,this}setTransform(e,t,i,s,r,n,d,h,l){return this.a=Math.cos(d+l)*r,this.b=Math.sin(d+l)*r,this.c=-Math.sin(d-h)*n,this.d=Math.cos(d-h)*n,this.tx=e-(i*this.a+s*this.c),this.ty=t-(i*this.b+s*this.d),this}prepend(e){let t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,i=this.b,s=this.c,r=this.d,n=e.pivot,d=-Math.atan2(-s,r),h=Math.atan2(i,t),l=Math.abs(d+h);return l<1e-5||Math.abs(W5-l)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=d,e.skew.y=h),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(s*s+r*r),e.position.x=this.tx+(n.x*t+n.y*s),e.position.y=this.ty+(n.x*i+n.y*r),e}invert(){let e=this.a,t=this.b,i=this.c,s=this.d,r=this.tx,n=e*s-t*i;return this.a=s/n,this.b=-t/n,this.c=-i/n,this.d=e/n,this.tx=(i*this.ty-s*r)/n,this.ty=-(e*this.ty-t*r)/n,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new a;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}static get IDENTITY(){return q5.identity()}static get shared(){return K5.identity()}},K5=new ae,q5=new ae,We=class a{constructor(e,t,i){this._x=t||0,this._y=i||0,this._observer=e}clone(e){return new a(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}},Ac={default:-1};function Ie(a="default"){return Ac[a]===void 0&&(Ac[a]=-1),++Ac[a]}var As=class{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var t;let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,(t=i.init)==null||t.call(i,e),i}return(e){var t;(t=e.reset)==null||t.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}},wd=class{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new As(e)),this._poolsByClass.get(e)}stats(){let e={};return this._poolsByClass.forEach(t=>{let i=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[i]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}},me=new wd,Z5={get isCachedAsTexture(){var a;return!!((a=this.renderGroup)!=null&&a.isCachedAsTexture)},cacheAsTexture(a){typeof a=="boolean"&&a===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(a===!0?{}:a))},updateCacheTexture(){var a;(a=this.renderGroup)==null||a.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(a){this.cacheAsTexture(a)}};function np(a,e,t){let i=a.length,s;if(e>=i||t===0)return;t=e+t>i?i-e:t;let r=i-t;for(s=e;s<r;++s)a[s]=a[s+t];a.length=r}var Q5={allowChildren:!0,removeChildren(a=0,e){let t=e??this.children.length,i=t-a,s=[];if(i>0&&i<=t){for(let n=t-1;n>=a;n--){let d=this.children[n];d&&(s.push(d),d.parent=null)}np(this.children,a,t);let r=this.renderGroup||this.parentRenderGroup;r&&r.removeChildren(s);for(let n=0;n<s.length;++n)this.emit("childRemoved",s[n],this,n),s[n].emit("removed",this);return s}else if(i===0&&this.children.length===0)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(a){let e=this.getChildAt(a);return this.removeChild(e)},getChildAt(a){if(a<0||a>=this.children.length)throw new Error(`getChildAt: Index (${a}) does not exist.`);return this.children[a]},setChildIndex(a,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(a),this.addChildAt(a,e)},getChildIndex(a){let e=this.children.indexOf(a);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(a,e){let{children:t}=this;if(e<0||e>t.length)throw new Error(`${a}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(a.parent){let s=a.parent.children.indexOf(a);if(a.parent===this&&s===e)return a;s!==-1&&a.parent.children.splice(s,1)}e===t.length?t.push(a):t.splice(e,0,a),a.parent=this,a.didChange=!0,a._updateFlags=15;let i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(a),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",a,this,e),a.emit("added",this),a},swapChildren(a,e){if(a===e)return;let t=this.getChildIndex(a),i=this.getChildIndex(e);this.children[t]=e,this.children[i]=a;let s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var a;(a=this.parent)==null||a.removeChild(this)},reparentChild(...a){return a.length===1?this.reparentChildAt(a[0],this.children.length):(a.forEach(e=>this.reparentChildAt(e,this.children.length)),a[0])},reparentChildAt(a,e){if(a.parent===this)return this.setChildIndex(a,e),a;let t=a.worldTransform.clone();a.removeFromParent(),this.addChildAt(a,e);let i=this.worldTransform.clone();return i.invert(),t.prepend(i),a.setFromMatrix(t),a}},J5={collectRenderables(a,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(a,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,a):this.collectRenderablesWithEffects(a,e,t))},collectRenderablesSimple(a,e,t){let i=this.children,s=i.length;for(let r=0;r<s;r++)i[r].collectRenderables(a,e,t)},collectRenderablesWithEffects(a,e,t){let{renderPipes:i}=e;for(let s=0;s<this.effects.length;s++){let r=this.effects[s];i[r.pipe].push(r,this,a)}this.collectRenderablesSimple(a,e,t);for(let s=this.effects.length-1;s>=0;s--){let r=this.effects[s];i[r.pipe].pop(r,this,a)}}},Si=class{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}},Ad=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){let i=this._tests[t];if(i.test(e))return me.get(i.maskClass,e)}return e}returnMaskEffect(e){me.return(e)}},Ed=new Ad;ue.handleByList(I.MaskEffect,Ed._effectClasses);var e8=Object.defineProperty,Xf=Object.getOwnPropertySymbols,t8=Object.prototype.hasOwnProperty,a8=Object.prototype.propertyIsEnumerable,Hf=(a,e,t)=>e in a?e8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,zf=(a,e)=>{for(var t in e||(e={}))t8.call(e,t)&&Hf(a,t,e[t]);if(Xf)for(var t of Xf(e))a8.call(e,t)&&Hf(a,t,e[t]);return a},i8={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)},addEffect(a){this.effects.indexOf(a)===-1&&(this.effects.push(a),this.effects.sort((e,t)=>e.priority-t.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(a){let e=this.effects.indexOf(a);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(a){let e=this._maskEffect;e?.mask!==a&&(e&&(this.removeEffect(e),Ed.returnMaskEffect(e),this._maskEffect=null),a!=null&&(this._maskEffect=Ed.getMaskEffect(a),this.addEffect(this._maskEffect)))},setMask(a){this._maskOptions=zf(zf({},this._maskOptions),a),a.mask&&(this.mask=a.mask),this._markStructureAsChanged()},get mask(){var a;return(a=this._maskEffect)==null?void 0:a.mask},set filters(a){var e;!Array.isArray(a)&&a&&(a=[a]);let t=this._filterEffect||(this._filterEffect=new Si);a=a;let i=a?.length>0,s=((e=t.filters)==null?void 0:e.length)>0,r=i!==s;a=Array.isArray(a)?a.slice(0):a,t.filters=Object.freeze(a),r&&(i?this.addEffect(t):(this.removeEffect(t),t.filters=a??null))},get filters(){var a;return(a=this._filterEffect)==null?void 0:a.filters},set filterArea(a){this._filterEffect||(this._filterEffect=new Si),this._filterEffect.filterArea=a},get filterArea(){var a;return(a=this._filterEffect)==null?void 0:a.filterArea}},s8={label:null,get name(){return this.label},set name(a){this.label=a},getChildByName(a,e=!1){return this.getChildByLabel(a,e)},getChildByLabel(a,e=!1){let t=this.children;for(let i=0;i<t.length;i++){let s=t[i];if(s.label===a||a instanceof RegExp&&a.test(s.label))return s}if(e)for(let i=0;i<t.length;i++){let s=t[i].getChildByLabel(a,!0);if(s)return s}return null},getChildrenByLabel(a,e=!1,t=[]){let i=this.children;for(let s=0;s<i.length;s++){let r=i[s];(r.label===a||a instanceof RegExp&&a.test(r.label))&&t.push(r)}if(e)for(let s=0;s<i.length;s++)i[s].getChildrenByLabel(a,!0,t);return t}},hr=[new Pe,new Pe,new Pe,new Pe],we=class a{constructor(e=0,t=0,i=0,s=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new a(0,0,0,0)}clone(){return new a(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,i,s=.5){let{width:r,height:n}=this;if(r<=0||n<=0)return!1;let d=this.x,h=this.y,l=i*(1-s),u=i-l,p=d-l,_=d+r+l,m=h-l,v=h+n+l,T=d+u,w=d+r-u,P=h+u,C=h+n-u;return e>=p&&e<=_&&t>=m&&t<=v&&!(e>T&&e<w&&t>P&&t<C)}intersects(e,t){if(!t){let ie=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=ie)return!1;let ne=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>ne}let i=this.left,s=this.right,r=this.top,n=this.bottom;if(s<=i||n<=r)return!1;let d=hr[0].set(e.left,e.top),h=hr[1].set(e.left,e.bottom),l=hr[2].set(e.right,e.top),u=hr[3].set(e.right,e.bottom);if(l.x<=d.x||h.y<=d.y)return!1;let p=Math.sign(t.a*t.d-t.b*t.c);if(p===0||(t.apply(d,d),t.apply(h,h),t.apply(l,l),t.apply(u,u),Math.max(d.x,h.x,l.x,u.x)<=i||Math.min(d.x,h.x,l.x,u.x)>=s||Math.max(d.y,h.y,l.y,u.y)<=r||Math.min(d.y,h.y,l.y,u.y)>=n))return!1;let _=p*(h.y-d.y),m=p*(d.x-h.x),v=_*i+m*r,T=_*s+m*r,w=_*i+m*n,P=_*s+m*n;if(Math.max(v,T,w,P)<=_*d.x+m*d.y||Math.min(v,T,w,P)>=_*u.x+m*u.y)return!1;let C=p*(d.y-l.y),B=p*(l.x-d.x),D=C*i+B*r,X=C*s+B*r,U=C*i+B*n,L=C*s+B*n;return!(Math.max(D,X,U,L)<=C*d.x+B*d.y||Math.min(D,X,U,L)>=C*u.x+B*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){let t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),r=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=s,this.height=Math.max(r-s,0),this}ceil(e=1,t=.001){let i=Math.ceil((this.x+this.width-t)*e)/e,s=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=s-this.y,this}enlarge(e){let t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),r=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=s,this.height=r-s,this}getBounds(e){return e||(e=new a),e.copyFrom(this),e}},Vf=new ae,Ze=class a{constructor(e=1/0,t=1/0,i=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Vf,this.minX=e,this.minY=t,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new we);let e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Vf,this}set(e,t,i,s){this.minX=e,this.minY=t,this.maxX=i,this.maxY=s}addFrame(e,t,i,s,r){r||(r=this.matrix);let n=r.a,d=r.b,h=r.c,l=r.d,u=r.tx,p=r.ty,_=this.minX,m=this.minY,v=this.maxX,T=this.maxY,w=n*e+h*t+u,P=d*e+l*t+p;w<_&&(_=w),P<m&&(m=P),w>v&&(v=w),P>T&&(T=P),w=n*i+h*t+u,P=d*i+l*t+p,w<_&&(_=w),P<m&&(m=P),w>v&&(v=w),P>T&&(T=P),w=n*e+h*s+u,P=d*e+l*s+p,w<_&&(_=w),P<m&&(m=P),w>v&&(v=w),P>T&&(T=P),w=n*i+h*s+u,P=d*i+l*s+p,w<_&&(_=w),P<m&&(m=P),w>v&&(v=w),P>T&&(T=P),this.minX=_,this.minY=m,this.maxX=v,this.maxY=T}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){let t=this.minX,i=this.minY,s=this.maxX,r=this.maxY,{a:n,b:d,c:h,d:l,tx:u,ty:p}=e,_=n*t+h*i+u,m=d*t+l*i+p;this.minX=_,this.minY=m,this.maxX=_,this.maxY=m,_=n*s+h*i+u,m=d*s+l*i+p,this.minX=_<this.minX?_:this.minX,this.minY=m<this.minY?m:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=m>this.maxY?m:this.maxY,_=n*t+h*r+u,m=d*t+l*r+p,this.minX=_<this.minX?_:this.minX,this.minY=m<this.minY?m:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=m>this.maxY?m:this.maxY,_=n*s+h*r+u,m=d*s+l*r+p,this.minX=_<this.minX?_:this.minX,this.minY=m<this.minY?m:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=m>this.maxY?m:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,i,s){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new a(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){let t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){let t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,i,s){let r=this.minX,n=this.minY,d=this.maxX,h=this.maxY;s||(s=this.matrix);let l=s.a,u=s.b,p=s.c,_=s.d,m=s.tx,v=s.ty;for(let T=t;T<i;T+=2){let w=e[T],P=e[T+1],C=l*w+p*P+m,B=u*w+_*P+v;r=C<r?C:r,n=B<n?B:n,d=C>d?C:d,h=B>h?B:h}this.minX=r,this.minY=n,this.maxX=d,this.maxY=h}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}},it=new As(ae),oa=new As(Ze),r8=new ae,n8={getFastGlobalBounds(a,e){e||(e=new Ze),e.clear(),this._getGlobalBoundsRecursive(!!a,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);let t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(a,e,t){let i=e;if(a&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;let s=!!this.effects.length;if((this.renderGroup||s)&&(i=oa.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let n=this.bounds;i.addFrame(n.minX,n.minY,n.maxX,n.maxY,this.groupTransform)}let r=this.children;for(let n=0;n<r.length;n++)r[n]._getGlobalBoundsRecursive(a,i,t)}if(s){let r=!1,n=this.renderGroup||this.parentRenderGroup;for(let d=0;d<this.effects.length;d++)this.effects[d].addBounds&&(r||(r=!0,i.applyMatrix(n.worldTransform)),this.effects[d].addBounds(i,!0));r&&(i.applyMatrix(n.worldTransform.copyTo(r8).invert()),e.addBounds(i,this.relativeGroupTransform)),e.addBounds(i),oa.return(i)}else this.renderGroup&&(e.addBounds(i,this.relativeGroupTransform),oa.return(i))}};function Co(a,e,t){t.clear();let i,s;return a.parent?e?i=a.parent.worldTransform:(s=it.get().identity(),i=fl(a,s)):i=ae.IDENTITY,op(a,t,i,e),s&&it.return(s),t.isValid||t.set(0,0,0,0),t}function op(a,e,t,i){var s,r;if(!a.visible||!a.measurable)return;let n;i?n=a.worldTransform:(a.updateLocalTransform(),n=it.get(),n.appendFrom(a.localTransform,t));let d=e,h=!!a.effects.length;if(h&&(e=oa.get().clear()),a.boundsArea)e.addRect(a.boundsArea,n);else{a.bounds&&(e.matrix=n,e.addBounds(a.bounds));for(let l=0;l<a.children.length;l++)op(a.children[l],e,n,i)}if(h){for(let l=0;l<a.effects.length;l++)(r=(s=a.effects[l]).addBounds)==null||r.call(s,e);d.addBounds(e,ae.IDENTITY),oa.return(e)}i||it.return(n)}function fl(a,e){let t=a.parent;return t&&(fl(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function cp(a,e){if(a===16777215||!e)return e;if(e===16777215||!a)return a;let t=a>>16&255,i=a>>8&255,s=a&255,r=e>>16&255,n=e>>8&255,d=e&255,h=t*r/255|0,l=i*n/255|0,u=s*d/255|0;return(h<<16)+(l<<8)+u}var Wf=16777215;function Lr(a,e){return a===Wf?e:e===Wf?a:cp(a,e)}function ms(a){return((a&255)<<16)+(a&65280)+(a>>16&255)}var o8={getGlobalAlpha(a){if(a)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(a,e){if(e)return a.copyFrom(this.worldTransform);this.updateLocalTransform();let t=fl(this,it.get().identity());return a.appendFrom(this.localTransform,t),it.return(t),a},getGlobalTint(a){if(a)return this.renderGroup?ms(this.renderGroup.worldColor):this.parentRenderGroup?ms(Lr(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=Lr(e,t.localColor),t=t.parent;return ms(e)}};function ul(a,e,t){return e.clear(),t||(t=ae.IDENTITY),dp(a,e,t,a,!0),e.isValid||e.set(0,0,0,0),e}function dp(a,e,t,i,s){var r,n;let d;if(s)d=it.get(),d=t.copyTo(d);else{if(!a.visible||!a.measurable)return;a.updateLocalTransform();let u=a.localTransform;d=it.get(),d.appendFrom(u,t)}let h=e,l=!!a.effects.length;if(l&&(e=oa.get().clear()),a.boundsArea)e.addRect(a.boundsArea,d);else{a.renderPipeId&&(e.matrix=d,e.addBounds(a.bounds));let u=a.children;for(let p=0;p<u.length;p++)dp(u[p],e,d,i,!1)}if(l){for(let u=0;u<a.effects.length;u++)(n=(r=a.effects[u]).addLocalBounds)==null||n.call(r,e,i);h.addBounds(e,ae.IDENTITY),oa.return(e)}it.return(d)}function hp(a,e){let t=a.children;for(let i=0;i<t.length;i++){let s=t[i],r=s.uid,n=(s._didViewChangeTick&65535)<<16|s._didContainerChangeTick&65535,d=e.index;(e.data[d]!==r||e.data[d+1]!==n)&&(e.data[e.index]=r,e.data[e.index+1]=n,e.didChange=!0),e.index=d+2,s.children.length&&hp(s,e)}return e.didChange}var c8=new ae,d8={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(a,e){let t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=a/e*t:this.scale.x=t},_setHeight(a,e){let t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=a/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Ze});let a=this._localBoundsCacheData;return a.index=1,a.didChange=!1,a.data[0]!==this._didViewChangeTick&&(a.didChange=!0,a.data[0]=this._didViewChangeTick),hp(this,a),a.didChange&&ul(this,a.localBounds,c8),a.localBounds},getBounds(a,e){return Co(this,a,e||new Ze)}},h8={_onRender:null,set onRender(a){let e=this.renderGroup||this.parentRenderGroup;if(!a){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=a},get onRender(){return this._onRender}},l8={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(a){this._zIndex!==a&&(this._zIndex=a,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(f8))}};function f8(a,e){return a._zIndex-e._zIndex}var u8={getGlobalPosition(a=new Pe,e=!1){return this.parent?this.parent.toGlobal(this._position,a,e):(a.x=this._position.x,a.y=this._position.y),a},toGlobal(a,e,t=!1){let i=this.getGlobalTransform(it.get(),t);return e=i.apply(a,e),it.return(i),e},toLocal(a,e,t,i){e&&(a=e.toGlobal(a,t,i));let s=this.getGlobalTransform(it.get(),i);return t=s.applyInverse(a,t),it.return(s),t}},Nr=class{constructor(){this.uid=Ie("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize}};function wi(a){return a+=a===0?1:0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1}function Yf(a){return!(a&a-1)&&!!a}function Es(a){let e={};for(let t in a)a[t]!==void 0&&(e[t]=a[t]);return e}var b8=Object.defineProperty,$f=Object.getOwnPropertySymbols,p8=Object.prototype.hasOwnProperty,g8=Object.prototype.propertyIsEnumerable,Kf=(a,e,t)=>e in a?b8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,qf=(a,e)=>{for(var t in e||(e={}))p8.call(e,t)&&Kf(a,t,e[t]);if($f)for(var t of $f(e))g8.call(e,t)&&Kf(a,t,e[t]);return a},Zf=Object.create(null);function m8(a){let e=Zf[a];return e===void 0&&(Zf[a]=Ie("resource")),e}var lp=class fp extends xt{constructor(e={}){var t,i,s,r,n,d,h;super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e=qf(qf({},fp.defaultOptions),e),this.addressMode=e.addressMode,this.addressModeU=(t=e.addressModeU)!=null?t:this.addressModeU,this.addressModeV=(i=e.addressModeV)!=null?i:this.addressModeV,this.addressModeW=(s=e.addressModeW)!=null?s:this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=(r=e.magFilter)!=null?r:this.magFilter,this.minFilter=(n=e.minFilter)!=null?n:this.minFilter,this.mipmapFilter=(d=e.mipmapFilter)!=null?d:this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=(h=e.maxAnisotropy)!=null?h:1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=m8(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};lp.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};var up=lp,_8=Object.defineProperty,Qf=Object.getOwnPropertySymbols,y8=Object.prototype.hasOwnProperty,x8=Object.prototype.propertyIsEnumerable,Jf=(a,e,t)=>e in a?_8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,eu=(a,e)=>{for(var t in e||(e={}))y8.call(e,t)&&Jf(a,t,e[t]);if(Qf)for(var t of Qf(e))x8.call(e,t)&&Jf(a,t,e[t]);return a},bp=class pp extends xt{constructor(e={}){var t,i,s;super(),this.options=e,this.uid=Ie("textureSource"),this._resourceType="textureSource",this._resourceId=Ie("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e=eu(eu({},pp.defaultOptions),e),this.label=(t=e.label)!=null?t:"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource&&(i=this.resourceWidth)!=null?i:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource&&(s=this.resourceHeight)!=null?s:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new up(Es(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var t,i;this.style!==e&&((t=this._style)==null||t.off("change",this._onStyleChange,this),this._style=e,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Ie("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,i){i||(i=this._resolution),e||(e=this.width),t||(t=this.height);let s=Math.round(e*i),r=Math.round(t*i);return this.width=s/i,this.height=r/i,this._resolution=i,this.pixelWidth===s&&this.pixelHeight===r?!1:(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=r,this.emit("resize",this),this._resourceId=Ie("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Yf(this.pixelWidth)&&Yf(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};bp.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};var Ge=bp,Na=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ja=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Xa=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ha=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Pd=[],gp=[],lr=Math.sign;function v8(){for(let a=0;a<16;a++){let e=[];Pd.push(e);for(let t=0;t<16;t++){let i=lr(Na[a]*Na[t]+Xa[a]*ja[t]),s=lr(ja[a]*Na[t]+Ha[a]*ja[t]),r=lr(Na[a]*Xa[t]+Xa[a]*Ha[t]),n=lr(ja[a]*Xa[t]+Ha[a]*Ha[t]);for(let d=0;d<16;d++)if(Na[d]===i&&ja[d]===s&&Xa[d]===r&&Ha[d]===n){e.push(d);break}}}for(let a=0;a<16;a++){let e=new ae;e.set(Na[a],ja[a],Xa[a],Ha[a],0,0),gp.push(e)}}v8();var Fe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:a=>Na[a],uY:a=>ja[a],vX:a=>Xa[a],vY:a=>Ha[a],inv:a=>a&8?a&15:-a&7,add:(a,e)=>Pd[a][e],sub:(a,e)=>Pd[a][Fe.inv(e)],rotate180:a=>a^4,isVertical:a=>(a&3)===2,byDirection:(a,e)=>Math.abs(a)*2<=Math.abs(e)?e>=0?Fe.S:Fe.N:Math.abs(e)*2<=Math.abs(a)?a>0?Fe.E:Fe.W:e>0?a>0?Fe.SE:Fe.SW:a>0?Fe.NE:Fe.NW,matrixAppendRotationInv:(a,e,t=0,i=0)=>{let s=gp[Fe.inv(e)];s.tx=t,s.ty=i,a.append(s)}},tu=()=>{},T8=Object.defineProperty,S8=Object.defineProperties,w8=Object.getOwnPropertyDescriptors,au=Object.getOwnPropertySymbols,A8=Object.prototype.hasOwnProperty,E8=Object.prototype.propertyIsEnumerable,iu=(a,e,t)=>e in a?T8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,P8=(a,e)=>{for(var t in e||(e={}))A8.call(e,t)&&iu(a,t,e[t]);if(au)for(var t of au(e))E8.call(e,t)&&iu(a,t,e[t]);return a},R8=(a,e)=>S8(a,w8(e)),Ps=class extends Ge{constructor(e){let t=e.resource||new Float32Array(e.width*e.height*4),i=e.format;i||(t instanceof Float32Array?i="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?i="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?i="rgba16uint":(t instanceof Int8Array,i="bgra8unorm")),super(R8(P8({},e),{resource:t,format:i})),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}};Ps.extension=I.TextureSource;var su=new ae,jr=class{constructor(e,t){this.mapCoord=new ae,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var t;this.texture!==e&&((t=this._texture)==null||t.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);let i=this.mapCoord;for(let s=0;s<e.length;s+=2){let r=e[s],n=e[s+1];t[s]=r*i.a+n*i.c+i.tx,t[s+1]=r*i.b+n*i.d+i.ty}return t}update(){let e=this._texture;this._updateID++;let t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);let i=e.orig,s=e.trim;s&&(su.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(su));let r=e.source,n=this.uClampFrame,d=this.clampMargin/r._resolution,h=this.clampOffset/r._resolution;return n[0]=(e.frame.x+d+h)/r.width,n[1]=(e.frame.y+d+h)/r.height,n[2]=(e.frame.x+e.frame.width-d+h)/r.width,n[3]=(e.frame.y+e.frame.height-d+h)/r.height,this.uClampOffset[0]=this.clampOffset/r.pixelWidth,this.uClampOffset[1]=this.clampOffset/r.pixelHeight,this.isSimple=e.frame.width===r.width&&e.frame.height===r.height&&e.rotate===0,!0}},W=class extends xt{constructor({source:e,label:t,frame:i,orig:s,trim:r,defaultAnchor:n,defaultBorders:d,rotate:h,dynamic:l}={}){var u;if(super(),this.uid=Ie("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new we,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=(u=e?.source)!=null?u:new Ge,this.noFrame=!i,i)this.frame.copyFrom(i);else{let{width:p,height:_}=this._source;this.frame.width=p,this.frame.height=_}this.orig=s||this.frame,this.trim=r,this.rotate=h??0,this.defaultAnchor=n,this.defaultBorders=d,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new jr(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:e,frame:t}=this,{width:i,height:s}=this._source,r=t.x/i,n=t.y/s,d=t.width/i,h=t.height/s,l=this.rotate;if(l){let u=d/2,p=h/2,_=r+u,m=n+p;l=Fe.add(l,Fe.NW),e.x0=_+u*Fe.uX(l),e.y0=m+p*Fe.uY(l),l=Fe.add(l,2),e.x1=_+u*Fe.uX(l),e.y1=m+p*Fe.uY(l),l=Fe.add(l,2),e.x2=_+u*Fe.uX(l),e.y2=m+p*Fe.uY(l),l=Fe.add(l,2),e.x3=_+u*Fe.uX(l),e.y3=m+p*Fe.uY(l)}else e.x0=r,e.y0=n,e.x1=r+d,e.y1=n,e.x2=r+d,e.y2=n+h,e.x3=r,e.y3=n+h}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return this._source}};W.EMPTY=new W({label:"EMPTY",source:new Ge({label:"EMPTY"})}),W.EMPTY.destroy=tu,W.WHITE=new W({source:new Ps({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),W.WHITE.destroy=tu;var M8=Object.defineProperty,C8=Object.defineProperties,O8=Object.getOwnPropertyDescriptors,ru=Object.getOwnPropertySymbols,I8=Object.prototype.hasOwnProperty,G8=Object.prototype.propertyIsEnumerable,nu=(a,e,t)=>e in a?M8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,B8=(a,e)=>{for(var t in e||(e={}))I8.call(e,t)&&nu(a,t,e[t]);if(ru)for(var t of ru(e))G8.call(e,t)&&nu(a,t,e[t]);return a},F8=(a,e)=>C8(a,O8(e)),D8=0,Rd=class{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,t,i){let s=new Ge(F8(B8({},this.textureOptions),{width:e,height:t,resolution:1,antialias:i,autoGarbageCollect:!1}));return new W({source:s,label:`texturePool_${D8++}`})}getOptimalTexture(e,t,i=1,s){let r=Math.ceil(e*i-1e-6),n=Math.ceil(t*i-1e-6);r=wi(r),n=wi(n);let d=(r<<17)+(n<<1)+(s?1:0);this._texturePool[d]||(this._texturePool[d]=[]);let h=this._texturePool[d].pop();return h||(h=this.createTexture(r,n,s)),h.source._resolution=i,h.source.width=r/i,h.source.height=n/i,h.source.pixelWidth=r,h.source.pixelHeight=n,h.frame.x=0,h.frame.y=0,h.frame.width=e,h.frame.height=t,h.updateUvs(),this._poolKeyHash[h.uid]=d,h}getSameSizeTexture(e,t=!1){let i=e.source;return this.getOptimalTexture(e.width,e.height,i._resolution,t)}returnTexture(e){let t=this._poolKeyHash[e.uid];this._texturePool[t].push(e)}clear(e){if(e=e!==!1,e)for(let t in this._texturePool){let i=this._texturePool[t];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this._texturePool={}}},Ve=new Rd,Md=class{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new ae,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Nr,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;let t=e.children;for(let i=0;i<t.length;i++){let s=t[i];s._updateFlags=15,this.addChild(s)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Ve.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(let e in this.childrenToUpdate){let t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){let t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);let t=e.children;for(let i=0;i<t.length;i++)this.addChild(t[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}let t=e.children;for(let i=0;i<t.length;i++)this.removeChild(t[i])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){let t=this.root.children;for(let i=0;i<t.length;i++)this._getChildren(t[i],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;let i=e.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new ae),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new ae),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;let e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new ae),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}};function Cd(a,e,t={}){for(let i in e)!t[i]&&e[i]!==void 0&&(a[i]=e[i])}var Ec=new We(null),Pc=new We(null),Rc=new We(null,1,1),Xr=1,bl=2,_s=4;var de=class a extends xt{constructor(e={}){var t,i;super(),this.uid=Ie("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new ae,this.relativeGroupTransform=new ae,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new We(this,0,0),this._scale=Rc,this._pivot=Pc,this._skew=Ec,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Cd(this,e,{children:!0,parent:!0,effects:!0}),(t=e.children)==null||t.forEach(s=>this.addChild(s)),(i=e.parent)==null||i.addChild(this)}static mixin(e){Object.defineProperties(a.prototype,Object.getOwnPropertyDescriptors(e))}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(e.length>1){for(let s=0;s<e.length;s++)this.addChild(e[s]);return e[0]}let t=e[0],i=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),i&&(i.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,i&&i.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let s=0;s<e.length;s++)this.removeChild(e[s]);return e[0]}let t=e[0],i=this.children.indexOf(t);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,i),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=me.get(Md,this),this.groupTransform=ae.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),me.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new ae),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*Y5}set angle(e){this.rotation=e*$5}get pivot(){return this._pivot===Pc&&(this._pivot=new We(this,0,0)),this._pivot}set pivot(e){this._pivot===Pc&&(this._pivot=new We(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Ec&&(this._skew=new We(this,0,0)),this._skew}set skew(e){this._skew===Ec&&(this._skew=new We(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Rc&&(this._scale=new We(this,1,1)),this._scale}set scale(e){this._scale===Rc&&(this._scale=new We(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){let t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){let t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});let t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){var i;let s=this.getLocalBounds();typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,s.width),t!==void 0&&this._setHeight(t,s.height)}_updateSkew(){let e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){let e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;let t=this.localTransform,i=this._scale,s=this._pivot,r=this._position,n=i._x,d=i._y,h=s._x,l=s._y;t.a=this._cx*n,t.b=this._sx*n,t.c=this._cy*d,t.d=this._sy*d,t.tx=r._x-(h*t.a+l*t.c),t.ty=r._y-(h*t.b+l*t.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Xr,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){let t=Se.shared.setValue(e??16777215).toBgrNumber();t!==this.localColor&&(this.localColor=t,this._updateFlags|=Xr,this._onUpdate())}get tint(){return ms(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=bl,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){let t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=_s,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){let t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=_s,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){let t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=_s,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var t;if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&i)for(let s=0;s<i.length;++s)i[s].destroy(e);(t=this.renderGroup)==null||t.destroy(),this.renderGroup=null}};de.mixin(Q5),de.mixin(n8),de.mixin(u8),de.mixin(h8),de.mixin(d8),de.mixin(i8),de.mixin(s8),de.mixin(l8),de.mixin(V5),de.mixin(Z5),de.mixin(o8),de.mixin(J5);var Rs=class a{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=a.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Pe,this.page=new Pe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,s,r){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}},Mc=/iPhone/i,ou=/iPod/i,cu=/iPad/i,du=/\biOS-universal(?:.+)Mac\b/i,Cc=/\bAndroid(?:.+)Mobile\b/i,hu=/Android/i,di=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,fr=/Silk/i,ra=/Windows Phone/i,lu=/\bWindows(?:.+)ARM\b/i,fu=/BlackBerry/i,uu=/BB10/i,bu=/Opera Mini/i,pu=/\b(CriOS|Chrome)(?:.+)Mobile/i,gu=/Mobile(?:.+)Firefox\b/i,mu=function(a){return typeof a<"u"&&a.platform==="MacIntel"&&typeof a.maxTouchPoints=="number"&&a.maxTouchPoints>1&&typeof MSStream>"u"};function k8(a){return function(e){return e.test(a)}}function _u(a){var e={userAgent:"",platform:"",maxTouchPoints:0};!a&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof a=="string"?e.userAgent=a:a&&a.userAgent&&(e={userAgent:a.userAgent,platform:a.platform,maxTouchPoints:a.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),i=t.split("Twitter"),typeof i[1]<"u"&&(t=i[0]);var s=k8(t),r={apple:{phone:s(Mc)&&!s(ra),ipod:s(ou),tablet:!s(Mc)&&(s(cu)||mu(e))&&!s(ra),universal:s(du),device:(s(Mc)||s(ou)||s(cu)||s(du)||mu(e))&&!s(ra)},amazon:{phone:s(di),tablet:!s(di)&&s(fr),device:s(di)||s(fr)},android:{phone:!s(ra)&&s(di)||!s(ra)&&s(Cc),tablet:!s(ra)&&!s(di)&&!s(Cc)&&(s(fr)||s(hu)),device:!s(ra)&&(s(di)||s(fr)||s(Cc)||s(hu))||s(/\bokhttp\b/i)},windows:{phone:s(ra),tablet:s(lu),device:s(ra)||s(lu)},other:{blackberry:s(fu),blackberry10:s(uu),opera:s(bu),firefox:s(gu),chrome:s(pu),device:s(fu)||s(uu)||s(bu)||s(gu)||s(pu)},any:!1,phone:!1,tablet:!1};return r.any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}var yu,U8=(yu=_u.default)!=null?yu:_u,qa=U8(globalThis.navigator),L8=Object.defineProperty,xu=Object.getOwnPropertySymbols,N8=Object.prototype.hasOwnProperty,j8=Object.prototype.propertyIsEnumerable,vu=(a,e,t)=>e in a?L8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Tu=(a,e)=>{for(var t in e||(e={}))N8.call(e,t)&&vu(a,t,e[t]);if(xu)for(var t of xu(e))j8.call(e,t)&&vu(a,t,e[t]);return a},X8=9,ur=100,H8=0,z8=0,Su=2,wu=1,V8=-1e3,W8=-1e3,Y8=2,Od=class mp{constructor(e,t=qa){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){let e=document.createElement("button");e.style.width=`${wu}px`,e.style.height=`${wu}px`,e.style.position="absolute",e.style.top=`${V8}px`,e.style.left=`${W8}px`,e.style.zIndex=Y8.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${ur}px`,this._div.style.height=`${ur}px`,this._div.style.position="absolute",this._div.style.top=`${H8}px`,this._div.style.left=`${z8}px`,this._div.style.zIndex=Su.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));let e=this._renderer.view.canvas;if(e.parentNode)e.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{let t=new MutationObserver(()=>{e.parentNode&&(e.parentNode.appendChild(this._div),t.disconnect(),this._initAccessibilitySetup())});t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(let e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;this._pool.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);let t=e.children;if(t)for(let i=0;i<t.length;i++)this._updateAccessibleObjects(t[i])}init(e){let t=mp.defaultOptions,i={accessibilityOptions:Tu(Tu({},t),e?.accessibilityOptions||{})};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){let e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;let t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(let i of this._children)i._renderId===this._renderId&&t.add(this._children.indexOf(i))}for(let i=this._children.length-1;i>=0;i--){let s=this._children[i];t.has(i)||(s._accessibleDiv&&s._accessibleDiv.parentNode&&(s._accessibleDiv.parentNode.removeChild(s._accessibleDiv),this._pool.push(s._accessibleDiv),s._accessibleDiv=null),s._accessibleActive=!1,np(this._children,i,1))}if(this._renderer.renderingToScreen){let{x:i,y:s,width:r,height:n}=this._renderer.screen,d=this._div;d.style.left=`${i}px`,d.style.top=`${s}px`,d.style.width=`${r}px`,d.style.height=`${n}px`}for(let i=0;i<this._children.length;i++){let s=this._children[i];if(!s._accessibleActive||!s._accessibleDiv)continue;let r=s._accessibleDiv,n=s.hitArea||s.getBounds().rectangle;if(s.hitArea){let d=s.worldTransform,h=this._renderer.resolution,l=this._renderer.resolution;r.style.left=`${(d.tx+n.x*d.a)*h}px`,r.style.top=`${(d.ty+n.y*d.d)*l}px`,r.style.width=`${n.width*d.a*h}px`,r.style.height=`${n.height*d.d*l}px`}else{this._capHitArea(n);let d=this._renderer.resolution,h=this._renderer.resolution;r.style.left=`${n.x*d}px`,r.style.top=`${n.y*h}px`,r.style.width=`${n.width*d}px`,r.style.height=`${n.height*h}px`}}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:t,height:i}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}_addChild(e){let t=this._pool.pop();t||(e.accessibleType==="button"?t=document.createElement("button"):(t=document.createElement(e.accessibleType),t.style.cssText=`
    color: transparent;
    pointer-events: none;
    padding: 0;
    margin: 0;
    border: 0;
    outline: 0;
    background: transparent;
    box-sizing: border-box;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
`,e.accessibleText&&(t.innerText=e.accessibleText)),t.style.width=`${ur}px`,t.style.height=`${ur}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=Su.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e.interactive&&(e._accessibleDiv.tabIndex=e.tabIndex)}_dispatchEvent(e,t){let{container:i}=e.target,s=this._renderer.events.rootBoundary,r=Object.assign(new Rs(s),{target:i});s.rootTarget=this._renderer.lastObjectRendered,t.forEach(n=>s.dispatchEvent(r,n))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==X8||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}};Od.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"accessibility"},Od.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};var $8=Od,K8={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1};ue.add($8),de.mixin(K8);var Hr=class{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let t,i;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{let{clientWidth:s,clientHeight:r}=this._resizeTo;t=s,i=r}this.renderer.resize(t,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};Hr.extension=I.Application;var Ra=(a=>(a[a.INTERACTION=50]="INTERACTION",a[a.HIGH=25]="HIGH",a[a.NORMAL=0]="NORMAL",a[a.LOW=-25]="LOW",a[a.UTILITY=-50]="UTILITY",a))(Ra||{}),ys=class{constructor(e,t=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=i,this._once=s}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));let t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}},_p=class ft{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ys(null,null,1/0),this.deltaMS=1/ft.targetFPMS,this.elapsedMS=1/ft.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Ra.NORMAL){return this._addListener(new ys(e,t,i))}addOnce(e,t,i=Ra.NORMAL){return this._addListener(new ys(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){let r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*ft.targetFPMS;let i=this._head,s=i.next;for(;s;)s=s.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,ft.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!ft._shared){let e=ft._shared=new ft;e.autoStart=!0,e._protected=!0}return ft._shared}static get system(){if(!ft._system){let e=ft._system=new ft;e.autoStart=!0,e._protected=!0}return ft._system}};_p.targetFPMS=.06;var tt=_p,zr=class{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ra.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?tt.shared:new tt,e.autoStart&&this.start()}static destroy(){if(this._ticker){let e=this._ticker;this.ticker=null,e.destroy()}}};zr.extension=I.Application,ue.add(Hr),ue.add(zr);var q8=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(a){this.removeTickerListener(),this.events=a,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(a){this._pauseUpdate=a}addTickerListener(){this._tickerAdded||!this.domElement||(tt.system.add(this._tickerUpdate,this,Ra.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(tt.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let a=this.events._rootPointerEvent;this.events.supportsTouchEvents&&a.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:a.clientX,clientY:a.clientY,pointerType:a.pointerType,pointerId:a.pointerId}))}_tickerUpdate(a){this._deltaTime+=a.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}},Aa=new q8,Ai=class extends Rs{constructor(){super(...arguments),this.client=new Pe,this.movement=new Pe,this.offset=new Pe,this.global=new Pe,this.screen=new Pe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,s,r,n,d,h,l,u,p,_,m,v,T){throw new Error("Method not implemented.")}},gt=class extends Ai{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}},Pa=class extends Ai{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};Pa.DOM_DELTA_PIXEL=0,Pa.DOM_DELTA_LINE=1,Pa.DOM_DELTA_PAGE=2;var Z8=2048,Q8=new Pe,ts=new Pe,Id=class{constructor(e){this.dispatch=new xt,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,s)=>i.priority-s.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;let t=this.mappingTable[e.type];if(t)for(let i=0,s=t.length;i<s;i++)t[i].fn(e)}hitTest(e,t){Aa.pauseUpdate=!0;let i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,Q8.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;let i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,r=i.length-1;s<r;s++)if(e.currentTarget=i[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(e.currentTarget=i[s],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;let s=Array.isArray(t)?t:[t];for(let r=i.length-1;r>=0;r--)s.forEach(n=>{e.currentTarget=i[r],this.notifyTarget(e,n)})}propagationPath(e){let t=[e];for(let i=0;i<Z8&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,s,r,n=!1){let d=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Aa.pauseUpdate=!1),e.interactiveChildren&&e.children){let u=e.children;for(let p=u.length-1;p>=0;p--){let _=u[p],m=this.hitTestMoveRecursive(_,this._isInteractive(t)?t:_.eventMode,i,s,r,n||r(e,i));if(m){if(m.length>0&&!m[m.length-1].parent)continue;let v=e.isInteractive();(m.length>0||v)&&(v&&this._allInteractiveElements.push(e),m.push(e)),this._hitElements.length===0&&(this._hitElements=m),d=!0}}}let h=this._isInteractive(t),l=e.isInteractive();return l&&l&&this._allInteractiveElements.push(e),n||this._hitElements.length>0?null:d?this._hitElements:h&&!r(e,i)&&s(e,i)?l?[e]:[]:null}hitTestRecursive(e,t,i,s,r){if(this._interactivePrune(e)||r(e,i))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Aa.pauseUpdate=!1),e.interactiveChildren&&e.children){let h=e.children,l=i;for(let u=h.length-1;u>=0;u--){let p=h[u],_=this.hitTestRecursive(p,this._isInteractive(t)?t:p.eventMode,l,s,r);if(_){if(_.length>0&&!_[_.length-1].parent)continue;let m=e.isInteractive();return(_.length>0||m)&&_.push(e),_}}}let n=this._isInteractive(t),d=e.isInteractive();return n&&s(e,i)?d?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,ts),!e.hitArea.contains(ts.x,ts.y)))return!0;if(e.effects&&e.effects.length)for(let i=0;i<e.effects.length;i++){let s=e.effects[i];if(s.containsPoint&&!s.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return e.hitArea?!0:e!=null&&e.containsPoint?(e.worldTransform.applyInverse(t,ts),e.containsPoint(ts)):!1}notifyTarget(e,t){var i,s;if(!e.currentTarget.isInteractive())return;t!=null||(t=e.type);let r=`on${t}`;(s=(i=e.currentTarget)[r])==null||s.call(i,e);let n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof gt))return;let t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){let s=t.button===2;this.dispatchEvent(t,s?"rightdown":"mousedown")}let i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var t,i,s;if(!(e instanceof gt))return;this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;let n=r.pointerType==="mouse"||r.pointerType==="pen",d=this.trackingData(e.pointerId),h=this.findMountedTarget(d.overTargets);if(((t=d.overTargets)==null?void 0:t.length)>0&&h!==r.target){let p=e.type==="mousemove"?"mouseout":"pointerout",_=this.createPointerEvent(e,p,h);if(this.dispatchEvent(_,"pointerout"),n&&this.dispatchEvent(_,"mouseout"),!r.composedPath().includes(h)){let m=this.createPointerEvent(e,"pointerleave",h);for(m.eventPhase=m.AT_TARGET;m.target&&!r.composedPath().includes(m.target);)m.currentTarget=m.target,this.notifyTarget(m),n&&this.notifyTarget(m,"mouseleave"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(_)}if(h!==r.target){let p=e.type==="mousemove"?"mouseover":"pointerover",_=this.clonePointerEvent(r,p);this.dispatchEvent(_,"pointerover"),n&&this.dispatchEvent(_,"mouseover");let m=h?.parent;for(;m&&m!==this.rootTarget.parent&&m!==r.target;)m=m.parent;if(!m||m===this.rootTarget.parent){let v=this.clonePointerEvent(r,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==h&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),n&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(_)}let l=[],u=(i=this.enableGlobalMoveEvents)!=null?i:!0;this.moveOnAll?l.push("pointermove"):this.dispatchEvent(r,"pointermove"),u&&l.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?l.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),u&&l.push("globaltouchmove")),n&&(this.moveOnAll?l.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),u&&l.push("globalmousemove"),this.cursor=(s=r.target)==null?void 0:s.cursor),l.length>0&&this.all(r,l),this._allInteractiveElements.length=0,this._hitElements.length=0,d.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var t;if(!(e instanceof gt))return;let i=this.trackingData(e.pointerId),s=this.createPointerEvent(e),r=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(t=s.target)==null?void 0:t.cursor);let n=this.clonePointerEvent(s,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;i.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(n)}mapPointerOut(e){if(!(e instanceof gt))return;let t=this.trackingData(e.pointerId);if(t.overTargets){let i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(t.overTargets),r=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(r),i&&this.dispatchEvent(r,"mouseout");let n=this.createPointerEvent(e,"pointerleave",s);for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),i&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;t.overTargets=null,this.freeEvent(r),this.freeEvent(n)}this.cursor=null}mapPointerUp(e){if(!(e instanceof gt))return;let t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let d=i.button===2;this.dispatchEvent(i,d?"rightup":"mouseup")}let s=this.trackingData(e.pointerId),r=this.findMountedTarget(s.pressTargetsByButton[e.button]),n=r;if(r&&!i.composedPath().includes(r)){let d=r;for(;d&&!i.composedPath().includes(d);){if(i.currentTarget=d,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let h=i.button===2;this.notifyTarget(i,h?"rightupoutside":"mouseupoutside")}d=d.parent}delete s.pressTargetsByButton[e.button],n=d}if(n){let d=this.clonePointerEvent(i,"click");d.target=n,d.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:d.target,timeStamp:t});let h=s.clicksByButton[e.button];if(h.target===d.target&&t-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=d.target,h.timeStamp=t,d.detail=h.clickCount,d.pointerType==="mouse"){let l=d.button===2;this.dispatchEvent(d,l?"rightclick":"click")}else d.pointerType==="touch"&&this.dispatchEvent(d,"tap");this.dispatchEvent(d,"pointertap"),this.freeEvent(d)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof gt))return;let t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(i){let r=i;for(;r;)s.currentTarget=r,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),r=r.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof Pa))return;let t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){var s;let r=this.allocateEvent(gt);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=(s=i??this.hitTest(r.global.x,r.global.y))!=null?s:this._hitElements[0],typeof t=="string"&&(r.type=t),r}createWheelEvent(e){let t=this.allocateEvent(Pa);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){let i=this.allocateEvent(gt);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof gt&&t instanceof gt&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Ai&&t instanceof Ai&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);let t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){let i=e.currentTarget._events[t];if(i)if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let s=0,r=i.length;s<r&&!e.propagationImmediatelyStopped;s++)i[s].once&&e.currentTarget.removeListener(t,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,e)}},J8=Object.defineProperty,Au=Object.getOwnPropertySymbols,e4=Object.prototype.hasOwnProperty,t4=Object.prototype.propertyIsEnumerable,Eu=(a,e,t)=>e in a?J8(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,a4=(a,e)=>{for(var t in e||(e={}))e4.call(e,t)&&Eu(a,t,e[t]);if(Au)for(var t of Au(e))t4.call(e,t)&&Eu(a,t,e[t]);return a},i4=1,s4={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Gd=class Bd{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Id(null),Aa.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new gt(null),this._rootWheelEvent=new Pa(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(a4({},Bd.defaultEventFeatures),{set:(t,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[i]=s,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){var t,i;let{canvas:s,resolution:r}=this.renderer;this.setTargetElement(s),this.resolution=r,Bd._defaultEventMode=(t=e.eventMode)!=null?t:"passive",Object.assign(this.features,(i=e.eventFeatures)!=null?i:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;let i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,s=t.length;i<s;i++){let r=t[i],n=this._bootstrapEvent(this._rootPointerEvent,r);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Aa.pointerMoved();let t=this._normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){let r=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);let i=t!==this.domElement?"outside":"",s=this._normalizeToPointerData(e);for(let r=0,n=s.length;r<n;r++){let d=this._bootstrapEvent(this._rootPointerEvent,s[r]);d.type+=i,this.rootBoundary.mapEvent(d)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){let r=this._bootstrapEvent(this._rootPointerEvent,t[i]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,Aa.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Aa.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Aa.removeTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,i){let s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},r=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*r,e.y=(i-s.top)*(this.domElement.height/s.height)*r}_normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,s=e.changedTouches.length;i<s;i++){let r=e.changedTouches[i];typeof r.button>"u"&&(r.button=0),typeof r.buttons>"u"&&(r.buttons=1),typeof r.isPrimary>"u"&&(r.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof r.width>"u"&&(r.width=r.radiusX||1),typeof r.height>"u"&&(r.height=r.radiusY||1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="touch"),typeof r.pointerId>"u"&&(r.pointerId=r.identifier||0),typeof r.pressure>"u"&&(r.pressure=r.force||.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),typeof r.layerX>"u"&&(r.layerX=r.offsetX=r.clientX),typeof r.layerY>"u"&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=e.type,t.push(r)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=i4),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){let t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=s4[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Gd.extension={name:"events",type:[I.WebGLSystem,I.CanvasSystem,I.WebGPUSystem],priority:-1},Gd.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var yp=Gd,r4={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(a){this.eventMode=a?"static":"passive"},_internalEventMode:void 0,get eventMode(){var a;return(a=this._internalEventMode)!=null?a:yp.defaultEventMode},set eventMode(a){this._internalEventMode=a},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(a,e,t){let i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof t=="object"?t.signal:void 0,r=typeof t=="object"?t.once===!0:!1,n=typeof e=="function"?void 0:e;a=i?`${a}capture`:a;let d=typeof e=="function"?e:e.handleEvent,h=this;s&&s.addEventListener("abort",()=>{h.off(a,d,n)}),r?h.once(a,d,n):h.on(a,d,n)},removeEventListener(a,e,t){let i=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,s=typeof e=="function"?void 0:e;a=i?`${a}capture`:a,e=typeof e=="function"?e:e.handleEvent,this.off(a,e,s)},dispatchEvent(a){if(!(a instanceof Rs))throw new Error("Container cannot propagate events outside of the Federated Events API");return a.defaultPrevented=!1,a.path=null,a.target=this,a.manager.dispatchEvent(a),!a.defaultPrevented}};ue.add(yp),de.mixin(r4);var Mt=(a=>(a[a.Low=0]="Low",a[a.Normal=1]="Normal",a[a.High=2]="High",a))(Mt||{}),n4={createCanvas:(a,e)=>{let t=document.createElement("canvas");return t.width=a,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var a;return(a=document.baseURI)!=null?a:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(a,e)=>fetch(a,e),parseXML:a=>new DOMParser().parseFromString(a,"text/xml")},Pu=n4,_e={get(){return Pu},set(a){Pu=a}};function Nt(a){if(typeof a!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(a)}`)}function as(a){return a.split("?")[0].split("#")[0]}function o4(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c4(a,e,t){return a.replace(new RegExp(o4(e),"g"),t)}function d4(a,e){let t="",i=0,s=-1,r=0,n=-1;for(let d=0;d<=a.length;++d){if(d<a.length)n=a.charCodeAt(d);else{if(n===47)break;n=47}if(n===47){if(!(s===d-1||r===1))if(s!==d-1&&r===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){let h=t.lastIndexOf("/");if(h!==t.length-1){h===-1?(t="",i=0):(t=t.slice(0,h),i=t.length-1-t.lastIndexOf("/")),s=d,r=0;continue}}else if(t.length===2||t.length===1){t="",i=0,s=d,r=0;continue}}e&&(t.length>0?t+="/..":t="..",i=2)}else t.length>0?t+=`/${a.slice(s+1,d)}`:t=a.slice(s+1,d),i=d-s-1;s=d,r=0}else n===46&&r!==-1?++r:r=-1}return t}var _t={toPosix(a){return c4(a,"\\","/")},isUrl(a){return/^https?:/.test(this.toPosix(a))},isDataUrl(a){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(a)},isBlobUrl(a){return a.startsWith("blob:")},hasProtocol(a){return/^[^/:]+:/.test(this.toPosix(a))},getProtocol(a){Nt(a),a=this.toPosix(a);let e=/^file:\/\/\//.exec(a);if(e)return e[0];let t=/^[^/:]+:\/{0,2}/.exec(a);return t?t[0]:""},toAbsolute(a,e,t){if(Nt(a),this.isDataUrl(a)||this.isBlobUrl(a))return a;let i=as(this.toPosix(e??_e.get().getBaseUrl())),s=as(this.toPosix(t??this.rootname(i)));return a=this.toPosix(a),a.startsWith("/")?_t.join(s,a.slice(1)):this.isAbsolute(a)?a:this.join(i,a)},normalize(a){if(Nt(a),a.length===0)return".";if(this.isDataUrl(a)||this.isBlobUrl(a))return a;a=this.toPosix(a);let e="",t=a.startsWith("/");this.hasProtocol(a)&&(e=this.rootname(a),a=a.slice(e.length));let i=a.endsWith("/");return a=d4(a,!1),a.length>0&&i&&(a+="/"),t?`/${a}`:e+a},isAbsolute(a){return Nt(a),a=this.toPosix(a),this.hasProtocol(a)?!0:a.startsWith("/")},join(...a){var e;if(a.length===0)return".";let t;for(let i=0;i<a.length;++i){let s=a[i];if(Nt(s),s.length>0)if(t===void 0)t=s;else{let r=(e=a[i-1])!=null?e:"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(a){if(Nt(a),a.length===0)return".";a=this.toPosix(a);let e=a.charCodeAt(0),t=e===47,i=-1,s=!0,r=this.getProtocol(a),n=a;a=a.slice(r.length);for(let d=a.length-1;d>=1;--d)if(e=a.charCodeAt(d),e===47){if(!s){i=d;break}}else s=!1;return i===-1?t?"/":this.isUrl(n)?r+a:r:t&&i===1?"//":r+a.slice(0,i)},rootname(a){Nt(a),a=this.toPosix(a);let e="";if(a.startsWith("/")?e="/":e=this.getProtocol(a),this.isUrl(a)){let t=a.indexOf("/",e.length);t!==-1?e=a.slice(0,t):e=a,e.endsWith("/")||(e+="/")}return e},basename(a,e){Nt(a),e&&Nt(e),a=as(this.toPosix(a));let t=0,i=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=a.length){if(e.length===a.length&&e===a)return"";let n=e.length-1,d=-1;for(r=a.length-1;r>=0;--r){let h=a.charCodeAt(r);if(h===47){if(!s){t=r+1;break}}else d===-1&&(s=!1,d=r+1),n>=0&&(h===e.charCodeAt(n)?--n===-1&&(i=r):(n=-1,i=d))}return t===i?i=d:i===-1&&(i=a.length),a.slice(t,i)}for(r=a.length-1;r>=0;--r)if(a.charCodeAt(r)===47){if(!s){t=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":a.slice(t,i)},extname(a){Nt(a),a=as(this.toPosix(a));let e=-1,t=0,i=-1,s=!0,r=0;for(let n=a.length-1;n>=0;--n){let d=a.charCodeAt(n);if(d===47){if(!s){t=n+1;break}continue}i===-1&&(s=!1,i=n+1),d===46?e===-1?e=n:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||i===-1||r===0||r===1&&e===i-1&&e===t+1?"":a.slice(e,i)},parse(a){Nt(a);let e={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return e;a=as(this.toPosix(a));let t=a.charCodeAt(0),i=this.isAbsolute(a),s,r="";e.root=this.rootname(a),i||this.hasProtocol(a)?s=1:s=0;let n=-1,d=0,h=-1,l=!0,u=a.length-1,p=0;for(;u>=s;--u){if(t=a.charCodeAt(u),t===47){if(!l){d=u+1;break}continue}h===-1&&(l=!1,h=u+1),t===46?n===-1?n=u:p!==1&&(p=1):n!==-1&&(p=-1)}return n===-1||h===-1||p===0||p===1&&n===h-1&&n===d+1?h!==-1&&(d===0&&i?e.base=e.name=a.slice(1,h):e.base=e.name=a.slice(d,h)):(d===0&&i?(e.name=a.slice(1,n),e.base=a.slice(1,h)):(e.name=a.slice(d,n),e.base=a.slice(d,h)),e.ext=a.slice(n,h)),e.dir=this.dirname(a),r&&(e.dir=r+e.dir),e},sep:"/",delimiter:":",joinExtensions:[".html"]},Xt=(a,e,t=!1)=>(Array.isArray(a)||(a=[a]),e?a.map(i=>typeof i=="string"||t?e(i):i):a);function xp(a,e,t,i,s){let r=e[t];for(let n=0;n<r.length;n++){let d=r[n];t<e.length-1?xp(a.replace(i[t],d),e,t+1,i,s):s.push(a.replace(i[t],d))}}function h4(a){let e=/\{(.*?)\}/g,t=a.match(e),i=[];if(t){let s=[];t.forEach(r=>{let n=r.substring(1,r.length-1).split(",");s.push(n)}),xp(a,s,0,t,i)}else i.push(a);return i}var Vr=a=>!Array.isArray(a),l4=Object.defineProperty,f4=Object.defineProperties,u4=Object.getOwnPropertyDescriptors,Ru=Object.getOwnPropertySymbols,b4=Object.prototype.hasOwnProperty,p4=Object.prototype.propertyIsEnumerable,Mu=(a,e,t)=>e in a?l4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,hi=(a,e)=>{for(var t in e||(e={}))b4.call(e,t)&&Mu(a,t,e[t]);if(Ru)for(var t of Ru(e))p4.call(e,t)&&Mu(a,t,e[t]);return a},g4=(a,e)=>f4(a,u4(e)),da=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){var t,i,s;if(this._bundleIdConnector=(t=e.connector)!=null?t:this._bundleIdConnector,this._createBundleAssetId=(i=e.createBundleAssetId)!=null?i:this._createBundleAssetId,this._extractAssetIdFromBundle=(s=e.extractAssetIdFromBundle)!=null?s:this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{let t=e;this._defaultSearchParams=Object.keys(t).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`).join("&")}}getAlias(e){let{alias:t,src:i}=e;return Xt(t||i,s=>typeof s=="string"?s:Array.isArray(s)?s.map(r=>{var n;return(n=r?.src)!=null?n:r}):s!=null&&s.src?s.src:s,!0)}addManifest(e){this._manifest,this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){let i=[],s=t;Array.isArray(t)||(s=Object.entries(t).map(([r,n])=>typeof n=="string"||Array.isArray(n)?{alias:r,src:n}:hi({alias:r},n))),s.forEach(r=>{let n=r.src,d=r.alias,h;if(typeof d=="string"){let l=this._createBundleAssetId(e,d);i.push(l),h=[d,l]}else{let l=d.map(u=>this._createBundleAssetId(e,u));i.push(...l),h=[...d,...l]}this.add(g4(hi({},r),{alias:h,src:n}))}),this._bundles[e]=i}add(e){let t=[];Array.isArray(e)?t.push(...e):t.push(e);let i;Xt(t).forEach(s=>{let{src:r}=s,{data:n,format:d,loadParser:h}=s,l=Xt(r).map(_=>typeof _=="string"?h4(_):Array.isArray(_)?_:[_]),u=this.getAlias(s),p=[];l.forEach(_=>{_.forEach(m=>{var v,T,w;let P={};if(typeof m!="object"){P.src=m;for(let C=0;C<this._parsers.length;C++){let B=this._parsers[C];if(B.test(m)){P=B.parse(m);break}}}else n=(v=m.data)!=null?v:n,d=(T=m.format)!=null?T:d,h=(w=m.loadParser)!=null?w:h,P=hi(hi({},P),m);if(!u)throw new Error(`[Resolver] alias is undefined for this asset: ${P.src}`);P=this._buildResolvedAsset(P,{aliases:u,data:n,format:d,loadParser:h}),p.push(P)})}),u.forEach(_=>{this._assetMap[_]=p})})}resolveBundle(e){let t=Vr(e);e=Xt(e);let i={};return e.forEach(s=>{let r=this._bundles[s];if(r){let n=this.resolve(r),d={};for(let h in n){let l=n[h];d[this._extractAssetIdFromBundle(s,h)]=l}i[s]=d}}),t?i[e[0]]:i}resolveUrl(e){let t=this.resolve(e);if(typeof e!="string"){let i={};for(let s in t)i[s]=t[s].src;return i}return t.src}resolve(e){let t=Vr(e);e=Xt(e);let i={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let r=this._assetMap[s],n=this._getPreferredOrder(r);n?.priority.forEach(d=>{n.params[d].forEach(h=>{let l=r.filter(u=>u[d]?u[d]===h:!1);l.length&&(r=l)})}),this._resolverHash[s]=r[0]}else this._resolverHash[s]=this._buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),t?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let i=e[t],s=this._preferredOrder.find(r=>r.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;let t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){var i,s;let{aliases:r,data:n,loadParser:d,format:h}=t;return(this._basePath||this._rootPath)&&(e.src=_t.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=(i=r??e.alias)!=null?i:[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data=hi(hi({},n||{}),e.data),e.loadParser=d??e.loadParser,e.format=(s=h??e.format)!=null?s:m4(e.src),e}};da.RETINA_PREFIX=/@([0-9\.]+)x/;function m4(a){return a.split(".").pop().split("?").shift().split("#").shift()}var Fd=(a,e)=>{let t=e.split("?")[1];return t&&(a+=`?${t}`),a},vp=class bs{constructor(e,t){this.linkedSheets=[],this._texture=e instanceof W?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=t;let i=parseFloat(t.meta.scale);i?(this.resolution=i,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=bs.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e,i=bs.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){let s=this._frameKeys[t],r=this._frames[s],n=r.frame;if(n){let d=null,h=null,l=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,u=new we(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);r.rotated?d=new we(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):d=new we(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(h=new we(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[s]=new W({source:this.textureSource,frame:d,orig:u,trim:h,rotate:r.rotated?2:0,defaultAnchor:r.anchor,defaultBorders:r.borders,label:s.toString()})}t++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){let s=e[t][i];this.animations[t].push(this.textures[s])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*bs.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*bs.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(let i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};vp.BATCH_SIZE=1e3;var Cu=vp,_4=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Tp(a,e,t){let i={};if(a.forEach(s=>{i[s]=e}),Object.keys(e.textures).forEach(s=>{i[s]=e.textures[s]}),!t){let s=_t.dirname(a[0]);e.linkedSheets.forEach((r,n)=>{let d=Tp([`${s}/${e.data.meta.related_multi_packs[n]}`],r,!0);Object.assign(i,d)})}return i}var y4={extension:I.Asset,cache:{test:a=>a instanceof Cu,getCacheableAssets:(a,e)=>Tp(a,e,!1)},resolver:{extension:{type:I.ResolveParser,name:"resolveSpritesheet"},test:a=>{let e=a.split("?")[0].split("."),t=e.pop(),i=e.pop();return t==="json"&&_4.includes(i)},parse:a=>{var e,t;let i=a.split(".");return{resolution:parseFloat((t=(e=da.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:i[i.length-2],src:a}}},loader:{name:"spritesheetLoader",extension:{type:I.LoadParser,priority:Mt.Normal,name:"spritesheetLoader"},async testParse(a,e){return _t.extname(e.src).toLowerCase()===".json"&&!!a.frames},async parse(a,e,t){var i,s,r;let{texture:n,imageFilename:d,textureOptions:h}=(i=e?.data)!=null?i:{},l=_t.dirname(e.src);l&&l.lastIndexOf("/")!==l.length-1&&(l+="/");let u;if(n instanceof W)u=n;else{let m=Fd(l+(d??a.meta.image),e.src);u=(await t.load([{src:m,data:h}]))[m]}let p=new Cu(u.source,a);await p.parse();let _=(s=a?.meta)==null?void 0:s.related_multi_packs;if(Array.isArray(_)){let m=[];for(let T of _){if(typeof T!="string")continue;let w=l+T;(r=e.data)!=null&&r.ignoreMultiPack||(w=Fd(w,e.src),m.push(t.load({src:w,data:{ignoreMultiPack:!0}})))}let v=await Promise.all(m);p.linkedSheets=v,v.forEach(T=>{T.linkedSheets=[p].concat(p.linkedSheets.filter(w=>w!==T))})}return p},async unload(a,e,t){await t.unload(a.textureSource._sourceOrigin),a.destroy(!1)}}};ue.add(y4);function Sp(a,e,t){let{width:i,height:s}=t.orig,r=t.trim;if(r){let n=r.width,d=r.height;a.minX=r.x-e._x*i,a.maxX=a.minX+n,a.minY=r.y-e._y*s,a.maxY=a.minY+d}else a.minX=-e._x*i,a.maxX=a.minX+i,a.minY=-e._y*s,a.maxY=a.minY+s}var ha=class extends de{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Ze(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){let t=this.bounds,{x:i,y:s}=e;return i>=t.minX&&i<=t.maxX&&s>=t.minY&&s<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,i){let{renderPipes:s,renderableGC:r}=t;s.blendMode.setBlendMode(this,this.groupBlendMode,e),s[this.renderPipeId].addRenderable(this,e),r.addRenderable(this),this.didViewUpdate=!1;let n=this.children,d=n.length;for(let h=0;h<d;h++)n[h].collectRenderables(e,t,i)}},x4=Object.defineProperty,Wr=Object.getOwnPropertySymbols,wp=Object.prototype.hasOwnProperty,Ap=Object.prototype.propertyIsEnumerable,Ou=(a,e,t)=>e in a?x4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,v4=(a,e)=>{for(var t in e||(e={}))wp.call(e,t)&&Ou(a,t,e[t]);if(Wr)for(var t of Wr(e))Ap.call(e,t)&&Ou(a,t,e[t]);return a},T4=(a,e)=>{var t={};for(var i in a)wp.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Wr)for(var i of Wr(a))e.indexOf(i)<0&&Ap.call(a,i)&&(t[i]=a[i]);return t},Ae=class a extends ha{constructor(e=W.EMPTY){e instanceof W&&(e={texture:e});let t=e,{texture:i=W.EMPTY,anchor:s,roundPixels:r,width:n,height:d}=t,h=T4(t,["texture","anchor","roundPixels","width","height"]);super(v4({label:"Sprite"},h)),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new We({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=r??!1,n!==void 0&&(this.width=n),d!==void 0&&(this.height=d)}static from(e,t=!1){return e instanceof W?new a(e):new a(W.from(e,t))}set texture(e){e||(e=W.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Sp(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return this.visualBounds}updateBounds(){let e=this._anchor,t=this._texture,i=this._bounds,{width:s,height:r}=t.orig;i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*r,i.maxY=i.minY+r}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){var i;typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}},S4=new Ze;function Ep(a,e,t){let i=S4;a.measurable=!0,Co(a,t,i),e.addBoundsMask(i),a.measurable=!1}function Pp(a,e,t){let i=oa.get();a.measurable=!0;let s=it.get().identity(),r=Rp(a,t,s);ul(a,i,r),a.measurable=!1,e.addBoundsMask(i),it.return(s),oa.return(i)}function Rp(a,e,t){return a&&a!==e&&(Rp(a.parent,e,t),a.updateLocalTransform(),t.append(a.localTransform)),t}var Yr=class{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Ae),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,t){this.inverse||Ep(this.mask,e,t)}addLocalBounds(e,t){Pp(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof Ae}};Yr.extension=I.MaskEffect;var $r=class{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}};$r.extension=I.MaskEffect;var Kr=class{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,t){Ep(this.mask,e,t)}addLocalBounds(e,t){Pp(this.mask,e,t)}containsPoint(e,t){let i=this.mask;return t(i,e)}destroy(){this.reset()}static test(e){return e instanceof de}};Kr.extension=I.MaskEffect;var Kt=class extends Ge{constructor(e){e.resource||(e.resource=_e.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,i=this._resolution){let s=super.resize(e,t,i);return s&&this.resizeCanvas(),s}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}};Kt.extension=I.TextureSource;var Ma=class extends Ge{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){let t=_e.get().createCanvas(e.resource.width,e.resource.height);t.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=t}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}};Ma.extension=I.TextureSource;var Oc;async function Mp(){return Oc!=null||(Oc=(async()=>{var a;let e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";let t=await new Promise(n=>{let d=document.createElement("video");d.onloadeddata=()=>n(d),d.onerror=()=>n(null),d.autoplay=!1,d.crossOrigin="anonymous",d.preload="auto",d.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",d.load()});if(!t)return"premultiply-alpha-on-upload";let i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);let s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);let r=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,r),e.deleteFramebuffer(s),e.deleteTexture(i),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),r[0]<=r[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Oc}var w4=Object.defineProperty,A4=Object.defineProperties,E4=Object.getOwnPropertyDescriptors,Iu=Object.getOwnPropertySymbols,P4=Object.prototype.hasOwnProperty,R4=Object.prototype.propertyIsEnumerable,Gu=(a,e,t)=>e in a?w4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Dd=(a,e)=>{for(var t in e||(e={}))P4.call(e,t)&&Gu(a,t,e[t]);if(Iu)for(var t of Iu(e))R4.call(e,t)&&Gu(a,t,e[t]);return a},M4=(a,e)=>A4(a,E4(e)),Gr=class Cp extends Ge{constructor(e){var t;super(e),this.isReady=!1,this.uploadMethodId="video",e=Dd(Dd({},Cp.defaultOptions),e),this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=(t=e.alphaMode)!=null?t:"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let e=tt.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Mp(),this._load=new Promise((i,s)=>{this.isValid?i(this):(this._resolve=i,this._reject=s,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(tt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(tt.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(tt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Gr.extension=I.TextureSource,Gr.defaultOptions=M4(Dd({},Ge.defaultOptions),{autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1}),Gr.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var Br=Gr,C4=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(a){return this._cache.has(a)}get(a){return this._cache.get(a)}set(a,e){let t=Xt(a),i;for(let d=0;d<this.parsers.length;d++){let h=this.parsers[d];if(h.test(e)){i=h.getCacheableAssets(t,e);break}}let s=new Map(Object.entries(i||{}));i||t.forEach(d=>{s.set(d,e)});let r=[...s.keys()],n={cacheKeys:r,keys:t};t.forEach(d=>{this._cacheMap.set(d,n)}),r.forEach(d=>{let h=i?i[d]:e;this._cache.has(d)&&this._cache.get(d),this._cache.set(d,s.get(d))})}remove(a){if(!this._cacheMap.has(a))return;let e=this._cacheMap.get(a);e.cacheKeys.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})}get parsers(){return this._parsers}},Me=new C4,kd=[];ue.handleByList(I.TextureSource,kd);function Op(a={}){let e=a&&a.resource,t=e?a.resource:a,i=e?a:{resource:a};for(let s=0;s<kd.length;s++){let r=kd[s];if(r.test(t))return new r(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function O4(a={},e=!1){let t=a&&a.resource,i=t?a.resource:a,s=t?a:{resource:a};if(!e&&Me.has(i))return Me.get(i);let r=new W({source:Op(s)});return r.on("destroy",()=>{Me.has(i)&&Me.remove(i)}),e||Me.set(i,r),r}function I4(a,e=!1){return typeof a=="string"?Me.get(a):a instanceof Ge?new W({source:a}):O4(a,e)}W.from=I4,Ge.from=Op,ue.add(Yr,$r,Kr,Br,Ma,Kt,Ps);var Ht=class{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(let i in e){let s=e[i];this.setResource(s,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let e=[],t=0;for(let i in this.resources)e[t++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,t){var i,s;let r=this.resources[t];e!==r&&(r&&((i=e.off)==null||i.call(e,"change",this.onResourceChange,this)),(s=e.on)==null||s.call(e,"change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){let t=this.resources;for(let i in t)t[i]._touched=e}destroy(){var e;let t=this.resources;for(let i in t){let s=t[i];(e=s.off)==null||e.call(s,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){let t=this.resources;for(let i in t)t[i]===e&&(t[i]=null)}else this._updateKey()}},is;function Ip(){return(!is||is!=null&&is.isContextLost())&&(is=_e.get().createCanvas().getContext("webgl",{})),is}var G4=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function B4(a){let e="";for(let t=0;t<a;++t)t>0&&(e+=`
else `),t<a-1&&(e+=`if(test == ${t}.0){}`);return e}function F4(a,e){if(a===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){let i=G4.replace(/%forloop%/gi,B4(a));if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))a=a/2|0;else break}}finally{e.deleteShader(t)}return a}var li=null;function Ci(){var a;if(li)return li;let e=Ip();return li=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),li=F4(li,e),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),li}var Gp={};function pl(a,e){let t=2166136261;for(let i=0;i<e;i++)t^=a[i].uid,t=Math.imul(t,16777619),t>>>=0;return Gp[t]||D4(a,e,t)}var Ic=0;function D4(a,e,t){let i={},s=0;Ic||(Ic=Ci());for(let n=0;n<Ic;n++){let d=n<e?a[n]:W.EMPTY.source;i[s++]=d.source,i[s++]=d.style}let r=new Ht(i);return Gp[t]=r,r}var Ea=class{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}};function Ud(a,e){let t=a.byteLength/8|0,i=new Float64Array(a,0,t);new Float64Array(e,0,t).set(i);let s=a.byteLength-t*8;if(s>0){let r=new Uint8Array(a,t*8,s);new Uint8Array(e,t*8,s).set(r)}}var k4={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},Le=(a=>(a[a.DISABLED=0]="DISABLED",a[a.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",a[a.MASK_ACTIVE=2]="MASK_ACTIVE",a[a.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",a[a.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",a[a.NONE=5]="NONE",a))(Le||{});function Ms(a,e){return e.alphaMode==="no-premultiply-alpha"&&k4[a]||a}var Ld=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){let t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}},U4=Object.defineProperty,Bu=Object.getOwnPropertySymbols,L4=Object.prototype.hasOwnProperty,N4=Object.prototype.propertyIsEnumerable,Fu=(a,e,t)=>e in a?U4(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Du=(a,e)=>{for(var t in e||(e={}))L4.call(e,t)&&Fu(a,t,e[t]);if(Bu)for(var t of Bu(e))N4.call(e,t)&&Fu(a,t,e[t]);return a},Nd=class{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new Ld,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}},Bp=[],jd=0;function ku(){return jd>0?Bp[--jd]:new Nd}function Uu(a){Bp[jd++]=a}var ss=0,Fp=class Fr{constructor(e={}){this.uid=Ie("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[];var t;Fr.defaultOptions.maxTextures=(t=Fr.defaultOptions.maxTextures)!=null?t:Ci(),e=Du(Du({},Fr.defaultOptions),e);let{maxTextures:i,attributesInitialSize:s,indicesInitialSize:r}=e;this.attributeBuffer=new Ea(s*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)Uu(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){let i=e._batch.textures.ids[t._source.uid];return!i&&i!==0?!1:(e._textureId=i,e.texture=t,!0)}updateElement(e){this.dirty=!0;let t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){let t=this._elements;if(!t[this.elementStart])return;let i=ku(),s=i.textures;s.clear();let r=t[this.elementStart],n=Ms(r.blendMode,r.texture._source),d=r.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let h=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,u=this.indexBuffer,p=this._batchIndexSize,_=this._batchIndexStart,m="startBatch",v=this.maxTextures;for(let T=this.elementStart;T<this.elementSize;++T){let w=t[T];t[T]=null;let P=w.texture._source,C=Ms(w.blendMode,P),B=n!==C||d!==w.topology;if(P._batchTick===ss&&!B){w._textureId=P._textureBindLocation,p+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,h,l,w._attributeStart,w._textureId),this.packQuadIndex(u,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,h,l,w._attributeStart,w._textureId),this.packIndex(w,u,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=i;continue}P._batchTick=ss,(s.count>=v||B)&&(this._finishBatch(i,_,p-_,s,n,d,e,m),m="renderBatch",_=p,n=C,d=w.topology,i=ku(),s=i.textures,s.clear(),++ss),w._textureId=P._textureBindLocation=s.count,s.ids[P.uid]=s.count,s.textures[s.count++]=P,w._batch=i,p+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,h,l,w._attributeStart,w._textureId),this.packQuadIndex(u,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,h,l,w._attributeStart,w._textureId),this.packIndex(w,u,w._indexStart,w._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(i,_,p-_,s,n,d,e,m),_=p,++ss),this.elementStart=this.elementSize,this._batchIndexStart=_,this._batchIndexSize=p}_finishBatch(e,t,i,s,r,n,d,h){e.gpuBindGroup=null,e.bindGroup=null,e.action=h,e.batcher=this,e.textures=s,e.blendMode=r,e.topology=n,e.start=t,e.size=i,++ss,this.batches[this.batchIndex++]=e,d.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){let t=Math.max(e,this.attributeBuffer.size*2),i=new Ea(t);Ud(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){let t=this.indexBuffer,i=Math.max(e,t.length*1.5);i+=i%2;let s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let r=0;r<t.length;r++)s[r]=t[r];else Ud(t.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(e,t,i){e[t]=i+0,e[t+1]=i+1,e[t+2]=i+2,e[t+3]=i+0,e[t+4]=i+2,e[t+5]=i+3}packIndex(e,t,i,s){let r=e.indices,n=e.indexSize,d=e.indexOffset,h=e.attributeOffset;for(let l=0;l<n;l++)t[i++]=s+r[l+d]-h}destroy(){for(let e=0;e<this.batches.length;e++)Uu(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};Fp.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};var j4=Fp,ye=(a=>(a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE",a[a.STATIC=1024]="STATIC",a))(ye||{}),st=class extends xt{constructor(e){let{data:t,size:i}=e,{usage:s,label:r,shrinkToFit:n}=e;super(),this.uid=Ie("buffer"),this._resourceType="buffer",this._resourceId=Ie("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,i!=null||(i=t?.byteLength);let d=!!t;this.descriptor={size:i,usage:s,mappedAtCreation:d,label:r},this.shrinkToFit=n??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&ye.STATIC)}set static(e){e?this.descriptor.usage|=ye.STATIC:this.descriptor.usage&=~ye.STATIC}setDataWithSize(e,t,i){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}let s=this._data;if(this._data=e,this._dataInt32=null,!s||s.length!==e.length){!this.shrinkToFit&&s&&e.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Ie("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function Dp(a,e){if(!(a instanceof st)){let t=e?ye.INDEX:ye.VERTEX;a instanceof Array&&(e?(a=new Uint32Array(a),t=ye.INDEX|ye.COPY_DST):(a=new Float32Array(a),t=ye.VERTEX|ye.COPY_DST)),a=new st({data:a,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return a}function X4(a,e,t){let i=a.getAttribute(e);if(!i)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;let s=i.buffer.data,r=1/0,n=1/0,d=-1/0,h=-1/0,l=s.BYTES_PER_ELEMENT,u=(i.offset||0)/l,p=(i.stride||2*4)/l;for(let _=u;_<s.length;_+=p){let m=s[_],v=s[_+1];m>d&&(d=m),v>h&&(h=v),m<r&&(r=m),v<n&&(n=v)}return t.minX=r,t.minY=n,t.maxX=d,t.maxY=h,t}function H4(a){return(a instanceof st||Array.isArray(a)||a.BYTES_PER_ELEMENT)&&(a={buffer:a}),a.buffer=Dp(a.buffer,!1),a}var qt=class extends xt{constructor(e={}){var t;super(),this.uid=Ie("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Ze,this._boundsDirty=!0;let{attributes:i,indexBuffer:s,topology:r}=e;if(this.buffers=[],this.attributes={},i)for(let n in i)this.addAttribute(n,i[n]);this.instanceCount=(t=e.instanceCount)!=null?t:1,s&&this.addIndex(s),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(let e in this.attributes){let t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){let i=H4(t);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=i}addIndex(e){this.indexBuffer=Dp(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,X4(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}},z4=new Float32Array(1),V4=new Uint32Array(1),Xd=class extends qt{constructor(){let e=new st({data:z4,label:"attribute-batch-buffer",usage:ye.VERTEX|ye.COPY_DST,shrinkToFit:!1}),t=new st({data:V4,label:"index-batch-buffer",usage:ye.INDEX|ye.COPY_DST,shrinkToFit:!1}),i=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:i,offset:0},aUV:{buffer:e,format:"float32x2",stride:i,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:i,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:i,offset:5*4}},indexBuffer:t})}},Gc=Object.create(null),Lu=Object.create(null);function Cs(a,e){let t=Lu[a];return t===void 0&&(Gc[e]===void 0&&(Gc[e]=1),Lu[a]=t=Gc[e]++),t}var br;function W4(){if(!br){br="mediump";let a=Ip();a&&a.getShaderPrecisionFormat&&(br=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision?"highp":"mediump")}return br}function Y4(a,e,t){return e?a:t?(a=a.replace("out vec4 finalColor;",""),`

#ifdef GL_ES // This checks if it is WebGL1
#define in varying
#define finalColor gl_FragColor
#define texture texture2D
#endif
${a}
`):`

#ifdef GL_ES // This checks if it is WebGL1
#define in attribute
#define out varying
#endif
${a}
`}function $4(a,e,t){let i=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(a.substring(0,9)!=="precision"){let s=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return s==="highp"&&i!=="highp"&&(s="mediump"),`precision ${s} float;
${a}`}else if(i!=="highp"&&a.substring(0,15)==="precision highp")return a.replace("precision highp","precision mediump");return a}function K4(a,e){return e?`#version 300 es
${a}`:a}var q4={},Z4={};function Q4(a,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";let i=t?q4:Z4;return i[e]?(i[e]++,e+=`-${i[e]}`):i[e]=1,a.indexOf("#define SHADER_NAME")!==-1?a:`${`#define SHADER_NAME ${e}`}
${a}`}function J4(a,e){return e?a.replace("#version 300 es",""):a}var e6=Object.defineProperty,Nu=Object.getOwnPropertySymbols,t6=Object.prototype.hasOwnProperty,a6=Object.prototype.propertyIsEnumerable,ju=(a,e,t)=>e in a?e6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Xu=(a,e)=>{for(var t in e||(e={}))t6.call(e,t)&&ju(a,t,e[t]);if(Nu)for(var t of Nu(e))a6.call(e,t)&&ju(a,t,e[t]);return a},Bc={stripVersion:J4,ensurePrecision:$4,addProgramDefines:Y4,setProgramName:Q4,insertVersion:K4},Fc=Object.create(null),kp=class Hd{constructor(e){e=Xu(Xu({},Hd.defaultOptions),e);let t=e.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:W4()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t},s=e.fragment,r=e.vertex;Object.keys(Bc).forEach(n=>{let d=i[n];s=Bc[n](s,d,!0),r=Bc[n](r,d,!1)}),this.fragment=s,this.vertex=r,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Cs(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){let t=`${e.vertex}:${e.fragment}`;return Fc[t]||(Fc[t]=new Hd(e)),Fc[t]}};kp.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};var fa=kp,Hu={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Ca(a){var e;return(e=Hu[a])!=null?e:Hu.float32}var i6={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function s6({source:a,entryPoint:e}){var t;let i={},s=a.indexOf(`fn ${e}`);if(s!==-1){let r=a.indexOf("->",s);if(r!==-1){let n=a.substring(s,r),d=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,h;for(;(h=d.exec(n))!==null;){let l=(t=i6[h[3]])!=null?t:"float32";i[h[2]]={location:parseInt(h[1],10),format:l,stride:Ca(l).stride,offset:0,instance:!1,start:0}}}}return i}function Dc(a){var e,t,i;let s=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,r=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,d=/var(<[^>]+>)? (\w+)/,h=/:\s*(\w+)/,l=/struct\s+(\w+)\s*{([^}]+)}/g,u=/(\w+)\s*:\s*([\w\<\>]+)/g,p=/struct\s+(\w+)/,_=(e=a.match(s))==null?void 0:e.map(v=>({group:parseInt(v.match(r)[1],10),binding:parseInt(v.match(n)[1],10),name:v.match(d)[2],isUniform:v.match(d)[1]==="<uniform>",type:v.match(h)[1]}));if(!_)return{groups:[],structs:[]};let m=(i=(t=a.match(l))==null?void 0:t.map(v=>{let T=v.match(p)[1],w=v.match(u).reduce((P,C)=>{let[B,D]=C.split(":");return P[B.trim()]=D.trim(),P},{});return w?{name:T,members:w}:null}).filter(({name:v})=>_.some(T=>T.type===v)))!=null?i:[];return{groups:_,structs:m}}var ps=(a=>(a[a.VERTEX=1]="VERTEX",a[a.FRAGMENT=2]="FRAGMENT",a[a.COMPUTE=4]="COMPUTE",a))(ps||{});function r6({groups:a}){let e=[];for(let t=0;t<a.length;t++){let i=a[t];e[i.group]||(e[i.group]=[]),i.isUniform?e[i.group].push({binding:i.binding,visibility:ps.VERTEX|ps.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?e[i.group].push({binding:i.binding,visibility:ps.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&e[i.group].push({binding:i.binding,visibility:ps.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function n6({groups:a}){let e=[];for(let t=0;t<a.length;t++){let i=a[t];e[i.group]||(e[i.group]={}),e[i.group][i.name]=i.binding}return e}function o6(a,e){let t=new Set,i=new Set,s=[...a.structs,...e.structs].filter(n=>t.has(n.name)?!1:(t.add(n.name),!0)),r=[...a.groups,...e.groups].filter(n=>{let d=`${n.name}-${n.binding}`;return i.has(d)?!1:(i.add(d),!0)});return{structs:s,groups:r}}var kc=Object.create(null),Zt=class a{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;var t,i;let{fragment:s,vertex:r,layout:n,gpuLayout:d,name:h}=e;if(this.name=h,this.fragment=s,this.vertex=r,s.source===r.source){let l=Dc(s.source);this.structsAndGroups=l}else{let l=Dc(r.source),u=Dc(s.source);this.structsAndGroups=o6(l,u)}this.layout=n??n6(this.structsAndGroups),this.gpuLayout=d??r6(this.structsAndGroups),this.autoAssignGlobalUniforms=((t=this.layout[0])==null?void 0:t.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((i=this.layout[1])==null?void 0:i.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:e,fragment:t}=this,i=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=Cs(i,"program")}get attributeData(){var e;return(e=this._attributeData)!=null||(this._attributeData=s6(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){let t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return kc[t]||(kc[t]=new a(e)),kc[t]}};function zu(a,e,t){if(a)for(let i in a){let s=i.toLocaleLowerCase(),r=e[s];if(r){let n=a[i];i==="header"&&(n=n.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&r.push(`//----${t}----//`),r.push(n)}}}var c6=/\{\{(.*?)\}\}/g;function Vu(a){var e,t;let i={};return((t=(e=a.match(c6))==null?void 0:e.map(s=>s.replace(/[{()}]/g,"")))!=null?t:[]).forEach(s=>{i[s]=[]}),i}function Wu(a,e){let t,i=/@in\s+([^;]+);/g;for(;(t=i.exec(a))!==null;)e.push(t[1])}function Yu(a,e,t=!1){let i=[];Wu(e,i),a.forEach(d=>{d.header&&Wu(d.header,i)});let s=i;t&&s.sort();let r=s.map((d,h)=>`       @location(${h}) ${d},`).join(`
`),n=e.replace(/@in\s+[^;]+;\s*/g,"");return n=n.replace("{{in}}",`
${r}
`),n}function $u(a,e){let t,i=/@out\s+([^;]+);/g;for(;(t=i.exec(a))!==null;)e.push(t[1])}function d6(a){let e=/\b(\w+)\s*:/g.exec(a);return e?e[1]:""}function h6(a){let e=/@.*?\s+/g;return a.replace(e,"")}function l6(a,e){let t=[];$u(e,t),a.forEach(h=>{h.header&&$u(h.header,t)});let i=0,s=t.sort().map(h=>h.indexOf("builtin")>-1?h:`@location(${i++}) ${h}`).join(`,
`),r=t.sort().map(h=>`       var ${h6(h)};`).join(`
`),n=`return VSOutput(
${t.sort().map(h=>` ${d6(h)}`).join(`,
`)});`,d=e.replace(/@out\s+[^;]+;\s*/g,"");return d=d.replace("{{struct}}",`
${s}
`),d=d.replace("{{start}}",`
${r}
`),d=d.replace("{{return}}",`
${n}
`),d}function Ku(a,e){let t=a;for(let i in e){let s=e[i];s.join(`
`).length?t=t.replace(`{{${i}}}`,`//-----${i} START-----//
${s.join(`
`)}
//----${i} FINISH----//`):t=t.replace(`{{${i}}}`,"")}return t}var Va=Object.create(null),Uc=new Map,f6=0;function u6({template:a,bits:e}){let t=Up(a,e);if(Va[t])return Va[t];let{vertex:i,fragment:s}=p6(a,e);return Va[t]=Lp(i,s,e),Va[t]}function b6({template:a,bits:e}){let t=Up(a,e);return Va[t]||(Va[t]=Lp(a.vertex,a.fragment,e)),Va[t]}function p6(a,e){let t=e.map(n=>n.vertex).filter(n=>!!n),i=e.map(n=>n.fragment).filter(n=>!!n),s=Yu(t,a.vertex,!0);s=l6(t,s);let r=Yu(i,a.fragment,!0);return{vertex:s,fragment:r}}function Up(a,e){return e.map(t=>(Uc.has(t)||Uc.set(t,f6++),Uc.get(t))).sort((t,i)=>t-i).join("-")+a.vertex+a.fragment}function Lp(a,e,t){let i=Vu(a),s=Vu(e);return t.forEach(r=>{zu(r.vertex,i,r.name),zu(r.fragment,s,r.name)}),{vertex:Ku(a,i),fragment:Ku(e,s)}}var g6=`
@in aPosition: vec2<f32>;
@in aUV: vec2<f32>;

@out @builtin(position) vPosition: vec4<f32>;
@out vUV : vec2<f32>;
@out vColor : vec4<f32>;

{{header}}

struct VSOutput {
{{struct}}
};

@vertex
fn main( {{in}} ) -> VSOutput {

var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
var modelMatrix = mat3x3<f32>(
1.0, 0.0, 0.0,
0.0, 1.0, 0.0,
0.0, 0.0, 1.0
);
var position = aPosition;
var uv = aUV;

{{start}}

vColor = vec4<f32>(1., 1., 1., 1.);

{{main}}

vUV = uv;

var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

vColor *= globalUniforms.uWorldColorAlpha;

{{end}}

{{return}}
};
`,m6=`
@in vUV : vec2<f32>;
@in vColor : vec4<f32>;

{{header}}

@fragment
fn main(
{{in}}
) -> @location(0) vec4<f32> {

{{start}}

var outColor:vec4<f32>;

{{main}}

var finalColor:vec4<f32> = outColor * vColor;

{{end}}

return finalColor;
};
`,_6=`
in vec2 aPosition;
in vec2 aUV;

out vec4 vColor;
out vec2 vUV;

{{header}}

void main(void){

mat3 worldTransformMatrix = uWorldTransformMatrix;
mat3 modelMatrix = mat3(
1.0, 0.0, 0.0,
0.0, 1.0, 0.0,
0.0, 0.0, 1.0
);
vec2 position = aPosition;
vec2 uv = aUV;

{{start}}

vColor = vec4(1.);

{{main}}

vUV = uv;

mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

vColor *= uWorldColorAlpha;

{{end}}
}
`,y6=`

in vec4 vColor;
in vec2 vUV;

out vec4 finalColor;

{{header}}

void main(void) {

{{start}}

vec4 outColor;

{{main}}

finalColor = outColor * vColor;

{{end}}
}
`,x6={name:"global-uniforms-bit",vertex:{header:`
struct GlobalUniforms {
uProjectionMatrix:mat3x3<f32>,
uWorldTransformMatrix:mat3x3<f32>,
uWorldColorAlpha: vec4<f32>,
uResolution: vec2<f32>,
}

@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
`}};var v6={name:"global-uniforms-bit",vertex:{header:`
uniform mat3 uProjectionMatrix;
uniform mat3 uWorldTransformMatrix;
uniform vec4 uWorldColorAlpha;
uniform vec2 uResolution;
`}},T6=Object.defineProperty,qu=Object.getOwnPropertySymbols,S6=Object.prototype.hasOwnProperty,w6=Object.prototype.propertyIsEnumerable,Zu=(a,e,t)=>e in a?T6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,A6=(a,e)=>{for(var t in e||(e={}))S6.call(e,t)&&Zu(a,t,e[t]);if(qu)for(var t of qu(e))w6.call(e,t)&&Zu(a,t,e[t]);return a};function Xs({bits:a,name:e}){let t=u6({template:{fragment:m6,vertex:g6},bits:[x6,...a]});return Zt.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function Hs({bits:a,name:e}){return new fa(A6({name:e},b6({template:{vertex:_6,fragment:y6},bits:[v6,...a]})))}var gl={name:"color-bit",vertex:{header:`
@in aColor: vec4<f32>;
`,main:`
vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
`}},ml={name:"color-bit",vertex:{header:`
in vec4 aColor;
`,main:`
vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
`}},Lc={};function E6(a){let e=[];if(a===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let i=0;i<a;i++)e.push(`@group(1) @binding(${t++}) var textureSource${i+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${i+1}: sampler;`)}return e.join(`
`)}function P6(a){let e=[];if(a===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<a;t++)t===a-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function _l(a){return Lc[a]||(Lc[a]={name:"texture-batch-bit",vertex:{header:`
@in aTextureIdAndRound: vec2<u32>;
@out @interpolate(flat) vTextureId : u32;
`,main:`
vTextureId = aTextureIdAndRound.y;
`,end:`
if(aTextureIdAndRound.x == 1)
{
vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`},fragment:{header:`
@in @interpolate(flat) vTextureId: u32;

${E6(a)}
`,main:`
var uvDx = dpdx(vUV);
var uvDy = dpdy(vUV);

${P6(a)}
`}}),Lc[a]}var Nc={};function R6(a){let e=[];for(let t=0;t<a;t++)t>0&&e.push("else"),t<a-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function yl(a){return Nc[a]||(Nc[a]={name:"texture-batch-bit",vertex:{header:`
in vec2 aTextureIdAndRound;
out float vTextureId;

`,main:`
vTextureId = aTextureIdAndRound.y;
`,end:`
if(aTextureIdAndRound.x == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`},fragment:{header:`
in float vTextureId;

uniform sampler2D uTextures[${a}];

`,main:`

${R6(a)}
`}}),Nc[a]}var zs={name:"round-pixels-bit",vertex:{header:`
fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
{
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}
`}},Vs={name:"round-pixels-bit",vertex:{header:`   
vec2 roundPixels(vec2 position, vec2 targetSize)
{       
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}
`}},Np=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],M6=Np.reduce((a,e)=>(a[e]=!0,a),{});function C6(a,e){switch(a){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var O6=Object.defineProperty,Qu=Object.getOwnPropertySymbols,I6=Object.prototype.hasOwnProperty,G6=Object.prototype.propertyIsEnumerable,Ju=(a,e,t)=>e in a?O6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,e0=(a,e)=>{for(var t in e||(e={}))I6.call(e,t)&&Ju(a,t,e[t]);if(Qu)for(var t of Qu(e))G6.call(e,t)&&Ju(a,t,e[t]);return a},jp=class Xp{constructor(e,t){this._touched=0,this.uid=Ie("uniform"),this._resourceType="uniformGroup",this._resourceId=Ie("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1;var i,s;t=e0(e0({},Xp.defaultOptions),t),this.uniformStructures=e;let r={};for(let n in e){let d=e[n];if(d.name=n,d.size=(i=d.size)!=null?i:1,!M6[d.type])throw new Error(`Uniform type ${d.type} is not supported. Supported uniform types are: ${Np.join(", ")}`);(s=d.value)!=null||(d.value=C6(d.type,d.size)),r[n]=d.value}this.uniforms=r,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=Cs(Object.keys(r).map(n=>`${n}-${e[n].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};jp.defaultOptions={ubo:!1,isStatic:!1};var et=jp,t0={};function xl(a){let e=t0[a];if(e)return e;let t=new Int32Array(a);for(let i=0;i<a;i++)t[i]=i;return e=t0[a]=new et({uTextures:{value:t,type:"i32",size:a}},{isStatic:!0}),e}var yt=(a=>(a[a.WEBGL=1]="WEBGL",a[a.WEBGPU=2]="WEBGPU",a[a.BOTH=3]="BOTH",a))(yt||{}),B6=Object.defineProperty,qr=Object.getOwnPropertySymbols,Hp=Object.prototype.hasOwnProperty,zp=Object.prototype.propertyIsEnumerable,a0=(a,e,t)=>e in a?B6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,F6=(a,e)=>{for(var t in e||(e={}))Hp.call(e,t)&&a0(a,t,e[t]);if(qr)for(var t of qr(e))zp.call(e,t)&&a0(a,t,e[t]);return a},D6=(a,e)=>{var t={};for(var i in a)Hp.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&qr)for(var i of qr(a))e.indexOf(i)<0&&zp.call(a,i)&&(t[i]=a[i]);return t},ht=class a extends xt{constructor(e){super(),this.uid=Ie("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:t,glProgram:i,groups:s,resources:r,compatibleRenderers:n,groupMap:d}=e;this.gpuProgram=t,this.glProgram=i,n===void 0&&(n=0,t&&(n|=yt.WEBGPU),i&&(n|=yt.WEBGL)),this.compatibleRenderers=n;let h={};if(!r&&!s&&(r={}),r&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&s&&!d)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&s&&d)for(let l in d)for(let u in d[l]){let p=d[l][u];h[p]={group:l,binding:u,name:p}}else if(t&&s&&!d){let l=t.structsAndGroups.groups;d={},l.forEach(u=>{d[u.group]=d[u.group]||{},d[u.group][u.binding]=u.name,h[u.name]=u})}else if(r){s={},d={},t&&t.structsAndGroups.groups.forEach(u=>{d[u.group]=d[u.group]||{},d[u.group][u.binding]=u.name,h[u.name]=u});let l=0;for(let u in r)h[u]||(s[99]||(s[99]=new Ht,this._ownedBindGroups.push(s[99])),h[u]={group:99,binding:l,name:u},d[99]=d[99]||{},d[99][l]=u,l++);for(let u in r){let p=u,_=r[u];!_.source&&!_._resourceType&&(_=new et(_));let m=h[p];m&&(s[m.group]||(s[m.group]=new Ht,this._ownedBindGroups.push(s[m.group])),s[m.group].setResource(_,m.binding))}}this.groups=s,this._uniformBindMap=d,this.resources=this._buildResourceAccessor(s,h)}addResource(e,t,i){var s,r;(s=this._uniformBindMap)[t]||(s[t]={}),(r=this._uniformBindMap[t])[i]||(r[i]=e),this.groups[t]||(this.groups[t]=new Ht,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){let i={};for(let s in t){let r=t[s];Object.defineProperty(i,r.name,{get(){return e[r.group].getResource(r.binding)},set(n){e[r.group].setResource(n,r.binding)}})}return i}destroy(e=!1){var t,i;this.emit("destroy",this),e&&((t=this.gpuProgram)==null||t.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(s=>{s.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){let t=e,{gpu:i,gl:s}=t,r=D6(t,["gpu","gl"]),n,d;return i&&(n=Zt.from(i)),s&&(d=fa.from(s)),new a(F6({gpuProgram:n,glProgram:d},r))}},zd=class extends ht{constructor(e){let t=Hs({name:"batch",bits:[ml,yl(e),Vs]}),i=Xs({name:"batch",bits:[gl,_l(e),zs]});super({glProgram:t,gpuProgram:i,resources:{batchSamplers:xl(e)}})}},i0=null,Vp=class Wp extends j4{constructor(){super(...arguments),this.geometry=new Xd,this.shader=i0||(i0=new zd(this.maxTextures)),this.name=Wp.extension.name,this.vertexSize=6}packAttributes(e,t,i,s,r){let n=r<<16|e.roundPixels&65535,d=e.transform,h=d.a,l=d.b,u=d.c,p=d.d,_=d.tx,m=d.ty,{positions:v,uvs:T}=e,w=e.color,P=e.attributeOffset,C=P+e.attributeSize;for(let B=P;B<C;B++){let D=B*2,X=v[D],U=v[D+1];t[s++]=h*X+u*U+_,t[s++]=p*U+l*X+m,t[s++]=T[D],t[s++]=T[D+1],i[s++]=w,i[s++]=n}}packQuadAttributes(e,t,i,s,r){let n=e.texture,d=e.transform,h=d.a,l=d.b,u=d.c,p=d.d,_=d.tx,m=d.ty,v=e.bounds,T=v.maxX,w=v.minX,P=v.maxY,C=v.minY,B=n.uvs,D=e.color,X=r<<16|e.roundPixels&65535;t[s+0]=h*w+u*C+_,t[s+1]=p*C+l*w+m,t[s+2]=B.x0,t[s+3]=B.y0,i[s+4]=D,i[s+5]=X,t[s+6]=h*T+u*C+_,t[s+7]=p*C+l*T+m,t[s+8]=B.x1,t[s+9]=B.y1,i[s+10]=D,i[s+11]=X,t[s+12]=h*T+u*P+_,t[s+13]=p*P+l*T+m,t[s+14]=B.x2,t[s+15]=B.y2,i[s+16]=D,i[s+17]=X,t[s+18]=h*w+u*P+_,t[s+19]=p*P+l*w+m,t[s+20]=B.x3,t[s+21]=B.y3,i[s+22]=D,i[s+23]=X}};Vp.extension={type:[I.Batcher],name:"default"};var vl=Vp;function k6(a,e,t,i,s,r,n,d=null){let h=0;t*=e,s*=r;let l=d.a,u=d.b,p=d.c,_=d.d,m=d.tx,v=d.ty;for(;h<n;){let T=a[t],w=a[t+1];i[s]=l*T+p*w+m,i[s+1]=u*T+_*w+v,s+=r,t+=e,h++}}function U6(a,e,t,i){let s=0;for(e*=t;s<i;)a[e]=0,a[e+1]=0,e+=t,s++}function Yp(a,e,t,i,s){let r=e.a,n=e.b,d=e.c,h=e.d,l=e.tx,u=e.ty;t||(t=0),i||(i=2),s||(s=a.length/i-t);let p=t*i;for(let _=0;_<s;_++){let m=a[p],v=a[p+1];a[p]=r*m+d*v+l,a[p+1]=n*m+h*v+u,p+=i}}var L6=new ae,Os=class{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,i=this.renderable;return i?cp(t,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||L6}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}},N6=Object.defineProperty,j6=Object.defineProperties,X6=Object.getOwnPropertyDescriptors,s0=Object.getOwnPropertySymbols,H6=Object.prototype.hasOwnProperty,z6=Object.prototype.propertyIsEnumerable,r0=(a,e,t)=>e in a?N6(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Zr=(a,e)=>{for(var t in e||(e={}))H6.call(e,t)&&r0(a,t,e[t]);if(s0)for(var t of s0(e))z6.call(e,t)&&r0(a,t,e[t]);return a},Qr=(a,e)=>j6(a,X6(e)),Is={extension:{type:I.ShapeBuilder,name:"circle"},build(a,e){let t,i,s,r,n,d;if(a.type==="circle"){let D=a;t=D.x,i=D.y,n=d=D.radius,s=r=0}else if(a.type==="ellipse"){let D=a;t=D.x,i=D.y,n=D.halfWidth,d=D.halfHeight,s=r=0}else{let D=a,X=D.width/2,U=D.height/2;t=D.x+X,i=D.y+U,n=d=Math.max(0,Math.min(D.radius,Math.min(X,U))),s=X-n,r=U-d}if(!(n>=0&&d>=0&&s>=0&&r>=0))return e;let h=Math.ceil(2.3*Math.sqrt(n+d)),l=h*8+(s?4:0)+(r?4:0);if(l===0)return e;if(h===0)return e[0]=e[6]=t+s,e[1]=e[3]=i+r,e[2]=e[4]=t-s,e[5]=e[7]=i-r,e;let u=0,p=h*4+(s?2:0)+2,_=p,m=l,v=s+n,T=r,w=t+v,P=t-v,C=i+T;if(e[u++]=w,e[u++]=C,e[--p]=C,e[--p]=P,r){let D=i-T;e[_++]=P,e[_++]=D,e[--m]=D,e[--m]=w}for(let D=1;D<h;D++){let X=Math.PI/2*(D/h),U=s+Math.cos(X)*n,L=r+Math.sin(X)*d,ie=t+U,ne=t-U,q=i+L,Y=i-L;e[u++]=ie,e[u++]=q,e[--p]=q,e[--p]=ne,e[_++]=ne,e[_++]=Y,e[--m]=Y,e[--m]=ie}v=s,T=r+d,w=t+v,P=t-v,C=i+T;let B=i-T;return e[u++]=w,e[u++]=C,e[--m]=B,e[--m]=w,s&&(e[u++]=P,e[u++]=C,e[--m]=B,e[--m]=P),e},triangulate(a,e,t,i,s,r){if(a.length===0)return;let n=0,d=0;for(let u=0;u<a.length;u+=2)n+=a[u],d+=a[u+1];n/=a.length/2,d/=a.length/2;let h=i;e[h*t]=n,e[h*t+1]=d;let l=h++;for(let u=0;u<a.length;u+=2)e[h*t]=a[u],e[h*t+1]=a[u+1],u>0&&(s[r++]=h,s[r++]=l,s[r++]=h-1),h++;s[r++]=l+1,s[r++]=l,s[r++]=h-1}},V6=Qr(Zr({},Is),{extension:Qr(Zr({},Is.extension),{name:"ellipse"})}),W6=Qr(Zr({},Is),{extension:Qr(Zr({},Is.extension),{name:"roundedRectangle"})}),$p=1e-4,n0=1e-4;function Y6(a){let e=a.length;if(e<6)return 1;let t=0;for(let i=0,s=a[e-2],r=a[e-1];i<e;i+=2){let n=a[i],d=a[i+1];t+=(n-s)*(d+r),s=n,r=d}return t<0?-1:1}function o0(a,e,t,i,s,r,n,d){let h=a-t*s,l=e-i*s,u=a+t*r,p=e+i*r,_,m;n?(_=i,m=-t):(_=-i,m=t);let v=h+_,T=l+m,w=u+_,P=p+m;return d.push(v,T),d.push(w,P),2}function ka(a,e,t,i,s,r,n,d){let h=t-a,l=i-e,u=Math.atan2(h,l),p=Math.atan2(s-a,r-e);d&&u<p?u+=Math.PI*2:!d&&u>p&&(p+=Math.PI*2);let _=u,m=p-u,v=Math.abs(m),T=Math.sqrt(h*h+l*l),w=(15*v*Math.sqrt(T)/Math.PI>>0)+1,P=m/w;if(_+=P,d){n.push(a,e),n.push(t,i);for(let C=1,B=_;C<w;C++,B+=P)n.push(a,e),n.push(a+Math.sin(B)*T,e+Math.cos(B)*T);n.push(a,e),n.push(s,r)}else{n.push(t,i),n.push(a,e);for(let C=1,B=_;C<w;C++,B+=P)n.push(a+Math.sin(B)*T,e+Math.cos(B)*T),n.push(a,e);n.push(s,r),n.push(a,e)}return w*2}function $6(a,e,t,i,s,r){let n=$p;if(a.length===0)return;let d=e,h=d.alignment;if(e.alignment!==.5){let ve=Y6(a);t&&(ve*=-1),h=(h-.5)*ve+.5}let l=new Pe(a[0],a[1]),u=new Pe(a[a.length-2],a[a.length-1]),p=i,_=Math.abs(l.x-u.x)<n&&Math.abs(l.y-u.y)<n;if(p){a=a.slice(),_&&(a.pop(),a.pop(),u.set(a[a.length-2],a[a.length-1]));let ve=(l.x+u.x)*.5,It=(u.y+l.y)*.5;a.unshift(ve,It),a.push(ve,It)}let m=s,v=a.length/2,T=a.length,w=m.length/2,P=d.width/2,C=P*P,B=d.miterLimit*d.miterLimit,D=a[0],X=a[1],U=a[2],L=a[3],ie=0,ne=0,q=-(X-L),Y=D-U,se=0,ee=0,Ce=Math.sqrt(q*q+Y*Y);q/=Ce,Y/=Ce,q*=P,Y*=P;let Tt=h,re=(1-Tt)*2,oe=Tt*2;p||(d.cap==="round"?T+=ka(D-q*(re-oe)*.5,X-Y*(re-oe)*.5,D-q*re,X-Y*re,D+q*oe,X+Y*oe,m,!0)+2:d.cap==="square"&&(T+=o0(D,X,q,Y,re,oe,!0,m))),m.push(D-q*re,X-Y*re),m.push(D+q*oe,X+Y*oe);for(let ve=1;ve<v-1;++ve){D=a[(ve-1)*2],X=a[(ve-1)*2+1],U=a[ve*2],L=a[ve*2+1],ie=a[(ve+1)*2],ne=a[(ve+1)*2+1],q=-(X-L),Y=D-U,Ce=Math.sqrt(q*q+Y*Y),q/=Ce,Y/=Ce,q*=P,Y*=P,se=-(L-ne),ee=U-ie,Ce=Math.sqrt(se*se+ee*ee),se/=Ce,ee/=Ce,se*=P,ee*=P;let It=U-D,pa=X-L,ea=U-ie,ga=ne-L,Ui=It*ea+pa*ga,Vt=pa*ea-ga*It,ma=Vt<0;if(Math.abs(Vt)<.001*Math.abs(Ui)){m.push(U-q*re,L-Y*re),m.push(U+q*oe,L+Y*oe),Ui>=0&&(d.join==="round"?T+=ka(U,L,U-q*re,L-Y*re,U-se*re,L-ee*re,m,!1)+4:T+=2,m.push(U-se*oe,L-ee*oe),m.push(U+se*re,L+ee*re));continue}let _a=(-q+D)*(-Y+L)-(-q+U)*(-Y+X),Ga=(-se+ie)*(-ee+L)-(-se+U)*(-ee+ne),ya=(It*Ga-ea*_a)/Vt,xa=(ga*_a-pa*Ga)/Vt,Ba=(ya-U)*(ya-U)+(xa-L)*(xa-L),Gt=U+(ya-U)*re,Bt=L+(xa-L)*re,Ft=U-(ya-U)*oe,Dt=L-(xa-L)*oe,Li=Math.min(It*It+pa*pa,ea*ea+ga*ga),ai=ma?re:oe,ii=Li+ai*ai*C;Ba<=ii?d.join==="bevel"||Ba/C>B?(ma?(m.push(Gt,Bt),m.push(U+q*oe,L+Y*oe),m.push(Gt,Bt),m.push(U+se*oe,L+ee*oe)):(m.push(U-q*re,L-Y*re),m.push(Ft,Dt),m.push(U-se*re,L-ee*re),m.push(Ft,Dt)),T+=2):d.join==="round"?ma?(m.push(Gt,Bt),m.push(U+q*oe,L+Y*oe),T+=ka(U,L,U+q*oe,L+Y*oe,U+se*oe,L+ee*oe,m,!0)+4,m.push(Gt,Bt),m.push(U+se*oe,L+ee*oe)):(m.push(U-q*re,L-Y*re),m.push(Ft,Dt),T+=ka(U,L,U-q*re,L-Y*re,U-se*re,L-ee*re,m,!1)+4,m.push(U-se*re,L-ee*re),m.push(Ft,Dt)):(m.push(Gt,Bt),m.push(Ft,Dt)):(m.push(U-q*re,L-Y*re),m.push(U+q*oe,L+Y*oe),d.join==="round"?ma?T+=ka(U,L,U+q*oe,L+Y*oe,U+se*oe,L+ee*oe,m,!0)+2:T+=ka(U,L,U-q*re,L-Y*re,U-se*re,L-ee*re,m,!1)+2:d.join==="miter"&&Ba/C<=B&&(ma?(m.push(Ft,Dt),m.push(Ft,Dt)):(m.push(Gt,Bt),m.push(Gt,Bt)),T+=2),m.push(U-se*re,L-ee*re),m.push(U+se*oe,L+ee*oe),T+=2)}D=a[(v-2)*2],X=a[(v-2)*2+1],U=a[(v-1)*2],L=a[(v-1)*2+1],q=-(X-L),Y=D-U,Ce=Math.sqrt(q*q+Y*Y),q/=Ce,Y/=Ce,q*=P,Y*=P,m.push(U-q*re,L-Y*re),m.push(U+q*oe,L+Y*oe),p||(d.cap==="round"?T+=ka(U-q*(re-oe)*.5,L-Y*(re-oe)*.5,U-q*re,L-Y*re,U+q*oe,L+Y*oe,m,!1)+2:d.cap==="square"&&(T+=o0(U,L,q,Y,re,oe,!1,m)));let ki=n0*n0;for(let ve=w;ve<T+w-2;++ve)D=m[ve*2],X=m[ve*2+1],U=m[(ve+1)*2],L=m[(ve+1)*2+1],ie=m[(ve+2)*2],ne=m[(ve+2)*2+1],!(Math.abs(D*(L-ne)+U*(ne-X)+ie*(X-L))<ki)&&r.push(ve,ve+1,ve+2)}function K6(a,e,t,i){let s=$p;if(a.length===0)return;let r=a[0],n=a[1],d=a[a.length-2],h=a[a.length-1],l=e||Math.abs(r-d)<s&&Math.abs(n-h)<s,u=t,p=a.length/2,_=u.length/2;for(let m=0;m<p;m++)u.push(a[m*2]),u.push(a[m*2+1]);for(let m=0;m<p-1;m++)i.push(_+m,_+m+1);l&&i.push(_+p-1,_)}var Oo={exports:{}},tS=Oo.exports;Oo.exports=Io;var aS=Oo.exports.default=Io;function Io(a,e,t){t=t||2;var i=e&&e.length,s=i?e[0]*t:a.length,r=Kp(a,0,s,t,!0),n=[];if(!r||r.next===r.prev)return n;var d,h,l,u,p,_,m;if(i&&(r=eg(a,e,r,t)),a.length>80*t){d=l=a[0],h=u=a[1];for(var v=t;v<s;v+=t)p=a[v],_=a[v+1],p<d&&(d=p),_<h&&(h=_),p>l&&(l=p),_>u&&(u=_);m=Math.max(l-d,u-h),m=m!==0?32767/m:0}return Gs(r,n,t,d,h,m,0),n}function Kp(a,e,t,i,s){var r,n;if(s===Yd(a,e,t,i)>0)for(r=e;r<t;r+=i)n=c0(r,a[r],a[r+1],n);else for(r=t-i;r>=e;r-=i)n=c0(r,a[r],a[r+1],n);return n&&Go(n,n.next)&&(Fs(n),n=n.next),n}function $a(a,e){if(!a)return a;e||(e=a);var t=a,i;do if(i=!1,!t.steiner&&(Go(t,t.next)||De(t.prev,t,t.next)===0)){if(Fs(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Gs(a,e,t,i,s,r,n){if(a){!n&&r&&rg(a,i,s,r);for(var d=a,h,l;a.prev!==a.next;){if(h=a.prev,l=a.next,r?Z6(a,i,s,r):q6(a)){e.push(h.i/t|0),e.push(a.i/t|0),e.push(l.i/t|0),Fs(a),a=l.next,d=l.next;continue}if(a=l,a===d){n?n===1?(a=Q6($a(a),e,t),Gs(a,e,t,i,s,r,2)):n===2&&J6(a,e,t,i,s,r):Gs($a(a),e,t,i,s,r,1);break}}}}function q6(a){var e=a.prev,t=a,i=a.next;if(De(e,t,i)>=0)return!1;for(var s=e.x,r=t.x,n=i.x,d=e.y,h=t.y,l=i.y,u=s<r?s<n?s:n:r<n?r:n,p=d<h?d<l?d:l:h<l?h:l,_=s>r?s>n?s:n:r>n?r:n,m=d>h?d>l?d:l:h>l?h:l,v=i.next;v!==e;){if(v.x>=u&&v.x<=_&&v.y>=p&&v.y<=m&&_i(s,d,r,h,n,l,v.x,v.y)&&De(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Z6(a,e,t,i){var s=a.prev,r=a,n=a.next;if(De(s,r,n)>=0)return!1;for(var d=s.x,h=r.x,l=n.x,u=s.y,p=r.y,_=n.y,m=d<h?d<l?d:l:h<l?h:l,v=u<p?u<_?u:_:p<_?p:_,T=d>h?d>l?d:l:h>l?h:l,w=u>p?u>_?u:_:p>_?p:_,P=Vd(m,v,e,t,i),C=Vd(T,w,e,t,i),B=a.prevZ,D=a.nextZ;B&&B.z>=P&&D&&D.z<=C;){if(B.x>=m&&B.x<=T&&B.y>=v&&B.y<=w&&B!==s&&B!==n&&_i(d,u,h,p,l,_,B.x,B.y)&&De(B.prev,B,B.next)>=0||(B=B.prevZ,D.x>=m&&D.x<=T&&D.y>=v&&D.y<=w&&D!==s&&D!==n&&_i(d,u,h,p,l,_,D.x,D.y)&&De(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;B&&B.z>=P;){if(B.x>=m&&B.x<=T&&B.y>=v&&B.y<=w&&B!==s&&B!==n&&_i(d,u,h,p,l,_,B.x,B.y)&&De(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;D&&D.z<=C;){if(D.x>=m&&D.x<=T&&D.y>=v&&D.y<=w&&D!==s&&D!==n&&_i(d,u,h,p,l,_,D.x,D.y)&&De(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function Q6(a,e,t){var i=a;do{var s=i.prev,r=i.next.next;!Go(s,r)&&qp(s,i,i.next,r)&&Bs(s,r)&&Bs(r,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(r.i/t|0),Fs(i),Fs(i.next),i=a=r),i=i.next}while(i!==a);return $a(i)}function J6(a,e,t,i,s,r){var n=a;do{for(var d=n.next.next;d!==n.prev;){if(n.i!==d.i&&cg(n,d)){var h=Zp(n,d);n=$a(n,n.next),h=$a(h,h.next),Gs(n,e,t,i,s,r,0),Gs(h,e,t,i,s,r,0);return}d=d.next}n=n.next}while(n!==a)}function eg(a,e,t,i){var s=[],r,n,d,h,l;for(r=0,n=e.length;r<n;r++)d=e[r]*i,h=r<n-1?e[r+1]*i:a.length,l=Kp(a,d,h,i,!1),l===l.next&&(l.steiner=!0),s.push(og(l));for(s.sort(tg),r=0;r<s.length;r++)t=ag(s[r],t);return t}function tg(a,e){return a.x-e.x}function ag(a,e){var t=ig(a,e);if(!t)return e;var i=Zp(t,a);return $a(i,i.next),$a(t,t.next)}function ig(a,e){var t=e,i=a.x,s=a.y,r=-1/0,n;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){var d=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>r&&(r=d,n=t.x<t.next.x?t:t.next,d===i))return n}t=t.next}while(t!==e);if(!n)return null;var h=n,l=n.x,u=n.y,p=1/0,_;t=n;do i>=t.x&&t.x>=l&&i!==t.x&&_i(s<u?i:r,s,l,u,s<u?r:i,s,t.x,t.y)&&(_=Math.abs(s-t.y)/(i-t.x),Bs(t,a)&&(_<p||_===p&&(t.x>n.x||t.x===n.x&&sg(n,t)))&&(n=t,p=_)),t=t.next;while(t!==h);return n}function sg(a,e){return De(a.prev,a,e.prev)<0&&De(e.next,a,a.next)<0}function rg(a,e,t,i){var s=a;do s.z===0&&(s.z=Vd(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==a);s.prevZ.nextZ=null,s.prevZ=null,ng(s)}function ng(a){var e,t,i,s,r,n,d,h,l=1;do{for(t=a,a=null,r=null,n=0;t;){for(n++,i=t,d=0,e=0;e<l&&(d++,i=i.nextZ,!!i);e++);for(h=l;d>0||h>0&&i;)d!==0&&(h===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,d--):(s=i,i=i.nextZ,h--),r?r.nextZ=s:a=s,s.prevZ=r,r=s;t=i}r.nextZ=null,l*=2}while(n>1);return a}function Vd(a,e,t,i,s){return a=(a-t)*s|0,e=(e-i)*s|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function og(a){var e=a,t=a;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==a);return t}function _i(a,e,t,i,s,r,n,d){return(s-n)*(e-d)>=(a-n)*(r-d)&&(a-n)*(i-d)>=(t-n)*(e-d)&&(t-n)*(r-d)>=(s-n)*(i-d)}function cg(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!dg(a,e)&&(Bs(a,e)&&Bs(e,a)&&hg(a,e)&&(De(a.prev,a,e.prev)||De(a,e.prev,e))||Go(a,e)&&De(a.prev,a,a.next)>0&&De(e.prev,e,e.next)>0)}function De(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function Go(a,e){return a.x===e.x&&a.y===e.y}function qp(a,e,t,i){var s=gr(De(a,e,t)),r=gr(De(a,e,i)),n=gr(De(t,i,a)),d=gr(De(t,i,e));return!!(s!==r&&n!==d||s===0&&pr(a,t,e)||r===0&&pr(a,i,e)||n===0&&pr(t,a,i)||d===0&&pr(t,e,i))}function pr(a,e,t){return e.x<=Math.max(a.x,t.x)&&e.x>=Math.min(a.x,t.x)&&e.y<=Math.max(a.y,t.y)&&e.y>=Math.min(a.y,t.y)}function gr(a){return a>0?1:a<0?-1:0}function dg(a,e){var t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&qp(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}function Bs(a,e){return De(a.prev,a,a.next)<0?De(a,e,a.next)>=0&&De(a,a.prev,e)>=0:De(a,e,a.prev)<0||De(a,a.next,e)<0}function hg(a,e){var t=a,i=!1,s=(a.x+e.x)/2,r=(a.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==a);return i}function Zp(a,e){var t=new Wd(a.i,a.x,a.y),i=new Wd(e.i,e.x,e.y),s=a.next,r=e.prev;return a.next=e,e.prev=a,t.next=s,s.prev=t,i.next=t,t.prev=i,r.next=i,i.prev=r,i}function c0(a,e,t,i){var s=new Wd(a,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Fs(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Wd(a,e,t){this.i=a,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Io.deviation=function(a,e,t,i){var s=e&&e.length,r=s?e[0]*t:a.length,n=Math.abs(Yd(a,0,r,t));if(s)for(var d=0,h=e.length;d<h;d++){var l=e[d]*t,u=d<h-1?e[d+1]*t:a.length;n-=Math.abs(Yd(a,l,u,t))}var p=0;for(d=0;d<i.length;d+=3){var _=i[d]*t,m=i[d+1]*t,v=i[d+2]*t;p+=Math.abs((a[_]-a[v])*(a[m+1]-a[_+1])-(a[_]-a[m])*(a[v+1]-a[_+1]))}return n===0&&p===0?0:Math.abs((p-n)/n)};function Yd(a,e,t,i){for(var s=0,r=e,n=t-i;r<t;r+=i)s+=(a[n]-a[r])*(a[r+1]+a[n+1]),n=r;return s}Io.flatten=function(a){for(var e=a[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,s=0;s<a.length;s++){for(var r=0;r<a[s].length;r++)for(var n=0;n<e;n++)t.vertices.push(a[s][r][n]);s>0&&(i+=a[s-1].length,t.holes.push(i))}return t};var lg=Oo.exports,fg=hl(lg);function Qp(a,e,t,i,s,r,n){let d=fg(a,e,2);if(!d)return;for(let l=0;l<d.length;l+=3)r[n++]=d[l]+s,r[n++]=d[l+1]+s,r[n++]=d[l+2]+s;let h=s*i;for(let l=0;l<a.length;l+=2)t[h]=a[l],t[h+1]=a[l+1],h+=i}var ug=[],bg={extension:{type:I.ShapeBuilder,name:"polygon"},build(a,e){for(let t=0;t<a.points.length;t++)e[t]=a.points[t];return e},triangulate(a,e,t,i,s,r){Qp(a,ug,e,t,i,s,r)}},pg={extension:{type:I.ShapeBuilder,name:"rectangle"},build(a,e){let t=a,i=t.x,s=t.y,r=t.width,n=t.height;return r>=0&&n>=0&&(e[0]=i,e[1]=s,e[2]=i+r,e[3]=s,e[4]=i+r,e[5]=s+n,e[6]=i,e[7]=s+n),e},triangulate(a,e,t,i,s,r){let n=0;i*=t,e[i+n]=a[0],e[i+n+1]=a[1],n+=t,e[i+n]=a[2],e[i+n+1]=a[3],n+=t,e[i+n]=a[6],e[i+n+1]=a[7],n+=t,e[i+n]=a[4],e[i+n+1]=a[5],n+=t;let d=i/t;s[r++]=d,s[r++]=d+1,s[r++]=d+2,s[r++]=d+1,s[r++]=d+3,s[r++]=d+2}},gg={extension:{type:I.ShapeBuilder,name:"triangle"},build(a,e){return e[0]=a.x,e[1]=a.y,e[2]=a.x2,e[3]=a.y2,e[4]=a.x3,e[5]=a.y3,e},triangulate(a,e,t,i,s,r){let n=0;i*=t,e[i+n]=a[0],e[i+n+1]=a[1],n+=t,e[i+n]=a[2],e[i+n+1]=a[3],n+=t,e[i+n]=a[4],e[i+n+1]=a[5];let d=i/t;s[r++]=d,s[r++]=d+1,s[r++]=d+2}},Bo={};ue.handleByMap(I.ShapeBuilder,Bo),ue.add(pg,bg,gg,Is,V6,W6);var mg=new we;function _g(a,e){let{geometryData:t,batches:i}=e;i.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let s=0;s<a.instructions.length;s++){let r=a.instructions[s];if(r.action==="texture")yg(r.data,i,t);else if(r.action==="fill"||r.action==="stroke"){let n=r.action==="stroke",d=r.data.path.shapePath,h=r.data.style,l=r.data.hole;n&&l&&d0(l.shapePath,h,null,!0,i,t),d0(d,h,l,n,i,t)}}}function yg(a,e,t){let{vertices:i,uvs:s,indices:r}=t,n=r.length,d=i.length/2,h=[],l=Bo.rectangle,u=mg,p=a.image;u.x=a.dx,u.y=a.dy,u.width=a.dw,u.height=a.dh;let _=a.transform;l.build(u,h),_&&Yp(h,_),l.triangulate(h,i,2,d,r,n);let m=p.uvs;s.push(m.x0,m.y0,m.x1,m.y1,m.x3,m.y3,m.x2,m.y2);let v=me.get(Os);v.indexOffset=n,v.indexSize=r.length-n,v.attributeOffset=d,v.attributeSize=i.length/2-d,v.baseColor=a.style,v.alpha=a.alpha,v.texture=p,v.geometryData=t,e.push(v)}function d0(a,e,t,i,s,r){let{vertices:n,uvs:d,indices:h}=r,l=a.shapePrimitives.length-1;a.shapePrimitives.forEach(({shape:u,transform:p},_)=>{var m;let v=h.length,T=n.length/2,w=[],P=Bo[u.type],C="triangle-list";if(P.build(u,w),p&&Yp(w,p),i){let U=(m=u.closePath)!=null?m:!0,L=e;L.pixelLine?(K6(w,U,n,h),C="line-list"):$6(w,L,!1,U,n,h)}else if(t&&l===_){let U=[],L=w.slice();xg(t.shapePath).forEach(ie=>{U.push(L.length/2),L.push(...ie)}),Qp(L,U,n,2,T,h,v)}else P.triangulate(w,n,2,T,h,v);let B=d.length/2,D=e.texture;if(D!==W.WHITE){let U=e.matrix;U&&(p&&U.append(p.clone().invert()),k6(n,2,T,d,B,2,n.length/2-T,U))}else U6(d,B,2,n.length/2-T);let X=me.get(Os);X.indexOffset=v,X.indexSize=h.length-v,X.attributeOffset=T,X.attributeSize=n.length/2-T,X.baseColor=e.color,X.alpha=e.alpha,X.texture=D,X.geometryData=r,X.topology=C,s.push(X)})}function xg(a){if(!a)return[];let e=a.shapePrimitives,t=[];for(let i=0;i<e.length;i++){let s=e[i].shape,r=[];Bo[s.type].build(s,r),t.push(r)}return t}var $d=class{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}},Kd=class{constructor(){this.batcher=new vl,this.instructions=new Nr}init(){this.instructions.reset()}get geometry(){return this.batcher.geometry}},qd=class Zd{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){var t;Zd.defaultOptions.bezierSmoothness=(t=e?.bezierSmoothness)!=null?t:Zd.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let t=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){t?this._cleanGraphicsContextData(e):t=this._initContext(e),_g(e,t);let i=e.batchMode;e.customShader||i==="no-batch"?t.isBatchable=!1:i==="auto"&&(t.isBatchable=t.geometryData.vertices.length<400),e.dirty=!1}return t}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){let t=me.get(Kd),{batches:i,geometryData:s}=this._gpuContextHash[e.uid],r=s.vertices.length,n=s.indices.length;for(let u=0;u<i.length;u++)i[u].applyTransform=!1;let d=t.batcher;d.ensureAttributeBuffer(r),d.ensureIndexBuffer(n),d.begin();for(let u=0;u<i.length;u++){let p=i[u];d.add(p)}d.finish(t.instructions);let h=d.geometry;h.indexBuffer.setDataWithSize(d.indexBuffer,d.indexSize,!0),h.buffers[0].setDataWithSize(d.attributeBuffer.float32View,d.attributeSize,!0);let l=d.batches;for(let u=0;u<l.length;u++){let p=l[u];p.bindGroup=pl(p.textures.textures,p.textures.count)}return this._graphicsDataContextHash[e.uid]=t,t}_initContext(e){let t=new $d;return t.context=e,this._gpuContextHash[e.uid]=t,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){let t=this._gpuContextHash[e.uid];t.isBatchable||this._graphicsDataContextHash[e.uid]&&(me.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),t.batches&&t.batches.forEach(i=>{me.return(i)})}destroy(){for(let e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};qd.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"graphicsContext"},qd.defaultOptions={bezierSmoothness:.5};var Tl=qd,vg={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},jc=0,Xc=1,Hc=2,zc=3,Vc=4,Wc=5,Qd=class Jp{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<jc)}set blend(e){!!(this.data&1<<jc)!==e&&(this.data^=1<<jc)}get offsets(){return!!(this.data&1<<Xc)}set offsets(e){!!(this.data&1<<Xc)!==e&&(this.data^=1<<Xc)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Hc)}set culling(e){!!(this.data&1<<Hc)!==e&&(this.data^=1<<Hc)}get depthTest(){return!!(this.data&1<<zc)}set depthTest(e){!!(this.data&1<<zc)!==e&&(this.data^=1<<zc)}get depthMask(){return!!(this.data&1<<Wc)}set depthMask(e){!!(this.data&1<<Wc)!==e&&(this.data^=1<<Wc)}get clockwiseFrontFace(){return!!(this.data&1<<Vc)}set clockwiseFrontFace(e){!!(this.data&1<<Vc)!==e&&(this.data^=1<<Vc)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=vg[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){let e=new Jp;return e.depthTest=!1,e.blend=!0,e}};Qd.default2d=Qd.for2d();var Pt=Qd;function Ws(a,e,t){let i=(a>>24&255)/255;e[t++]=(a&255)/255*i,e[t++]=(a>>8&255)/255*i,e[t++]=(a>>16&255)/255*i,e[t++]=i}var Jr=class{constructor(e,t){this.state=Pt.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(e){let t=e.context,i=!!this._graphicsBatchesHash[e.uid],s=this.renderer.graphicsContext.updateGpuContext(t);return!!(s.isBatchable||i!==s.isBatchable)}addRenderable(e,t){let i=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),i.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){let t=this._graphicsBatchesHash[e.uid];if(t)for(let i=0;i<t.length;i++){let s=t[i];s._batcher.updateElement(s)}}destroyRenderable(e){this._graphicsBatchesHash[e.uid]&&this._removeBatchForRenderable(e.uid),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;let t=this.renderer,i=e.context;if(!t.graphicsContext.getGpuContext(i).batches.length)return;let s=i.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;let r=s.resources.localUniforms.uniforms;r.uTransformMatrix=e.groupTransform,r.uRound=t._roundPixels|e._roundPixels,Ws(e.groupColorAlpha,r.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){let t=!!this._graphicsBatchesHash[e.uid],i=this.renderer.graphicsContext.updateGpuContext(e.context);t&&this._removeBatchForRenderable(e.uid),i.isBatchable&&this._initBatchesForRenderable(e),e.batched=i.isBatchable}_addToBatcher(e,t){let i=this.renderer.renderPipes.batch,s=this._getBatchesForRenderable(e);for(let r=0;r<s.length;r++){let n=s[r];i.addToBatch(n,t)}}_getBatchesForRenderable(e){return this._graphicsBatchesHash[e.uid]||this._initBatchesForRenderable(e)}_initBatchesForRenderable(e){let t=e.context,i=this.renderer.graphicsContext.getGpuContext(t),s=this.renderer._roundPixels|e._roundPixels,r=i.batches.map(n=>{let d=me.get(Os);return n.copyTo(d),d.renderable=e,d.roundPixels=s,d});return this._graphicsBatchesHash[e.uid]===void 0&&e.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[e.uid]=r,r}_removeBatchForRenderable(e){this._graphicsBatchesHash[e].forEach(t=>{me.return(t)}),this._graphicsBatchesHash[e]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(let e in this._graphicsBatchesHash)this._removeBatchForRenderable(e);this._graphicsBatchesHash=null}};Jr.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"graphics"},ue.add(Jr),ue.add(Tl);var Ds=class{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){let e=this.geometry.getBuffer("aUV"),t=e.data,i=t,s=this.texture.textureMatrix;return s.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==s._updateID||this._uvUpdateId!==e._updateID)&&((!i||i.length<t.length)&&(i=this._transformedUvs=new Float32Array(t.length)),this._textureMatrixUpdateId=s._updateID,this._uvUpdateId=e._updateID,s.multiplyUvs(t,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}},en=class{constructor(e,t){this.localUniforms=new et({uTransformMatrix:{value:new ae,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new Ht({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=t,this._adaptor.init(),e.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),e.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(e){let t=this._getMeshData(e),i=t.batched,s=e.batched;if(t.batched=s,i!==s)return!0;if(s){let r=e._geometry;if(r.indices.length!==t.indexSize||r.positions.length!==t.vertexSize)return t.indexSize=r.indices.length,t.vertexSize=r.positions.length,!0;let n=this._getBatchableMesh(e);return!n._batcher.checkAndUpdateTexture(n,e.texture)}return!1}addRenderable(e,t){let i=this.renderer.renderPipes.batch,{batched:s}=this._getMeshData(e);if(s){let r=this._getBatchableMesh(e);r.texture=e._texture,r.geometry=e._geometry,i.addToBatch(r,t)}else i.break(t),t.add(e)}updateRenderable(e){if(e.batched){let t=this._gpuBatchableMeshHash[e.uid];t.setTexture(e._texture),t.geometry=e._geometry,t._batcher.updateElement(t)}}destroyRenderable(e){this._meshDataHash[e.uid]=null;let t=this._gpuBatchableMeshHash[e.uid];t&&(me.return(t),this._gpuBatchableMeshHash[e.uid]=null),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;e.state.blendMode=Ms(e.groupBlendMode,e.texture._source);let t=this.localUniforms;t.uniforms.uTransformMatrix=e.groupTransform,t.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,t.update(),Ws(e.groupColorAlpha,t.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){return this._meshDataHash[e.uid]||this._initMeshData(e)}_initMeshData(e){var t,i;return this._meshDataHash[e.uid]={batched:e.batched,indexSize:(t=e._geometry.indices)==null?void 0:t.length,vertexSize:(i=e._geometry.positions)==null?void 0:i.length},e.on("destroyed",this._destroyRenderableBound),this._meshDataHash[e.uid]}_getBatchableMesh(e){return this._gpuBatchableMeshHash[e.uid]||this._initBatchableMesh(e)}_initBatchableMesh(e){let t=me.get(Ds);return t.renderable=e,t.texture=e._texture,t.transform=e.groupTransform,t.roundPixels=this.renderer._roundPixels|e._roundPixels,this._gpuBatchableMeshHash[e.uid]=t,t}destroy(){for(let e in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[e]&&me.return(this._gpuBatchableMeshHash[e]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}};en.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"mesh"},ue.add(en);var Jd=class{execute(e,t){let i=e.state,s=e.renderer,r=t.shader||e.defaultShader;r.resources.uTexture=t.texture._source,r.resources.uniforms=e.localUniforms;let n=s.gl,d=e.getBuffers(t);s.shader.bind(r),s.state.set(i),s.geometry.bind(d.geometry,r.glProgram);let h=d.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;n.drawElements(n.TRIANGLES,t.particleChildren.length*6,h,0)}};function h0(a,e=null){let t=a*6;if(t>65535?e||(e=new Uint32Array(t)):e||(e=new Uint16Array(t)),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let i=0,s=0;i<t;i+=6,s+=4)e[i+0]=s+0,e[i+1]=s+1,e[i+2]=s+2,e[i+3]=s+0,e[i+4]=s+2,e[i+5]=s+3;return e}function Tg(a){return{dynamicUpdate:l0(a,!0),staticUpdate:l0(a,!1)}}function l0(a,e){let t=[];t.push(`

var index = 0;

for (let i = 0; i < ps.length; ++i)
{
const p = ps[i];

`);let i=0;for(let r in a){let n=a[r];if(e!==n.dynamic)continue;t.push(`offset = index + ${i}`),t.push(n.code);let d=Ca(n.format);i+=d.stride/4}t.push(`
index += stride * 4;
}
`),t.unshift(`
var stride = ${i};
`);let s=t.join(`
`);return new Function("ps","f32v","u32v",s)}var eh=class{constructor(e){this._size=0,this._generateParticleUpdateCache={};var t;let i=this._size=(t=e.size)!=null?t:1e3,s=e.properties,r=0,n=0;for(let p in s){let _=s[p],m=Ca(_.format);_.dynamic?n+=m.stride:r+=m.stride}this._dynamicStride=n/4,this._staticStride=r/4,this.staticAttributeBuffer=new Ea(i*4*r),this.dynamicAttributeBuffer=new Ea(i*4*n),this.indexBuffer=h0(i);let d=new qt,h=0,l=0;this._staticBuffer=new st({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:ye.VERTEX|ye.COPY_DST}),this._dynamicBuffer=new st({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:ye.VERTEX|ye.COPY_DST});for(let p in s){let _=s[p],m=Ca(_.format);_.dynamic?(d.addAttribute(_.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:h*4,format:_.format}),h+=m.size):(d.addAttribute(_.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:l*4,format:_.format}),l+=m.size)}d.addIndex(this.indexBuffer);let u=this.getParticleUpdate(s);this._dynamicUpload=u.dynamicUpdate,this._staticUpload=u.staticUpdate,this.geometry=d}getParticleUpdate(e){let t=Sg(e);return this._generateParticleUpdateCache[t]?this._generateParticleUpdateCache[t]:(this._generateParticleUpdateCache[t]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[t])}generateParticleUpdate(e){return Tg(e)}update(e,t){e.length>this._size&&(t=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new Ea(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new Ea(this._size*this._dynamicStride*4*4),this.indexBuffer=h0(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));let i=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,i.float32View,i.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),t){let s=this.staticAttributeBuffer;this._staticUpload(e,s.float32View,s.uint32View),this._staticBuffer.setDataWithSize(s.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}};function Sg(a){let e=[];for(let t in a){let i=a[t];e.push(t,i.code,i.dynamic?"d":"s")}return e.join("_")}var wg=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
vec4 color = texture2D(uTexture, vUV) * vColor;
gl_FragColor = color;
}`,Ag=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
float cosRotation = cos(aRotation);
float sinRotation = sin(aRotation);
float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

vec2 v = vec2(x, y);
v = v + aPosition;

gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

if(uRound == 1.0)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}

vUV = aUV;
vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,f0=`
struct ParticleUniforms {
uProjectionMatrix:mat3x3<f32>,
uColor:vec4<f32>,
uResolution:vec2<f32>,
uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>,
@location(1) color : vec4<f32>,
};
@vertex
fn mainVertex(
@location(0) aVertex: vec2<f32>,
@location(1) aPosition: vec2<f32>,
@location(2) aUV: vec2<f32>,
@location(3) aColor: vec4<f32>,
@location(4) aRotation: f32,
) -> VSOutput {

let v = vec2(
aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
) + aPosition;

let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

return VSOutput(
position,
aUV,
vColor,
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@location(1) color: vec4<f32>,
@builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

var sample = textureSample(uTexture, uSampler, uv) * color;

return sample;
}`,th=class extends ht{constructor(){let e=fa.from({vertex:Ag,fragment:wg}),t=Zt.from({fragment:{source:f0,entryPoint:"mainFragment"},vertex:{source:f0,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:t,resources:{uTexture:W.WHITE.source,uSampler:new up({}),uniforms:{uTranslationMatrix:{value:new ae,type:"mat3x3<f32>"},uColor:{value:new Se(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}},tn=class{constructor(e,t){this.state=Pt.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new et({uTranslationMatrix:{value:new ae,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=t,this.defaultShader=new th,this.state=Pt.for2d()}validateRenderable(e){return!1}addRenderable(e,t){this.renderer.renderPipes.batch.break(t),t.add(e)}getBuffers(e){return this._gpuBufferHash[e.uid]||this._initBuffer(e)}_initBuffer(e){return this._gpuBufferHash[e.uid]=new eh({size:e.particleChildren.length,properties:e._properties}),e.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[e.uid]}updateRenderable(e){}destroyRenderable(e){this._gpuBufferHash[e.uid].destroy(),this._gpuBufferHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}execute(e){let t=e.particleChildren;if(t.length===0)return;let i=this.renderer,s=this.getBuffers(e);e.texture||(e.texture=t[0].texture);let r=this.state;s.update(t,e._childrenDirty),e._childrenDirty=!1,r.blendMode=Ms(e.blendMode,e.texture._source);let n=this.localUniforms.uniforms,d=n.uTranslationMatrix;e.worldTransform.copyTo(d),d.prepend(i.globalUniforms.globalUniformData.projectionMatrix),n.uResolution=i.globalUniforms.globalUniformData.resolution,n.uRound=i._roundPixels|e._roundPixels,Ws(e.groupColorAlpha,n.uColor,0),this.adaptor.execute(this,e)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}},an=class extends tn{constructor(e){super(e,new Jd)}};an.extension={type:[I.WebGLPipes],name:"particle"};var ah=class{execute(e,t){let i=e.renderer,s=t.shader||e.defaultShader;s.groups[0]=i.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),s.groups[1]=i.texture.getTextureBindGroup(t.texture);let r=e.state,n=e.getBuffers(t);i.encoder.draw({geometry:n.geometry,shader:t.shader||e.defaultShader,state:r,size:t.particleChildren.length*6})}},sn=class extends tn{constructor(e){super(e,new ah)}};sn.extension={type:[I.WebGPUPipes],name:"particle"},ue.add(an),ue.add(sn);var Ei=class{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}};function ih(a,e){let{texture:t,bounds:i}=a;Sp(i,e._anchor,t);let s=e._style.padding;i.minX-=s,i.minY-=s,i.maxX-=s,i.maxY-=s}var rn=class{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let e in this._gpuText){let t=this._gpuText[e];if(!t)continue;let i=t.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(e){let t=this._getGpuText(e),i=e._getKey();return t.currentKey!==i}addRenderable(e,t){let i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),t._batcher.updateElement(t)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){let t=this._gpuText[e];this._renderer.canvasText.decreaseReferenceCount(t.currentKey),me.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){let t=e._getKey(),i=this._getGpuText(e),s=i.batchableSprite;i.currentKey!==t&&this._updateGpuText(e),e._didTextUpdate=!1,ih(s,e)}_updateGpuText(e){let t=this._getGpuText(e),i=t.batchableSprite;t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),t.texture=i.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e._getKey(),i.texture=t.texture}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){let t={texture:null,currentKey:"--",batchableSprite:me.get(Ei)};return t.batchableSprite.renderable=e,t.batchableSprite.transform=e.groupTransform,t.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},t.batchableSprite.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuText[e.uid]=t,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._updateText(e),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}};rn.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"text"};var sh=class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){let i=_e.get().createCanvas();i.width=e,i.height=t;let s=i.getContext("2d");return{canvas:i,context:s}}getOptimalCanvasAndContext(e,t,i=1){e=Math.ceil(e*i-1e-6),t=Math.ceil(t*i-1e-6),e=wi(e),t=wi(t);let s=(e<<17)+(t<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let r=this._canvasPool[s].pop();return r||(r=this._createCanvasAndContext(e,t)),r}returnCanvasAndContext(e){let t=e.canvas,{width:i,height:s}=t,r=(i<<17)+(s<<1);e.context.clearRect(0,0,i,s),this._canvasPool[r].push(e)}clear(){this._canvasPool={}}},ca=new sh;function u0(a,e,t){for(let i=0,s=4*t*e;i<e;++i,s+=4)if(a[s+3]!==0)return!1;return!0}function b0(a,e,t,i,s){let r=4*e;for(let n=i,d=i*r+4*t;n<=s;++n,d+=r)if(a[d+3]!==0)return!1;return!0}function Eg(a,e=1){let{width:t,height:i}=a,s=a.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");let r=s.getImageData(0,0,t,i).data,n=0,d=0,h=t-1,l=i-1;for(;d<i&&u0(r,t,d);)++d;if(d===i)return we.EMPTY;for(;u0(r,t,l);)--l;for(;b0(r,t,n,d,l);)++n;for(;b0(r,t,h,d,l);)--h;return++h,++l,new we(n/e,d/e,(h-n)/e,(l-d)/e)}var e2=class rh{constructor(e,t,i,s){this.uid=Ie("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=e,this.y0=t,this.x1=i,this.y1=s}addColorStop(e,t){return this.gradientStops.push({offset:e,color:Se.shared.setValue(t).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;let e=rh.defaultTextureSize,{gradientStops:t}=this,i=_e.get().createCanvas();i.width=e,i.height=e;let s=i.getContext("2d"),r=s.createLinearGradient(0,0,rh.defaultTextureSize,1);for(let T=0;T<t.length;T++){let w=t[T];r.addColorStop(w.offset,w.color)}s.fillStyle=r,s.fillRect(0,0,e,e),this.texture=new W({source:new Ma({resource:i,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});let{x0:n,y0:d,x1:h,y1:l}=this,u=new ae,p=h-n,_=l-d,m=Math.sqrt(p*p+_*_),v=Math.atan2(_,p);u.translate(-n,-d),u.scale(1/e,1/e),u.rotate(-v),u.scale(256/m,1),this.transform=u,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;let e=this.gradientStops.map(s=>`${s.offset}-${s.color}`).join("-"),t=this.texture.uid,i=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${e}-${t}-${i}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};e2.defaultTextureSize=256;var ks=e2,p0={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},Pi=class{constructor(e,t){this.uid=Ie("fillPattern"),this.transform=new ae,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=p0[t].addressModeU,e.source.style.addressModeV=p0[t].addressModeV)}setTransform(e){let t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}},Pg=Mg,Yc={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Rg=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function Mg(a){var e=[];return a.replace(Rg,function(t,i,s){var r=i.toLowerCase();for(s=Og(s),r=="m"&&s.length>2&&(e.push([i].concat(s.splice(0,2))),r="l",i=i=="m"?"l":"L");;){if(s.length==Yc[r])return s.unshift(i),e.push(s);if(s.length<Yc[r])throw new Error("malformed path data");e.push([i].concat(s.splice(0,Yc[r])))}}),e}var Cg=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function Og(a){var e=a.match(Cg);return e?e.map(Number):[]}var Ig=hl(Pg);function Gg(a,e){let t=Ig(a),i=[],s=null,r=0,n=0;for(let d=0;d<t.length;d++){let h=t[d],l=h[0],u=h;switch(l){case"M":r=u[1],n=u[2],e.moveTo(r,n);break;case"m":r+=u[1],n+=u[2],e.moveTo(r,n);break;case"H":r=u[1],e.lineTo(r,n);break;case"h":r+=u[1],e.lineTo(r,n);break;case"V":n=u[1],e.lineTo(r,n);break;case"v":n+=u[1],e.lineTo(r,n);break;case"L":r=u[1],n=u[2],e.lineTo(r,n);break;case"l":r+=u[1],n+=u[2],e.lineTo(r,n);break;case"C":r=u[5],n=u[6],e.bezierCurveTo(u[1],u[2],u[3],u[4],r,n);break;case"c":e.bezierCurveTo(r+u[1],n+u[2],r+u[3],n+u[4],r+u[5],n+u[6]),r+=u[5],n+=u[6];break;case"S":r=u[3],n=u[4],e.bezierCurveToShort(u[1],u[2],r,n);break;case"s":e.bezierCurveToShort(r+u[1],n+u[2],r+u[3],n+u[4]),r+=u[3],n+=u[4];break;case"Q":r=u[3],n=u[4],e.quadraticCurveTo(u[1],u[2],r,n);break;case"q":e.quadraticCurveTo(r+u[1],n+u[2],r+u[3],n+u[4]),r+=u[3],n+=u[4];break;case"T":r=u[1],n=u[2],e.quadraticCurveToShort(r,n);break;case"t":r+=u[1],n+=u[2],e.quadraticCurveToShort(r,n);break;case"A":r=u[6],n=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],r,n);break;case"a":r+=u[6],n+=u[7],e.arcToSvg(u[1],u[2],u[3],u[4],u[5],r,n);break;case"Z":case"z":e.closePath(),i.length>0&&(s=i.pop(),s?(r=s.startX,n=s.startY):(r=0,n=0)),s=null;break;default:}l!=="Z"&&l!=="z"&&s===null&&(s={startX:r,startY:n},i.push(s))}return e}var nh=class a{constructor(e=0,t=0,i=0){this.type="circle",this.x=e,this.y=t,this.radius=i}clone(){return new a(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let i=this.radius*this.radius,s=this.x-e,r=this.y-t;return s*=s,r*=r,s+r<=i}strokeContains(e,t,i,s=.5){if(this.radius===0)return!1;let r=this.x-e,n=this.y-t,d=this.radius,h=(1-s)*i,l=Math.sqrt(r*r+n*n);return l<=d+h&&l>d-(i-h)}getBounds(e){return e||(e=new we),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}},oh=class a{constructor(e=0,t=0,i=0,s=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=i,this.halfHeight=s}clone(){return new a(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,s=(t-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(e,t,i,s=.5){let{halfWidth:r,halfHeight:n}=this;if(r<=0||n<=0)return!1;let d=i*(1-s),h=i-d,l=r-h,u=n-h,p=r+d,_=n+d,m=e-this.x,v=t-this.y,T=m*m/(l*l)+v*v/(u*u),w=m*m/(p*p)+v*v/(_*_);return T>1&&w<=1}getBounds(e){return e||(e=new we),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}};function Bg(a,e,t,i,s,r){let n=a-t,d=e-i,h=s-t,l=r-i,u=n*h+d*l,p=h*h+l*l,_=-1;p!==0&&(_=u/p);let m,v;_<0?(m=t,v=i):_>1?(m=s,v=r):(m=t+_*h,v=i+_*l);let T=a-m,w=e-v;return T*T+w*w}var xs=class a{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){let i=[];for(let s=0,r=t.length;s<r;s++)i.push(t[s].x,t[s].y);t=i}this.points=t,this.closePath=!0}clone(){let e=this.points.slice(),t=new a(e);return t.closePath=this.closePath,t}contains(e,t){let i=!1,s=this.points.length/2;for(let r=0,n=s-1;r<s;n=r++){let d=this.points[r*2],h=this.points[r*2+1],l=this.points[n*2],u=this.points[n*2+1];h>t!=u>t&&e<(l-d)*((t-h)/(u-h))+d&&(i=!i)}return i}strokeContains(e,t,i,s=.5){let r=i*i,n=r*(1-s),d=r-n,{points:h}=this,l=h.length-(this.closePath?0:2);for(let u=0;u<l;u+=2){let p=h[u],_=h[u+1],m=h[(u+2)%h.length],v=h[(u+3)%h.length],T=Bg(e,t,p,_,m,v),w=Math.sign((m-p)*(t-_)-(v-_)*(e-p));if(T<=(w<0?d:n))return!0}return!1}getBounds(e){e||(e=new we);let t=this.points,i=1/0,s=-1/0,r=1/0,n=-1/0;for(let d=0,h=t.length;d<h;d+=2){let l=t[d],u=t[d+1];i=l<i?l:i,s=l>s?l:s,r=u<r?u:r,n=u>n?u:n}return e.x=i,e.width=s-i,e.y=r,e.height=n-r,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}},mr=(a,e,t,i,s,r,n)=>{let d=a-t,h=e-i,l=Math.sqrt(d*d+h*h);return l>=s-r&&l<=s+n},ch=class a{constructor(e=0,t=0,i=0,s=0,r=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=i,this.height=s,this.radius=r}getBounds(e){return e||(e=new we),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new a(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let s=e-(this.x+i),r=t-(this.y+i),n=i*i;if(s*s+r*r<=n||(s=e-(this.x+this.width-i),s*s+r*r<=n)||(r=t-(this.y+this.height-i),s*s+r*r<=n)||(s=e-(this.x+i),s*s+r*r<=n))return!0}return!1}strokeContains(e,t,i,s=.5){let{x:r,y:n,width:d,height:h,radius:l}=this,u=i*(1-s),p=i-u,_=r+l,m=n+l,v=d-l*2,T=h-l*2,w=r+d,P=n+h;return(e>=r-u&&e<=r+p||e>=w-p&&e<=w+u)&&t>=m&&t<=m+T||(t>=n-u&&t<=n+p||t>=P-p&&t<=P+u)&&e>=_&&e<=_+v?!0:e<_&&t<m&&mr(e,t,_,m,l,p,u)||e>w-l&&t<m&&mr(e,t,w-l,m,l,p,u)||e>w-l&&t>P-l&&mr(e,t,w-l,P-l,l,p,u)||e<_&&t>P-l&&mr(e,t,_,P-l,l,p,u)}},Fg=8,_r=11920929e-14,Dg=1,$c=.01,fi=0,Ua=0;function t2(a,e,t,i,s,r,n,d,h,l){let u=Math.min(.99,Math.max(0,l??Tl.defaultOptions.bezierSmoothness)),p=(Dg-u)/1;return p*=p,kg(e,t,i,s,r,n,d,h,a,p),a}function kg(a,e,t,i,s,r,n,d,h,l){dh(a,e,t,i,s,r,n,d,h,l,0),h.push(n,d)}function dh(a,e,t,i,s,r,n,d,h,l,u){if(u>Fg)return;let p=Math.PI,_=(a+t)/2,m=(e+i)/2,v=(t+s)/2,T=(i+r)/2,w=(s+n)/2,P=(r+d)/2,C=(_+v)/2,B=(m+T)/2,D=(v+w)/2,X=(T+P)/2,U=(C+D)/2,L=(B+X)/2;if(u>0){let ie=n-a,ne=d-e,q=Math.abs((t-n)*ne-(i-d)*ie),Y=Math.abs((s-n)*ne-(r-d)*ie),se,ee;if(q>_r&&Y>_r){if((q+Y)*(q+Y)<=l*(ie*ie+ne*ne)){if(fi<$c){h.push(U,L);return}let Ce=Math.atan2(r-i,s-t);if(se=Math.abs(Ce-Math.atan2(i-e,t-a)),ee=Math.abs(Math.atan2(d-r,n-s)-Ce),se>=p&&(se=2*p-se),ee>=p&&(ee=2*p-ee),se+ee<fi){h.push(U,L);return}if(Ua!==0){if(se>Ua){h.push(t,i);return}if(ee>Ua){h.push(s,r);return}}}}else if(q>_r){if(q*q<=l*(ie*ie+ne*ne)){if(fi<$c){h.push(U,L);return}if(se=Math.abs(Math.atan2(r-i,s-t)-Math.atan2(i-e,t-a)),se>=p&&(se=2*p-se),se<fi){h.push(t,i),h.push(s,r);return}if(Ua!==0&&se>Ua){h.push(t,i);return}}}else if(Y>_r){if(Y*Y<=l*(ie*ie+ne*ne)){if(fi<$c){h.push(U,L);return}if(se=Math.abs(Math.atan2(d-r,n-s)-Math.atan2(r-i,s-t)),se>=p&&(se=2*p-se),se<fi){h.push(t,i),h.push(s,r);return}if(Ua!==0&&se>Ua){h.push(s,r);return}}}else if(ie=U-(a+n)/2,ne=L-(e+d)/2,ie*ie+ne*ne<=l){h.push(U,L);return}}dh(a,e,_,m,C,B,U,L,h,l,u+1),dh(U,L,D,X,w,P,n,d,h,l,u+1)}var Ug=8,Lg=11920929e-14,Ng=1,jg=.01,g0=0;function Xg(a,e,t,i,s,r,n,d){let h=Math.min(.99,Math.max(0,d??Tl.defaultOptions.bezierSmoothness)),l=(Ng-h)/1;return l*=l,Hg(e,t,i,s,r,n,a,l),a}function Hg(a,e,t,i,s,r,n,d){hh(n,a,e,t,i,s,r,d,0),n.push(s,r)}function hh(a,e,t,i,s,r,n,d,h){if(h>Ug)return;let l=Math.PI,u=(e+i)/2,p=(t+s)/2,_=(i+r)/2,m=(s+n)/2,v=(u+_)/2,T=(p+m)/2,w=r-e,P=n-t,C=Math.abs((i-r)*P-(s-n)*w);if(C>Lg){if(C*C<=d*(w*w+P*P)){if(g0<jg){a.push(v,T);return}let B=Math.abs(Math.atan2(n-s,r-i)-Math.atan2(s-t,i-e));if(B>=l&&(B=2*l-B),B<g0){a.push(v,T);return}}}else if(w=v-(e+r)/2,P=T-(t+n)/2,w*w+P*P<=d){a.push(v,T);return}hh(a,e,t,u,p,v,T,d,h+1),hh(a,v,T,_,m,r,n,d,h+1)}function a2(a,e,t,i,s,r,n,d){let h=Math.abs(s-r);(!n&&s>r||n&&r>s)&&(h=2*Math.PI-h),d||(d=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(h/Math.PI)))),d=Math.max(d,3);let l=h/d,u=s;l*=n?-1:1;for(let p=0;p<d+1;p++){let _=Math.cos(u),m=Math.sin(u),v=e+_*i,T=t+m*i;a.push(v,T),u+=l}}function zg(a,e,t,i,s,r){let n=a[a.length-2],d=a[a.length-1]-t,h=n-e,l=s-t,u=i-e,p=Math.abs(d*u-h*l);if(p<1e-8||r===0){(a[a.length-2]!==e||a[a.length-1]!==t)&&a.push(e,t);return}let _=d*d+h*h,m=l*l+u*u,v=d*l+h*u,T=r*Math.sqrt(_)/p,w=r*Math.sqrt(m)/p,P=T*v/_,C=w*v/m,B=T*u+w*h,D=T*l+w*d,X=h*(w+P),U=d*(w+P),L=u*(T+C),ie=l*(T+C),ne=Math.atan2(U-D,X-B),q=Math.atan2(ie-D,L-B);a2(a,B+e,D+t,r,ne,q,h*l>u*d)}var vs=Math.PI*2,Kc={centerX:0,centerY:0,ang1:0,ang2:0},qc=({x:a,y:e},t,i,s,r,n,d,h)=>{a*=t,e*=i;let l=s*a-r*e,u=r*a+s*e;return h.x=l+n,h.y=u+d,h};function Vg(a,e){let t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=e===1.5707963267948966?.551915024494:t,s=Math.cos(a),r=Math.sin(a),n=Math.cos(a+e),d=Math.sin(a+e);return[{x:s-r*i,y:r+s*i},{x:n+d*i,y:d-n*i},{x:n,y:d}]}var m0=(a,e,t,i)=>{let s=a*i-e*t<0?-1:1,r=a*t+e*i;return r>1&&(r=1),r<-1&&(r=-1),s*Math.acos(r)},Wg=(a,e,t,i,s,r,n,d,h,l,u,p,_)=>{let m=Math.pow(s,2),v=Math.pow(r,2),T=Math.pow(u,2),w=Math.pow(p,2),P=m*v-m*w-v*T;P<0&&(P=0),P/=m*w+v*T,P=Math.sqrt(P)*(n===d?-1:1);let C=P*s/r*p,B=P*-r/s*u,D=l*C-h*B+(a+t)/2,X=h*C+l*B+(e+i)/2,U=(u-C)/s,L=(p-B)/r,ie=(-u-C)/s,ne=(-p-B)/r,q=m0(1,0,U,L),Y=m0(U,L,ie,ne);d===0&&Y>0&&(Y-=vs),d===1&&Y<0&&(Y+=vs),_.centerX=D,_.centerY=X,_.ang1=q,_.ang2=Y};function Yg(a,e,t,i,s,r,n,d=0,h=0,l=0){if(r===0||n===0)return;let u=Math.sin(d*vs/360),p=Math.cos(d*vs/360),_=p*(e-i)/2+u*(t-s)/2,m=-u*(e-i)/2+p*(t-s)/2;if(_===0&&m===0)return;r=Math.abs(r),n=Math.abs(n);let v=Math.pow(_,2)/Math.pow(r,2)+Math.pow(m,2)/Math.pow(n,2);v>1&&(r*=Math.sqrt(v),n*=Math.sqrt(v)),Wg(e,t,i,s,r,n,h,l,u,p,_,m,Kc);let{ang1:T,ang2:w}=Kc,{centerX:P,centerY:C}=Kc,B=Math.abs(w)/(vs/4);Math.abs(1-B)<1e-7&&(B=1);let D=Math.max(Math.ceil(B),1);w/=D;let X=a[a.length-2],U=a[a.length-1],L={x:0,y:0};for(let ie=0;ie<D;ie++){let ne=Vg(T,w),{x:q,y:Y}=qc(ne[0],r,n,p,u,P,C,L),{x:se,y:ee}=qc(ne[1],r,n,p,u,P,C,L),{x:Ce,y:Tt}=qc(ne[2],r,n,p,u,P,C,L);t2(a,X,U,q,Y,se,ee,Ce,Tt),X=Ce,U=Tt,T+=w}}function $g(a,e,t){var i;let s=(d,h)=>{let l=h.x-d.x,u=h.y-d.y,p=Math.sqrt(l*l+u*u),_=l/p,m=u/p;return{len:p,nx:_,ny:m}},r=(d,h)=>{d===0?a.moveTo(h.x,h.y):a.lineTo(h.x,h.y)},n=e[e.length-1];for(let d=0;d<e.length;d++){let h=e[d%e.length],l=(i=h.radius)!=null?i:t;if(l<=0){r(d,h),n=h;continue}let u=e[(d+1)%e.length],p=s(h,n),_=s(h,u);if(p.len<1e-4||_.len<1e-4){r(d,h),n=h;continue}let m=Math.asin(p.nx*_.ny-p.ny*_.nx),v=1,T=!1;p.nx*_.nx-p.ny*-_.ny<0?m<0?m=Math.PI+m:(m=Math.PI-m,v=-1,T=!0):m>0&&(v=-1,T=!0);let w=m/2,P,C=Math.abs(Math.cos(w)*l/Math.sin(w));C>Math.min(p.len/2,_.len/2)?(C=Math.min(p.len/2,_.len/2),P=Math.abs(C*Math.sin(w)/Math.cos(w))):P=l;let B=h.x+_.nx*C+-_.ny*P*v,D=h.y+_.ny*C+_.nx*P*v,X=Math.atan2(p.ny,p.nx)+Math.PI/2*v,U=Math.atan2(_.ny,_.nx)-Math.PI/2*v;d===0&&a.moveTo(B+Math.cos(X)*P,D+Math.sin(X)*P),a.arc(B,D,P,X,U,T),n=h}}function Kg(a,e,t,i){var s;let r=(h,l)=>Math.sqrt((h.x-l.x)**2+(h.y-l.y)**2),n=(h,l,u)=>({x:h.x+(l.x-h.x)*u,y:h.y+(l.y-h.y)*u}),d=e.length;for(let h=0;h<d;h++){let l=e[(h+1)%d],u=(s=l.radius)!=null?s:t;if(u<=0){h===0?a.moveTo(l.x,l.y):a.lineTo(l.x,l.y);continue}let p=e[h],_=e[(h+2)%d],m=r(p,l),v;if(m<1e-4)v=l;else{let P=Math.min(m/2,u);v=n(l,p,P/m)}let T=r(_,l),w;if(T<1e-4)w=l;else{let P=Math.min(T/2,u);w=n(l,_,P/T)}h===0?a.moveTo(v.x,v.y):a.lineTo(v.x,v.y),a.quadraticCurveTo(l.x,l.y,w.x,w.y,i)}}var qg=new we,lh=class{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Ze,this._graphicsPath2D=e}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();let i=this._currentPoly.points,s=i[i.length-2],r=i[i.length-1];return(s!==e||r!==t)&&i.push(e,t),this}arc(e,t,i,s,r,n){this._ensurePoly(!1);let d=this._currentPoly.points;return a2(d,e,t,i,s,r,n),this}arcTo(e,t,i,s,r){this._ensurePoly();let n=this._currentPoly.points;return zg(n,e,t,i,s,r),this}arcToSvg(e,t,i,s,r,n,d){let h=this._currentPoly.points;return Yg(h,this._currentPoly.lastX,this._currentPoly.lastY,n,d,e,t,i,s,r),this}bezierCurveTo(e,t,i,s,r,n,d){this._ensurePoly();let h=this._currentPoly;return t2(this._currentPoly.points,h.lastX,h.lastY,e,t,i,s,r,n,d),this}quadraticCurveTo(e,t,i,s,r){this._ensurePoly();let n=this._currentPoly;return Xg(this._currentPoly.points,n.lastX,n.lastY,e,t,i,s,r),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));for(let i=0;i<e.instructions.length;i++){let s=e.instructions[i];this[s.action](...s.data)}return this}finish(e=!1){this.endPoly(e)}rect(e,t,i,s,r){return this.drawShape(new we(e,t,i,s),r),this}circle(e,t,i,s){return this.drawShape(new nh(e,t,i),s),this}poly(e,t,i){let s=new xs(e);return s.closePath=t,this.drawShape(s,i),this}regularPoly(e,t,i,s,r=0,n){s=Math.max(s|0,3);let d=-1*Math.PI/2+r,h=Math.PI*2/s,l=[];for(let u=0;u<s;u++){let p=d-u*h;l.push(e+i*Math.cos(p),t+i*Math.sin(p))}return this.poly(l,!0,n),this}roundPoly(e,t,i,s,r,n=0,d){if(s=Math.max(s|0,3),r<=0)return this.regularPoly(e,t,i,s,n);let h=i*Math.sin(Math.PI/s)-.001;r=Math.min(r,h);let l=-1*Math.PI/2+n,u=Math.PI*2/s,p=(s-2)*Math.PI/s/2;for(let _=0;_<s;_++){let m=_*u+l,v=e+i*Math.cos(m),T=t+i*Math.sin(m),w=m+Math.PI+p,P=m-Math.PI-p,C=v+r*Math.cos(w),B=T+r*Math.sin(w),D=v+r*Math.cos(P),X=T+r*Math.sin(P);_===0?this.moveTo(C,B):this.lineTo(C,B),this.quadraticCurveTo(v,T,D,X,d)}return this.closePath()}roundShape(e,t,i=!1,s){return e.length<3?this:(i?Kg(this,e,t,s):$g(this,e,t),this.closePath())}filletRect(e,t,i,s,r){if(r===0)return this.rect(e,t,i,s);let n=Math.min(i,s)/2,d=Math.min(n,Math.max(-n,r)),h=e+i,l=t+s,u=d<0?-d:0,p=Math.abs(d);return this.moveTo(e,t+p).arcTo(e+u,t+u,e+p,t,p).lineTo(h-p,t).arcTo(h-u,t+u,h,t+p,p).lineTo(h,l-p).arcTo(h-u,l-u,e+i-p,l,p).lineTo(e+p,l).arcTo(e+u,l-u,e,l-p,p).closePath()}chamferRect(e,t,i,s,r,n){if(r<=0)return this.rect(e,t,i,s);let d=Math.min(r,Math.min(i,s)/2),h=e+i,l=t+s,u=[e+d,t,h-d,t,h,t+d,h,l-d,h-d,l,e+d,l,e,l-d,e,t+d];for(let p=u.length-1;p>=2;p-=2)u[p]===u[p-2]&&u[p-1]===u[p-3]&&u.splice(p-1,2);return this.poly(u,!0,n)}ellipse(e,t,i,s,r){return this.drawShape(new oh(e,t,i,s),r),this}roundRect(e,t,i,s,r,n){return this.drawShape(new ch(e,t,i,s,r),n),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let i=this._currentPoly;return i&&this.endPoly(),i=new xs,i.points.push(e,t),this._currentPoly=i,this}endPoly(e=!1){let t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new xs,e)){let t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let i=t.shape.x,s=t.shape.y;if(t.transform&&!t.transform.isIdentity()){let r=t.transform,n=i;i=r.a*i+r.c*s+r.tx,s=r.b*n+r.d*s+r.ty}this._currentPoly.points.push(i,s)}else this._currentPoly.points.push(0,0)}}buildPath(){let e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){let i=e.instructions[t];this[i.action](...i.data)}this.finish()}get bounds(){let e=this._bounds;e.clear();let t=this.shapePrimitives;for(let i=0;i<t.length;i++){let s=t[i],r=s.shape.getBounds(qg);s.transform?e.addRect(r,s.transform):e.addRect(r)}return e}},Ri=class a{constructor(e){this.instructions=[],this.uid=Ie("graphicsPath"),this._dirty=!0;var t;typeof e=="string"?Gg(e,this):this.instructions=(t=e?.slice())!=null?t:[]}get shapePath(){return this._shapePath||(this._shapePath=new lh(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,i,s,r){let n=this.instructions[this.instructions.length-1],d=this.getLastPoint(Pe.shared),h=0,l=0;if(!n||n.action!=="bezierCurveTo")h=d.x,l=d.y;else{h=n.data[2],l=n.data[3];let u=d.x,p=d.y;h=u+(u-h),l=p+(p-l)}return this.instructions.push({action:"bezierCurveTo",data:[h,l,e,t,i,s,r]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,i){let s=this.instructions[this.instructions.length-1],r=this.getLastPoint(Pe.shared),n=0,d=0;if(!s||s.action!=="quadraticCurveTo")n=r.x,d=r.y;else{n=s.data[0],d=s.data[1];let h=r.x,l=r.y;n=h+(h-n),d=l+(l-d)}return this.instructions.push({action:"quadraticCurveTo",data:[n,d,e,t,i]}),this._dirty=!0,this}rect(e,t,i,s,r){return this.instructions.push({action:"rect",data:[e,t,i,s,r]}),this._dirty=!0,this}circle(e,t,i,s){return this.instructions.push({action:"circle",data:[e,t,i,s]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,i,s,r,n,d){r||(r=s/2);let h=-1*Math.PI/2+n,l=i*2,u=Math.PI*2/l,p=[];for(let _=0;_<l;_++){let m=_%2?r:s,v=_*u+h;p.push(e+m*Math.cos(v),t+m*Math.sin(v))}return this.poly(p,!0,d),this}clone(e=!1){let t=new a;if(!e)t.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){let s=this.instructions[i];t.instructions.push({action:s.action,data:s.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;let t=e.a,i=e.b,s=e.c,r=e.d,n=e.tx,d=e.ty,h=0,l=0,u=0,p=0,_=0,m=0,v=0,T=0;for(let w=0;w<this.instructions.length;w++){let P=this.instructions[w],C=P.data;switch(P.action){case"moveTo":case"lineTo":h=C[0],l=C[1],C[0]=t*h+s*l+n,C[1]=i*h+r*l+d;break;case"bezierCurveTo":u=C[0],p=C[1],_=C[2],m=C[3],h=C[4],l=C[5],C[0]=t*u+s*p+n,C[1]=i*u+r*p+d,C[2]=t*_+s*m+n,C[3]=i*_+r*m+d,C[4]=t*h+s*l+n,C[5]=i*h+r*l+d;break;case"quadraticCurveTo":u=C[0],p=C[1],h=C[2],l=C[3],C[0]=t*u+s*p+n,C[1]=i*u+r*p+d,C[2]=t*h+s*l+n,C[3]=i*h+r*l+d;break;case"arcToSvg":h=C[5],l=C[6],v=C[0],T=C[1],C[0]=t*v+s*T,C[1]=i*v+r*T,C[5]=t*h+s*l+n,C[6]=i*h+r*l+d;break;case"circle":C[4]=rs(C[3],e);break;case"rect":C[4]=rs(C[4],e);break;case"ellipse":C[8]=rs(C[8],e);break;case"roundRect":C[5]=rs(C[5],e);break;case"addPath":C[0].transform(e);break;case"poly":C[2]=rs(C[2],e);break;default:break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,i=this.instructions[t];if(!i)return e.x=0,e.y=0,e;for(;i.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;i=this.instructions[t]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e);break}return e}};function rs(a,e){return a?a.prepend(e):e.clone()}var Zg=Object.defineProperty,_0=Object.getOwnPropertySymbols,Qg=Object.prototype.hasOwnProperty,Jg=Object.prototype.propertyIsEnumerable,y0=(a,e,t)=>e in a?Zg(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,yr=(a,e)=>{for(var t in e||(e={}))Qg.call(e,t)&&y0(a,t,e[t]);if(_0)for(var t of _0(e))Jg.call(e,t)&&y0(a,t,e[t]);return a};function em(a,e){if(typeof a=="string"){let i=document.createElement("div");i.innerHTML=a.trim(),a=i.querySelector("svg")}let t={context:e,path:new Ri};return i2(a,t,null,null),e}function i2(a,e,t,i){let s=a.children,{fillStyle:r,strokeStyle:n}=tm(a);r&&t?t=yr(yr({},t),r):r&&(t=r),n&&i?i=yr(yr({},i),n):n&&(i=n),e.context.fillStyle=t,e.context.strokeStyle=i;let d,h,l,u,p,_,m,v,T,w,P,C,B,D,X,U,L;switch(a.nodeName.toLowerCase()){case"path":D=a.getAttribute("d"),X=new Ri(D),e.context.path(X),t&&e.context.fill(),i&&e.context.stroke();break;case"circle":m=Ke(a,"cx",0),v=Ke(a,"cy",0),T=Ke(a,"r",0),e.context.ellipse(m,v,T,T),t&&e.context.fill(),i&&e.context.stroke();break;case"rect":d=Ke(a,"x",0),h=Ke(a,"y",0),U=Ke(a,"width",0),L=Ke(a,"height",0),w=Ke(a,"rx",0),P=Ke(a,"ry",0),w||P?e.context.roundRect(d,h,U,L,w||P):e.context.rect(d,h,U,L),t&&e.context.fill(),i&&e.context.stroke();break;case"ellipse":m=Ke(a,"cx",0),v=Ke(a,"cy",0),w=Ke(a,"rx",0),P=Ke(a,"ry",0),e.context.beginPath(),e.context.ellipse(m,v,w,P),t&&e.context.fill(),i&&e.context.stroke();break;case"line":l=Ke(a,"x1",0),u=Ke(a,"y1",0),p=Ke(a,"x2",0),_=Ke(a,"y2",0),e.context.beginPath(),e.context.moveTo(l,u),e.context.lineTo(p,_),i&&e.context.stroke();break;case"polygon":B=a.getAttribute("points"),C=B.match(/\d+/g).map(ie=>parseInt(ie,10)),e.context.poly(C,!0),t&&e.context.fill(),i&&e.context.stroke();break;case"polyline":B=a.getAttribute("points"),C=B.match(/\d+/g).map(ie=>parseInt(ie,10)),e.context.poly(C,!1),i&&e.context.stroke();break;case"g":case"svg":break;default:break}for(let ie=0;ie<s.length;ie++)i2(s[ie],e,t,i)}function Ke(a,e,t){let i=a.getAttribute(e);return i?Number(i):t}function tm(a){let e=a.getAttribute("style"),t={},i={},s=!1,r=!1;if(e){let n=e.split(";");for(let d=0;d<n.length;d++){let h=n[d],[l,u]=h.split(":");switch(l){case"stroke":u!=="none"&&(t.color=Se.shared.setValue(u).toNumber(),r=!0);break;case"stroke-width":t.width=Number(u);break;case"fill":u!=="none"&&(s=!0,i.color=Se.shared.setValue(u).toNumber());break;case"fill-opacity":i.alpha=Number(u);break;case"stroke-opacity":t.alpha=Number(u);break;case"opacity":i.alpha=Number(u),t.alpha=Number(u);break}}}else{let n=a.getAttribute("stroke");n&&n!=="none"&&(r=!0,t.color=Se.shared.setValue(n).toNumber(),t.width=Ke(a,"stroke-width",1));let d=a.getAttribute("fill");d&&d!=="none"&&(s=!0,i.color=Se.shared.setValue(d).toNumber())}return{strokeStyle:r?t:null,fillStyle:s?i:null}}var am=Object.defineProperty,nn=Object.getOwnPropertySymbols,s2=Object.prototype.hasOwnProperty,r2=Object.prototype.propertyIsEnumerable,x0=(a,e,t)=>e in a?am(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,la=(a,e)=>{for(var t in e||(e={}))s2.call(e,t)&&x0(a,t,e[t]);if(nn)for(var t of nn(e))r2.call(e,t)&&x0(a,t,e[t]);return a},im=(a,e)=>{var t={};for(var i in a)s2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&nn)for(var i of nn(a))e.indexOf(i)<0&&r2.call(a,i)&&(t[i]=a[i]);return t};function sm(a){return Se.isColorLike(a)}function v0(a){return a instanceof Pi}function T0(a){return a instanceof ks}function rm(a,e,t){let i=Se.shared.setValue(e??0);return a.color=i.toNumber(),a.alpha=i.alpha===1?t.alpha:i.alpha,a.texture=W.WHITE,la(la({},t),a)}function S0(a,e,t){return a.fill=e,a.color=16777215,a.texture=e.texture,a.matrix=e.transform,la(la({},t),a)}function w0(a,e,t){return e.buildLinearGradient(),a.fill=e,a.color=16777215,a.texture=e.texture,a.matrix=e.transform,la(la({},t),a)}function nm(a,e){var t;let i=la(la({},e),a);if(i.texture){if(i.texture!==W.WHITE){let n=((t=i.matrix)==null?void 0:t.clone().invert())||new ae;n.translate(i.texture.frame.x,i.texture.frame.y),n.scale(1/i.texture.source.width,1/i.texture.source.height),i.matrix=n}let r=i.texture.source.style;r.addressMode==="clamp-to-edge"&&(r.addressMode="repeat",r.update())}let s=Se.shared.setValue(i.color);return i.alpha*=s.alpha,i.color=s.toNumber(),i.matrix=i.matrix?i.matrix.clone():null,i}function Wa(a,e){if(a==null)return null;let t={},i=a;return sm(a)?rm(t,a,e):v0(a)?S0(t,a,e):T0(a)?w0(t,a,e):i.fill&&v0(i.fill)?S0(i,i.fill,e):i.fill&&T0(i.fill)?w0(i,i.fill,e):nm(i,e)}function on(a,e){let t=e,{width:i,alignment:s,miterLimit:r,cap:n,join:d,pixelLine:h}=t,l=im(t,["width","alignment","miterLimit","cap","join","pixelLine"]),u=Wa(a,l);return u?la({width:i,alignment:s,miterLimit:r,cap:n,join:d,pixelLine:h},u):null}var om=Object.defineProperty,A0=Object.getOwnPropertySymbols,cm=Object.prototype.hasOwnProperty,dm=Object.prototype.propertyIsEnumerable,E0=(a,e,t)=>e in a?om(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ui=(a,e)=>{for(var t in e||(e={}))cm.call(e,t)&&E0(a,t,e[t]);if(A0)for(var t of A0(e))dm.call(e,t)&&E0(a,t,e[t]);return a},hm=new Pe,P0=new ae,fh=class $t extends xt{constructor(){super(...arguments),this.uid=Ie("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Ri,this._transform=new ae,this._fillStyle=ui({},$t.defaultFillStyle),this._strokeStyle=ui({},$t.defaultStrokeStyle),this._stateStack=[],this._tick=0,this._bounds=new Ze,this._boundsDirty=!0}clone(){let e=new $t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle=ui({},this._fillStyle),e._strokeStyle=ui({},this._strokeStyle),e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Wa(e,$t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=on(e,$t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Wa(e,$t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Wa(e,$t.defaultStrokeStyle),this}texture(e,t,i,s,r,n){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:s||0,dw:r||e.frame.width,dh:n||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?Se.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Ri,this}fill(e,t){let i,s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?i=s.data.path:i=this._activePath.clone(),i?(e!=null&&(t!==void 0&&typeof e=="number"&&(e={color:e,alpha:t}),this._fillStyle=Wa(e,$t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){let{x:e,y:t}=this._activePath.getLastPoint(Pe.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t,i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?t=i.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=on(e,$t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){let t=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(i);else{t.data.hole=i;break}}return this._initNextPathLocation(),this}arc(e,t,i,s,r,n){this._tick++;let d=this._transform;return this._activePath.arc(d.a*e+d.c*t+d.tx,d.b*e+d.d*t+d.ty,i,s,r,n),this}arcTo(e,t,i,s,r){this._tick++;let n=this._transform;return this._activePath.arcTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty,n.a*i+n.c*s+n.tx,n.b*i+n.d*s+n.ty,r),this}arcToSvg(e,t,i,s,r,n,d){this._tick++;let h=this._transform;return this._activePath.arcToSvg(e,t,i,s,r,h.a*n+h.c*d+h.tx,h.b*n+h.d*d+h.ty),this}bezierCurveTo(e,t,i,s,r,n,d){this._tick++;let h=this._transform;return this._activePath.bezierCurveTo(h.a*e+h.c*t+h.tx,h.b*e+h.d*t+h.ty,h.a*i+h.c*s+h.tx,h.b*i+h.d*s+h.ty,h.a*r+h.c*n+h.tx,h.b*r+h.d*n+h.ty,d),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,t,i,s){return this._tick++,this._activePath.ellipse(e,t,i,s,this._transform.clone()),this}circle(e,t,i){return this._tick++,this._activePath.circle(e,t,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;let i=this._transform;return this._activePath.lineTo(i.a*e+i.c*t+i.tx,i.b*e+i.d*t+i.ty),this}moveTo(e,t){this._tick++;let i=this._transform,s=this._activePath.instructions,r=i.a*e+i.c*t+i.tx,n=i.b*e+i.d*t+i.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=r,s[0].data[1]=n,this):(this._activePath.moveTo(r,n),this)}quadraticCurveTo(e,t,i,s,r){this._tick++;let n=this._transform;return this._activePath.quadraticCurveTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty,n.a*i+n.c*s+n.tx,n.b*i+n.d*s+n.ty,r),this}rect(e,t,i,s){return this._tick++,this._activePath.rect(e,t,i,s,this._transform.clone()),this}roundRect(e,t,i,s,r){return this._tick++,this._activePath.roundRect(e,t,i,s,r,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,i,s,r=0,n){return this._tick++,this._activePath.regularPoly(e,t,i,s,r,n),this}roundPoly(e,t,i,s,r,n){return this._tick++,this._activePath.roundPoly(e,t,i,s,r,n),this}roundShape(e,t,i,s){return this._tick++,this._activePath.roundShape(e,t,i,s),this}filletRect(e,t,i,s,r){return this._tick++,this._activePath.filletRect(e,t,i,s,r),this}chamferRect(e,t,i,s,r,n){return this._tick++,this._activePath.chamferRect(e,t,i,s,r,n),this}star(e,t,i,s,r=0,n=0){return this._tick++,this._activePath.star(e,t,i,s,r,n,this._transform.clone()),this}svg(e){return this._tick++,em(e,this),this}restore(){let e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:ui({},this._fillStyle),strokeStyle:ui({},this._strokeStyle)}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,i,s,r,n){return e instanceof ae?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,i,s,r,n),this)}transform(e,t,i,s,r,n){return e instanceof ae?(this._transform.append(e),this):(P0.set(e,t,i,s,r,n),this._transform.append(P0),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){let i=this.instructions[t],s=i.action;if(s==="fill"){let r=i.data;e.addBounds(r.path.bounds)}else if(s==="texture"){let r=i.data;e.addFrame(r.dx,r.dy,r.dx+r.dw,r.dy+r.dh,r.transform)}if(s==="stroke"){let r=i.data,n=r.style.alignment,d=r.style.width*(1-n),h=r.path.bounds;e.addFrame(h.minX-d,h.minY-d,h.maxX+d,h.maxY+d)}}return e}containsPoint(e){var t;if(!this.bounds.containsPoint(e.x,e.y))return!1;let i=this.instructions,s=!1;for(let r=0;r<i.length;r++){let n=i[r],d=n.data,h=d.path;if(!n.action||!h)continue;let l=d.style,u=h.shapePath.shapePrimitives;for(let p=0;p<u.length;p++){let _=u[p].shape;if(!l||!_)continue;let m=u[p].transform,v=m?m.applyInverse(e,hm):e;if(n.action==="fill")s=_.contains(v.x,v.y);else{let w=l;s=_.strokeContains(v.x,v.y,w.width,w.alignment)}let T=d.hole;if(T){let w=(t=T.shapePath)==null?void 0:t.shapePrimitives;if(w)for(let P=0;P<w.length;P++)w[P].shape.contains(v.x,v.y)&&(s=!1)}if(s)return!0}}return s}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(t),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(t)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};fh.defaultFillStyle={color:16777215,alpha:1,texture:W.WHITE,matrix:null,fill:null},fh.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:W.WHITE,matrix:null,fill:null,pixelLine:!1};var dt=fh,R0=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function n2(a){let e=[],t=0;for(let i=0;i<R0.length;i++){let s=`_${R0[i]}`;e[t++]=a[s]}return t=o2(a._fill,e,t),t=lm(a._stroke,e,t),t=fm(a.dropShadow,e,t),e.join("-")}function o2(a,e,t){var i;return a&&(e[t++]=a.color,e[t++]=a.alpha,e[t++]=(i=a.fill)==null?void 0:i.styleKey),t}function lm(a,e,t){return a&&(t=o2(a,e,t),e[t++]=a.width,e[t++]=a.alignment,e[t++]=a.cap,e[t++]=a.join,e[t++]=a.miterLimit),t}function fm(a,e,t){return a&&(e[t++]=a.alpha,e[t++]=a.angle,e[t++]=a.blur,e[t++]=a.distance,e[t++]=Se.shared.setValue(a.color).toNumber()),t}var um=Object.defineProperty,bm=Object.defineProperties,pm=Object.getOwnPropertyDescriptors,M0=Object.getOwnPropertySymbols,gm=Object.prototype.hasOwnProperty,mm=Object.prototype.propertyIsEnumerable,C0=(a,e,t)=>e in a?um(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ut=(a,e)=>{for(var t in e||(e={}))gm.call(e,t)&&C0(a,t,e[t]);if(M0)for(var t of M0(e))mm.call(e,t)&&C0(a,t,e[t]);return a},_m=(a,e)=>bm(a,pm(e)),uh=class mi extends xt{constructor(e={}){super(),ym(e);let t=ut(ut({},mi.defaultTextStyle),e);for(let i in t){let s=i;this[s]=t[i]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy(ut(ut({},mi.defaultDropShadow),e)):this._dropShadow=e?this._createProxy(ut({},mi.defaultDropShadow)):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy(ut(ut({},dt.defaultFillStyle),e),()=>{this._fill=Wa(ut({},this._originalFill),dt.defaultFillStyle)})),this._fill=Wa(e===0?"black":e,dt.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy(ut(ut({},dt.defaultStrokeStyle),e),()=>{this._stroke=on(ut({},this._originalStroke),dt.defaultStrokeStyle)})),this._stroke=on(e,dt.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=n2(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let e=mi.defaultTextStyle;for(let t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new mi({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?ut({},this._dropShadow):null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var t,i,s,r;if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){let n=typeof e=="boolean"?e:e?.textureSource;(t=this._fill)!=null&&t.texture&&this._fill.texture.destroy(n),(i=this._originalFill)!=null&&i.texture&&this._originalFill.texture.destroy(n),(s=this._stroke)!=null&&s.texture&&this._stroke.texture.destroy(n),(r=this._originalStroke)!=null&&r.texture&&this._originalStroke.texture.destroy(n)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(i,s,r)=>(i[s]=r,t?.(s,r),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(Se.isColorLike(e)||e instanceof ks||e instanceof Pi)}};uh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},uh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var Rt=uh;function ym(a){var e,t,i,s,r;let n=a;if(typeof n.dropShadow=="boolean"&&n.dropShadow){let d=Rt.defaultDropShadow;a.dropShadow={alpha:(e=n.dropShadowAlpha)!=null?e:d.alpha,angle:(t=n.dropShadowAngle)!=null?t:d.angle,blur:(i=n.dropShadowBlur)!=null?i:d.blur,color:(s=n.dropShadowColor)!=null?s:d.color,distance:(r=n.dropShadowDistance)!=null?r:d.distance}}if(n.strokeThickness!==void 0){let d=n.stroke,h={};if(Se.isColorLike(d))h.color=d;else if(d instanceof ks||d instanceof Pi)h.fill=d;else if(Object.hasOwnProperty.call(d,"color")||Object.hasOwnProperty.call(d,"fill"))h=d;else throw new Error("Invalid stroke value.");a.stroke=_m(ut({},h),{width:n.strokeThickness})}if(Array.isArray(n.fillGradientStops)){let d;a.fontSize==null?a.fontSize=Rt.defaultTextStyle.fontSize:typeof a.fontSize=="string"?d=parseInt(a.fontSize,10):d=a.fontSize;let h=new ks(0,0,0,d*1.7),l=n.fillGradientStops.map(u=>Se.shared.setValue(u).toNumber());l.forEach((u,p)=>{let _=p/(l.length-1);h.addColorStop(_,u)}),a.fill={fill:h}}}var xm=new Ze;function c2(a,e,t,i){let s=xm;s.minX=0,s.minY=0,s.maxX=a.width/i|0,s.maxY=a.height/i|0;let r=Ve.getOptimalTexture(s.width,s.height,i,!1);return r.source.uploadMethodId="image",r.source.resource=a,r.source.alphaMode="premultiply-alpha-on-upload",r.frame.width=e/i,r.frame.height=t/i,r.source.emit("update",r.source),r.updateUvs(),r}var vm=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function cn(a){let e=typeof a.fontSize=="number"?`${a.fontSize}px`:a.fontSize,t=a.fontFamily;Array.isArray(a.fontFamily)||(t=a.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let s=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!vm.includes(s)&&(s=`"${s}"`),t[i]=s}return`${a.fontStyle} ${a.fontVariant} ${a.fontWeight} ${e} ${t.join(",")}`}var Zc={willReadFrequently:!0},jt=class J{static get experimentalLetterSpacingSupported(){let e=J._experimentalLetterSpacingSupported;if(e!==void 0){let t=_e.get().getCanvasRenderingContext2D().prototype;e=J._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,s,r,n,d,h,l){this.text=e,this.style=t,this.width=i,this.height=s,this.lines=r,this.lineWidths=n,this.lineHeight=d,this.maxLineWidth=h,this.fontProperties=l}static measureText(e=" ",t,i=J._canvas,s=t.wordWrap){var r;let n=`${e}:${t.styleKey}`;if(J._measurementCache[n])return J._measurementCache[n];let d=cn(t),h=J.measureFont(d);h.fontSize===0&&(h.fontSize=t.fontSize,h.ascent=t.fontSize);let l=J.__context;l.font=d;let u=(s?J._wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),p=new Array(u.length),_=0;for(let P=0;P<u.length;P++){let C=J._measureText(u[P],t.letterSpacing,l);p[P]=C,_=Math.max(_,C)}let m=((r=t._stroke)==null?void 0:r.width)||0,v=_+m;t.dropShadow&&(v+=t.dropShadow.distance);let T=t.lineHeight||h.fontSize,w=Math.max(T,h.fontSize+m)+(u.length-1)*(T+t.leading);return t.dropShadow&&(w+=t.dropShadow.distance),new J(e,t,v,w,u,p,T+t.leading,_,h)}static _measureText(e,t,i){let s=!1;J.experimentalLetterSpacingSupported&&(J.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let r=i.measureText(e),n=r.width,d=-r.actualBoundingBoxLeft,h=r.actualBoundingBoxRight-d;if(n>0)if(s)n-=t,h-=t;else{let l=(J.graphemeSegmenter(e).length-1)*t;n+=l,h+=l}return Math.max(n,h)}static _wordWrap(e,t,i=J._canvas){let s=i.getContext("2d",Zc),r=0,n="",d="",h=Object.create(null),{letterSpacing:l,whiteSpace:u}=t,p=J._collapseSpaces(u),_=J._collapseNewlines(u),m=!p,v=t.wordWrapWidth+l,T=J._tokenize(e);for(let w=0;w<T.length;w++){let P=T[w];if(J._isNewline(P)){if(!_){d+=J._addLine(n),m=!p,n="",r=0;continue}P=" "}if(p){let B=J.isBreakingSpace(P),D=J.isBreakingSpace(n[n.length-1]);if(B&&D)continue}let C=J._getFromCache(P,l,h,s);if(C>v)if(n!==""&&(d+=J._addLine(n),n="",r=0),J.canBreakWords(P,t.breakWords)){let B=J.wordWrapSplit(P);for(let D=0;D<B.length;D++){let X=B[D],U=X,L=1;for(;B[D+L];){let ne=B[D+L];if(!J.canBreakChars(U,ne,P,D,t.breakWords))X+=ne;else break;U=ne,L++}D+=L-1;let ie=J._getFromCache(X,l,h,s);ie+r>v&&(d+=J._addLine(n),m=!1,n="",r=0),n+=X,r+=ie}}else{n.length>0&&(d+=J._addLine(n),n="",r=0);let B=w===T.length-1;d+=J._addLine(P,!B),m=!1,n="",r=0}else C+r>v&&(m=!1,d+=J._addLine(n),n="",r=0),(n.length>0||!J.isBreakingSpace(P)||m)&&(n+=P,r+=C)}return d+=J._addLine(n,!1),d}static _addLine(e,t=!0){return e=J._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,i,s){let r=i[e];return typeof r!="number"&&(r=J._measureText(e,t,s)+t,i[e]=r),r}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){let i=e[t];if(!J.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:J._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:J._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let t=[],i="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){let r=e[s],n=e[s+1];if(J.isBreakingSpace(r,n)||J._isNewline(r)){i!==""&&(t.push(i),i=""),t.push(r);continue}i+=r}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,s,r){return!0}static wordWrapSplit(e){return J.graphemeSegmenter(e)}static measureFont(e){if(J._fonts[e])return J._fonts[e];let t=J._context;t.font=e;let i=t.measureText(J.METRICS_STRING+J.BASELINE_SYMBOL),s={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return J._fonts[e]=s,s}static clearMetrics(e=""){e?delete J._fonts[e]:J._fonts={}}static get _canvas(){if(!J.__canvas){let e;try{let t=new OffscreenCanvas(0,0),i=t.getContext("2d",Zc);if(i!=null&&i.measureText)return J.__canvas=t,t;e=_e.get().createCanvas()}catch{e=_e.get().createCanvas()}e.width=e.height=10,J.__canvas=e}return J.__canvas}static get _context(){return J.__context||(J.__context=J._canvas.getContext("2d",Zc)),J.__context}};jt.METRICS_STRING="|\xC9q\xC5",jt.BASELINE_SYMBOL="M",jt.BASELINE_MULTIPLIER=1.4,jt.HEIGHT_MULTIPLIER=2,jt.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let a=new Intl.Segmenter;return e=>[...a.segment(e)].map(t=>t.segment)}return a=>[...a]})(),jt.experimentalLetterSpacing=!1,jt._fonts={},jt._newlines=[10,13],jt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],jt._measurementCache={};var na=jt;function dn(a,e){var t;if(a.texture===W.WHITE&&!a.fill)return Se.shared.setValue(a.color).setAlpha((t=a.alpha)!=null?t:1).toHexa();if(a.fill){if(a.fill instanceof Pi){let i=a.fill,s=e.createPattern(i.texture.source.resource,"repeat"),r=i.transform.copyTo(ae.shared);return r.scale(i.texture.frame.width,i.texture.frame.height),s.setTransform(r),s}else if(a.fill instanceof ks){let i=a.fill;if(i.type==="linear"){let s=e.createLinearGradient(i.x0,i.y0,i.x1,i.y1);return i.gradientStops.forEach(r=>{s.addColorStop(r.offset,Se.shared.setValue(r.color).toHex())}),s}}}else{let i=e.createPattern(a.texture.source.resource,"repeat"),s=a.matrix.copyTo(ae.shared);return s.scale(a.texture.frame.width,a.texture.frame.height),i.setTransform(s),i}return"red"}var hn=class{constructor(e){this._activeTextures={},this._renderer=e}getTextureSize(e,t,i){let s=na.measureText(e||" ",i),r=Math.ceil(Math.ceil(Math.max(1,s.width)+i.padding*2)*t),n=Math.ceil(Math.ceil(Math.max(1,s.height)+i.padding*2)*t);return r=Math.ceil(r-1e-6),n=Math.ceil(n-1e-6),r=wi(r),n=wi(n),{width:r,height:n}}getTexture(e,t,i,s){typeof e=="string"&&(e={text:e,style:i,resolution:t}),e.style instanceof Rt||(e.style=new Rt(e.style));let{texture:r,canvasAndContext:n}=this.createTextureAndCanvas(e);return this._renderer.texture.initSource(r._source),ca.returnCanvasAndContext(n),r}createTextureAndCanvas(e){var t;let{text:i,style:s}=e,r=(t=e.resolution)!=null?t:this._renderer.resolution,n=na.measureText(i||" ",s),d=Math.ceil(Math.ceil(Math.max(1,n.width)+s.padding*2)*r),h=Math.ceil(Math.ceil(Math.max(1,n.height)+s.padding*2)*r),l=ca.getOptimalCanvasAndContext(d,h),{canvas:u}=l;this.renderTextToCanvas(i,s,r,l);let p=c2(u,d,h,r);if(s.trim){let _=Eg(u,r);p.frame.copyFrom(_),p.updateUvs()}return{texture:p,canvasAndContext:l}}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;let t=e._getKey();if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;let{texture:i,canvasAndContext:s}=this.createTextureAndCanvas(e);return this._activeTextures[t]={canvasAndContext:s,texture:i,usageCount:1},i}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){let t=this._activeTextures[e];if(t.usageCount--,t.usageCount===0){ca.returnCanvasAndContext(t.canvasAndContext),Ve.returnTexture(t.texture);let i=t.texture.source;i.resource=null,i.uploadMethodId="unknown",i.alphaMode="no-premultiply-alpha",this._activeTextures[e]=null}}getReferenceCount(e){return this._activeTextures[e].usageCount}renderTextToCanvas(e,t,i,s){var r,n,d,h,l;let{canvas:u,context:p}=s,_=cn(t),m=na.measureText(e||" ",t),v=m.lines,T=m.lineHeight,w=m.lineWidths,P=m.maxLineWidth,C=m.fontProperties,B=u.height;if(p.resetTransform(),p.scale(i,i),p.textBaseline=t.textBaseline,(r=t._stroke)!=null&&r.width){let L=t._stroke;p.lineWidth=L.width,p.miterLimit=L.miterLimit,p.lineJoin=L.join,p.lineCap=L.cap}p.font=_;let D,X,U=t.dropShadow?2:1;for(let L=0;L<U;++L){let ie=t.dropShadow&&L===0,ne=ie?Math.ceil(Math.max(1,B)+t.padding*2):0,q=ne*i;if(ie){p.fillStyle="black",p.strokeStyle="black";let ee=t.dropShadow,Ce=ee.color,Tt=ee.alpha;p.shadowColor=Se.shared.setValue(Ce).setAlpha(Tt).toRgbaString();let re=ee.blur*i,oe=ee.distance*i;p.shadowBlur=re,p.shadowOffsetX=Math.cos(ee.angle)*oe,p.shadowOffsetY=Math.sin(ee.angle)*oe+q}else p.fillStyle=t._fill?dn(t._fill,p):null,(n=t._stroke)!=null&&n.width&&(p.strokeStyle=dn(t._stroke,p)),p.shadowColor="black";let Y=(T-C.fontSize)/2;T-C.fontSize<0&&(Y=0);let se=(h=(d=t._stroke)==null?void 0:d.width)!=null?h:0;for(let ee=0;ee<v.length;ee++)D=se/2,X=se/2+ee*T+C.ascent+Y,t.align==="right"?D+=P-w[ee]:t.align==="center"&&(D+=(P-w[ee])/2),(l=t._stroke)!=null&&l.width&&this._drawLetterSpacing(v[ee],t,s,D+t.padding,X+t.padding-ne,!0),t._fill!==void 0&&this._drawLetterSpacing(v[ee],t,s,D+t.padding,X+t.padding-ne)}}_drawLetterSpacing(e,t,i,s,r,n=!1){let{context:d}=i,h=t.letterSpacing,l=!1;if(na.experimentalLetterSpacingSupported&&(na.experimentalLetterSpacing?(d.letterSpacing=`${h}px`,d.textLetterSpacing=`${h}px`,l=!0):(d.letterSpacing="0px",d.textLetterSpacing="0px")),h===0||l){n?d.strokeText(e,s,r):d.fillText(e,s,r);return}let u=s,p=na.graphemeSegmenter(e),_=d.measureText(e).width,m=0;for(let v=0;v<p.length;++v){let T=p[v];n?d.strokeText(T,u,r):d.fillText(T,u,r);let w="";for(let P=v+1;P<p.length;++P)w+=p[P];m=d.measureText(w).width,u+=_-m+h,_=m}}destroy(){this._activeTextures=null}};hn.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"canvasText"},ue.add(hn),ue.add(rn);var Tm=Object.defineProperty,ln=Object.getOwnPropertySymbols,d2=Object.prototype.hasOwnProperty,h2=Object.prototype.propertyIsEnumerable,O0=(a,e,t)=>e in a?Tm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Sm=(a,e)=>{for(var t in e||(e={}))d2.call(e,t)&&O0(a,t,e[t]);if(ln)for(var t of ln(e))h2.call(e,t)&&O0(a,t,e[t]);return a},wm=(a,e)=>{var t={};for(var i in a)d2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&ln)for(var i of ln(a))e.indexOf(i)<0&&h2.call(a,i)&&(t[i]=a[i]);return t},Ye=class a extends ha{constructor(e){e instanceof dt&&(e={context:e});let t=e||{},{context:i,roundPixels:s}=t,r=wm(t,["context","roundPixels"]);super(Sm({label:"Graphics"},r)),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new dt,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=s??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new a(this._context.clone()):(this._ownedContext=null,new a(this._context))}lineStyle(e,t,i){let s={};return e&&(s.width=e),t&&(s.color=t),i&&(s.alpha=i),this.context.strokeStyle=s,this}beginFill(e,t){let i={};return e!==void 0&&(i.color=e),t!==void 0&&(i.alpha=t),this.context.fillStyle=i,this}endFill(){this.context.fill();let e=this.context.strokeStyle;return(e.width!==dt.defaultStrokeStyle.width||e.color!==dt.defaultStrokeStyle.color||e.alpha!==dt.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return this._callContextMethod("circle",e)}drawEllipse(...e){return this._callContextMethod("ellipse",e)}drawPolygon(...e){return this._callContextMethod("poly",e)}drawRect(...e){return this._callContextMethod("rect",e)}drawRoundedRect(...e){return this._callContextMethod("roundRect",e)}drawStar(...e){return this._callContextMethod("star",e)}},Am={name:"local-uniform-msdf-bit",vertex:{header:`
struct LocalUniforms {
uColor:vec4<f32>,
uTransformMatrix:mat3x3<f32>,
uDistance: f32,
uRound:f32,
}

@group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:`
vColor *= localUniforms.uColor;
modelMatrix *= localUniforms.uTransformMatrix;
`,end:`
if(localUniforms.uRound == 1)
{
vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`},fragment:{header:`
struct LocalUniforms {
uColor:vec4<f32>,
uTransformMatrix:mat3x3<f32>,
uDistance: f32
}

@group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:` 
outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
`}},Em={name:"local-uniform-msdf-bit",vertex:{header:`
uniform mat3 uTransformMatrix;
uniform vec4 uColor;
uniform float uRound;
`,main:`
vColor *= uColor;
modelMatrix *= uTransformMatrix;
`,end:`
if(uRound == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`},fragment:{header:`
uniform float uDistance;
`,main:` 
outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
`}},Pm={name:"msdf-bit",fragment:{header:`
fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

// MSDF
var median = msdfColor.r + msdfColor.g + msdfColor.b -
min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
max(msdfColor.r, max(msdfColor.g, msdfColor.b));

// SDF
median = min(median, msdfColor.a);

var screenPxDistance = distance * (median - 0.5);
var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
if (median < 0.01) {
alpha = 0.0;
} else if (median > 0.99) {
alpha = 1.0;
}

// Gamma correction for coverage-like alpha
var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
var coverage: f32 = pow(shapeColor.a * alpha, gamma);

return coverage;

}
`}},Rm={name:"msdf-bit",fragment:{header:`
float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

// MSDF
float median = msdfColor.r + msdfColor.g + msdfColor.b -
            min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
            max(msdfColor.r, max(msdfColor.g, msdfColor.b));

// SDF
median = min(median, msdfColor.a);

float screenPxDistance = distance * (median - 0.5);
float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

if (median < 0.01) {
alpha = 0.0;
} else if (median > 0.99) {
alpha = 1.0;
}

// Gamma correction for coverage-like alpha
float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
float gamma = mix(1.0, 1.0 / 2.2, luma);
float coverage = pow(shapeColor.a * alpha, gamma);  

return coverage;
}
`}},Qc,Jc,bh=class extends ht{constructor(){let e=new et({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ae,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),t=Ci();Qc!=null||(Qc=Xs({name:"sdf-shader",bits:[gl,_l(t),Am,Pm,zs]})),Jc!=null||(Jc=Hs({name:"sdf-shader",bits:[ml,yl(t),Em,Rm,Vs]})),super({glProgram:Jc,gpuProgram:Qc,resources:{localUniforms:e,batchSamplers:xl(t)}})}},ed=0,I0=500;function Qt(...a){ed!==I0&&ed++}var fn=class extends xt{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return this.fontFamily}get pageTextures(){return this.pages}get size(){return this.fontMetrics.fontSize}get distanceFieldRange(){return this.distanceField.range}get distanceFieldType(){return this.distanceField.type}destroy(e=!1){var t;this.emit("destroy",this),this.removeAllListeners();for(let i in this.chars)(t=this.chars[i].texture)==null||t.destroy();this.chars=null,e&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}};function l2(a){if(a==="")return[];typeof a=="string"&&(a=[a]);let e=[];for(let t=0,i=a.length;t<i;t++){let s=a[t];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");let r=s[0].charCodeAt(0),n=s[1].charCodeAt(0);if(n<r)throw new Error("[BitmapFont]: Invalid character range.");for(let d=r,h=n;d<=h;d++)e.push(String.fromCharCode(d))}else e.push(...Array.from(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var Mm=Object.defineProperty,G0=Object.getOwnPropertySymbols,Cm=Object.prototype.hasOwnProperty,Om=Object.prototype.propertyIsEnumerable,B0=(a,e,t)=>e in a?Mm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,F0=(a,e)=>{for(var t in e||(e={}))Cm.call(e,t)&&B0(a,t,e[t]);if(G0)for(var t of G0(e))Om.call(e,t)&&B0(a,t,e[t]);return a},f2=class u2 extends fn{constructor(e){var t,i,s;super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;let r=F0(F0({},u2.defaultOptions),e);this._textureSize=r.textureSize,this._mipmap=r.mipmap;let n=r.style.clone();r.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=W.WHITE,n._fill.fill=null),this.applyFillAsTint=r.overrideFill;let d=n.fontSize;n.fontSize=this.baseMeasurementFontSize;let h=cn(n);r.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/d):n.fontSize=this.baseRenderedFontSize=d,this._style=n,this._skipKerning=(t=r.skipKerning)!=null?t:!1,this.resolution=(i=r.resolution)!=null?i:1,this._padding=(s=r.padding)!=null?s:4,this.fontMetrics=na.measureFont(h),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(e){var t,i,s,r;let n=l2(e).filter(D=>!this._currentChars.includes(D)).filter((D,X,U)=>U.indexOf(D)===X);if(!n.length)return;this._currentChars=[...this._currentChars,...n];let d;this._currentPageIndex===-1?d=this._nextPage():d=this.pages[this._currentPageIndex];let{canvas:h,context:l}=d.canvasAndContext,u=d.texture.source,p=this._style,_=this._currentX,m=this._currentY,v=this.baseRenderedFontSize/this.baseMeasurementFontSize,T=this._padding*v,w=0,P=!1,C=h.width/this.resolution,B=h.height/this.resolution;for(let D=0;D<n.length;D++){let X=n[D],U=na.measureText(X,p,h,!1);U.lineHeight=U.height;let L=U.width*v,ie=Math.ceil((p.fontStyle==="italic"?2:1)*L),ne=U.height*v,q=ie+T*2,Y=ne+T*2;if(P=!1,X!==`
`&&X!=="\r"&&X!=="	"&&X!==" "&&(P=!0,w=Math.ceil(Math.max(Y,w))),_+q>C&&(m+=w,w=Y,_=0,m+w>B)){u.update();let ee=this._nextPage();h=ee.canvasAndContext.canvas,l=ee.canvasAndContext.context,u=ee.texture.source,m=0}let se=L/v-((i=(t=p.dropShadow)==null?void 0:t.distance)!=null?i:0)-((r=(s=p._stroke)==null?void 0:s.width)!=null?r:0);if(this.chars[X]={id:X.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:se,kerning:{}},P){this._drawGlyph(l,U,_+T,m+T,v,p);let ee=u.width*v,Ce=u.height*v,Tt=new we(_/ee*u.width,m/Ce*u.height,q/ee*u.width,Y/Ce*u.height);this.chars[X].texture=new W({source:u,frame:Tt}),_+=Math.ceil(q)}}u.update(),this._currentX=_,this._currentY=m,this._skipKerning&&this._applyKerning(n,l)}get pageTextures(){return this.pages}_applyKerning(e,t){let i=this._measureCache;for(let s=0;s<e.length;s++){let r=e[s];for(let n=0;n<this._currentChars.length;n++){let d=this._currentChars[n],h=i[r];h||(h=i[r]=t.measureText(r).width);let l=i[d];l||(l=i[d]=t.measureText(d).width);let u=t.measureText(r+d).width,p=u-(h+l);p&&(this.chars[r].kerning[d]=p),u=t.measureText(r+d).width,p=u-(h+l),p&&(this.chars[d].kerning[r]=p)}}}_nextPage(){this._currentPageIndex++;let e=this.resolution,t=ca.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);let i=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new W({source:new Ma({resource:t.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),r={canvasAndContext:t,texture:s};return this.pages[this._currentPageIndex]=r,r}_setupContext(e,t,i){var s;t.fontSize=this.baseRenderedFontSize,e.scale(i,i),e.font=cn(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;let r=t._stroke,n=(s=r?.width)!=null?s:0;if(r&&(e.lineWidth=n,e.lineJoin=r.join,e.miterLimit=r.miterLimit,e.strokeStyle=dn(r,e)),t._fill&&(e.fillStyle=dn(t._fill,e)),t.dropShadow){let d=t.dropShadow,h=Se.shared.setValue(d.color).toArray(),l=d.blur*i,u=d.distance*i;e.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${d.alpha})`,e.shadowBlur=l,e.shadowOffsetX=Math.cos(d.angle)*u,e.shadowOffsetY=Math.sin(d.angle)*u}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,i,s,r,n){var d;let h=t.text,l=t.fontProperties,u=n._stroke,p=((d=u?.width)!=null?d:0)*r,_=i+p/2,m=s-p/2,v=l.descent*r,T=t.lineHeight*r;n.stroke&&p&&e.strokeText(h,_,m+T-v),n._fill&&e.fillText(h,_,m+T-v)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{canvasAndContext:t,texture:i}=this.pages[e];ca.returnCanvasAndContext(t),i.destroy(!0)}this.pages=null}};f2.defaultOptions={textureSize:512,style:new Rt,mipmap:!0};var D0=f2;function b2(a,e,t,i){let s={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=t.baseLineOffset;let r=s.lines[0],n=null,d=!0,h={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=v=>{let T=r.width;for(let w=0;w<h.index;w++){let P=v.positions[w];r.chars.push(v.chars[w]),r.charPositions.push(P+T)}r.width+=v.width,d=!1,h.width=0,h.index=0,h.chars.length=0},u=()=>{let v=r.chars.length-1;if(i){let T=r.chars[v];for(;T===" ";)r.width-=t.chars[T].xAdvance,T=r.chars[--v]}s.width=Math.max(s.width,r.width),r={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},d=!0,s.lines.push(r),s.height+=t.lineHeight},p=t.baseMeasurementFontSize/e.fontSize,_=e.letterSpacing*p,m=e.wordWrapWidth*p;for(let v=0;v<a.length+1;v++){let T,w=v===a.length;w||(T=a[v]);let P=t.chars[T]||t.chars[" "];if(/(?:\s)/.test(T)||T==="\r"||T===`
`||w){if(!d&&e.wordWrap&&r.width+h.width-_>m?(u(),l(h),w||r.charPositions.push(0)):(h.start=r.width,l(h),w||r.charPositions.push(0)),T==="\r"||T===`
`)r.width!==0&&u();else if(!w){let C=P.xAdvance+(P.kerning[n]||0)+_;r.width+=C,r.spaceWidth=C,r.spacesIndex.push(r.charPositions.length),r.chars.push(T)}}else{let C=P.kerning[n]||0,B=P.xAdvance+C+_;h.positions[h.index++]=h.width+C,h.chars.push(T),h.width+=B}n=T}return u(),e.align==="center"?Im(s):e.align==="right"?Gm(s):e.align==="justify"&&Bm(s),s}function Im(a){for(let e=0;e<a.lines.length;e++){let t=a.lines[e],i=a.width/2-t.width/2;for(let s=0;s<t.charPositions.length;s++)t.charPositions[s]+=i}}function Gm(a){for(let e=0;e<a.lines.length;e++){let t=a.lines[e],i=a.width-t.width;for(let s=0;s<t.charPositions.length;s++)t.charPositions[s]+=i}}function Bm(a){let e=a.width;for(let t=0;t<a.lines.length;t++){let i=a.lines[t],s=0,r=i.spacesIndex[s++],n=0,d=i.spacesIndex.length,h=(e-i.width)/d;for(let l=0;l<i.charPositions.length;l++)l===r&&(r=i.spacesIndex[s++],n+=h),i.charPositions[l]+=n}}var Fm=Object.defineProperty,k0=Object.getOwnPropertySymbols,Dm=Object.prototype.hasOwnProperty,km=Object.prototype.propertyIsEnumerable,U0=(a,e,t)=>e in a?Fm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,td=(a,e)=>{for(var t in e||(e={}))Dm.call(e,t)&&U0(a,t,e[t]);if(k0)for(var t of k0(e))km.call(e,t)&&U0(a,t,e[t]);return a},xr=0,Um=class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(a,e){var t;let i=`${e.fontFamily}-bitmap`,s=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,s=!1;else if(e._stroke||e.dropShadow){let n=e.styleKey;n=n.substring(0,n.lastIndexOf("-")),i=`${n}-bitmap`,s=!1}if(!Me.has(i)){let n=new D0(td({style:e,overrideFill:s,overrideSize:!0},this.defaultOptions));xr++,xr>50&&Qt("BitmapText",`You have dynamically created ${xr} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),n.once("destroy",()=>{xr--,Me.remove(i)}),Me.set(i,n)}let r=Me.get(i);return(t=r.ensureCharacters)==null||t.call(r,a),r}getLayout(a,e,t=!0){let i=this.getFont(a,e);return b2([...a],e,i,t)}measureText(a,e,t=!0){return this.getLayout(a,e,t)}install(...a){var e,t,i,s;let r=a[0];typeof r=="string"&&(r={name:r,style:a[1],chars:(e=a[2])==null?void 0:e.chars,resolution:(t=a[2])==null?void 0:t.resolution,padding:(i=a[2])==null?void 0:i.padding,skipKerning:(s=a[2])==null?void 0:s.skipKerning});let n=r?.name;if(!n)throw new Error("[BitmapFontManager] Property `name` is required.");r=td(td({},this.defaultOptions),r);let d=r.style,h=d instanceof Rt?d:new Rt(d),l=h._fill.fill!==null&&h._fill.fill!==void 0,u=new D0({style:h,overrideFill:l,skipKerning:r.skipKerning,padding:r.padding,resolution:r.resolution,overrideSize:!1}),p=l2(r.chars);return u.ensureCharacters(p.join("")),Me.set(`${n}-bitmap`,u),u.once("destroy",()=>Me.remove(`${n}-bitmap`)),u}uninstall(a){let e=`${a}-bitmap`,t=Me.get(e);t&&t.destroy()}},un=new Um,bn=class{constructor(e){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(e){let t=this._getGpuBitmapText(e);return e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,t)),this._renderer.renderPipes.graphics.validateRenderable(t)}addRenderable(e,t){let i=this._getGpuBitmapText(e);L0(e,i),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,i)),this._renderer.renderPipes.graphics.addRenderable(i,t),i.context.customShader&&this._updateDistanceField(e)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(e.uid)}_destroyRenderableByUid(e){let t=this._gpuBitmapText[e].context;t.customShader&&(me.return(t.customShader),t.customShader=null),me.return(this._gpuBitmapText[e]),this._gpuBitmapText[e]=null}updateRenderable(e){let t=this._getGpuBitmapText(e);L0(e,t),this._renderer.renderPipes.graphics.updateRenderable(t),t.context.customShader&&this._updateDistanceField(e)}_updateContext(e,t){let{context:i}=t,s=un.getFont(e.text,e._style);i.clear(),s.distanceField.type!=="none"&&(i.customShader||(i.customShader=me.get(bh)));let r=Array.from(e.text),n=e._style,d=s.baseLineOffset,h=b2(r,n,s,!0),l=0,u=n.padding,p=h.scale,_=h.width,m=h.height+h.offsetY;n._stroke&&(_+=n._stroke.width/p,m+=n._stroke.width/p),i.translate(-e._anchor._x*_-u,-e._anchor._y*m-u).scale(p,p);let v=s.applyFillAsTint?n._fill.color:16777215;for(let T=0;T<h.lines.length;T++){let w=h.lines[T];for(let P=0;P<w.charPositions.length;P++){let C=r[l++],B=s.chars[C];B!=null&&B.texture&&i.texture(B.texture,v||"black",Math.round(w.charPositions[P]+B.xOffset),Math.round(d+B.yOffset))}d+=s.lineHeight}}_getGpuBitmapText(e){return this._gpuBitmapText[e.uid]||this.initGpuText(e)}initGpuText(e){let t=me.get(Ye);return this._gpuBitmapText[e.uid]=t,this._updateContext(e,t),e.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[e.uid]}_updateDistanceField(e){let t=this._getGpuBitmapText(e).context,i=e._style.fontFamily,s=Me.get(`${i}-bitmap`),{a:r,b:n,c:d,d:h}=e.groupTransform,l=Math.sqrt(r*r+n*n),u=Math.sqrt(d*d+h*h),p=(Math.abs(l)+Math.abs(u))/2,_=s.baseRenderedFontSize/e._style.fontSize,m=p*s.distanceField.range*(1/_);t.customShader.resources.localUniforms.uniforms.uDistance=m}destroy(){for(let e in this._gpuBitmapText)this._destroyRenderableByUid(e);this._gpuBitmapText=null,this._renderer=null}};bn.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"bitmapText"};function L0(a,e){e.groupTransform=a.groupTransform,e.groupColorAlpha=a.groupColorAlpha,e.groupColor=a.groupColor,e.groupBlendMode=a.groupBlendMode,e.globalDisplayStatus=a.globalDisplayStatus,e.groupTransform=a.groupTransform,e.localDisplayStatus=a.localDisplayStatus,e.groupAlpha=a.groupAlpha,e._roundPixels=a._roundPixels}ue.add(bn);var pn=class{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let e in this._gpuText){let t=this._gpuText[e];if(!t)continue;let i=t.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(e){let t=this._getGpuText(e),i=e._getKey();return t.textureNeedsUploading?(t.textureNeedsUploading=!1,!0):t.currentKey!==i}addRenderable(e,t){let i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),t._batcher.updateElement(t)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){let t=this._gpuText[e];this._renderer.htmlText.decreaseReferenceCount(t.currentKey),me.return(t.batchableSprite),this._gpuText[e]=null}_updateText(e){let t=e._getKey(),i=this._getGpuText(e),s=i.batchableSprite;i.currentKey!==t&&this._updateGpuText(e).catch(r=>{}),e._didTextUpdate=!1,ih(s,e)}async _updateGpuText(e){var t;e._didTextUpdate=!1;let i=this._getGpuText(e);if(i.generatingTexture)return;let s=e._getKey();this._renderer.htmlText.decreaseReferenceCount(i.currentKey),i.generatingTexture=!0,i.currentKey=s;let r=(t=e.resolution)!=null?t:this._renderer.resolution,n=await this._renderer.htmlText.getManagedTexture(e.text,r,e._style,e._getKey()),d=i.batchableSprite;d.texture=i.texture=n,i.generatingTexture=!1,i.textureNeedsUploading=!0,e.onViewUpdate(),ih(d,e)}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){let t={texture:W.EMPTY,currentKey:"--",batchableSprite:me.get(Ei),textureNeedsUploading:!1,generatingTexture:!1},i=t.batchableSprite;return i.renderable=e,i.transform=e.groupTransform,i.texture=W.EMPTY,i.bounds={minX:0,maxX:1,minY:0,maxY:0},i.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._gpuText[e.uid]=t,e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}};pn.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"htmlText"};function Lm(){let{userAgent:a}=_e.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(a)}var N0="http://www.w3.org/2000/svg",j0="http://www.w3.org/1999/xhtml",gn=class{constructor(){this.svgRoot=document.createElementNS(N0,"svg"),this.foreignObject=document.createElementNS(N0,"foreignObject"),this.domElement=document.createElementNS(j0,"div"),this.styleElement=document.createElementNS(j0,"style"),this.image=new Image;let{foreignObject:e,svgRoot:t,styleElement:i,domElement:s}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",t.appendChild(e),e.appendChild(i),e.appendChild(s)}};function Nm(a){let e=a._stroke,t=a._fill,i=[`div { ${[`color: ${Se.shared.setValue(t.color).toHex()}`,`font-size: ${a.fontSize}px`,`font-family: ${a.fontFamily}`,`font-weight: ${a.fontWeight}`,`font-style: ${a.fontStyle}`,`font-variant: ${a.fontVariant}`,`letter-spacing: ${a.letterSpacing}px`,`text-align: ${a.align}`,`padding: ${a.padding}px`,`white-space: ${a.whiteSpace==="pre"&&a.wordWrap?"pre-wrap":a.whiteSpace}`,...a.lineHeight?[`line-height: ${a.lineHeight}px`]:[],...a.wordWrap?[`word-wrap: ${a.breakWords?"break-all":"break-word"}`,`max-width: ${a.wordWrapWidth}px`]:[],...e?[g2(e)]:[],...a.dropShadow?[p2(a.dropShadow)]:[],...a.cssOverrides].join(";")} }`];return jm(a.tagStyles,i),i.join(" ")}function p2(a){let e=Se.shared.setValue(a.color).setAlpha(a.alpha).toHexa(),t=Math.round(Math.cos(a.angle)*a.distance),i=Math.round(Math.sin(a.angle)*a.distance),s=`${t}px ${i}px`;return a.blur>0?`text-shadow: ${s} ${a.blur}px ${e}`:`text-shadow: ${s} ${e}`}function g2(a){return[`-webkit-text-stroke-width: ${a.width}px`,`-webkit-text-stroke-color: ${Se.shared.setValue(a.color).toHex()}`,`text-stroke-width: ${a.width}px`,`text-stroke-color: ${Se.shared.setValue(a.color).toHex()}`,"paint-order: stroke"].join(";")}var X0={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},H0={fill:a=>`color: ${Se.shared.setValue(a).toHex()}`,breakWords:a=>`word-wrap: ${a?"break-all":"break-word"}`,stroke:g2,dropShadow:p2};function jm(a,e){for(let t in a){let i=a[t],s=[];for(let r in i)H0[r]?s.push(H0[r](i[r])):X0[r]&&s.push(X0[r].replace("{{VALUE}}",i[r]));e.push(`${t} { ${s.join(";")} }`)}}var Xm=Object.defineProperty,z0=Object.getOwnPropertySymbols,Hm=Object.prototype.hasOwnProperty,zm=Object.prototype.propertyIsEnumerable,V0=(a,e,t)=>e in a?Xm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Vm=(a,e)=>{for(var t in e||(e={}))Hm.call(e,t)&&V0(a,t,e[t]);if(z0)for(var t of z0(e))zm.call(e,t)&&V0(a,t,e[t]);return a},mn=class a extends Rt{constructor(e={}){var t,i;super(e),this._cssOverrides=[],(t=this.cssOverrides)!=null||(this.cssOverrides=e.cssOverrides),this.tagStyles=(i=e.tagStyles)!=null?i:{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=n2(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new a({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?Vm({},this.dropShadow):null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=Nm(this)),this._cssStyle}addOverride(...e){let t=e.filter(i=>!this.cssOverrides.includes(i));t.length>0&&(this.cssOverrides.push(...t),this.update())}removeOverride(...e){let t=e.filter(i=>this.cssOverrides.includes(i));t.length>0&&(this.cssOverrides=this.cssOverrides.filter(i=>!t.includes(i)),this.update())}set fill(e){super.fill=e}set stroke(e){super.stroke=e}};function Wm(a,e){let t=e.fontFamily,i=[],s={},r=/font-family:([^;"\s]+)/g,n=a.match(r);function d(h){s[h]||(i.push(h),s[h]=!0)}if(Array.isArray(t))for(let h=0;h<t.length;h++)d(t[h]);else d(t);n&&n.forEach(h=>{let l=h.split(":")[1].trim();d(l)});for(let h in e.tagStyles){let l=e.tagStyles[h].fontFamily;d(l)}return i}async function Ym(a){let e=await(await _e.get().fetch(a)).blob(),t=new FileReader;return await new Promise((i,s)=>{t.onloadend=()=>i(t.result),t.onerror=s,t.readAsDataURL(e)})}async function W0(a,e){let t=await Ym(e);return`@font-face {
font-family: "${a.fontFamily}";
src: url('${t}');
font-weight: ${a.fontWeight};
font-style: ${a.fontStyle};
}`}var vr=new Map;async function $m(a,e,t){let i=a.filter(s=>Me.has(`${s}-and-url`)).map((s,r)=>{if(!vr.has(s)){let{url:n}=Me.get(`${s}-and-url`);r===0?vr.set(s,W0({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:s},n)):vr.set(s,W0({fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:s},n))}return vr.get(s)});return(await Promise.all(i)).join(`
`)}function Km(a,e,t,i,s){let{domElement:r,styleElement:n,svgRoot:d}=s;r.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${a}</div>`,r.setAttribute("style",`transform: scale(${t});transform-origin: top left; display: inline-block`),n.textContent=i;let{width:h,height:l}=s.image;return d.setAttribute("width",h.toString()),d.setAttribute("height",l.toString()),new XMLSerializer().serializeToString(d)}function qm(a,e){let t=ca.getOptimalCanvasAndContext(a.width,a.height,e),{context:i}=t;return i.clearRect(0,0,a.width,a.height),i.drawImage(a,0,0),t}function Zm(a,e,t){return new Promise(async i=>{t&&await new Promise(s=>setTimeout(s,100)),a.onload=()=>{i()},a.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,a.crossOrigin="anonymous"})}var Y0;function m2(a,e,t,i){i||(i=Y0||(Y0=new gn));let{domElement:s,styleElement:r,svgRoot:n}=i;s.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${a}</div>`,s.setAttribute("style","transform-origin: top left; display: inline-block"),t&&(r.textContent=t),document.body.appendChild(n);let d=s.getBoundingClientRect();n.remove();let h=e.padding*2;return{width:d.width-h,height:d.height-h}}var Ts=class{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===yt.WEBGPU}getTexture(e){return this._buildTexturePromise(e.text,e.resolution,e.style)}getManagedTexture(e,t,i,s){if(this._activeTextures[s])return this._increaseReferenceCount(s),this._activeTextures[s].promise;let r=this._buildTexturePromise(e,t,i).then(n=>(this._activeTextures[s].texture=n,n));return this._activeTextures[s]={texture:null,promise:r,usageCount:1},r}async _buildTexturePromise(e,t,i){let s=me.get(gn),r=Wm(e,i),n=await $m(r,i,mn.defaultTextStyle),d=m2(e,i,n,s),h=Math.ceil(Math.ceil(Math.max(1,d.width)+i.padding*2)*t),l=Math.ceil(Math.ceil(Math.max(1,d.height)+i.padding*2)*t),u=s.image,p=2;u.width=(h|0)+p,u.height=(l|0)+p;let _=Km(e,i,t,n,s);await Zm(u,_,Lm()&&r.length>0);let m=u,v;this._createCanvas&&(v=qm(u,t));let T=c2(v?v.canvas:m,u.width-p,u.height-p,t);return this._createCanvas&&(this._renderer.texture.initSource(T.source),ca.returnCanvasAndContext(v)),me.return(s),T}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){let t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(t.texture?this._cleanUp(t):t.promise.then(i=>{t.texture=i,this._cleanUp(t)}).catch(()=>{}),this._activeTextures[e]=null))}_cleanUp(e){Ve.returnTexture(e.texture),e.texture.source.resource=null,e.texture.source.uploadMethodId="unknown"}getReferenceCount(e){return this._activeTextures[e].usageCount}destroy(){this._activeTextures=null}};Ts.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"htmlText"},Ts.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"},ue.add(Ts),ue.add(pn);var Qm=Object.defineProperty,$0=Object.getOwnPropertySymbols,Jm=Object.prototype.hasOwnProperty,e7=Object.prototype.propertyIsEnumerable,K0=(a,e,t)=>e in a?Qm(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,q0=(a,e)=>{for(var t in e||(e={}))Jm.call(e,t)&&K0(a,t,e[t]);if($0)for(var t of $0(e))e7.call(e,t)&&K0(a,t,e[t]);return a},_2=class y2 extends qt{constructor(...e){var t;let i=(t=e[0])!=null?t:{};i instanceof Float32Array&&(i={positions:i,uvs:e[1],indices:e[2]}),i=q0(q0({},y2.defaultOptions),i);let s=i.positions||new Float32Array([0,0,1,0,1,1,0,1]),r=i.uvs;r||(i.positions?r=new Float32Array(s.length):r=new Float32Array([0,0,1,0,1,1,0,1]));let n=i.indices||new Uint32Array([0,1,2,0,2,3]),d=i.shrinkBuffersToFit,h=new st({data:s,label:"attribute-mesh-positions",shrinkToFit:d,usage:ye.VERTEX|ye.COPY_DST}),l=new st({data:r,label:"attribute-mesh-uvs",shrinkToFit:d,usage:ye.VERTEX|ye.COPY_DST}),u=new st({data:n,label:"index-mesh-buffer",shrinkToFit:d,usage:ye.INDEX|ye.COPY_DST});super({attributes:{aPosition:{buffer:h,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:l,format:"float32x2",stride:2*4,offset:0}},indexBuffer:u,topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};_2.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};var Ys=_2,t7=Object.defineProperty,a7=Object.defineProperties,i7=Object.getOwnPropertyDescriptors,Z0=Object.getOwnPropertySymbols,s7=Object.prototype.hasOwnProperty,r7=Object.prototype.propertyIsEnumerable,Q0=(a,e,t)=>e in a?t7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,J0=(a,e)=>{for(var t in e||(e={}))s7.call(e,t)&&Q0(a,t,e[t]);if(Z0)for(var t of Z0(e))r7.call(e,t)&&Q0(a,t,e[t]);return a},eb=(a,e)=>a7(a,i7(e)),Ss={name:"local-uniform-bit",vertex:{header:`

struct LocalUniforms {
uTransformMatrix:mat3x3<f32>,
uColor:vec4<f32>,
uRound:f32,
}

@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
`,main:`
vColor *= localUniforms.uColor;
modelMatrix *= localUniforms.uTransformMatrix;
`,end:`
if(localUniforms.uRound == 1)
{
vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
}
`}},n7=eb(J0({},Ss),{vertex:eb(J0({},Ss.vertex),{header:Ss.vertex.header.replace("group(1)","group(2)")})}),Sl={name:"local-uniform-bit",vertex:{header:`

uniform mat3 uTransformMatrix;
uniform vec4 uColor;
uniform float uRound;
`,main:`
vColor *= uColor;
modelMatrix = uTransformMatrix;
`,end:`
if(uRound == 1.)
{
gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
}
`}},o7={name:"tiling-bit",vertex:{header:`
struct TilingUniforms {
uMapCoord:mat3x3<f32>,
uClampFrame:vec4<f32>,
uClampOffset:vec2<f32>,
uTextureTransform:mat3x3<f32>,
uSizeAnchor:vec4<f32>
};

@group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
@group(2) @binding(1) var uTexture: texture_2d<f32>;
@group(2) @binding(2) var uSampler: sampler;
`,main:`
uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
`},fragment:{header:`
struct TilingUniforms {
uMapCoord:mat3x3<f32>,
uClampFrame:vec4<f32>,
uClampOffset:vec2<f32>,
uTextureTransform:mat3x3<f32>,
uSizeAnchor:vec4<f32>
};

@group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
@group(2) @binding(1) var uTexture: texture_2d<f32>;
@group(2) @binding(2) var uSampler: sampler;
`,main:`

var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
var unclamped = coord;
coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

var bias = 0.;

if(unclamped.x == coord.x && unclamped.y == coord.y)
{
bias = -32.;
} 

outColor = textureSampleBias(uTexture, uSampler, coord, bias);
`}},c7={name:"tiling-bit",vertex:{header:`
uniform mat3 uTextureTransform;
uniform vec4 uSizeAnchor;

`,main:`
uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
`},fragment:{header:`
uniform sampler2D uTexture;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;
`,main:`

vec2 coord = vUV + ceil(uClampOffset - vUV);
coord = (uMapCoord * vec3(coord, 1.0)).xy;
vec2 unclamped = coord;
coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

`}},ad,id,ph=class extends ht{constructor(){ad!=null||(ad=Xs({name:"tiling-sprite-shader",bits:[Ss,o7,zs]})),id!=null||(id=Hs({name:"tiling-sprite-shader",bits:[Sl,c7,Vs]}));let e=new et({uMapCoord:{value:new ae,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new ae,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:id,gpuProgram:ad,resources:{localUniforms:new et({uTransformMatrix:{value:new ae,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:W.EMPTY.source,uSampler:W.EMPTY.source.style}})}updateUniforms(e,t,i,s,r,n){let d=this.resources.tilingUniforms,h=n.width,l=n.height,u=n.textureMatrix,p=d.uniforms.uTextureTransform;p.set(i.a*h/e,i.b*h/t,i.c*l/e,i.d*l/t,i.tx/e,i.ty/t),p.invert(),d.uniforms.uMapCoord=u.mapCoord,d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset,d.uniforms.uTextureTransform=p,d.uniforms.uSizeAnchor[0]=e,d.uniforms.uSizeAnchor[1]=t,d.uniforms.uSizeAnchor[2]=s,d.uniforms.uSizeAnchor[3]=r,n&&(this.resources.uTexture=n.source,this.resources.uSampler=n.source.style)}},gh=class extends Ys{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}};function d7(a,e){let t=a.anchor.x,i=a.anchor.y;e[0]=-t*a.width,e[1]=-i*a.height,e[2]=(1-t)*a.width,e[3]=-i*a.height,e[4]=(1-t)*a.width,e[5]=(1-i)*a.height,e[6]=-t*a.width,e[7]=(1-i)*a.height}function h7(a,e,t,i){let s=0,r=a.length/(e||2),n=i.a,d=i.b,h=i.c,l=i.d,u=i.tx,p=i.ty;for(t*=e;s<r;){let _=a[t],m=a[t+1];a[t]=n*_+h*m+u,a[t+1]=d*_+l*m+p,t+=e,s++}}function l7(a,e){let t=a.texture,i=t.frame.width,s=t.frame.height,r=0,n=0;a.applyAnchorToTexture&&(r=a.anchor.x,n=a.anchor.y),e[0]=e[6]=-r,e[2]=e[4]=1-r,e[1]=e[3]=-n,e[5]=e[7]=1-n;let d=ae.shared;d.copyFrom(a._tileTransform.matrix),d.tx/=a.width,d.ty/=a.height,d.invert(),d.scale(a.width/i,a.height/s),h7(e,2,0,d)}var Tr=new gh,_n=class{constructor(e){this._state=Pt.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(e){let t=this._getTilingSpriteData(e),i=t.canBatch;this._updateCanBatch(e);let s=t.canBatch;if(s&&s===i){let{batchableMesh:r}=t;return!r._batcher.checkAndUpdateTexture(r,e.texture)}return i!==s}addRenderable(e,t){let i=this._renderer.renderPipes.batch;this._updateCanBatch(e);let s=this._getTilingSpriteData(e),{geometry:r,canBatch:n}=s;if(n){s.batchableMesh||(s.batchableMesh=new Ds);let d=s.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),d.geometry=r,d.renderable=e,d.transform=e.groupTransform,d.setTexture(e._texture)),d.roundPixels=this._renderer._roundPixels|e._roundPixels,i.addToBatch(d,t)}else i.break(t),s.shader||(s.shader=new ph),this.updateRenderable(e),t.add(e)}execute(e){let{shader:t}=this._tilingSpriteDataHash[e.uid];t.groups[0]=this._renderer.globalUniforms.bindGroup;let i=t.resources.localUniforms.uniforms;i.uTransformMatrix=e.groupTransform,i.uRound=this._renderer._roundPixels|e._roundPixels,Ws(e.groupColorAlpha,i.uColor,0),this._state.blendMode=Ms(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:Tr,shader:t,state:this._state})}updateRenderable(e){let t=this._getTilingSpriteData(e),{canBatch:i}=t;if(i){let{batchableMesh:s}=t;e.didViewUpdate&&this._updateBatchableMesh(e),s._batcher.updateElement(s)}else if(e.didViewUpdate){let{shader:s}=t;s.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}destroyRenderable(e){var t;let i=this._getTilingSpriteData(e);i.batchableMesh=null,(t=i.shader)==null||t.destroy(),this._tilingSpriteDataHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(e){return this._tilingSpriteDataHash[e.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){let t=new Ys({indices:Tr.indices,positions:Tr.positions.slice(),uvs:Tr.uvs.slice()});return this._tilingSpriteDataHash[e.uid]={canBatch:!0,renderable:e,geometry:t},e.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[e.uid]}_updateBatchableMesh(e){let t=this._getTilingSpriteData(e),{geometry:i}=t,s=e.texture.source.style;s.addressMode!=="repeat"&&(s.addressMode="repeat",s.update()),l7(e,i.uvs),d7(e,i.positions)}destroy(){for(let e in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[e].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(e){let t=this._getTilingSpriteData(e),i=e.texture,s=!0;return this._renderer.type===yt.WEBGL&&(s=this._renderer.context.supports.nonPowOf2wrapping),t.canBatch=i.textureMatrix.isSimple&&(s||i.source.isPowerOfTwo),t.canBatch}};_n.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"tilingSprite"},ue.add(_n);var f7=Object.defineProperty,tb=Object.getOwnPropertySymbols,u7=Object.prototype.hasOwnProperty,b7=Object.prototype.propertyIsEnumerable,ab=(a,e,t)=>e in a?f7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ib=(a,e)=>{for(var t in e||(e={}))u7.call(e,t)&&ab(a,t,e[t]);if(tb)for(var t of tb(e))b7.call(e,t)&&ab(a,t,e[t]);return a},x2=class v2 extends Ys{constructor(...e){var t;super({});let i=(t=e[0])!=null?t:{};typeof i=="number"&&(i={width:i,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(i)}build(e){var t,i,s,r;e=ib(ib({},v2.defaultOptions),e),this.verticesX=(t=this.verticesX)!=null?t:e.verticesX,this.verticesY=(i=this.verticesY)!=null?i:e.verticesY,this.width=(s=this.width)!=null?s:e.width,this.height=(r=this.height)!=null?r:e.height;let n=this.verticesX*this.verticesY,d=[],h=[],l=[],u=this.verticesX-1,p=this.verticesY-1,_=this.width/u,m=this.height/p;for(let T=0;T<n;T++){let w=T%this.verticesX,P=T/this.verticesX|0;d.push(w*_,P*m),h.push(w/u,P/p)}let v=u*p;for(let T=0;T<v;T++){let w=T%u,P=T/u|0,C=P*this.verticesX+w,B=P*this.verticesX+w+1,D=(P+1)*this.verticesX+w,X=(P+1)*this.verticesX+w+1;l.push(C,B,D,B,X,D)}this.buffers[0].data=new Float32Array(d),this.buffers[1].data=new Float32Array(h),this.indexBuffer.data=new Uint32Array(l),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};x2.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};var T2=x2,p7=Object.defineProperty,sb=Object.getOwnPropertySymbols,g7=Object.prototype.hasOwnProperty,m7=Object.prototype.propertyIsEnumerable,rb=(a,e,t)=>e in a?p7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,nb=(a,e)=>{for(var t in e||(e={}))g7.call(e,t)&&rb(a,t,e[t]);if(sb)for(var t of sb(e))m7.call(e,t)&&rb(a,t,e[t]);return a},S2=class w2 extends T2{constructor(e={}){e=nb(nb({},w2.defaultOptions),e),super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){var t,i,s,r,n,d,h,l;this.width=(t=e.width)!=null?t:this.width,this.height=(i=e.height)!=null?i:this.height,this._originalWidth=(s=e.originalWidth)!=null?s:this._originalWidth,this._originalHeight=(r=e.originalHeight)!=null?r:this._originalHeight,this._leftWidth=(n=e.leftWidth)!=null?n:this._leftWidth,this._rightWidth=(d=e.rightWidth)!=null?d:this._rightWidth,this._topHeight=(h=e.topHeight)!=null?h:this._topHeight,this._bottomHeight=(l=e.bottomHeight)!=null?l:this._bottomHeight,this.updateUvs(),this.updatePositions()}updatePositions(){let e=this.positions,t=this._leftWidth+this._rightWidth,i=this.width>t?1:this.width/t,s=this._topHeight+this._bottomHeight,r=this.height>s?1:this.height/s,n=Math.min(i,r);e[9]=e[11]=e[13]=e[15]=this._topHeight*n,e[17]=e[19]=e[21]=e[23]=this.height-this._bottomHeight*n,e[25]=e[27]=e[29]=e[31]=this.height,e[2]=e[10]=e[18]=e[26]=this._leftWidth*n,e[4]=e[12]=e[20]=e[28]=this.width-this._rightWidth*n,e[6]=e[14]=e[22]=e[30]=this.width,this.getBuffer("aPosition").update()}updateUvs(){let e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;let t=1/this._originalWidth,i=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=t*this._leftWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-t*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}};S2.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};var za=S2,yn=class{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,t){let i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}destroyRenderable(e){let t=this._gpuSpriteHash[e.uid];me.return(t.geometry),me.return(t),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,t){t.geometry.update(e),t.setTexture(e._texture)}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=me.get(Ds);return t.geometry=me.get(za),t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=t,e.didViewUpdate||this._updateBatchableSprite(e,t),e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuSpriteHash)this._gpuSpriteHash[e].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}};yn.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"nineSliceSprite"},ue.add(yn);var xn=class{constructor(e){this._renderer=e}push(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:t,filterEffect:e})}pop(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}};xn.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"filter"};function _7(a,e){e.clear();let t=e.matrix;for(let i=0;i<a.length;i++){let s=a[i];s.globalDisplayStatus<7||(e.matrix=s.worldTransform,e.addBounds(s.bounds))}return e.matrix=t,e}var y7=new qt({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])}),vn=class{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new et({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new Ht({}),this.renderer=e}get activeBackTexture(){var e;return(e=this._activeFilterData)==null?void 0:e.backTexture}push(e){var t,i;let s=this.renderer,r=e.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());let n=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,r.length===0){n.skip=!0;return}let d=n.bounds;if(e.renderables?_7(e.renderables,d):e.filterEffect.filterArea?(d.clear(),d.addRect(e.filterEffect.filterArea),d.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,d),e.container){let T=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;T&&d.applyMatrix(T)}let h=s.renderTarget.renderTarget.colorTexture.source,l=1/0,u=0,p=!0,_=!1,m=!1,v=!0;for(let T=0;T<r.length;T++){let w=r[T];if(l=Math.min(l,w.resolution==="inherit"?h._resolution:w.resolution),u+=w.padding,w.antialias==="off"?p=!1:w.antialias==="inherit"&&p&&(p=h.antialias),w.clipToViewport||(v=!1),!(w.compatibleRenderers&s.type)){m=!1;break}if(w.blendRequired&&!((i=(t=s.backBuffer)==null?void 0:t.useBackBuffer)==null||i)){m=!1;break}m=w.enabled||m,_||(_=w.blendRequired)}if(!m){n.skip=!0;return}if(v){let T=s.renderTarget.rootViewPort,w=s.renderTarget.renderTarget.resolution;d.fitBounds(0,T.width/w,0,T.height/w)}if(d.scale(l).ceil().scale(1/l).pad(u|0),!d.isPositive){n.skip=!0;return}n.skip=!1,n.bounds=d,n.blendRequired=_,n.container=e.container,n.filterEffect=e.filterEffect,n.previousRenderSurface=s.renderTarget.renderSurface,n.inputTexture=Ve.getOptimalTexture(d.width,d.height,l,p),s.renderTarget.bind(n.inputTexture,!0),s.globalUniforms.push({offset:d})}pop(){let e=this.renderer;this._filterStackIndex--;let t=this._filterStack[this._filterStackIndex];if(t.skip)return;this._activeFilterData=t;let i=t.inputTexture,s=t.bounds,r=W.EMPTY;if(e.renderTarget.finishRenderPass(),t.blendRequired){let d=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,h=e.renderTarget.getRenderTarget(t.previousRenderSurface);r=this.getBackTexture(h,s,d)}t.backTexture=r;let n=t.filterEffect.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(r.source,3),e.globalUniforms.pop(),n.length===1)n[0].apply(this,i,t.previousRenderSurface,!1),Ve.returnTexture(i);else{let d=t.inputTexture,h=Ve.getOptimalTexture(s.width,s.height,d.source._resolution,!1),l=0;for(l=0;l<n.length-1;++l){n[l].apply(this,d,h,!0);let u=d;d=h,h=u}n[l].apply(this,d,t.previousRenderSurface,!1),Ve.returnTexture(d),Ve.returnTexture(h)}t.blendRequired&&Ve.returnTexture(r)}getBackTexture(e,t,i){let s=e.colorTexture.source._resolution,r=Ve.getOptimalTexture(t.width,t.height,s,!1),n=t.minX,d=t.minY;i&&(n-=i.minX,d-=i.minY),n=Math.floor(n*s),d=Math.floor(d*s);let h=Math.ceil(t.width*s),l=Math.ceil(t.height*s);return this.renderer.renderTarget.copyToTexture(e,r,{x:n,y:d},{width:h,height:l},{x:0,y:0}),r}applyFilter(e,t,i,s){let r=this.renderer,n=this._filterStack[this._filterStackIndex],d=n.bounds,h=Pe.shared,l=n.previousRenderSurface===i,u=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,p=this._filterStackIndex-1;for(;p>0&&this._filterStack[p].skip;)--p;p>0&&(u=this._filterStack[p].inputTexture.source._resolution);let _=this._filterGlobalUniforms,m=_.uniforms,v=m.uOutputFrame,T=m.uInputSize,w=m.uInputPixel,P=m.uInputClamp,C=m.uGlobalFrame,B=m.uOutputTexture;if(l){let U=this._filterStackIndex;for(;U>0;){U--;let L=this._filterStack[this._filterStackIndex-1];if(!L.skip){h.x=L.bounds.minX,h.y=L.bounds.minY;break}}v[0]=d.minX-h.x,v[1]=d.minY-h.y}else v[0]=0,v[1]=0;v[2]=t.frame.width,v[3]=t.frame.height,T[0]=t.source.width,T[1]=t.source.height,T[2]=1/T[0],T[3]=1/T[1],w[0]=t.source.pixelWidth,w[1]=t.source.pixelHeight,w[2]=1/w[0],w[3]=1/w[1],P[0]=.5*w[2],P[1]=.5*w[3],P[2]=t.frame.width*T[2]-.5*w[2],P[3]=t.frame.height*T[3]-.5*w[3];let D=this.renderer.renderTarget.rootRenderTarget.colorTexture;C[0]=h.x*u,C[1]=h.y*u,C[2]=D.source.width*u,C[3]=D.source.height*u;let X=this.renderer.renderTarget.getRenderTarget(i);if(r.renderTarget.bind(i,!!s),i instanceof W?(B[0]=i.frame.width,B[1]=i.frame.height):(B[0]=X.width,B[1]=X.height),B[2]=X.isRoot?-1:1,_.update(),r.renderPipes.uniformBatch){let U=r.renderPipes.uniformBatch.getUboResource(_);this._globalFilterBindGroup.setResource(U,0)}else this._globalFilterBindGroup.setResource(_,0);this._globalFilterBindGroup.setResource(t.source,1),this._globalFilterBindGroup.setResource(t.source.style,2),e.groups[0]=this._globalFilterBindGroup,r.encoder.draw({geometry:y7,shader:e,state:e._state,topology:"triangle-list"}),r.type===yt.WEBGL&&r.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new Ze,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(e,t){let i=this._activeFilterData,s=e.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),r=t.worldTransform.copyTo(ae.shared),n=t.renderGroup||t.parentRenderGroup;return n&&n.cacheToLocalTransform&&r.prepend(n.cacheToLocalTransform),r.invert(),s.prepend(r),s.scale(1/t.texture.frame.width,1/t.texture.frame.height),s.translate(t.anchor.x,t.anchor.y),s}};vn.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"filter"},ue.add(vn),ue.add(xn);var x7={__proto__:null},mh=[];ue.handleByNamedList(I.Environment,mh);async function v7(a){if(!a)for(let e=0;e<mh.length;e++){let t=mh[e];if(t.value.test()){await t.value.load();return}}}var ns;function A2(){if(typeof ns=="boolean")return ns;try{ns=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ns=!1}return ns}var mt=(a=>(a[a.NONE=0]="NONE",a[a.COLOR=16384]="COLOR",a[a.STENCIL=1024]="STENCIL",a[a.DEPTH=256]="DEPTH",a[a.COLOR_DEPTH=16640]="COLOR_DEPTH",a[a.COLOR_STENCIL=17408]="COLOR_STENCIL",a[a.DEPTH_STENCIL=1280]="DEPTH_STENCIL",a[a.ALL=17664]="ALL",a))(mt||{}),Tn=class{constructor(e){this.items=[],this._name=e}emit(e,t,i,s,r,n,d,h){let{name:l,items:u}=this;for(let p=0,_=u.length;p<_;p++)u[p][l](e,t,i,s,r,n,d,h);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){let t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}},T7=Object.defineProperty,ob=Object.getOwnPropertySymbols,S7=Object.prototype.hasOwnProperty,w7=Object.prototype.propertyIsEnumerable,cb=(a,e,t)=>e in a?T7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Sr=(a,e)=>{for(var t in e||(e={}))S7.call(e,t)&&cb(a,t,e[t]);if(ob)for(var t of ob(e))w7.call(e,t)&&cb(a,t,e[t]);return a},A7=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],E2=class P2 extends xt{constructor(e){var t;super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;let i=[...A7,...(t=this.config.runners)!=null?t:[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(e={}){let t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await v7(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(let i in this._systemsHash){let s=this._systemsHash[i].constructor.defaultOptions;e=Sr(Sr({},s),e)}e=Sr(Sr({},P2.defaultOptions),e),this._roundPixels=e.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(e);this._initOptions=e}render(e,t){var i,s;let r=e;if(r instanceof de&&(r={container:r},t&&(r.target=t.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,(i=r.clearColor)!=null||(r.clearColor=this.background.colorRgba),(s=r.clear)!=null||(r.clear=this.background.clearBeforeRender)),r.clearColor){let n=Array.isArray(r.clearColor)&&r.clearColor.length===4;r.clearColor=n?r.clearColor:Se.shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),r.container.enableRenderGroup(),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r)}resize(e,t,i){let s=this.view.resolution;this.view.resize(e,t,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==s&&this.runners.resolutionChange.emit(i)}clear(e={}){var t;let i=this;e.target||(e.target=i.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),(t=e.clear)!=null||(e.clear=mt.ALL);let{clear:s,clearColor:r,target:n}=e;Se.shared.setValue(r??this.background.colorRgba),i.renderTarget.clear(n,s,Se.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new Tn(t)})}_addSystems(e){let t;for(t in e){let i=e[t];this._addSystem(i.value,i.name)}}_addSystem(e,t){let i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(let s in this.runners)this.runners[s].add(i);return this}_addPipes(e,t){let i=t.reduce((s,r)=>(s[r.name]=r.value,s),{});e.forEach(s=>{let r=s.value,n=s.name,d=i[n];this.renderPipes[n]=new r(this,d?new d:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!A2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};E2.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};var Fo=E2,sd;function Do(a){return sd!==void 0||(sd=(()=>{var e;let t={stencil:!0,failIfMajorPerformanceCaveat:a??Fo.defaultOptions.failIfMajorPerformanceCaveat};try{if(!_e.get().getWebGLRenderingContext())return!1;let i=_e.get().createCanvas().getContext("webgl",t),s=!!((e=i?.getContextAttributes())!=null&&e.stencil);if(i){let r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,s}catch{return!1}})()),sd}var rd;async function ko(a={}){return rd!==void 0||(rd=await(async()=>{let e=_e.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(a)).requestDevice(),!0}catch{return!1}})()),rd}var E7=Object.defineProperty,db=Object.getOwnPropertySymbols,P7=Object.prototype.hasOwnProperty,R7=Object.prototype.propertyIsEnumerable,hb=(a,e,t)=>e in a?E7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,os=(a,e)=>{for(var t in e||(e={}))P7.call(e,t)&&hb(a,t,e[t]);if(db)for(var t of db(e))R7.call(e,t)&&hb(a,t,e[t]);return a},lb=["webgl","webgpu","canvas"];async function Uo(a){var e;let t=[];a.preference?(t.push(a.preference),lb.forEach(n=>{n!==a.preference&&t.push(n)})):t=lb.slice();let i,s={};for(let n=0;n<t.length;n++){let d=t[n];if(d==="webgpu"&&await ko()){let{WebGPURenderer:h}=await Promise.resolve().then(function(){return dT});i=h,s=os(os({},a),a.webgpu);break}else if(d==="webgl"&&Do((e=a.failIfMajorPerformanceCaveat)!=null?e:Fo.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:h}=await Promise.resolve().then(function(){return Lv});i=h,s=os(os({},a),a.webgl);break}else if(d==="canvas")throw s=os({},a),new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!i)throw new Error("No available renderer for the current environment");let r=new i;return await r.init(s),r}var Sn="8.7.3",wn=class{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Sn)}static destroy(){}};wn.extension=I.Application;var An=class{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Sn)}destroy(){this._renderer=null}};An.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"initHook",priority:-10};var M7=Object.defineProperty,fb=Object.getOwnPropertySymbols,C7=Object.prototype.hasOwnProperty,O7=Object.prototype.propertyIsEnumerable,ub=(a,e,t)=>e in a?M7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,I7=(a,e)=>{for(var t in e||(e={}))C7.call(e,t)&&ub(a,t,e[t]);if(fb)for(var t of fb(e))O7.call(e,t)&&ub(a,t,e[t]);return a},R2=class _h{constructor(...e){this.stage=new de}async init(e){e=I7({},e),this.renderer=await Uo(e),_h._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){let i=_h._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};R2._plugins=[];var G7=R2;ue.handleByList(I.Application,G7._plugins),ue.add(wn);var En=class extends fn{constructor(e,t){var i;super();let{textures:s,data:r}=e;Object.keys(r.pages).forEach(n=>{let d=r.pages[parseInt(n,10)],h=s[d.id];this.pages.push({texture:h})}),Object.keys(r.chars).forEach(n=>{var d;let h=r.chars[n],{frame:l,source:u}=s[h.page],p=new we(h.x+l.x,h.y+l.y,h.width,h.height),_=new W({source:u,frame:p});this.chars[n]={id:n.codePointAt(0),xOffset:h.xOffset,yOffset:h.yOffset,xAdvance:h.xAdvance,kerning:(d=h.kerning)!=null?d:{},texture:_}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=(i=r.distanceField)!=null?i:{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){un.install(e)}static uninstall(e){un.uninstall(e)}},nd={test(a){return typeof a=="string"&&a.startsWith("info face=")},parse(a){var e,t,i;let s=a.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let v in s){let T=s[v].match(/^[a-z]+/gm)[0],w=s[v].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),P={};for(let C in w){let B=w[C].split("="),D=B[0],X=B[1].replace(/"/gm,""),U=parseFloat(X),L=isNaN(U)?X:U;P[D]=L}r[T].push(P)}let n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[d]=r.info,[h]=r.common,[l]=(e=r.distanceField)!=null?e:[];l&&(n.distanceField={range:parseInt(l.distanceRange,10),type:l.fieldType}),n.fontSize=parseInt(d.size,10),n.fontFamily=d.face,n.lineHeight=parseInt(h.lineHeight,10);let u=r.page;for(let v=0;v<u.length;v++)n.pages.push({id:parseInt(u[v].id,10)||0,file:u[v].file});let p={};n.baseLineOffset=n.lineHeight-parseInt(h.base,10);let _=r.char;for(let v=0;v<_.length;v++){let T=_[v],w=parseInt(T.id,10),P=(i=(t=T.letter)!=null?t:T.char)!=null?i:String.fromCharCode(w);P==="space"&&(P=" "),p[w]=P,n.chars[P]={id:w,page:parseInt(T.page,10)||0,x:parseInt(T.x,10),y:parseInt(T.y,10),width:parseInt(T.width,10),height:parseInt(T.height,10),xOffset:parseInt(T.xoffset,10),yOffset:parseInt(T.yoffset,10),xAdvance:parseInt(T.xadvance,10),kerning:{}}}let m=r.kerning||[];for(let v=0;v<m.length;v++){let T=parseInt(m[v].first,10),w=parseInt(m[v].second,10),P=parseInt(m[v].amount,10);n.chars[p[w]].kerning[p[T]]=P}return n}},bb={test(a){let e=a;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(a){var e,t;let i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},s=a.getElementsByTagName("info")[0],r=a.getElementsByTagName("common")[0],n=a.getElementsByTagName("distanceField")[0];n&&(i.distanceField={type:n.getAttribute("fieldType"),range:parseInt(n.getAttribute("distanceRange"),10)});let d=a.getElementsByTagName("page"),h=a.getElementsByTagName("char"),l=a.getElementsByTagName("kerning");i.fontSize=parseInt(s.getAttribute("size"),10),i.fontFamily=s.getAttribute("face"),i.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let p=0;p<d.length;p++)i.pages.push({id:parseInt(d[p].getAttribute("id"),10)||0,file:d[p].getAttribute("file")});let u={};i.baseLineOffset=i.lineHeight-parseInt(r.getAttribute("base"),10);for(let p=0;p<h.length;p++){let _=h[p],m=parseInt(_.getAttribute("id"),10),v=(t=(e=_.getAttribute("letter"))!=null?e:_.getAttribute("char"))!=null?t:String.fromCharCode(m);v==="space"&&(v=" "),u[m]=v,i.chars[v]={id:m,page:parseInt(_.getAttribute("page"),10)||0,x:parseInt(_.getAttribute("x"),10),y:parseInt(_.getAttribute("y"),10),width:parseInt(_.getAttribute("width"),10),height:parseInt(_.getAttribute("height"),10),xOffset:parseInt(_.getAttribute("xoffset"),10),yOffset:parseInt(_.getAttribute("yoffset"),10),xAdvance:parseInt(_.getAttribute("xadvance"),10),kerning:{}}}for(let p=0;p<l.length;p++){let _=parseInt(l[p].getAttribute("first"),10),m=parseInt(l[p].getAttribute("second"),10),v=parseInt(l[p].getAttribute("amount"),10);i.chars[u[m]].kerning[u[_]]=v}return i}},pb={test(a){return typeof a=="string"&&a.includes("<font>")?bb.test(_e.get().parseXML(a)):!1},parse(a){return bb.parse(_e.get().parseXML(a))}},B7=[".xml",".fnt"],F7={extension:{type:I.CacheParser,name:"cacheBitmapFont"},test:a=>a instanceof En,getCacheableAssets(a,e){let t={};return a.forEach(i=>{t[i]=e,t[`${i}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},D7={extension:{type:I.LoadParser,priority:Mt.Normal},name:"loadBitmapFont",test(a){return B7.includes(_t.extname(a).toLowerCase())},async testParse(a){return nd.test(a)||pb.test(a)},async parse(a,e,t){let i=nd.test(a)?nd.parse(a):pb.parse(a),{src:s}=e,{pages:r}=i,n=[],d=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let u=0;u<r.length;++u){let p=r[u].file,_=_t.join(_t.dirname(s),p);_=Fd(_,s),n.push({src:_,data:d})}let h=await t.load(n),l=n.map(u=>h[u.src]);return new En({data:i,textures:l},s)},async load(a,e){return await(await _e.get().fetch(a)).text()},async unload(a,e,t){await Promise.all(a.pages.map(i=>t.unload(i.texture.source._sourceOrigin))),a.destroy()}},yh=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose,this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<t;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}},k7={extension:{type:I.CacheParser,name:"cacheTextureArray"},test:a=>Array.isArray(a)&&a.every(e=>e instanceof W),getCacheableAssets:(a,e)=>{let t={};return a.forEach(i=>{e.forEach((s,r)=>{t[i+(r===0?"":r+1)]=s})}),t}};async function M2(a){if("Image"in globalThis)return new Promise(e=>{let t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=a});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=await(await fetch(a)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}var U7={extension:{type:I.DetectionParser,priority:1},test:async()=>M2("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async a=>[...a,"avif"],remove:async a=>a.filter(e=>e!=="avif")},gb=["png","jpg","jpeg"],L7={extension:{type:I.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async a=>[...a,...gb],remove:async a=>a.filter(e=>!gb.includes(e))},N7="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function wl(a){return N7?!1:document.createElement("video").canPlayType(a)!==""}var j7={extension:{type:I.DetectionParser,priority:0},test:async()=>wl("video/mp4"),add:async a=>[...a,"mp4","m4v"],remove:async a=>a.filter(e=>e!=="mp4"&&e!=="m4v")},X7={extension:{type:I.DetectionParser,priority:0},test:async()=>wl("video/ogg"),add:async a=>[...a,"ogv"],remove:async a=>a.filter(e=>e!=="ogv")},H7={extension:{type:I.DetectionParser,priority:0},test:async()=>wl("video/webm"),add:async a=>[...a,"webm"],remove:async a=>a.filter(e=>e!=="webm")},z7={extension:{type:I.DetectionParser,priority:0},test:async()=>M2("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async a=>[...a,"webp"],remove:async a=>a.filter(e=>e!=="webp")},V7=Object.defineProperty,W7=Object.defineProperties,Y7=Object.getOwnPropertyDescriptors,mb=Object.getOwnPropertySymbols,$7=Object.prototype.hasOwnProperty,K7=Object.prototype.propertyIsEnumerable,_b=(a,e,t)=>e in a?V7(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,q7=(a,e)=>{for(var t in e||(e={}))$7.call(e,t)&&_b(a,t,e[t]);if(mb)for(var t of mb(e))K7.call(e,t)&&_b(a,t,e[t]);return a},Z7=(a,e)=>W7(a,Y7(e)),xh=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,i)=>(this._parsersValidated=!1,e[t]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let i={promise:null,parser:null};return i.promise=(async()=>{var s,r;let n=null,d=null;if(t.loadParser&&(d=this._parserHash[t.loadParser]),!d){for(let h=0;h<this.parsers.length;h++){let l=this.parsers[h];if(l.load&&(s=l.test)!=null&&s.call(l,e,t,this)){d=l;break}}if(!d)return null}n=await d.load(e,t,this),i.parser=d;for(let h=0;h<this.parsers.length;h++){let l=this.parsers[h];l.parse&&l.parse&&await((r=l.testParse)==null?void 0:r.call(l,n,t,this))&&(n=await l.parse(n,t,this)||n,i.parser=l)}return n})(),i}async load(e,t){this._parsersValidated||this._validateParsers();let i=0,s={},r=Vr(e),n=Xt(e,l=>({alias:[l],src:l,data:{}})),d=n.length,h=n.map(async l=>{let u=_t.toAbsolute(l.src);if(!s[l.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,l)),s[l.src]=await this.promiseCache[u].promise,t&&t(++i/d)}catch(p){throw delete this.promiseCache[u],delete s[l.src],new Error(`[Loader.load] Failed to load ${u}.
${p}`)}});return await Promise.all(h),r?s[n[0].src]:s}async unload(e){let t=Xt(e,i=>({alias:[i],src:i})).map(async i=>{var s,r;let n=_t.toAbsolute(i.src),d=this.promiseCache[n];if(d){let h=await d.promise;delete this.promiseCache[n],await((r=(s=d.parser)==null?void 0:s.unload)==null?void 0:r.call(s,h,i,this))}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(t.name&&e[t.name],Z7(q7({},e),{[t.name]:t})),{})}};function Oi(a,e){if(Array.isArray(e)){for(let t of e)if(a.startsWith(`data:${t}`))return!0;return!1}return a.startsWith(`data:${e}`)}function zt(a,e){let t=a.split("?")[0],i=_t.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}var Q7=".json",J7="application/json",e9={extension:{type:I.LoadParser,priority:Mt.Low},name:"loadJson",test(a){return Oi(a,J7)||zt(a,Q7)},async load(a){return await(await _e.get().fetch(a)).json()}},t9=".txt",a9="text/plain",i9={name:"loadTxt",extension:{type:I.LoadParser,priority:Mt.Low,name:"loadTxt"},test(a){return Oi(a,a9)||zt(a,t9)},async load(a){return await(await _e.get().fetch(a)).text()}},s9=Object.defineProperty,r9=Object.defineProperties,n9=Object.getOwnPropertyDescriptors,yb=Object.getOwnPropertySymbols,o9=Object.prototype.hasOwnProperty,c9=Object.prototype.propertyIsEnumerable,xb=(a,e,t)=>e in a?s9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,d9=(a,e)=>{for(var t in e||(e={}))o9.call(e,t)&&xb(a,t,e[t]);if(yb)for(var t of yb(e))c9.call(e,t)&&xb(a,t,e[t]);return a},h9=(a,e)=>r9(a,n9(e)),l9=["normal","bold","100","200","300","400","500","600","700","800","900"],f9=[".ttf",".otf",".woff",".woff2"],u9=["font/ttf","font/otf","font/woff","font/woff2"],b9=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function p9(a){let e=_t.extname(a),t=_t.basename(a,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)),i=t.length>0;for(let r of t)if(!r.match(b9)){i=!1;break}let s=t.join(" ");return i||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}var g9=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function m9(a){return g9.test(a)?a:encodeURI(a)}var _9={extension:{type:I.LoadParser,priority:Mt.Low},name:"loadWebFont",test(a){return Oi(a,u9)||zt(a,f9)},async load(a,e){var t,i,s,r,n,d;let h=_e.get().getFontFaceSet();if(h){let l=[],u=(i=(t=e.data)==null?void 0:t.family)!=null?i:p9(a),p=(n=(r=(s=e.data)==null?void 0:s.weights)==null?void 0:r.filter(m=>l9.includes(m)))!=null?n:["normal"],_=(d=e.data)!=null?d:{};for(let m=0;m<p.length;m++){let v=p[m],T=new FontFace(u,`url(${m9(a)})`,h9(d9({},_),{weight:v}));await T.load(),h.add(T),l.push(T)}return Me.set(`${u}-and-url`,{url:a,fontFaces:l}),l.length===1?l[0]:l}return null},unload(a){(Array.isArray(a)?a:[a]).forEach(e=>{Me.remove(`${e.family}-and-url`),_e.get().getFontFaceSet().delete(e)})}};function Al(a,e=1){var t;let i=(t=da.RETINA_PREFIX)==null?void 0:t.exec(a);return i?parseFloat(i[1]):e}function Za(a,e,t){a.label=t,a._sourceOrigin=t;let i=new W({source:a,label:t}),s=()=>{delete e.promiseCache[t],Me.has(t)&&Me.remove(t)};return i.source.once("destroy",()=>{e.promiseCache[t]&&s()}),i.once("destroy",()=>{a.destroyed||s()}),i}var y9=Object.defineProperty,Pn=Object.getOwnPropertySymbols,C2=Object.prototype.hasOwnProperty,O2=Object.prototype.propertyIsEnumerable,vb=(a,e,t)=>e in a?y9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,x9=(a,e)=>{for(var t in e||(e={}))C2.call(e,t)&&vb(a,t,e[t]);if(Pn)for(var t of Pn(e))O2.call(e,t)&&vb(a,t,e[t]);return a},v9=(a,e)=>{var t={};for(var i in a)C2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Pn)for(var i of Pn(a))e.indexOf(i)<0&&O2.call(a,i)&&(t[i]=a[i]);return t},T9=".svg",S9="image/svg+xml",w9={extension:{type:I.LoadParser,priority:Mt.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(a){return Oi(a,S9)||zt(a,T9)},async load(a,e,t){var i,s;return((s=(i=e.data)==null?void 0:i.parseAsGraphicsContext)!=null?s:this.config.parseAsGraphicsContext)?E9(a):A9(a,e,t,this.config.crossOrigin)},unload(a){a.destroy(!0)}};async function A9(a,e,t,i){var s,r,n,d,h,l;let u=await(await _e.get().fetch(a)).blob(),p=URL.createObjectURL(u),_=new Image;_.src=p,_.crossOrigin=i,await _.decode(),URL.revokeObjectURL(p);let m=document.createElement("canvas"),v=m.getContext("2d"),T=((s=e.data)==null?void 0:s.resolution)||Al(a),w=(n=(r=e.data)==null?void 0:r.width)!=null?n:_.width,P=(h=(d=e.data)==null?void 0:d.height)!=null?h:_.height;m.width=w*T,m.height=P*T,v.drawImage(_,0,0,w*T,P*T);let C=(l=e.data)!=null?l:{},{parseAsGraphicsContext:B}=C,D=v9(C,["parseAsGraphicsContext"]),X=new Ma(x9({resource:m,alphaMode:"premultiply-alpha-on-upload",resolution:T},D));return Za(X,t,a)}async function E9(a){let e=await(await _e.get().fetch(a)).text(),t=new dt;return t.svg(e),t}var P9=`(function(){"use strict";const e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";async function a(){try{if(typeof createImageBitmap!="function")return!1;const A=await(await fetch(e)).blob(),t=await createImageBitmap(A);return t.width===1&&t.height===1}catch(A){return!1}}a().then(A=>{self.postMessage(A)})})();
`,yi=null,vh=class{constructor(){yi||(yi=URL.createObjectURL(new Blob([P9],{type:"application/javascript"}))),this.worker=new Worker(yi)}};vh.revokeObjectURL=function(){yi&&(URL.revokeObjectURL(yi),yi=null)};var R9='(function(){"use strict";async function s(a,t){const e=await fetch(a);if(!e.ok)throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${a}: ${e.status} ${e.statusText}`);const i=await e.blob();return t==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}self.onmessage=async a=>{try{const t=await s(a.data.data[0],a.data.data[1]);self.postMessage({data:t,uuid:a.data.uuid,id:a.data.id},[t])}catch(t){self.postMessage({error:t,uuid:a.data.uuid,id:a.data.id})}}})();\n',xi=null,I2=class{constructor(){xi||(xi=URL.createObjectURL(new Blob([R9],{type:"application/javascript"}))),this.worker=new Worker(xi)}};I2.revokeObjectURL=function(){xi&&(URL.revokeObjectURL(xi),xi=null)};var Tb=0,od,M9=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(a=>{let{worker:e}=new vh;e.addEventListener("message",t=>{e.terminate(),vh.revokeObjectURL(),a(t.data)})}),this._isImageBitmapSupported)}loadImageBitmap(a,e){var t;return this._run("loadImageBitmap",[a,(t=e?.data)==null?void 0:t.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){od===void 0&&(od=navigator.hardwareConcurrency||4);let a=this._workerPool.pop();return!a&&this._createdWorkers<od&&(this._createdWorkers++,a=new I2().worker,a.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),a}_returnWorker(a){this._workerPool.push(a)}_complete(a){a.error!==void 0?this._resolveHash[a.uuid].reject(a.error):this._resolveHash[a.uuid].resolve(a.data),this._resolveHash[a.uuid]=null}async _run(a,e){await this._initWorkers();let t=new Promise((i,s)=>{this._queue.push({id:a,arguments:e,resolve:i,reject:s})});return this._next(),t}_next(){if(!this._queue.length)return;let a=this._getWorker();if(!a)return;let e=this._queue.pop(),t=e.id;this._resolveHash[Tb]={resolve:e.resolve,reject:e.reject},a.postMessage({data:e.arguments,uuid:Tb++,id:t})}},Sb=new M9,C9=Object.defineProperty,wb=Object.getOwnPropertySymbols,O9=Object.prototype.hasOwnProperty,I9=Object.prototype.propertyIsEnumerable,Ab=(a,e,t)=>e in a?C9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,G9=(a,e)=>{for(var t in e||(e={}))O9.call(e,t)&&Ab(a,t,e[t]);if(wb)for(var t of wb(e))I9.call(e,t)&&Ab(a,t,e[t]);return a},B9=[".jpeg",".jpg",".png",".webp",".avif"],F9=["image/jpeg","image/png","image/webp","image/avif"];async function D9(a,e){var t;let i=await _e.get().fetch(a);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${a}: ${i.status} ${i.statusText}`);let s=await i.blob();return((t=e?.data)==null?void 0:t.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}var G2={name:"loadTextures",extension:{type:I.LoadParser,priority:Mt.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(a){return Oi(a,F9)||zt(a,B9)},async load(a,e,t){var i;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Sb.isImageBitmapSupported()?s=await Sb.loadImageBitmap(a,e):s=await D9(a,e):s=await new Promise((n,d)=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=a,s.complete?n(s):(s.onload=()=>{n(s)},s.onerror=d)});let r=new Ma(G9({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((i=e.data)==null?void 0:i.resolution)||Al(a)},e.data));return Za(r,t,a)},unload(a){a.destroy(!0)}},k9=Object.defineProperty,U9=Object.defineProperties,L9=Object.getOwnPropertyDescriptors,Eb=Object.getOwnPropertySymbols,N9=Object.prototype.hasOwnProperty,j9=Object.prototype.propertyIsEnumerable,Pb=(a,e,t)=>e in a?k9(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,cd=(a,e)=>{for(var t in e||(e={}))N9.call(e,t)&&Pb(a,t,e[t]);if(Eb)for(var t of Eb(e))j9.call(e,t)&&Pb(a,t,e[t]);return a},Rb=(a,e)=>U9(a,L9(e)),B2=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],X9=B2.map(a=>`video/${a.substring(1)}`);function H9(a,e,t){t===void 0&&!e.startsWith("data:")?a.crossOrigin=V9(e):t!==!1&&(a.crossOrigin=typeof t=="string"?t:"anonymous")}function z9(a){return new Promise((e,t)=>{a.addEventListener("canplaythrough",i),a.addEventListener("error",s),a.load();function i(){r(),e()}function s(n){r(),t(n)}function r(){a.removeEventListener("canplaythrough",i),a.removeEventListener("error",s)}})}function V9(a,e=globalThis.location){if(a.startsWith("data:"))return"";e||(e=globalThis.location);let t=new URL(a,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}var W9={name:"loadVideo",extension:{type:I.LoadParser,name:"loadVideo"},test(a){let e=Oi(a,X9),t=zt(a,B2);return e||t},async load(a,e,t){var i,s;let r=cd(Rb(cd({},Br.defaultOptions),{resolution:((i=e.data)==null?void 0:i.resolution)||Al(a),alphaMode:((s=e.data)==null?void 0:s.alphaMode)||await Mp()}),e.data),n=document.createElement("video"),d={preload:r.autoLoad!==!1?"auto":void 0,"webkit-playsinline":r.playsinline!==!1?"":void 0,playsinline:r.playsinline!==!1?"":void 0,muted:r.muted===!0?"":void 0,loop:r.loop===!0?"":void 0,autoplay:r.autoPlay!==!1?"":void 0};Object.keys(d).forEach(u=>{let p=d[u];p!==void 0&&n.setAttribute(u,p)}),r.muted===!0&&(n.muted=!0),H9(n,a,r.crossorigin);let h=document.createElement("source"),l;if(a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){let u=a.split("?")[0].slice(a.lastIndexOf(".")+1).toLowerCase();l=Br.MIME_TYPES[u]||`video/${u}`}return h.src=a,l&&(h.type=l),new Promise(u=>{let p=async()=>{let _=new Br(Rb(cd({},r),{resource:n}));n.removeEventListener("canplay",p),e.data.preload&&await z9(n),u(Za(_,t,a))};n.addEventListener("canplay",p),n.appendChild(h)})},unload(a){a.destroy(!0)}},F2={extension:{type:I.ResolveParser,name:"resolveTexture"},test:G2.test,parse:a=>{var e,t;return{resolution:parseFloat((t=(e=da.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:a.split(".").pop(),src:a}}},Y9={extension:{type:I.ResolveParser,priority:-2,name:"resolveJson"},test:a=>da.RETINA_PREFIX.test(a)&&a.endsWith(".json"),parse:F2.parse},Th=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new da,this.loader=new xh,this.cache=Me,this._backgroundLoader=new yh(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var t,i,s;if(this._initialized)return;if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let h=e.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}let r=(i=(t=e.texturePreference)==null?void 0:t.resolution)!=null?i:1,n=typeof r=="number"?[r]:r,d=await this._detectFormats({preferredFormats:(s=e.texturePreference)==null?void 0:s.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:d,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();let i=Vr(e),s=Xt(e).map(d=>{if(typeof d!="string"){let h=this.resolver.getAlias(d);return h.some(l=>!this.resolver.hasKey(l))&&this.add(d),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(d)||this.add({alias:d,src:d}),d}),r=this.resolver.resolve(s),n=await this._mapLoadToResolve(r,t);return i?n[s[0]]:n}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);let s=this.resolver.resolveBundle(e),r={},n=Object.keys(s),d=0,h=0,l=()=>{t?.(++d/h)},u=n.map(p=>{let _=s[p];return h+=Object.keys(_).length,this._mapLoadToResolve(_,l).then(m=>{r[p]=m})});return await Promise.all(u),i?r[e[0]]:r}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Me.get(e);let t={};for(let i=0;i<e.length;i++)t[i]=Me.get(e[i]);return t}async _mapLoadToResolve(e,t){let i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;let s=await this.loader.load(i,t);this._backgroundLoader.active=!0;let r={};return i.forEach(n=>{let d=s[n.src],h=[n.src];n.alias&&h.push(...n.alias),h.forEach(l=>{r[l]=d}),Me.set(h,d)}),r}async unload(e){this._initialized||await this.init();let t=Xt(e).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(t);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Xt(e);let t=this.resolver.resolveBundle(e),i=Object.keys(t).map(s=>this._unloadFromResolved(t[s]));await Promise.all(i)}async _unloadFromResolved(e){let t=Object.values(e);t.forEach(i=>{Me.remove(i.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let i of e.detections)e.skipDetections||await i.test()?t=await i.add(t):e.skipDetections||(t=await i.remove(t));return t=t.filter((i,s)=>t.indexOf(i)===s),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(i=>i in e).forEach(i=>{t.config[i]=e[i]})})}},pe=new Th;ue.handleByList(I.LoadParser,pe.loader.parsers).handleByList(I.ResolveParser,pe.resolver.parsers).handleByList(I.CacheParser,pe.cache.parsers).handleByList(I.DetectionParser,pe.detections),ue.add(k7,L7,U7,z7,j7,X7,H7,e9,i9,_9,w9,G2,W9,D7,F7,F2,Y9);var Mb={loader:I.LoadParser,resolver:I.ResolveParser,cache:I.CacheParser,detection:I.DetectionParser};ue.handle(I.Asset,a=>{let e=a.ref;Object.entries(Mb).filter(([t])=>!!e[t]).forEach(([t,i])=>{var s;return ue.add(Object.assign(e[t],{extension:(s=e[t].extension)!=null?s:i}))})},a=>{let e=a.ref;Object.keys(Mb).filter(t=>!!e[t]).forEach(t=>ue.remove(e[t]))});var iS={extension:{type:I.DetectionParser,priority:3},test:async()=>!!(await ko()||Do()),add:async a=>[...a,"basis"],remove:async a=>a.filter(e=>e!=="basis")},Mi=class extends Ge{constructor(e){super(e),this.uploadMethodId="compressed",this.resource=e.resource,this.mipLevelCount=this.resource.length}},wr;function Cb(){if(wr)return wr;let a=document.createElement("canvas").getContext("webgl");return a?(wr=[...a.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...a.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...a.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...a.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...a.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...a.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],wr):[]}var Ar;async function Ob(){if(Ar)return Ar;let a=await _e.get().getNavigator().gpu.requestAdapter();return Ar=[...a.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...a.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...a.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Ar}var dd;async function D2(){return dd!==void 0||(dd=await(async()=>{let a=await ko(),e=Do();if(a&&e){let t=await Ob(),i=Cb();return t.filter(s=>i.includes(s))}else{if(a)return await Ob();if(e)return Cb()}return[]})()),dd}var $9=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"],Er;async function Lo(){if(Er!==void 0)return Er;let a=await D2();return Er=[...$9,...a],Er}var K9='(function(){"use strict";function g(r,a){const t=r.getNumImages(),s=r.getNumLevels(0);if(!r.startTranscoding())throw new Error("startTranscoding failed");const m=[];for(let e=0;e<s;++e)for(let o=0;o<t;++o){const B=r.getImageTranscodedSizeInBytes(o,e,a),f=new Uint8Array(B);if(!r.transcodeImage(f,o,e,a,1,0))throw new Error("transcodeImage failed");m.push(f)}return m}const w={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function d(r){const a=w[r];if(a)return a;throw new Error(`Unsupported transcoderFormat: ${r}`)}const n={jsUrl:"basis/basis_transcoder.js",wasmUrl:"basis/basis_transcoder.wasm"};let u,i,c;async function l(){if(!c){const r=new URL(n.jsUrl,location.origin).href,a=new URL(n.wasmUrl,location.origin).href;importScripts(r),c=new Promise(t=>{BASIS({locateFile:s=>a}).then(s=>{s.initializeBasis(),t(s.BasisFile)})})}return c}async function b(r,a){const t=await fetch(r);if(t.ok){const s=await t.arrayBuffer();return new a(new Uint8Array(s))}throw new Error(`Failed to load Basis texture: ${r}`)}const h=["bc7-rgba-unorm","astc-4x4-unorm","etc2-rgba8unorm","bc3-rgba-unorm","rgba8unorm"];async function p(r){const a=await l(),t=await b(r,a),s=g(t,u);return{width:t.getImageWidth(0,0),height:t.getImageHeight(0,0),format:i,resource:s,alphaMode:"no-premultiply-alpha"}}async function y(r,a,t){r&&(n.jsUrl=r),a&&(n.wasmUrl=a),i=h.filter(s=>t.includes(s))[0],u=d(i),await l()}const U={init:async r=>{const{jsUrl:a,wasmUrl:t,supportedTextures:s}=r;await y(a,t,s)},load:async r=>{var a;try{const t=await p(r.url);return{type:"load",url:r.url,success:!0,textureOptions:t,transferables:(a=t.resource)==null?void 0:a.map(s=>s.buffer)}}catch(t){throw t}}};self.onmessage=async r=>{const a=r.data,t=await U[a.type](a);t&&self.postMessage(t,t.transferables)}})();\n',vi=null,k2=class{constructor(){vi||(vi=URL.createObjectURL(new Blob([K9],{type:"application/javascript"}))),this.worker=new Worker(vi)}};k2.revokeObjectURL=function(){vi&&(URL.revokeObjectURL(vi),vi=null)};var Ib={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};var cs,U2={};function q9(a){return cs||(cs=new k2().worker,cs.onmessage=e=>{let{success:t,url:i,textureOptions:s}=e.data;U2[i](s)},cs.postMessage({type:"init",jsUrl:Ib.jsUrl,wasmUrl:Ib.wasmUrl,supportedTextures:a})),cs}function Z9(a,e){let t=q9(e);return new Promise(i=>{U2[a]=i,t.postMessage({type:"load",url:a})})}var sS={extension:{type:I.LoadParser,priority:Mt.High,name:"loadBasis"},name:"loadBasis",test(a){return zt(a,[".basis"])},async load(a,e,t){let i=await Lo(),s=await Z9(a,i),r=new Mi(s);return Za(r,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}};var Q9={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},J9={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},L2=(a=>(a[a.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",a[a.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",a[a.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",a[a.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",a[a.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",a[a.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",a[a.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",a[a.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",a[a.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",a[a.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",a[a.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",a[a.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",a[a.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",a[a.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",a[a.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",a[a.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",a[a.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",a[a.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",a[a.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",a[a.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",a[a.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",a[a.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",a[a.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",a[a.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",a[a.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",a[a.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",a[a.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",a[a.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",a[a.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",a[a.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",a[a.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",a[a.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",a[a.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",a[a.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",a[a.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",a[a.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",a[a.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",a[a.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",a[a.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",a[a.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",a[a.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",a[a.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",a[a.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",a[a.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",a[a.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",a[a.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",a[a.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",a[a.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",a[a.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",a[a.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",a[a.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",a[a.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",a[a.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",a[a.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",a[a.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",a[a.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",a[a.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",a[a.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",a[a.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",a[a.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",a[a.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",a[a.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",a[a.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",a[a.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",a[a.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",a[a.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",a[a.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",a[a.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",a[a.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",a[a.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",a[a.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",a[a.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",a[a.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",a[a.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",a[a.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",a[a.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",a[a.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",a[a.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",a[a.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",a[a.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",a[a.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",a[a.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",a[a.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",a[a.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",a[a.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",a[a.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",a[a.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",a[a.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",a[a.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",a[a.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",a[a.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",a[a.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",a[a.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",a[a.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",a[a.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",a[a.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",a[a.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",a[a.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",a[a.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",a[a.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",a[a.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",a[a.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",a[a.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",a[a.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",a[a.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",a[a.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",a[a.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",a[a.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",a[a.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",a[a.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",a[a.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",a[a.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",a[a.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",a[a.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",a[a.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",a[a.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",a[a.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",a))(L2||{}),N2=(a=>(a[a.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",a[a.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",a[a.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",a))(N2||{});function $e(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}var bt=(a=>(a[a.UNKNOWN=0]="UNKNOWN",a[a.R8G8B8=20]="R8G8B8",a[a.A8R8G8B8=21]="A8R8G8B8",a[a.X8R8G8B8=22]="X8R8G8B8",a[a.R5G6B5=23]="R5G6B5",a[a.X1R5G5B5=24]="X1R5G5B5",a[a.A1R5G5B5=25]="A1R5G5B5",a[a.A4R4G4B4=26]="A4R4G4B4",a[a.R3G3B2=27]="R3G3B2",a[a.A8=28]="A8",a[a.A8R3G3B2=29]="A8R3G3B2",a[a.X4R4G4B4=30]="X4R4G4B4",a[a.A2B10G10R10=31]="A2B10G10R10",a[a.A8B8G8R8=32]="A8B8G8R8",a[a.X8B8G8R8=33]="X8B8G8R8",a[a.G16R16=34]="G16R16",a[a.A2R10G10B10=35]="A2R10G10B10",a[a.A16B16G16R16=36]="A16B16G16R16",a[a.A8P8=40]="A8P8",a[a.P8=41]="P8",a[a.L8=50]="L8",a[a.A8L8=51]="A8L8",a[a.A4L4=52]="A4L4",a[a.V8U8=60]="V8U8",a[a.L6V5U5=61]="L6V5U5",a[a.X8L8V8U8=62]="X8L8V8U8",a[a.Q8W8V8U8=63]="Q8W8V8U8",a[a.V16U16=64]="V16U16",a[a.A2W10V10U10=67]="A2W10V10U10",a[a.Q16W16V16U16=110]="Q16W16V16U16",a[a.R16F=111]="R16F",a[a.G16R16F=112]="G16R16F",a[a.A16B16G16R16F=113]="A16B16G16R16F",a[a.R32F=114]="R32F",a[a.G32R32F=115]="G32R32F",a[a.A32B32G32R32F=116]="A32B32G32R32F",a[a.UYVY=$e("UYVY")]="UYVY",a[a.R8G8_B8G8=$e("RGBG")]="R8G8_B8G8",a[a.YUY2=$e("YUY2")]="YUY2",a[a.D3DFMT_G8R8_G8B8=$e("GRGB")]="D3DFMT_G8R8_G8B8",a[a.DXT1=$e("DXT1")]="DXT1",a[a.DXT2=$e("DXT2")]="DXT2",a[a.DXT3=$e("DXT3")]="DXT3",a[a.DXT4=$e("DXT4")]="DXT4",a[a.DXT5=$e("DXT5")]="DXT5",a[a.ATI1=$e("ATI1")]="ATI1",a[a.AT1N=$e("AT1N")]="AT1N",a[a.ATI2=$e("ATI2")]="ATI2",a[a.AT2N=$e("AT2N")]="AT2N",a[a.BC4U=$e("BC4U")]="BC4U",a[a.BC4S=$e("BC4S")]="BC4S",a[a.BC5U=$e("BC5U")]="BC5U",a[a.BC5S=$e("BC5S")]="BC5S",a[a.DX10=$e("DX10")]="DX10",a))(bt||{}),Gb={[bt.DXT1]:"bc1-rgba-unorm",[bt.DXT2]:"bc2-rgba-unorm",[bt.DXT3]:"bc2-rgba-unorm",[bt.DXT4]:"bc3-rgba-unorm",[bt.DXT5]:"bc3-rgba-unorm",[bt.ATI1]:"bc4-r-unorm",[bt.BC4U]:"bc4-r-unorm",[bt.BC4S]:"bc4-r-snorm",[bt.ATI2]:"bc5-rg-unorm",[bt.BC5U]:"bc5-rg-unorm",[bt.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},pt={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},le={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:Q9,HEADER_DX10_FIELDS:J9,DXGI_FORMAT:L2,D3D10_RESOURCE_DIMENSION:N2,D3DFMT:bt},e_={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function t_(a,e){let{format:t,fourCC:i,width:s,height:r,dataOffset:n,mipmapCount:d}=i_(a);if(!e.includes(t))throw new Error(`Unsupported texture format: ${i} ${t}, supported: ${e}`);if(d<=1)return{format:t,width:s,height:r,resource:[new Uint8Array(a,n)],alphaMode:"no-premultiply-alpha"};let h=a_(t,s,r,n,d,a);return{format:t,width:s,height:r,resource:h,alphaMode:"no-premultiply-alpha"}}function a_(a,e,t,i,s,r){let n=[],d=e_[a],h=e,l=t,u=i;for(let p=0;p<s;++p){let _=Math.ceil(Math.max(4,h)/4)*4,m=Math.ceil(Math.max(4,l)/4)*4,v=d?_/4*m/4*d:h*l*4,T=new Uint8Array(r,u,v);n.push(T),u+=v,h=Math.max(h>>1,1),l=Math.max(l>>1,1)}return n}function i_(a){let e=new Uint32Array(a,0,le.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[le.HEADER_FIELDS.MAGIC]!==le.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");let t=e[le.HEADER_FIELDS.HEIGHT],i=e[le.HEADER_FIELDS.WIDTH],s=Math.max(1,e[le.HEADER_FIELDS.MIPMAP_COUNT]),r=e[le.HEADER_FIELDS.PF_FLAGS],n=e[le.HEADER_FIELDS.FOURCC],d=s_(e,r,n,a),h=le.MAGIC_SIZE+le.HEADER_SIZE+(n===le.D3DFMT.DX10?le.HEADER_DX10_SIZE:0);return{format:d,fourCC:n,width:i,height:t,dataOffset:h,mipmapCount:s}}function s_(a,e,t,i){if(e&le.PIXEL_FORMAT_FLAGS.FOURCC){if(t===le.D3DFMT.DX10){let s=new Uint32Array(i,le.MAGIC_SIZE+le.HEADER_SIZE,le.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(s[le.HEADER_DX10_FIELDS.MISC_FLAG]===le.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(s[le.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===le.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");let r=s[le.HEADER_DX10_FIELDS.DXGI_FORMAT];if(r in pt)return pt[r];throw new Error(`DDSParser cannot parse texture data with DXGI format ${r}`)}if(t in Gb)return Gb[t];throw new Error(`DDSParser cannot parse texture data with fourCC format ${t}`)}if(e&le.PIXEL_FORMAT_FLAGS.RGB||e&le.PIXEL_FORMAT_FLAGS.RGBA)return r_(a);throw e&le.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&le.PIXEL_FORMAT_FLAGS.LUMINANCE||e&le.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&le.PIXEL_FORMAT_FLAGS.ALPHA||e&le.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function r_(a){let e=a[le.HEADER_FIELDS.RGB_BITCOUNT],t=a[le.HEADER_FIELDS.R_BIT_MASK],i=a[le.HEADER_FIELDS.G_BIT_MASK],s=a[le.HEADER_FIELDS.B_BIT_MASK],r=a[le.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(t===255&&i===65280&&s===16711680&&r===4278190080)return pt[le.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(t===16711680&&i===65280&&s===255&&r===4278190080)return pt[le.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(t===1072693248&&i===1047552&&s===1023&&r===3221225472)return pt[le.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(t===65535&&i===4294901760&&s===0&&r===0)return pt[le.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(t===4294967295&&i===0&&s===0&&r===0)return pt[le.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(t===31744&&i===992&&s===31&&r===32768)return pt[le.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(t===63488&&i===2016&&s===31&&r===0)return pt[le.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(t===3840&&i===240&&s===15&&r===61440)return pt[le.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(t===255&&i===0&&s===0&&r===65280)return pt[le.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(t===65535&&i===0&&s===0&&r===0)return pt[le.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(t===255&&i===0&&s===0&&r===0)return pt[le.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
bitCount = ${e}, rBitMask = ${t}, gBitMask = ${i}, aBitMask = ${r}`)}var rS={extension:{type:I.LoadParser,priority:Mt.High,name:"loadDDS"},name:"loadDDS",test(a){return zt(a,[".dds"])},async load(a,e,t){let i=await Lo(),s=await(await fetch(a)).arrayBuffer(),r=t_(s,i),n=new Mi(r);return Za(n,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}},n_=(a=>(a[a.RGBA8_SNORM=36759]="RGBA8_SNORM",a[a.RGBA=6408]="RGBA",a[a.RGBA8UI=36220]="RGBA8UI",a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",a[a.RGBA8I=36238]="RGBA8I",a[a.RGBA8=32856]="RGBA8",a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",a[a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",a[a.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",a[a.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",a[a.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",a[a.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",a[a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",a[a.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",a[a.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",a[a.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",a[a.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",a[a.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",a[a.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",a[a.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",a[a.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",a[a.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",a[a.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",a[a.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",a[a.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",a[a.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",a[a.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",a[a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",a[a.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",a[a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",a[a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",a[a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",a))(n_||{}),o_=(a=>(a[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a))(o_||{}),c_=(a=>(a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT",a))(c_||{}),d_={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},h_=[171,75,84,88,32,49,49,187,13,10,26,10],l_={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},f_=64,u_=67305985,b_={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},p_={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},g_={32819:2,32820:2,33635:2},m_={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Ue={FILE_HEADER_SIZE:f_,FILE_IDENTIFIER:h_,FORMATS_TO_COMPONENTS:p_,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:m_,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:d_,FIELDS:l_,TYPES_TO_BYTES_PER_COMPONENT:b_,TYPES_TO_BYTES_PER_PIXEL:g_,ENDIANNESS:u_};function __(a,e){let t=new DataView(a);if(!T_(t))throw new Error("Invalid KTX identifier in header");let{littleEndian:i,glType:s,glFormat:r,glInternalFormat:n,pixelWidth:d,pixelHeight:h,numberOfMipmapLevels:l,offset:u}=v_(t),p=Ue.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[n];if(!p)throw new Error(`Unknown texture format ${n}`);if(!e.includes(p))throw new Error(`Unsupported texture format: ${p}, supportedFormats: ${e}`);let _=x_(s,r,n),m=y_(t,s,_,d,h,u,l,i);return{format:p,width:d,height:h,resource:m,alphaMode:"no-premultiply-alpha"}}function y_(a,e,t,i,s,r,n,d){let h=i+3&-4,l=s+3&-4,u=i*s;e===0&&(u=h*l);let p=u*t,_=i,m=s,v=h,T=l,w=r,P=new Array(n);for(let C=0;C<n;C++){let B=a.getUint32(w,d),D=w+4;P[C]=new Uint8Array(a.buffer,D,p),D+=p,w+=B+4,w=w%4!==0?w+4-w%4:w,_=_>>1||1,m=m>>1||1,v=_+4-1&-4,T=m+4-1&-4,p=v*T*t}return P}function x_(a,e,t){let i=Ue.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[t];if(a!==0&&(Ue.TYPES_TO_BYTES_PER_COMPONENT[a]?i=Ue.TYPES_TO_BYTES_PER_COMPONENT[a]*Ue.FORMATS_TO_COMPONENTS[e]:i=Ue.TYPES_TO_BYTES_PER_PIXEL[a]),i===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return i}function v_(a){let e=a.getUint32(Ue.FIELDS.ENDIANNESS,!0)===Ue.ENDIANNESS,t=a.getUint32(Ue.FIELDS.GL_TYPE,e),i=a.getUint32(Ue.FIELDS.GL_FORMAT,e),s=a.getUint32(Ue.FIELDS.GL_INTERNAL_FORMAT,e),r=a.getUint32(Ue.FIELDS.PIXEL_WIDTH,e),n=a.getUint32(Ue.FIELDS.PIXEL_HEIGHT,e)||1,d=a.getUint32(Ue.FIELDS.PIXEL_DEPTH,e)||1,h=a.getUint32(Ue.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,l=a.getUint32(Ue.FIELDS.NUMBER_OF_FACES,e),u=a.getUint32(Ue.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),p=a.getUint32(Ue.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(n===0||d!==1)throw new Error("Only 2D textures are supported");if(l!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:t,glFormat:i,glInternalFormat:s,pixelWidth:r,pixelHeight:n,numberOfMipmapLevels:u,offset:Ue.FILE_HEADER_SIZE+p}}function T_(a){for(let e=0;e<Ue.FILE_IDENTIFIER.length;e++)if(a.getUint8(e)!==Ue.FILE_IDENTIFIER[e])return!1;return!0}var nS={extension:{type:I.LoadParser,priority:Mt.High,name:"loadKTX"},name:"loadKTX",test(a){return zt(a,".ktx")},async load(a,e,t){let i=await Lo(),s=await(await fetch(a)).arrayBuffer(),r=__(s,i),n=new Mi(r);return Za(n,t,a)},unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}},S_='(function(){"use strict";const s={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:i},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:i}};function f(r){const t=r.format;if(s[t]){const n=s[t].convertFunction,o=r.resource;for(let e=0;e<o.length;e++)o[e]=n(o[e]);r.format=s[t].convertedFormat}}function i(r){const t=r.byteLength/3,n=new Uint32Array(t);for(let o=0;o<t;++o)n[o]=r[o*3]+(r[o*3+1]<<8)+(r[o*3+2]<<16)+4278190080;return new Uint8Array(n.buffer)}function d(r){const t=[];for(let n=0;n<r.numLevels;n++){const o=r.getImageData(n,0,0),e=new Uint8Array(o.byteLength);e.set(o),t.push(e)}return t}const w={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function p(r){const t=w[r];if(t)return t;throw new Error(`Unsupported glInternalFormat: ${r}`)}const h={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function F(r){const t=h[r];if(t)return t;throw new Error(`Unsupported VkFormat: ${r}`)}function U(r){return r.classId===2?F(r.vkFormat):p(r.glInternalformat)}const T={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function y(r){const t=T[r];if(t)return t;throw new Error(`Unsupported transcoderFormat: ${r}`)}const a={jsUrl:"",wasmUrl:""};let l,u,c;async function g(){if(!c){const r=new URL(a.jsUrl,location.origin).href,t=new URL(a.wasmUrl,location.origin).href;importScripts(r),c=new Promise(n=>{LIBKTX({locateFile:o=>t}).then(o=>{n(o)})})}return c}async function v(r,t){const n=await fetch(r);if(n.ok){const o=await n.arrayBuffer();return new t.ktxTexture(new Uint8Array(o))}throw new Error(`Failed to load KTX(2) texture: ${r}`)}const x=["bc7-rgba-unorm","astc-4x4-unorm","etc2-rgba8unorm","bc3-rgba-unorm","rgba8unorm"];async function B(r){const t=await g(),n=await v(r,t);let o;if(n.needsTranscoding){o=u;const R=t.TranscodeTarget[l];if(n.transcodeBasis(R,0)!==t.ErrorCode.SUCCESS)throw new Error("Unable to transcode basis texture.")}else o=U(n);const e=d(n),b={width:n.baseWidth,height:n.baseHeight,format:o,mipLevelCount:n.numLevels,resource:e,alphaMode:"no-premultiply-alpha"};return f(b),b}async function A(r,t,n){r&&(a.jsUrl=r),t&&(a.wasmUrl=t),u=x.filter(o=>n.includes(o))[0],l=y(u),await g()}const m={init:async r=>{const{jsUrl:t,wasmUrl:n,supportedTextures:o}=r;await A(t,n,o)},load:async r=>{var t;try{const n=await B(r.url);return{type:"load",url:r.url,success:!0,textureOptions:n,transferables:(t=n.resource)==null?void 0:t.map(o=>o.buffer)}}catch(n){throw n}}};self.onmessage=async r=>{var t;const n=r.data,o=await((t=m[n.type])==null?void 0:t.call(m,n));o&&self.postMessage(o,o.transferables)}})();\n',Ti=null,Rn=class{constructor(){Ti||(Ti=URL.createObjectURL(new Blob([S_],{type:"application/javascript"}))),this.worker=new Worker(Ti)}};Rn.revokeObjectURL=function(){Ti&&(URL.revokeObjectURL(Ti),Ti=null)};var Bb={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};var ds,j2={};function w_(a){return ds||(ds=new Rn().worker,ds.onmessage=e=>{let{success:t,url:i,textureOptions:s}=e.data;j2[i](s)},ds.postMessage({type:"init",jsUrl:Bb.jsUrl,wasmUrl:Bb.wasmUrl,supportedTextures:a})),ds}function A_(a,e){let t=w_(e);return new Promise(i=>{j2[a]=i,t.postMessage({type:"load",url:a})})}var oS={extension:{type:I.LoadParser,priority:Mt.High,name:"loadKTX2"},name:"loadKTX2",test(a){return zt(a,".ktx2")},async load(a,e,t){let i=await Lo(),s=await A_(a,i),r=new Mi(s);return Za(r,t,a)},async unload(a){Array.isArray(a)?a.forEach(e=>e.destroy(!0)):a.destroy(!0)}};var Sh=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],cS={extension:I.ResolveParser,test:a=>zt(a,[".ktx",".ktx2",".dds"]),parse:a=>{var e,t;let i,s=a.split(".");if(s.length>2){let r=s[s.length-2];Sh.includes(r)&&(i=r)}else i=s[s.length-1];return{resolution:parseFloat((t=(e=da.RETINA_PREFIX.exec(a))==null?void 0:e[1])!=null?t:"1"),format:i,src:a}}},Pr,dS={extension:{type:I.DetectionParser,priority:2},test:async()=>!!(await ko()||Do()),add:async a=>{let e=await D2();return Pr=E_(e),[...Pr,...a]},remove:async a=>Pr?a.filter(e=>!(e in Pr)):a};function E_(a){let e=["basis"],t={};return a.forEach(i=>{let s=i.split("-")[0];s&&!t[s]&&(t[s]=!0,e.push(s))}),e.sort((i,s)=>{let r=Sh.indexOf(i),n=Sh.indexOf(s);return r===-1?1:n===-1?-1:r-n}),e}var P_=new Ze,wh=class{cull(a,e,t=!0){this._cullRecursive(a,e,t)}_cullRecursive(a,e,t=!0){var i;if(a.cullable&&a.measurable&&a.includeInBuild){let s=(i=a.cullArea)!=null?i:Co(a,t,P_);a.culled=s.x>=e.x+e.width||s.y>=e.y+e.height||s.x+s.width<=e.x||s.y+s.height<=e.y}else a.culled=!1;if(!(!a.cullableChildren||a.culled||!a.renderable||!a.measurable||!a.includeInBuild))for(let s=0;s<a.children.length;s++)this._cullRecursive(a.children[s],e,t)}};wh.shared=new wh;var R_=wh,Ah=class{static init(){this._renderRef=this.render.bind(this),this.render=()=>{R_.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}};Ah.extension={priority:10,type:I.Application,name:"culler"};var hS={extension:{type:I.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(function(){return x7})}},M_=Object.defineProperty,Mn=Object.getOwnPropertySymbols,X2=Object.prototype.hasOwnProperty,H2=Object.prototype.propertyIsEnumerable,Fb=(a,e,t)=>e in a?M_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,hd=(a,e)=>{for(var t in e||(e={}))X2.call(e,t)&&Fb(a,t,e[t]);if(Mn)for(var t of Mn(e))H2.call(e,t)&&Fb(a,t,e[t]);return a},C_=(a,e)=>{var t={};for(var i in a)X2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Mn)for(var i of Mn(a))e.indexOf(i)<0&&H2.call(a,i)&&(t[i]=a[i]);return t},z2=class Eh extends ht{constructor(e){e=hd(hd({},Eh.defaultOptions),e),super(e),this.enabled=!0,this._state=Pt.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(e,t,i,s){e.applyFilter(this,t,i,s)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){let t=e,{gpu:i,gl:s}=t,r=C_(t,["gpu","gl"]),n,d;return i&&(n=Zt.from(i)),s&&(d=fa.from(s)),new Eh(hd({gpuProgram:n,glProgram:d},r))}};z2.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};var $s=z2;var V2=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
gl_Position = filterVertexPosition();
vTextureCoord = filterTextureCoord();
}
`,O_=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,Db=`struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition)
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var sample = textureSample(uTexture, uSampler, uv);

return sample * alphaUniforms.uAlpha;
}`,I_=Object.defineProperty,G_=Object.defineProperties,B_=Object.getOwnPropertyDescriptors,Cn=Object.getOwnPropertySymbols,W2=Object.prototype.hasOwnProperty,Y2=Object.prototype.propertyIsEnumerable,kb=(a,e,t)=>e in a?I_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ld=(a,e)=>{for(var t in e||(e={}))W2.call(e,t)&&kb(a,t,e[t]);if(Cn)for(var t of Cn(e))Y2.call(e,t)&&kb(a,t,e[t]);return a},F_=(a,e)=>G_(a,B_(e)),D_=(a,e)=>{var t={};for(var i in a)W2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Cn)for(var i of Cn(a))e.indexOf(i)<0&&Y2.call(a,i)&&(t[i]=a[i]);return t},k_=class $2 extends $s{constructor(e){e=ld(ld({},$2.defaultOptions),e);let t=Zt.from({vertex:{source:Db,entryPoint:"mainVertex"},fragment:{source:Db,entryPoint:"mainFragment"}}),i=fa.from({vertex:V2,fragment:O_,name:"alpha-filter"}),s=e,{alpha:r}=s,n=D_(s,["alpha"]),d=new et({uAlpha:{value:r,type:"f32"}});super(F_(ld({},n),{gpuProgram:t,glProgram:i,resources:{alphaUniforms:d}}))}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};k_.defaultOptions={alpha:1};var K2={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},U_=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function L_(a){let e=K2[a],t=e.length,i=U_,s="",r="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;",n;for(let d=0;d<a;d++){let h=r.replace("%index%",d.toString());n=d,d>=t&&(n=a-d-1),h=h.replace("%value%",e[n].toString()),s+=h,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",a.toString()),i}var N_=`
in vec2 aPosition;

uniform float uStrength;

out vec2 vBlurTexCoords[%size%];

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
gl_Position = filterVertexPosition();

float pixelStrength = uInputSize.%dimension% * uStrength;

vec2 textureCoord = filterTextureCoord();
%blur%
}`;function j_(a,e){let t=Math.ceil(a/2),i=N_,s="",r;e?r="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":r="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let n=0;n<a;n++){let d=r.replace("%index%",n.toString());d=d.replace("%sampleIndex%",`${n-(t-1)}.0`),s+=d,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",a.toString()),i=i.replace("%dimension%",e?"z":"w"),i}function X_(a,e){let t=j_(e,a),i=L_(e);return fa.from({vertex:t,fragment:i,name:`blur-${a?"horizontal":"vertical"}-pass-filter`})}var H_=`

struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
@builtin(position) position: vec4<f32>,
%blur-struct%
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {

let filteredCord = filterTextureCoord(aPosition);

let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

return VSOutput(
filterVertexPosition(aPosition),
%blur-vertex-out%
);
}

@fragment
fn mainFragment(
@builtin(position) position: vec4<f32>,
%blur-fragment-in%
) -> @location(0) vec4<f32> {

var   finalColor = vec4(0.0);

%blur-sampling%

return finalColor;
}`;function z_(a,e){let t=K2[e],i=t.length,s=[],r=[],n=[];for(let p=0;p<e;p++){s[p]=`@location(${p}) offset${p}: vec2<f32>,`,a?r[p]=`filteredCord + vec2(${p-i+1} * pixelStrength, 0.0),`:r[p]=`filteredCord + vec2(0.0, ${p-i+1} * pixelStrength),`;let _=p<i?p:e-p-1,m=t[_].toString();n[p]=`finalColor += textureSample(uTexture, uSampler, offset${p}) * ${m};`}let d=s.join(`
`),h=r.join(`
`),l=n.join(`
`),u=H_.replace("%blur-struct%",d).replace("%blur-vertex-out%",h).replace("%blur-fragment-in%",d).replace("%blur-sampling%",l).replace("%dimension%",a?"z":"w");return Zt.from({vertex:{source:u,entryPoint:"mainVertex"},fragment:{source:u,entryPoint:"mainFragment"}})}var V_=Object.defineProperty,Ub=Object.getOwnPropertySymbols,W_=Object.prototype.hasOwnProperty,Y_=Object.prototype.propertyIsEnumerable,Lb=(a,e,t)=>e in a?V_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,fd=(a,e)=>{for(var t in e||(e={}))W_.call(e,t)&&Lb(a,t,e[t]);if(Ub)for(var t of Ub(e))Y_.call(e,t)&&Lb(a,t,e[t]);return a},q2=class Z2 extends $s{constructor(e){e=fd(fd({},Z2.defaultOptions),e);let t=X_(e.horizontal,e.kernelSize),i=z_(e.horizontal,e.kernelSize);super(fd({glProgram:t,gpuProgram:i,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}}},e)),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,t,i,s){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,t,i,s);else{let r=Ve.getSameSizeTexture(t),n=t,d=r;this._state.blend=!1;let h=e.renderer.type===yt.WEBGPU;for(let l=0;l<this.passes-1;l++){e.applyFilter(this,n,d,l===0?!0:h);let u=d;d=n,n=u}this._state.blend=!0,e.applyFilter(this,n,i,s),Ve.returnTexture(r)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};q2.defaultOptions={strength:8,quality:4,kernelSize:5};var ud=q2,$_=Object.defineProperty,K_=Object.defineProperties,q_=Object.getOwnPropertyDescriptors,On=Object.getOwnPropertySymbols,Q2=Object.prototype.hasOwnProperty,J2=Object.prototype.propertyIsEnumerable,Nb=(a,e,t)=>e in a?$_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,hs=(a,e)=>{for(var t in e||(e={}))Q2.call(e,t)&&Nb(a,t,e[t]);if(On)for(var t of On(e))J2.call(e,t)&&Nb(a,t,e[t]);return a},Z_=(a,e)=>K_(a,q_(e)),Q_=(a,e)=>{var t={};for(var i in a)Q2.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&On)for(var i of On(a))e.indexOf(i)<0&&J2.call(a,i)&&(t[i]=a[i]);return t},Ph=class extends $s{constructor(...e){var t;let i=(t=e[0])!=null?t:{};typeof i=="number"&&(i={strength:i},e[1]!==void 0&&(i.quality=e[1]),e[2]!==void 0&&(i.resolution=e[2]||"inherit"),e[3]!==void 0&&(i.kernelSize=e[3])),i=hs(hs({},ud.defaultOptions),i);let s=i,{strength:r,strengthX:n,strengthY:d,quality:h}=s,l=Q_(s,["strength","strengthX","strengthY","quality"]);super(Z_(hs({},l),{compatibleRenderers:yt.BOTH,resources:{}})),this._repeatEdgePixels=!1,this.blurXFilter=new ud(hs({horizontal:!0},i)),this.blurYFilter=new ud(hs({horizontal:!1},i)),this.quality=h,this.strengthX=n??r,this.strengthY=d??r,this.repeatEdgePixels=!1}apply(e,t,i,s){let r=Math.abs(this.blurXFilter.strength),n=Math.abs(this.blurYFilter.strength);if(r&&n){let d=Ve.getSameSizeTexture(t);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,t,d,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,d,i,s),Ve.returnTexture(d)}else n?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,t,i,s)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,t,i,s))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return this.strength}set blur(e){this.strength=e}get blurX(){return this.strengthX}set blurX(e){this.strengthX=e}get blurY(){return this.strengthY}set blurY(e){this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}};Ph.defaultOptions={strength:8,quality:4,kernelSize:5};var J_=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
vec4 color = texture(uTexture, vTextureCoord);
float randomValue = rand(gl_FragCoord.xy * uSeed);
float diff = (randomValue - 0.5) *  uNoise;

// Un-premultiply alpha before applying the color matrix. See issue #3539.
if (color.a > 0.0) {
color.rgb /= color.a;
}

color.r += diff;
color.g += diff;
color.b += diff;

// Premultiply alpha again.
color.rgb *= color.a;

finalColor = color;
}
`,jb=`

struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
uNoise:f32,
uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>, 
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition)
);
}

fn rand(co:vec2<f32>) -> f32
{
return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);


var sample = textureSample(uTexture, uSampler, uv);
var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
var diff = (randomValue - 0.5) * noiseUniforms.uNoise;

// Un-premultiply alpha before applying the color matrix. See issue #3539.
if (sample.a > 0.0) {
sample.r /= sample.a;
sample.g /= sample.a;
sample.b /= sample.a;
}

sample.r += diff;
sample.g += diff;
sample.b += diff;

// Premultiply alpha again.
sample.r *= sample.a;
sample.g *= sample.a;
sample.b *= sample.a;

return sample;
}`,ey=Object.defineProperty,ty=Object.defineProperties,ay=Object.getOwnPropertyDescriptors,In=Object.getOwnPropertySymbols,e3=Object.prototype.hasOwnProperty,t3=Object.prototype.propertyIsEnumerable,Xb=(a,e,t)=>e in a?ey(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,bd=(a,e)=>{for(var t in e||(e={}))e3.call(e,t)&&Xb(a,t,e[t]);if(In)for(var t of In(e))t3.call(e,t)&&Xb(a,t,e[t]);return a},iy=(a,e)=>ty(a,ay(e)),sy=(a,e)=>{var t={};for(var i in a)e3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&In)for(var i of In(a))e.indexOf(i)<0&&t3.call(a,i)&&(t[i]=a[i]);return t},ry=class a3 extends $s{constructor(e={}){e=bd(bd({},a3.defaultOptions),e);let t=Zt.from({vertex:{source:jb,entryPoint:"mainVertex"},fragment:{source:jb,entryPoint:"mainFragment"}}),i=fa.from({vertex:V2,fragment:J_,name:"noise-filter"}),s=e,{noise:r,seed:n}=s,d=sy(s,["noise","seed"]);super(iy(bd({},d),{gpuProgram:t,glProgram:i,resources:{noiseUniforms:new et({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}})),this.noise=r,this.seed=n??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};ry.defaultOptions={noise:.5};var ny=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
float clip = step(3.5,
step(uMaskClamp.x, vMaskCoord.x) +
step(uMaskClamp.y, vMaskCoord.y) +
step(vMaskCoord.x, uMaskClamp.z) +
step(vMaskCoord.y, uMaskClamp.w));

// TODO look into why this is needed
float npmAlpha = uAlpha;
vec4 original = texture(uTexture, vTextureCoord);
vec4 masky = texture(uMaskTexture, vMaskCoord);
float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

float a = alphaMul * masky.r * npmAlpha * clip;

if (uInverse == 1.0) {
a = 1.0 - a;
}

finalColor = original * a;
}
`,oy=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
gl_Position = filterVertexPosition(aPosition);
vTextureCoord = filterTextureCoord(aPosition);
vMaskCoord = getFilterCoord(aPosition);
}
`,Hb=`struct GlobalFilterUniforms {
uInputSize:vec4<f32>,
uInputPixel:vec4<f32>,
uInputClamp:vec4<f32>,
uOutputFrame:vec4<f32>,
uGlobalFrame:vec4<f32>,
uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
uFilterMatrix:mat3x3<f32>,
uMaskClamp:vec4<f32>,
uAlpha:f32,
uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
@builtin(position) position: vec4<f32>,
@location(0) uv : vec2<f32>,
@location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
@location(0) aPosition : vec2<f32>,
) -> VSOutput {
return VSOutput(
filterVertexPosition(aPosition),
filterTextureCoord(aPosition),
getFilterCoord(aPosition)
);
}

@fragment
fn mainFragment(
@location(0) uv: vec2<f32>,
@location(1) filterUv: vec2<f32>,
@builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

var maskClamp = filterUniforms.uMaskClamp;
var uAlpha = filterUniforms.uAlpha;

var clip = step(3.5,
step(maskClamp.x, filterUv.x) +
step(maskClamp.y, filterUv.y) +
step(filterUv.x, maskClamp.z) +
step(filterUv.y, maskClamp.w));

var mask = textureSample(uMaskTexture, uSampler, filterUv);
var source = textureSample(uTexture, uSampler, uv);
var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

var a: f32 = alphaMul * mask.r * uAlpha * clip;

if (filterUniforms.uInverse == 1.0) {
a = 1.0 - a;
}

return source * a;
}
`,cy=Object.defineProperty,dy=Object.defineProperties,hy=Object.getOwnPropertyDescriptors,Gn=Object.getOwnPropertySymbols,i3=Object.prototype.hasOwnProperty,s3=Object.prototype.propertyIsEnumerable,zb=(a,e,t)=>e in a?cy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ly=(a,e)=>{for(var t in e||(e={}))i3.call(e,t)&&zb(a,t,e[t]);if(Gn)for(var t of Gn(e))s3.call(e,t)&&zb(a,t,e[t]);return a},fy=(a,e)=>dy(a,hy(e)),uy=(a,e)=>{var t={};for(var i in a)i3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Gn)for(var i of Gn(a))e.indexOf(i)<0&&s3.call(a,i)&&(t[i]=a[i]);return t},Rh=class extends $s{constructor(e){let t=e,{sprite:i}=t,s=uy(t,["sprite"]),r=new jr(i.texture),n=new et({uFilterMatrix:{value:new ae,type:"mat3x3<f32>"},uMaskClamp:{value:r.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:e.inverse?1:0,type:"f32"}}),d=Zt.from({vertex:{source:Hb,entryPoint:"mainVertex"},fragment:{source:Hb,entryPoint:"mainFragment"}}),h=fa.from({vertex:oy,fragment:ny,name:"mask-filter"});super(fy(ly({},s),{gpuProgram:d,glProgram:h,resources:{filterUniforms:n,uMaskTexture:i.texture.source}})),this.sprite=i,this._textureMatrix=r}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,t,i,s){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,t,i,s)}};function Vb(a,e,t,i,s,r,n,d){let h=n-t,l=d-i,u=s-t,p=r-i,_=a-t,m=e-i,v=h*h+l*l,T=h*u+l*p,w=h*_+l*m,P=u*u+p*p,C=u*_+p*m,B=1/(v*P-T*T),D=(P*w-T*C)*B,X=(v*C-T*w)*B;return D>=0&&X>=0&&D+X<1}var r3=class n3{constructor(e){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{let{queue:t}=this,i=0;for(;t.length&&i<n3.uploadsPerFrame;){let s=t.shift();this.uploadQueueItem(s),i++}t.length?tt.system.addOnce(this._tick,this,Ra.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){let t=Array.isArray(e)?e:[e];for(let i of t)i instanceof de?this._addContainer(i):this.resolveQueueItem(i,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(let t of e.children)this._addContainer(t)}upload(e){return e&&this.add(e),new Promise(t=>{this.queue.length?(this.resolves.push(t),this.dedupeQueue(),tt.system.addOnce(this._tick,this,Ra.UTILITY)):t()})}dedupeQueue(){let e=Object.create(null),t=0;for(let i=0;i<this.queue.length;i++){let s=this.queue[i];e[s.uid]||(e[s.uid]=!0,this.queue[t++]=s)}this.queue.length=t}_resolve(){let{resolves:e}=this,t=e.slice(0);e.length=0;for(let i of t)i()}};r3.uploadsPerFrame=4;var by=r3,py=Object.defineProperty,Bn=Object.getOwnPropertySymbols,o3=Object.prototype.hasOwnProperty,c3=Object.prototype.propertyIsEnumerable,Wb=(a,e,t)=>e in a?py(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,gy=(a,e)=>{for(var t in e||(e={}))o3.call(e,t)&&Wb(a,t,e[t]);if(Bn)for(var t of Bn(e))c3.call(e,t)&&Wb(a,t,e[t]);return a},my=(a,e)=>{var t={};for(var i in a)o3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Bn)for(var i of Bn(a))e.indexOf(i)<0&&c3.call(a,i)&&(t[i]=a[i]);return t},Ka=class extends ha{constructor(...e){var t;let i=e[0];i instanceof qt&&(i={geometry:i,shader:e[1]},e[3]&&(i.geometry.topology=e[3]));let s=i,{geometry:r,shader:n,texture:d,roundPixels:h,state:l}=s,u=my(s,["geometry","shader","texture","roundPixels","state"]);super(gy({label:"Mesh"},u)),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=n??null,this.texture=(t=d??n?.texture)!=null?t:W.WHITE,this.state=l??Pt.for2d(),this._geometry=r,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=h??!1}get material(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){var t;this._geometry!==e&&((t=this._geometry)==null||t.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=W.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||this.state.data&12?!1:this._geometry instanceof Ys?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){let{x:t,y:i}=e;if(!this.bounds.containsPoint(t,i))return!1;let s=this.geometry.getBuffer("aPosition").data,r=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){let n=this.geometry.getIndex().data,d=n.length;for(let h=0;h+2<d;h+=r){let l=n[h]*2,u=n[h+1]*2,p=n[h+2]*2;if(Vb(t,i,s[l],s[l+1],s[u],s[u+1],s[p],s[p+1]))return!0}}else{let n=s.length/2;for(let d=0;d+2<n;d+=r){let h=d*2,l=(d+1)*2,u=(d+2)*2;if(Vb(t,i,s[h],s[h+1],s[l],s[l+1],s[u],s[u+1]))return!0}}return!1}destroy(e){var t;if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let i=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(i)}(t=this._geometry)==null||t.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}},_y=Object.defineProperty,yy=Object.defineProperties,xy=Object.getOwnPropertyDescriptors,Fn=Object.getOwnPropertySymbols,d3=Object.prototype.hasOwnProperty,h3=Object.prototype.propertyIsEnumerable,Yb=(a,e,t)=>e in a?_y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,vy=(a,e)=>{for(var t in e||(e={}))d3.call(e,t)&&Yb(a,t,e[t]);if(Fn)for(var t of Fn(e))h3.call(e,t)&&Yb(a,t,e[t]);return a},Ty=(a,e)=>yy(a,xy(e)),Sy=(a,e)=>{var t={};for(var i in a)d3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Fn)for(var i of Fn(a))e.indexOf(i)<0&&h3.call(a,i)&&(t[i]=a[i]);return t},Mh=class a extends Ae{constructor(...e){let t=e[0];Array.isArray(e[0])&&(t={textures:e[0],autoUpdate:e[1]});let i=t,{textures:s,autoUpdate:r}=i,n=Sy(i,["textures","autoUpdate"]),[d]=s;super(Ty(vy({},n),{texture:d instanceof W?d:d.texture})),this._textures=null,this._durations=null,this._autoUpdate=r??!0,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=s}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(tt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(tt.shared.add(this.update,this,Ra.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;let t=e.deltaTime,i=this.animationSpeed*t,s=this.currentFrame;if(this._durations!==null){let r=this._currentTime%1*this._durations[this.currentFrame];for(r+=i/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];let n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s||this.animationSpeed<0&&this.currentFrame>s)&&this.onLoop(),this._updateTexture())}_updateTexture(){let e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){let t=[];for(let i=0;i<e.length;++i)t.push(W.from(e[i]));return new a(t)}static fromImages(e){let t=[];for(let i=0;i<e.length;++i)t.push(W.from(e[i]));return new a(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof W)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(tt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(tt.shared.add(this.update,this),this._isConnectedToTicker=!0))}},Ch=class{constructor({matrix:e,observer:t}={}){this.dirty=!0,this._matrix=e??new ae,this.observer=t,this.position=new We(this,0,0),this.scale=new We(this,1,1),this.pivot=new We(this,0,0),this.skew=new We(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){let e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){var t;this.dirty=!0,e===this.skew&&this.updateSkew(),(t=this.observer)==null||t._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}},wy=Object.defineProperty,Dn=Object.getOwnPropertySymbols,l3=Object.prototype.hasOwnProperty,f3=Object.prototype.propertyIsEnumerable,$b=(a,e,t)=>e in a?wy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ls=(a,e)=>{for(var t in e||(e={}))l3.call(e,t)&&$b(a,t,e[t]);if(Dn)for(var t of Dn(e))f3.call(e,t)&&$b(a,t,e[t]);return a},Ay=(a,e)=>{var t={};for(var i in a)l3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Dn)for(var i of Dn(a))e.indexOf(i)<0&&f3.call(a,i)&&(t[i]=a[i]);return t},u3=class Dr extends ha{constructor(...e){let t=e[0]||{};t instanceof W&&(t={texture:t}),e.length>1&&(t.width=e[1],t.height=e[2]),t=ls(ls({},Dr.defaultOptions),t);let i=t??{},{texture:s,anchor:r,tilePosition:n,tileScale:d,tileRotation:h,width:l,height:u,applyAnchorToTexture:p,roundPixels:_}=i,m=Ay(i,["texture","anchor","tilePosition","tileScale","tileRotation","width","height","applyAnchorToTexture","roundPixels"]);super(ls({label:"TilingSprite"},m)),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new We({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=p,this.texture=s,this._width=l??s.width,this._height=u??s.height,this._tileTransform=new Ch({observer:{_onUpdate:()=>this.onViewUpdate()}}),r&&(this.anchor=r),this.tilePosition=n,this.tileScale=d,this.tileRotation=h,this.roundPixels=_??!1}static from(e,t={}){return typeof e=="string"?new Dr(ls({texture:Me.get(e)},t)):new Dr(ls({texture:e},t))}get uvRespectAnchor(){return Qt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){Qt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=W.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,t){var i;typeof e=="object"&&(t=(i=e.height)!=null?i:e.width,e=e.width),this._width=e,this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){let e=this._bounds,t=this._anchor,i=this._width,s=this._height;e.maxX=-t._x*i,e.minX=e.maxX+i,e.maxY=-t._y*s,e.minY=e.maxY+s}containsPoint(e){let t=this._width,i=this._height,s=-t*this._anchor._x,r=0;return e.x>=s&&e.x<=s+t&&(r=-i*this._anchor._y,e.y>=r&&e.y<=r+i)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};u3.defaultOptions={texture:W.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};var Ey=u3,Py=Object.defineProperty,kn=Object.getOwnPropertySymbols,b3=Object.prototype.hasOwnProperty,p3=Object.prototype.propertyIsEnumerable,Kb=(a,e,t)=>e in a?Py(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Ry=(a,e)=>{for(var t in e||(e={}))b3.call(e,t)&&Kb(a,t,e[t]);if(kn)for(var t of kn(e))p3.call(e,t)&&Kb(a,t,e[t]);return a},My=(a,e)=>{var t={};for(var i in a)b3.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&kn)for(var i of kn(a))e.indexOf(i)<0&&p3.call(a,i)&&(t[i]=a[i]);return t},Us=class extends ha{constructor(e,t){let i=e,{text:s,resolution:r,style:n,anchor:d,width:h,height:l,roundPixels:u}=i,p=My(i,["text","resolution","style","anchor","width","height","roundPixels"]);super(Ry({},p)),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=s??"",this.style=n,this.resolution=r??null,this.allowChildren=!1,this._anchor=new We({_onUpdate:()=>{this.onViewUpdate()}}),d&&(this.anchor=d),this.roundPixels=u??!1,h!==void 0&&(this.width=h),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var t;e||(e={}),(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){var i;typeof e=="object"?(t=(i=e.height)!=null?i:e.width,e=e.width):t!=null||(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){let t=this.bounds.width,i=this.bounds.height,s=-t*this.anchor.x,r=0;return e.x>=s&&e.x<=s+t&&(r=-i*this.anchor.y,e.y>=r&&e.y<=r+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}};function El(a,e){var t;let i=(t=a[0])!=null?t:{};return(typeof i=="string"||a[1])&&(i={text:i,style:a[1]}),i}var Ne=class extends Us{constructor(...e){let t=El(e,"Text");super(t,Rt),this.renderPipeId="text"}updateBounds(){let e=this._bounds,t=this._anchor,i=na.measureText(this._text,this._style),{width:s,height:r}=i;e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*r,e.maxY=e.minY+r}},Oh=class extends by{resolveQueueItem(e,t){return e instanceof de?this.resolveContainerQueueItem(e,t):e instanceof Ge||e instanceof W?t.push(e.source):e instanceof dt&&t.push(e),null}resolveContainerQueueItem(e,t){e instanceof Ae||e instanceof Ey||e instanceof Ka?t.push(e.texture.source):e instanceof Ne?t.push(e):e instanceof Ye?t.push(e.context):e instanceof Mh&&e.textures.forEach(i=>{i.source?t.push(i.source):t.push(i.texture.source)})}resolveGraphicsContextQueueItem(e){this.renderer.graphicsContext.getContextRenderData(e);let{instructions:t}=e;for(let i of t)if(i.action==="texture"){let{image:s}=i.data;return s.source}else if(i.action==="fill"){let{texture:s}=i.data.style;return s.source}return null}},Ih=class extends Us{constructor(...e){var t,i,s;let r=El(e,"BitmapText");(t=r.style)!=null||(r.style=r.style||{}),(s=(i=r.style).fill)!=null||(i.fill=16777215),super(r,Rt),this.renderPipeId="bitmapText"}updateBounds(){let e=this._bounds,t=this._anchor,i=un.measureText(this.text,this._style),s=i.scale,r=i.offsetY*s,n=i.width*s,d=i.height*s,h=this._style._stroke;h&&(n+=h.width,d+=h.width),e.minX=-t._x*n,e.maxX=e.minX+n,e.minY=-t._y*(d+r),e.maxY=e.minY+d}set resolution(e){}get resolution(){return this._resolution}},Gh=class extends Us{constructor(...e){let t=El(e,"HtmlText");super(t,mn),this.renderPipeId="htmlText"}updateBounds(){let e=this._bounds,t=this._anchor,i=m2(this.text,this._style),{width:s,height:r}=i;e.minX=-t._x*s,e.maxX=e.minX+s,e.minY=-t._y*r,e.maxY=e.minY+r}},Bh=class extends Oh{uploadQueueItem(e){e instanceof Ge?this.uploadTextureSource(e):e instanceof Ne?this.uploadText(e):e instanceof Gh?this.uploadHTMLText(e):e instanceof Ih?this.uploadBitmapText(e):e instanceof dt&&this.uploadGraphicsContext(e)}uploadTextureSource(e){this.renderer.texture.initSource(e)}uploadText(e){this.renderer.renderPipes.text.initGpuText(e)}uploadBitmapText(e){this.renderer.renderPipes.bitmapText.initGpuText(e)}uploadHTMLText(e){this.renderer.renderPipes.htmlText.initGpuText(e)}uploadGraphicsContext(e){this.renderer.graphicsContext.getContextRenderData(e);let{instructions:t}=e;for(let i of t)if(i.action==="texture"){let{image:s}=i.data;this.uploadTextureSource(s.source)}else if(i.action==="fill"){let{texture:s}=i.data.style;this.uploadTextureSource(s.source)}return null}},Fh=class extends Bh{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}};Fh.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"prepare"};var Un=class{constructor(){this._tempState=Pt.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,t,i){let s=e.renderer,r=this._didUploadHash[i.uid];s.shader.bind(i,r),r||(this._didUploadHash[i.uid]=!0),s.shader.updateUniformGroup(s.globalUniforms.uniformGroup),s.geometry.bind(t,i.glProgram)}execute(e,t){let i=e.renderer;this._tempState.blendMode=t.blendMode,i.state.set(this._tempState);let s=t.textures.textures;for(let r=0;r<t.textures.count;r++)i.texture.bind(s[r],r);i.geometry.draw(t.topology,t.size,t.start)}};Un.extension={type:[I.WebGLPipesAdaptor],name:"batch"};var Rr=Pt.for2d(),Ln=class{start(e,t,i){let s=e.renderer,r=s.encoder,n=i.gpuProgram;this._shader=i,this._geometry=t,r.setGeometry(t,n),Rr.blendMode="normal",s.pipeline.getPipeline(t,n,Rr);let d=s.globalUniforms.bindGroup;r.resetBindGroup(1),r.setBindGroup(0,d,n)}execute(e,t){let i=this._shader.gpuProgram,s=e.renderer,r=s.encoder;if(!t.bindGroup){let h=t.textures;t.bindGroup=pl(h.textures,h.count)}Rr.blendMode=t.blendMode;let n=s.bindGroup.getBindGroup(t.bindGroup,i,1),d=s.pipeline.getPipeline(this._geometry,i,Rr,t.topology);t.bindGroup._touch(s.textureGC.count),r.setPipeline(d),r.renderPassEncoder.setBindGroup(1,n),r.renderPassEncoder.drawIndexed(t.size,1,t.start)}};Ln.extension={type:[I.WebGPUPipesAdaptor],name:"batch"};var Dh=class g3{constructor(e,t){this.state=Pt.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null);var i,s;this.renderer=e,this._adaptor=t,(s=(i=this._adaptor).init)==null||s.call(i,this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let t=this._batchersByInstructionSet[e.uid];t||(t=this._batchersByInstructionSet[e.uid]=Object.create(null),t.default||(t.default=new vl)),this._activeBatches=t,this._activeBatch=this._activeBatches.default;for(let i in this._activeBatches)this._activeBatches[i].begin()}addToBatch(e,t){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(t);let i=this._activeBatches[e.batcherName];i||(i=this._activeBatches[e.batcherName]=g3.getBatcher(e.batcherName),i.begin()),this._activeBatch=i}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);let t=this._activeBatches;for(let i in t){let s=t[i],r=s.geometry;r.indexBuffer.setDataWithSize(s.indexBuffer,s.indexSize,!0),r.buffers[0].setDataWithSize(s.attributeBuffer.float32View,s.attributeSize,!1)}}upload(e){let t=this._batchersByInstructionSet[e.uid];for(let i in t){let s=t[i],r=s.geometry;s.dirty&&(s.dirty=!1,r.buffers[0].update(s.attributeSize*4))}}execute(e){if(e.action==="startBatch"){let t=e.batcher,i=t.geometry,s=t.shader;this._adaptor.start(this,i,s)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(let e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};Dh.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"batch"},Dh._availableBatchers=Object.create(null);var m3=Dh;ue.handleByMap(I.Batcher,m3._availableBatchers),ue.add(vl);var Cy={name:"texture-bit",vertex:{header:`

struct TextureUniforms {
uTextureMatrix:mat3x3<f32>,
}

@group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
`,main:`
uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
`},fragment:{header:`
@group(2) @binding(0) var uTexture: texture_2d<f32>;
@group(2) @binding(1) var uSampler: sampler;


`,main:`
outColor = textureSample(uTexture, uSampler, vUV);
`}},Oy={name:"texture-bit",vertex:{header:`
uniform mat3 uTextureMatrix;
`,main:`
uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
`},fragment:{header:`
uniform sampler2D uTexture;


`,main:`
outColor = texture(uTexture, vUV);
`}},Iy=new Ze,Gy=class extends Si{constructor(){super(),this.filters=[new Rh({sprite:new Ae(W.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(a){this.filters[0].sprite=a}get inverse(){return this.filters[0].inverse}set inverse(a){this.filters[0].inverse=a}},Nn=class{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,t,i){let s=this._renderer;if(s.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1,maskedContainer:t}),e.inverse=t._maskOptions.inverse,e.renderMaskToTexture){let r=e.mask;r.includeInBuild=!0,r.collectRenderables(i,s,null),r.includeInBuild=!1}s.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:e,maskedContainer:t,inverse:t._maskOptions.inverse,canBundle:!1})}pop(e,t,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1})}execute(e){let t=this._renderer,i=e.mask.renderMaskToTexture;if(e.action==="pushMaskBegin"){let s=me.get(Gy);if(s.inverse=e.inverse,i){e.mask.mask.measurable=!0;let r=Co(e.mask.mask,!0,Iy);e.mask.mask.measurable=!1,r.ceil();let n=t.renderTarget.renderTarget.colorTexture.source,d=Ve.getOptimalTexture(r.width,r.height,n._resolution,n.antialias);t.renderTarget.push(d,!0),t.globalUniforms.push({offset:r,worldColor:4294967295});let h=s.sprite;h.texture=d,h.worldTransform.tx=r.minX,h.worldTransform.ty=r.minY,this._activeMaskStage.push({filterEffect:s,maskedContainer:e.maskedContainer,filterTexture:d})}else s.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:s,maskedContainer:e.maskedContainer})}else if(e.action==="pushMaskEnd"){let s=this._activeMaskStage[this._activeMaskStage.length-1];i&&(t.type===yt.WEBGL&&t.renderTarget.finishRenderPass(),t.renderTarget.pop(),t.globalUniforms.pop()),t.filter.push({renderPipeId:"filter",action:"pushFilter",container:s.maskedContainer,filterEffect:s.filterEffect,canBundle:!1})}else if(e.action==="popMaskEnd"){t.filter.pop();let s=this._activeMaskStage.pop();i&&Ve.returnTexture(s.filterTexture),me.return(s.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}};Nn.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"alphaMask"};var jn=class{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,t,i){this._renderer.renderPipes.batch.break(i);let s=this._colorStack;s[this._colorStackIndex]=s[this._colorStackIndex-1]&e.mask;let r=this._colorStack[this._colorStackIndex];r!==this._currentColor&&(this._currentColor=r,i.add({renderPipeId:"colorMask",colorMask:r,canBundle:!1})),this._colorStackIndex++}pop(e,t,i){this._renderer.renderPipes.batch.break(i);let s=this._colorStack;this._colorStackIndex--;let r=s[this._colorStackIndex-1];r!==this._currentColor&&(this._currentColor=r,i.add({renderPipeId:"colorMask",colorMask:r,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._colorStack=null}};jn.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"colorMask"};var Xn=class{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,t,i){var s,r;let n=e,d=this._renderer;d.renderPipes.batch.break(i),d.renderPipes.blendMode.setBlendMode(n.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});let h=n.mask;h.includeInBuild=!0,this._maskHash.has(n)||this._maskHash.set(n,{instructionsStart:0,instructionsLength:0});let l=this._maskHash.get(n);l.instructionsStart=i.instructionSize,h.collectRenderables(i,d,null),h.includeInBuild=!1,d.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});let u=i.instructionSize-l.instructionsStart-1;l.instructionsLength=u;let p=d.renderTarget.renderTarget.uid;(r=(s=this._maskStackHash)[p])!=null||(s[p]=0)}pop(e,t,i){let s=e,r=this._renderer;r.renderPipes.batch.break(i),r.renderPipes.blendMode.setBlendMode(s.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:t._maskOptions.inverse,canBundle:!1});let n=this._maskHash.get(e);for(let d=0;d<n.instructionsLength;d++)i.instructions[i.instructionSize++]=i.instructions[n.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(e){var t,i;let s=this._renderer,r=s.renderTarget.renderTarget.uid,n=(i=(t=this._maskStackHash)[r])!=null?i:t[r]=0;e.action==="pushMaskBegin"?(s.renderTarget.ensureDepthStencil(),s.stencil.setStencilMode(Le.RENDERING_MASK_ADD,n),n++,s.colorMask.setMask(0)):e.action==="pushMaskEnd"?(e.inverse?s.stencil.setStencilMode(Le.INVERSE_MASK_ACTIVE,n):s.stencil.setStencilMode(Le.MASK_ACTIVE,n),s.colorMask.setMask(15)):e.action==="popMaskBegin"?(s.colorMask.setMask(0),n!==0?s.stencil.setStencilMode(Le.RENDERING_MASK_REMOVE,n):(s.renderTarget.clear(null,mt.STENCIL),s.stencil.setStencilMode(Le.DISABLED,n)),n--):e.action==="popMaskEnd"&&(e.inverse?s.stencil.setStencilMode(Le.INVERSE_MASK_ACTIVE,n):s.stencil.setStencilMode(Le.MASK_ACTIVE,n),s.colorMask.setMask(15)),this._maskStackHash[r]=n}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}};Xn.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"stencilMask"};var kr=(a=>(a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER",a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",a))(kr||{}),kh=class{constructor(e,t){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=t}},Hn=class{constructor(e){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){let e=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=e.MAX_UNIFORM_BUFFER_BINDINGS?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(e){return this._gpuBuffers[e.uid]||this.createGLBuffer(e)}bind(e){let{_gl:t}=this,i=this.getGlBuffer(e);t.bindBuffer(i.type,i.buffer)}bindBufferBase(e,t){let{_gl:i}=this;this._boundBufferBases[t]!==e&&(this._boundBufferBases[t]=e,e._lastBindBaseLocation=t,i.bindBufferBase(i.UNIFORM_BUFFER,t,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let t=this.getLastBindBaseLocation(e);if(t>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,t;let i=0,s=this._nextBindBaseIndex;for(;i<2;){s>=this._maxBindings&&(s=this._minBaseLocation,i++);let r=this._boundBufferBases[s];if(r&&r._lastBindCallId===this._bindCallId){s++;continue}break}return t=s,this._nextBindBaseIndex=s+1,i>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[t]=null,t)}getLastBindBaseLocation(e){let t=e._lastBindBaseLocation;return this._boundBufferBases[t]===e?t:-1}bindBufferRange(e,t,i,s){let{_gl:r}=this;i||(i=0),t||(t=0),this._boundBufferBases[t]=null,r.bindBufferRange(r.UNIFORM_BUFFER,t||0,e.buffer,i*256,s||256)}updateBuffer(e){let{_gl:t}=this,i=this.getGlBuffer(e);if(e._updateID===i.updateID)return i;i.updateID=e._updateID,t.bindBuffer(i.type,i.buffer);let s=e.data,r=e.descriptor.usage&ye.STATIC?t.STATIC_DRAW:t.DYNAMIC_DRAW;return s?i.byteLength>=s.byteLength?t.bufferSubData(i.type,0,s,0,e._updateSize/s.BYTES_PER_ELEMENT):(i.byteLength=s.byteLength,t.bufferData(i.type,s,r)):(i.byteLength=e.descriptor.size,t.bufferData(i.type,i.byteLength,r)),i}destroyAll(){let e=this._gl;for(let t in this._gpuBuffers)e.deleteBuffer(this._gpuBuffers[t].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(e,t){let i=this._gpuBuffers[e.uid],s=this._gl;t||s.deleteBuffer(i.buffer),this._gpuBuffers[e.uid]=null}createGLBuffer(e){let{_gl:t}=this,i=kr.ARRAY_BUFFER;e.descriptor.usage&ye.INDEX?i=kr.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&ye.UNIFORM&&(i=kr.UNIFORM_BUFFER);let s=new kh(t.createBuffer(),i);return this._gpuBuffers[e.uid]=s,e.on("destroy",this.onBufferDestroy,this),s}resetState(){this._boundBufferBases=Object.create(null)}};Hn.extension={type:[I.WebGLSystem],name:"buffer"};var By=Object.defineProperty,Fy=Object.defineProperties,Dy=Object.getOwnPropertyDescriptors,qb=Object.getOwnPropertySymbols,ky=Object.prototype.hasOwnProperty,Uy=Object.prototype.propertyIsEnumerable,Zb=(a,e,t)=>e in a?By(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Mr=(a,e)=>{for(var t in e||(e={}))ky.call(e,t)&&Zb(a,t,e[t]);if(qb)for(var t of qb(e))Uy.call(e,t)&&Zb(a,t,e[t]);return a},Qb=(a,e)=>Fy(a,Dy(e)),Uh=class _3{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){var t,i;e=Mr(Mr({},_3.defaultOptions),e);let s=this.multiView=e.multiView;if(e.context&&s&&(Qt("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),s=!1),s?this.canvas=_e.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{let r=this._renderer.background.alpha<1,n=(t=e.premultipliedAlpha)!=null?t:!0,d=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:r,premultipliedAlpha:n,antialias:d,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:(i=e.powerPreference)!=null?i:"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Qt("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:t}=this;(t.width<e.width||t.height<e.height)&&(t.width=Math.max(e.width,e.width),t.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof _e.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);let t=this._renderer.view.canvas;t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,t){let i,s=this.canvas;if(e===2&&(i=s.getContext("webgl2",t)),!i&&(i=s.getContext("webgl",t),!i))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=i,this.initFromContext(this.gl)}getExtensions(){let{gl:e}=this,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions=Qb(Mr({},t),{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")});else{this.extensions=Qb(Mr({},t),{colorBufferFloat:e.getExtension("EXT_color_buffer_float")});let i=e.getExtension("WEBGL_provoking_vertex");i&&i.provokingVertexWEBGL(i.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{var t;this.gl.isContextLost()&&((t=this.extensions.loseContext)==null||t.restoreContext())},0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){var e;let t=this._renderer.view.canvas;this._renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),(e=this.extensions.loseContext)==null||e.loseContext()}forceContextLoss(){var e;(e=this.extensions.loseContext)==null||e.loseContext(),this._contextLossForced=!0}validateContext(e){let t=e.getContextAttributes();t&&t.stencil;let i=this.supports,s=this.webGLVersion===2,r=this.extensions;i.uint32Indices=s||!!r.uint32ElementIndex,i.uniformBufferObject=s,i.vertexArrayObject=s||!!r.vertexArrayObject,i.srgbTextures=s||!!r.srgb,i.nonPowOf2wrapping=s,i.nonPowOf2mipmaps=s,i.msaa=s,i.uint32Indices}};Uh.extension={type:[I.WebGLSystem],name:"context"},Uh.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};var Ly=Uh;function y3(a,e){var t,i,s;for(let r in a.attributes){let n=a.attributes[r],d=e[r];d?((t=n.format)!=null||(n.format=d.format),(i=n.offset)!=null||(n.offset=d.offset),(s=n.instance)!=null||(n.instance=d.instance)):Qt(`Attribute ${r} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}Ny(a)}function Ny(a){var e,t;let{buffers:i,attributes:s}=a,r={},n={};for(let d in i){let h=i[d];r[h.uid]=0,n[h.uid]=0}for(let d in s){let h=s[d];r[h.buffer.uid]+=Ca(h.format).stride}for(let d in s){let h=s[d];(e=h.stride)!=null||(h.stride=r[h.buffer.uid]),(t=h.start)!=null||(h.start=n[h.buffer.uid]),n[h.buffer.uid]+=Ca(h.format).stride}}var Lh=(a=>(a[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",a))(Lh||{}),x3=(a=>(a[a.TEXTURE_2D=3553]="TEXTURE_2D",a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",a))(x3||{}),jy=(a=>(a[a.CLAMP=33071]="CLAMP",a[a.REPEAT=10497]="REPEAT",a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",a))(jy||{}),xe=(a=>(a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",a[a.UNSIGNED_INT=5125]="UNSIGNED_INT",a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",a[a.BYTE=5120]="BYTE",a[a.SHORT=5122]="SHORT",a[a.INT=5124]="INT",a[a.FLOAT=5126]="FLOAT",a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",a[a.HALF_FLOAT=36193]="HALF_FLOAT",a))(xe||{}),Jb={uint8x2:xe.UNSIGNED_BYTE,uint8x4:xe.UNSIGNED_BYTE,sint8x2:xe.BYTE,sint8x4:xe.BYTE,unorm8x2:xe.UNSIGNED_BYTE,unorm8x4:xe.UNSIGNED_BYTE,snorm8x2:xe.BYTE,snorm8x4:xe.BYTE,uint16x2:xe.UNSIGNED_SHORT,uint16x4:xe.UNSIGNED_SHORT,sint16x2:xe.SHORT,sint16x4:xe.SHORT,unorm16x2:xe.UNSIGNED_SHORT,unorm16x4:xe.UNSIGNED_SHORT,snorm16x2:xe.SHORT,snorm16x4:xe.SHORT,float16x2:xe.HALF_FLOAT,float16x4:xe.HALF_FLOAT,float32:xe.FLOAT,float32x2:xe.FLOAT,float32x3:xe.FLOAT,float32x4:xe.FLOAT,uint32:xe.UNSIGNED_INT,uint32x2:xe.UNSIGNED_INT,uint32x3:xe.UNSIGNED_INT,uint32x4:xe.UNSIGNED_INT,sint32:xe.INT,sint32x2:xe.INT,sint32x3:xe.INT,sint32x4:xe.INT};function Xy(a){var e;return(e=Jb[a])!=null?e:Jb.float32}var Hy={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5},zn=class{constructor(e){this._geometryVaoHash=Object.create(null),this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){let e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");let t=this._renderer.context.extensions.vertexArrayObject;t&&(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=s=>t.bindVertexArrayOES(s),e.deleteVertexArray=s=>t.deleteVertexArrayOES(s));let i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(e.drawArraysInstanced=(s,r,n,d)=>{i.drawArraysInstancedANGLE(s,r,n,d)},e.drawElementsInstanced=(s,r,n,d,h)=>{i.drawElementsInstancedANGLE(s,r,n,d,h)},e.vertexAttribDivisor=(s,r)=>i.vertexAttribDivisorANGLE(s,r)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(e,t){let i=this.gl;this._activeGeometry=e;let s=this.getVao(e,t);this._activeVao!==s&&(this._activeVao=s,i.bindVertexArray(s)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){let e=this._activeGeometry,t=this._renderer.buffer;for(let i=0;i<e.buffers.length;i++){let s=e.buffers[i];t.updateBuffer(s)}}checkCompatibility(e,t){let i=e.attributes,s=t._attributeData;for(let r in s)if(!i[r])throw new Error(`shader and geometry incompatible, geometry missing the "${r}" attribute`)}getSignature(e,t){let i=e.attributes,s=t._attributeData,r=["g",e.uid];for(let n in i)s[n]&&r.push(n,s[n].location);return r.join("-")}getVao(e,t){var i;return((i=this._geometryVaoHash[e.uid])==null?void 0:i[t._key])||this.initGeometryVao(e,t)}initGeometryVao(e,t,i=!0){let s=this._renderer.gl,r=this._renderer.buffer;this._renderer.shader._getProgramData(t),this.checkCompatibility(e,t);let n=this.getSignature(e,t);this._geometryVaoHash[e.uid]||(this._geometryVaoHash[e.uid]=Object.create(null),e.on("destroy",this.onGeometryDestroy,this));let d=this._geometryVaoHash[e.uid],h=d[n];if(h)return d[t._key]=h,h;y3(e,t._attributeData);let l=e.buffers;h=s.createVertexArray(),s.bindVertexArray(h);for(let u=0;u<l.length;u++){let p=l[u];r.bind(p)}return this.activateVao(e,t),d[t._key]=h,d[n]=h,s.bindVertexArray(null),h}onGeometryDestroy(e,t){let i=this._geometryVaoHash[e.uid],s=this.gl;if(i){if(t)for(let r in i)this._activeVao!==i[r]&&this.unbind(),s.deleteVertexArray(i[r]);this._geometryVaoHash[e.uid]=null}}destroyAll(e=!1){let t=this.gl;for(let i in this._geometryVaoHash){if(e)for(let s in this._geometryVaoHash[i]){let r=this._geometryVaoHash[i];this._activeVao!==r&&this.unbind(),t.deleteVertexArray(r[s])}this._geometryVaoHash[i]=null}}activateVao(e,t){var i,s;let r=this._renderer.gl,n=this._renderer.buffer,d=e.attributes;e.indexBuffer&&n.bind(e.indexBuffer);let h=null;for(let l in d){let u=d[l],p=u.buffer,_=n.getGlBuffer(p),m=t._attributeData[l];if(m){h!==_&&(n.bind(p),h=_);let v=m.location;r.enableVertexAttribArray(v);let T=Ca(u.format),w=Xy(u.format);if(((i=m.format)==null?void 0:i.substring(1,4))==="int"?r.vertexAttribIPointer(v,T.size,w,u.stride,u.offset):r.vertexAttribPointer(v,T.size,w,T.normalised,u.stride,u.offset),u.instance)if(this.hasInstance){let P=(s=u.divisor)!=null?s:1;r.vertexAttribDivisor(v,P)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,i,s){let{gl:r}=this._renderer,n=this._activeGeometry,d=Hy[e||n.topology];if(s!=null||(s=n.instanceCount),n.indexBuffer){let h=n.indexBuffer.data.BYTES_PER_ELEMENT,l=h===2?r.UNSIGNED_SHORT:r.UNSIGNED_INT;s>1?r.drawElementsInstanced(d,t||n.indexBuffer.data.length,l,(i||0)*h,s):r.drawElements(d,t||n.indexBuffer.data.length,l,(i||0)*h)}else s>1?r.drawArraysInstanced(d,i||0,t||n.getSize(),s):r.drawArrays(d,i||0,t||n.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}};zn.extension={type:[I.WebGLSystem],name:"geometry"};var zy=Object.defineProperty,e1=Object.getOwnPropertySymbols,Vy=Object.prototype.hasOwnProperty,Wy=Object.prototype.propertyIsEnumerable,t1=(a,e,t)=>e in a?zy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,a1=(a,e)=>{for(var t in e||(e={}))Vy.call(e,t)&&t1(a,t,e[t]);if(e1)for(var t of e1(e))Wy.call(e,t)&&t1(a,t,e[t]);return a},Yy=new qt({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),Nh=class v3{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){let{useBackBuffer:t,antialias:i}=a1(a1({},v3.defaultOptions),e);this.useBackBuffer=t,this._antialias=i,this._renderer.context.supports.msaa||(Qt("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Pt.for2d();let s=new fa({vertex:`
attribute vec2 aPosition;
out vec2 vUv;

void main() {
gl_Position = vec4(aPosition, 0.0, 1.0);

vUv = (aPosition + 1.0) / 2.0;

// flip dem UVs
vUv.y = 1.0 - vUv.y;
}`,fragment:`
in vec2 vUv;
out vec4 finalColor;

uniform sampler2D uTexture;

void main() {
finalColor = texture(uTexture, vUv);
}`,name:"big-triangle"});this._bigTriangleShader=new ht({glProgram:s,resources:{uTexture:W.WHITE.source}})}renderStart(e){let t=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!t.isRoot,this._useBackBufferThisRender){let i=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=i.colorTexture,e.target=this._getBackBufferTexture(i.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:Yy,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new W({source:new Ge({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};Nh.extension={type:[I.WebGLSystem],name:"backBuffer",priority:1},Nh.defaultOptions={useBackBuffer:!1};var $y=Nh,Vn=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}};Vn.extension={type:[I.WebGLSystem],name:"colorMask"};var Wn=class{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,t){this._renderer.geometry.bind(e,t.glProgram)}finishRenderPass(){}draw(e){let t=this._renderer,{geometry:i,shader:s,state:r,skipSync:n,topology:d,size:h,start:l,instanceCount:u}=e;t.shader.bind(s,n),t.geometry.bind(i,t.shader._activeProgram),r&&t.state.set(r),t.geometry.draw(d,h,l,u??i.instanceCount)}destroy(){this._renderer=null}};Wn.extension={type:[I.WebGLSystem],name:"encoder"};var jh=class{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}},wa=[];wa[Le.NONE]=void 0,wa[Le.DISABLED]={stencilWriteMask:0,stencilReadMask:0},wa[Le.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}},wa[Le.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}},wa[Le.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}},wa[Le.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}};var Yn=class{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:Le.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this._stencilCache.enabled=!1,this._stencilCache.stencilMode=Le.NONE,this._stencilCache.stencilReference=0}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Le.DISABLED,stencilReference:0}),this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let i=this._renderTargetStencilState[this._activeRenderTarget.uid],s=this._gl,r=wa[e],n=this._stencilCache;if(i.stencilMode=e,i.stencilReference=t,e===Le.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,s.disable(s.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,s.enable(s.STENCIL_TEST)),(e!==n.stencilMode||n.stencilReference!==t)&&(n.stencilMode=e,n.stencilReference=t,s.stencilFunc(this._comparisonFuncMapping[r.stencilBack.compare],t,255),s.stencilOp(s.KEEP,s.KEEP,this._stencilOpsMapping[r.stencilBack.passOp]))}};Yn.extension={type:[I.WebGLSystem],name:"stencil"};var $n=class{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!A2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(e){let t=this.getUniformGroupData(e);e.buffer||(e.buffer=new st({data:new Float32Array(t.layout.size/4),usage:ye.UNIFORM|ye.COPY_DST}))}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){let t=e._signature,i=this._syncFunctionHash[t];if(!i){let s=Object.keys(e.uniformStructures).map(d=>e.uniformStructures[d]),r=this._adaptor.createUboElements(s),n=this._generateUboSync(r.uboElements);i=this._syncFunctionHash[t]={layout:r,syncFunction:n}}return this._syncFunctionHash[t]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,t,i){let s=this.getUniformGroupData(e);e.buffer||(e.buffer=new st({data:new Float32Array(s.layout.size/4),usage:ye.UNIFORM|ye.COPY_DST}));let r=null;return t||(t=e.buffer.data,r=e.buffer.dataInt32),i||(i=0),s.syncFunction(e.uniforms,t,r,i),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;let t=this.syncUniformGroup(e);return e.buffer.update(),t}destroy(){this._syncFunctionHash=null}},T3={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function Ky(a){let e=a.map(r=>({data:r,offset:0,size:0})),t=16,i=0,s=0;for(let r=0;r<e.length;r++){let n=e[r];if(i=T3[n.data.type],!i)throw new Error(`Unknown type ${n.data.type}`);n.data.size>1&&(i=Math.max(i,t)*n.data.size);let d=i===12?16:i;n.size=i;let h=s%t;h>0&&t-h<d?s+=(t-h)%16:s+=(i-h%i)%i,n.offset=s,s+=i}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}var Ya=[{type:"mat3x3<f32>",test:a=>a.value.a!==void 0,ubo:`
var matrix = uv[name].toArray(true);
data[offset] = matrix[0];
data[offset + 1] = matrix[1];
data[offset + 2] = matrix[2];
data[offset + 4] = matrix[3];
data[offset + 5] = matrix[4];
data[offset + 6] = matrix[5];
data[offset + 8] = matrix[6];
data[offset + 9] = matrix[7];
data[offset + 10] = matrix[8];
`,uniform:`
gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
`},{type:"vec4<f32>",test:a=>a.type==="vec4<f32>"&&a.size===1&&a.value.width!==void 0,ubo:`
v = uv[name];
data[offset] = v.x;
data[offset + 1] = v.y;
data[offset + 2] = v.width;
data[offset + 3] = v.height;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
cv[0] = v.x;
cv[1] = v.y;
cv[2] = v.width;
cv[3] = v.height;
gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
}
`},{type:"vec2<f32>",test:a=>a.type==="vec2<f32>"&&a.size===1&&a.value.x!==void 0,ubo:`
v = uv[name];
data[offset] = v.x;
data[offset + 1] = v.y;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.x || cv[1] !== v.y) {
cv[0] = v.x;
cv[1] = v.y;
gl.uniform2f(ud[name].location, v.x, v.y);
}
`},{type:"vec4<f32>",test:a=>a.type==="vec4<f32>"&&a.size===1&&a.value.red!==void 0,ubo:`
v = uv[name];
data[offset] = v.red;
data[offset + 1] = v.green;
data[offset + 2] = v.blue;
data[offset + 3] = v.alpha;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
cv[0] = v.red;
cv[1] = v.green;
cv[2] = v.blue;
cv[3] = v.alpha;
gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
}
`},{type:"vec3<f32>",test:a=>a.type==="vec3<f32>"&&a.size===1&&a.value.red!==void 0,ubo:`
v = uv[name];
data[offset] = v.red;
data[offset + 1] = v.green;
data[offset + 2] = v.blue;
`,uniform:`
cv = ud[name].value;
v = uv[name];
if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
cv[0] = v.red;
cv[1] = v.green;
cv[2] = v.blue;
gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
}
`}];function S3(a,e,t,i){let s=[`
var v = null;
var v2 = null;
var t = 0;
var index = 0;
var name = null;
var arrayOffset = null;
`],r=0;for(let d=0;d<a.length;d++){let h=a[d],l=h.data.name,u=!1,p=0;for(let _=0;_<Ya.length;_++)if(Ya[_].test(h.data)){p=h.offset/4,s.push(`name = "${l}";`,`offset += ${p-r};`,Ya[_][e]||Ya[_].ubo),u=!0;break}if(!u)if(h.data.size>1)p=h.offset/4,s.push(t(h,p-r));else{let _=i[h.data.type];p=h.offset/4,s.push(`
v = uv.${l};
offset += ${p-r};
${_};
`)}r=p}let n=s.join(`
`);return new Function("uv","data","dataInt32","offset",n)}var qy=Object.defineProperty,Zy=Object.defineProperties,Qy=Object.getOwnPropertyDescriptors,i1=Object.getOwnPropertySymbols,Jy=Object.prototype.hasOwnProperty,ex=Object.prototype.propertyIsEnumerable,s1=(a,e,t)=>e in a?qy(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,tx=(a,e)=>{for(var t in e||(e={}))Jy.call(e,t)&&s1(a,t,e[t]);if(i1)for(var t of i1(e))ex.call(e,t)&&s1(a,t,e[t]);return a},ax=(a,e)=>Zy(a,Qy(e));function bi(a,e){return`
for (let i = 0; i < ${a*e}; i++) {
data[offset + (((i / ${a})|0) * 4) + (i % ${a})] = v[i];
}
`}var w3={f32:`
data[offset] = v;`,i32:`
dataInt32[offset] = v;`,"vec2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];`,"vec3<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];`,"vec4<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 3] = v[3];`,"vec2<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];
dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
dataInt32[offset] = v[0];
dataInt32[offset + 1] = v[1];
dataInt32[offset + 2] = v[2];
dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 4] = v[2];
data[offset + 5] = v[3];`,"mat3x3<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 4] = v[3];
data[offset + 5] = v[4];
data[offset + 6] = v[5];
data[offset + 8] = v[6];
data[offset + 9] = v[7];
data[offset + 10] = v[8];`,"mat4x4<f32>":`
for (let i = 0; i < 16; i++) {
data[offset + i] = v[i];
}`,"mat3x2<f32>":bi(3,2),"mat4x2<f32>":bi(4,2),"mat2x3<f32>":bi(2,3),"mat4x3<f32>":bi(4,3),"mat2x4<f32>":bi(2,4),"mat3x4<f32>":bi(3,4)},ix=ax(tx({},w3),{"mat2x2<f32>":`
data[offset] = v[0];
data[offset + 1] = v[1];
data[offset + 2] = v[2];
data[offset + 3] = v[3];
`});function sx(a,e){let t=Math.max(T3[a.data.type]/16,1),i=a.data.value.length/a.data.size,s=(4-i%4)%4,r=a.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
v = uv.${a.data.name};
offset += ${e};

arrayOffset = offset;

t = 0;

for(var i=0; i < ${a.data.size*t}; i++)
{
for(var j = 0; j < ${i}; j++)
{
${r}[arrayOffset++] = v[t++];
}
${s!==0?`arrayOffset += ${s};`:""}
}
`}function rx(a){return S3(a,"uboStd40",sx,w3)}var Kn=class extends $n{constructor(){super({createUboElements:Ky,generateUboSync:rx})}};Kn.extension={type:[I.WebGLSystem],name:"ubo"};var Xh=class{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new we}init(e,t){this._renderer=e,this._renderTargetSystem=t,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new we}copyToTexture(e,t,i,s,r){let n=this._renderTargetSystem,d=this._renderer,h=n.getGpuRenderTarget(e),l=d.gl;return this.finishRenderPass(e),l.bindFramebuffer(l.FRAMEBUFFER,h.resolveTargetFramebuffer),d.texture.bind(t,0),l.copyTexSubImage2D(l.TEXTURE_2D,0,r.x,r.y,i.x,i.y,s.width,s.height),t}startRenderPass(e,t=!0,i,s){let r=this._renderTargetSystem,n=e.colorTexture,d=r.getGpuRenderTarget(e),h=s.y;e.isRoot&&(h=n.pixelHeight-s.height),e.colorTextures.forEach(p=>{this._renderer.texture.unbind(p)});let l=this._renderer.gl;l.bindFramebuffer(l.FRAMEBUFFER,d.framebuffer);let u=this._viewPortCache;(u.x!==s.x||u.y!==h||u.width!==s.width||u.height!==s.height)&&(u.x=s.x,u.y=h,u.width=s.width,u.height=s.height,l.viewport(s.x,h,s.width,s.height)),!d.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(d),this.clear(e,t,i)}finishRenderPass(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);if(!t.msaa)return;let i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,t.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,t.framebuffer),i.blitFramebuffer(0,0,t.width,t.height,0,0,t.width,t.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,t.framebuffer)}initGpuRenderTarget(e){let t=this._renderer,i=t.gl,s=new jh;return e.colorTexture.resource===t.canvas?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),s.framebuffer=null,s):(this._initColor(e,s),i.bindFramebuffer(i.FRAMEBUFFER,null),s)}destroyGpuRenderTarget(e){let t=this._renderer.gl;e.framebuffer&&(t.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(t.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(t.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(i=>{t.deleteRenderbuffer(i)}),e.msaaRenderBuffer=null}clear(e,t,i){if(!t)return;let s=this._renderTargetSystem;typeof t=="boolean"&&(t=t?mt.ALL:mt.NONE);let r=this._renderer.gl;if(t&mt.COLOR){i!=null||(i=s.defaultClearColor);let n=this._clearColorCache,d=i;(n[0]!==d[0]||n[1]!==d[1]||n[2]!==d[2]||n[3]!==d[3])&&(n[0]=d[0],n[1]=d[1],n[2]=d[2],n[3]=d[3],r.clearColor(d[0],d[1],d[2],d[3]))}r.clear(t)}resizeGpuRenderTarget(e){if(e.isRoot)return;let t=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,t),(e.stencil||e.depth)&&this._resizeStencil(t)}_initColor(e,t){let i=this._renderer,s=i.gl,r=s.createFramebuffer();if(t.resolveTargetFramebuffer=r,s.bindFramebuffer(s.FRAMEBUFFER,r),t.width=e.colorTexture.source.pixelWidth,t.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((n,d)=>{let h=n.source;h.antialias&&(i.context.supports.msaa?t.msaa=!0:Qt("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(h,0);let l=i.texture.getGlSource(h).texture;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+d,3553,l,0)}),t.msaa){let n=s.createFramebuffer();t.framebuffer=n,s.bindFramebuffer(s.FRAMEBUFFER,n),e.colorTextures.forEach((d,h)=>{let l=s.createRenderbuffer();t.msaaRenderBuffer[h]=l})}else t.framebuffer=r;this._resizeColor(e,t)}_resizeColor(e,t){let i=e.colorTexture.source;if(t.width=i.pixelWidth,t.height=i.pixelHeight,e.colorTextures.forEach((s,r)=>{r!==0&&s.source.resize(i.width,i.height,i._resolution)}),t.msaa){let s=this._renderer,r=s.gl,n=t.framebuffer;r.bindFramebuffer(r.FRAMEBUFFER,n),e.colorTextures.forEach((d,h)=>{let l=d.source;s.texture.bindSource(l,0);let u=s.texture.getGlSource(l).internalFormat,p=t.msaaRenderBuffer[h];r.bindRenderbuffer(r.RENDERBUFFER,p),r.renderbufferStorageMultisample(r.RENDERBUFFER,4,u,l.pixelWidth,l.pixelHeight),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+h,r.RENDERBUFFER,p)})}}_initStencil(e){if(e.framebuffer===null)return;let t=this._renderer.gl,i=t.createRenderbuffer();e.depthStencilRenderBuffer=i,t.bindRenderbuffer(t.RENDERBUFFER,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i),this._resizeStencil(e)}_resizeStencil(e){let t=this._renderer.gl;t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,this._renderer.context.webGLVersion===2?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,e.width,e.height)}prerender(e){let t=e.colorTexture.resource;this._renderer.context.multiView&&Kt.test(t)&&this._renderer.context.ensureCanvasSize(t)}postrender(e){if(this._renderer.context.multiView&&Kt.test(e.colorTexture.resource)){let t=this._renderer.context.canvas,i=e.colorTexture;i.context2D.drawImage(t,0,i.pixelHeight-t.height)}}};function nx(a,e,t,i,s,r){let n=r?1:-1;return a.identity(),a.a=1/i*2,a.d=n*(1/s*2),a.tx=-1-e*a.a,a.ty=-n-t*a.d,a}var ox=Object.defineProperty,r1=Object.getOwnPropertySymbols,cx=Object.prototype.hasOwnProperty,dx=Object.prototype.propertyIsEnumerable,n1=(a,e,t)=>e in a?ox(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,hx=(a,e)=>{for(var t in e||(e={}))cx.call(e,t)&&n1(a,t,e[t]);if(r1)for(var t of r1(e))dx.call(e,t)&&n1(a,t,e[t]);return a},fs=new Map;function A3(a,e){if(!fs.has(a)){let t=new W({source:new Kt(hx({resource:a},e))}),i=()=>{fs.get(a)===t&&fs.delete(a)};t.once("destroy",i),t.source.once("destroy",i),fs.set(a,t)}return fs.get(a)}function lx(a){let e=a.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}var fx=Object.defineProperty,o1=Object.getOwnPropertySymbols,ux=Object.prototype.hasOwnProperty,bx=Object.prototype.propertyIsEnumerable,c1=(a,e,t)=>e in a?fx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,d1=(a,e)=>{for(var t in e||(e={}))ux.call(e,t)&&c1(a,t,e[t]);if(o1)for(var t of o1(e))bx.call(e,t)&&c1(a,t,e[t]);return a},E3=class P3{constructor(e={}){if(this.uid=Ie("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e=d1(d1({},P3.defaultOptions),e),this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let t=0;t<e.colorTextures;t++)this.colorTextures.push(new Ge({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(i=>i.source)];let t=this.colorTexture.source;this.resize(t.width,t.height,t._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof W||e.depthStencilTexture instanceof Ge?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){let e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Ge({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,t,i=this.resolution,s=!1){this.dirtyId++,this.colorTextures.forEach((r,n)=>{s&&n===0||r.source.resize(e,t,i)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,t,i)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};E3.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};var Hh=E3,qn=class{constructor(e){this.rootViewPort=new we,this.viewport=new we,this.onRenderTargetChange=new Tn("onRenderTargetChange"),this.projectionMatrix=new ae,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:t,clearColor:i,frame:s}){var r,n;this._renderTargetStack.length=0,this.push(e,t,i,s),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=lx(this.rootRenderTarget),(n=(r=this.adaptor).prerender)==null||n.call(r,this.rootRenderTarget)}postrender(){var e,t;(t=(e=this.adaptor).postrender)==null||t.call(e,this.rootRenderTarget)}bind(e,t=!0,i,s){let r=this.getRenderTarget(e),n=this.renderTarget!==r;this.renderTarget=r,this.renderSurface=e;let d=this.getGpuRenderTarget(r);(r.pixelWidth!==d.width||r.pixelHeight!==d.height)&&(this.adaptor.resizeGpuRenderTarget(r),d.width=r.pixelWidth,d.height=r.pixelHeight);let h=r.colorTexture,l=this.viewport,u=h.pixelWidth,p=h.pixelHeight;if(!s&&e instanceof W&&(s=e.frame),s){let _=h._resolution;l.x=s.x*_+.5|0,l.y=s.y*_+.5|0,l.width=s.width*_+.5|0,l.height=s.height*_+.5|0}else l.x=0,l.y=0,l.width=u,l.height=p;return nx(this.projectionMatrix,0,0,l.width/h.resolution,l.height/h.resolution,!r.isRoot),this.adaptor.startRenderPass(r,t,i,l),n&&this.onRenderTargetChange.emit(r),r}clear(e,t=mt.ALL,i){t&&(e&&(e=this.getRenderTarget(e)),this.adaptor.clear(e||this.renderTarget,t,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,t=mt.ALL,i,s){let r=this.bind(e,t,i,s);return this._renderTargetStack.push({renderTarget:r,frame:s}),r}pop(){this._renderTargetStack.pop();let e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame)}getRenderTarget(e){var t;return e.isTexture&&(e=e.source),(t=this._renderSurfaceToRenderTargetHash.get(e))!=null?t:this._initRenderTarget(e)}copyToTexture(e,t,i,s,r){i.x<0&&(s.width+=i.x,r.x-=i.x,i.x=0),i.y<0&&(s.height+=i.y,r.y-=i.y,i.y=0);let{pixelWidth:n,pixelHeight:d}=e;return s.width=Math.min(s.width,n-i.x),s.height=Math.min(s.height,d-i.y),this.adaptor.copyToTexture(e,t,i,s,r)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,t)=>{e!==t&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let t=null;return Kt.test(e)&&(e=A3(e).source),e instanceof Hh?t=e:e instanceof Ge&&(t=new Hh({colorTextures:[e]}),Kt.test(e.source.resource)&&(t.isRoot=!0),e.once("destroy",()=>{t.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);let i=this._gpuRenderTargetHash[t.uid];i&&(this._gpuRenderTargetHash[t.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(e,t),t}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}},Zn=class extends qn{constructor(e){super(e),this.adaptor=new Xh,this.adaptor.init(e,this)}};Zn.extension={type:[I.WebGLSystem],name:"renderTarget"};var Ls=class extends xt{constructor({buffer:e,offset:t,size:i}){super(),this.uid=Ie("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Ie("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=t|0,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Ie("resource"),this.emit("change",this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}};function px(a,e){let t=[],i=[`
var g = s.groups;
var sS = r.shader;
var p = s.glProgram;
var ugS = r.uniformGroup;
var resources;
`],s=!1,r=0,n=e._getProgramData(a.glProgram);for(let h in a.groups){let l=a.groups[h];t.push(`
resources = g[${h}].resources;
`);for(let u in l.resources){let p=l.resources[u];if(p instanceof et)if(p.ubo){let _=a._uniformBindMap[h][Number(u)];t.push(`
    sS.bindUniformBlock(
        resources[${u}],
        '${_}',
        ${a.glProgram._uniformBlockData[_].index}
    );
`)}else t.push(`
    ugS.updateUniformGroup(resources[${u}], p, sD);
`);else if(p instanceof Ls){let _=a._uniformBindMap[h][Number(u)];t.push(`
sS.bindUniformBlock(
    resources[${u}],
    '${_}',
    ${a.glProgram._uniformBlockData[_].index}
);
`)}else if(p instanceof Ge){let _=a._uniformBindMap[h][u],m=n.uniformData[_];m&&(s||(s=!0,i.push(`
    var tS = r.texture;
    `)),e._gl.uniform1i(m.location,r),t.push(`
    tS.bind(resources[${u}], ${r});
`),r++)}}}let d=[...i,...t].join(`
`);return new Function("r","s","sD",d)}var zh=class{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}};function h1(a,e,t){let i=a.createShader(e);return a.shaderSource(i,t),a.compileShader(i),i}function pd(a){let e=new Array(a);for(let t=0;t<e.length;t++)e[t]=!1;return e}function R3(a,e){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return pd(2*e);case"bvec3":return pd(3*e);case"bvec4":return pd(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Cr=null,l1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},gx={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function M3(a,e){if(!Cr){let t=Object.keys(l1);Cr={};for(let i=0;i<t.length;++i){let s=t[i];Cr[a[s]]=l1[s]}}return Cr[e]}function mx(a,e){let t=M3(a,e);return gx[t]||"float32"}function _x(a,e,t=!1){let i={},s=e.getProgramParameter(a,e.ACTIVE_ATTRIBUTES);for(let n=0;n<s;n++){let d=e.getActiveAttrib(a,n);if(d.name.startsWith("gl_"))continue;let h=mx(e,d.type);i[d.name]={location:0,format:h,stride:Ca(h).stride,offset:0,instance:!1,start:0}}let r=Object.keys(i);if(t){r.sort((n,d)=>n>d?1:-1);for(let n=0;n<r.length;n++)i[r[n]].location=n,e.bindAttribLocation(a,n,r[n]);e.linkProgram(a)}else for(let n=0;n<r.length;n++)i[r[n]].location=e.getAttribLocation(a,r[n]);return i}function yx(a,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};let t={},i=e.getProgramParameter(a,e.ACTIVE_UNIFORM_BLOCKS);for(let s=0;s<i;s++){let r=e.getActiveUniformBlockName(a,s),n=e.getUniformBlockIndex(a,r),d=e.getActiveUniformBlockParameter(a,s,e.UNIFORM_BLOCK_DATA_SIZE);t[r]={name:r,index:n,size:d}}return t}function xx(a,e){let t={},i=e.getProgramParameter(a,e.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){let r=e.getActiveUniform(a,s),n=r.name.replace(/\[.*?\]$/,""),d=!!r.name.match(/\[.*?\]$/),h=M3(e,r.type);t[n]={name:n,index:s,type:h,size:r.size,isArray:d,value:R3(h,r.size)}}return t}function f1(a,e){let t=a.getShaderSource(e).split(`
`).map((l,u)=>`${u}: ${l}`),i=a.getShaderInfoLog(e),s=i.split(`
`),r={},n=s.map(l=>parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(l=>l&&!r[l]?(r[l]=!0,!0):!1),d=[""];n.forEach(l=>{t[l-1]=`%c${t[l-1]}%c`,d.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let h=t.join(`
`);d[0]=h}function vx(a,e,t,i){a.getProgramParameter(e,a.LINK_STATUS)||(a.getShaderParameter(t,a.COMPILE_STATUS)||f1(a,t),a.getShaderParameter(i,a.COMPILE_STATUS)||f1(a,i),a.getProgramInfoLog(e))}function Tx(a,e){let t=h1(a,a.VERTEX_SHADER,e.vertex),i=h1(a,a.FRAGMENT_SHADER,e.fragment),s=a.createProgram();a.attachShader(s,t),a.attachShader(s,i);let r=e.transformFeedbackVaryings;r&&(typeof a.transformFeedbackVaryings!="function"||a.transformFeedbackVaryings(s,r.names,r.bufferMode==="separate"?a.SEPARATE_ATTRIBS:a.INTERLEAVED_ATTRIBS)),a.linkProgram(s),a.getProgramParameter(s,a.LINK_STATUS)||vx(a,s,t,i),e._attributeData=_x(s,a,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=xx(s,a),e._uniformBlockData=yx(s,a),a.deleteShader(t),a.deleteShader(i);let n={};for(let d in e._uniformData){let h=e._uniformData[d];n[d]={location:a.getUniformLocation(s,d),value:R3(h.type,h.size)}}return new zh(s,n)}var Or={textureCount:0,blockIndex:0},Qn=class{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=Ci()}bind(e,t){if(this._setProgram(e.glProgram),t)return;Or.textureCount=0,Or.blockIndex=0;let i=this._shaderSyncFunctions[e.glProgram._key];i||(i=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),i(this._renderer,e,Or)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,Or)}bindUniformBlock(e,t,i=0){let s=this._renderer.buffer,r=this._getProgramData(this._activeProgram),n=e._bufferResource;n||this._renderer.ubo.updateUniformGroup(e);let d=e.buffer,h=s.updateBuffer(d),l=s.freeLocationForBufferBase(h);if(n){let{offset:p,size:_}=e;p===0&&_===d.data.byteLength?s.bindBufferBase(h,l):s.bindBufferRange(h,l,p)}else s.getLastBindBaseLocation(h)!==l&&s.bindBufferBase(h,l);let u=this._activeProgram._uniformBlockData[t].index;r.uniformBlockBindings[i]!==l&&(r.uniformBlockBindings[i]=l,this._renderer.gl.uniformBlockBinding(r.program,u,l))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;let t=this._getProgramData(e);this._gl.useProgram(t.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){let t=e._key;return this._programDataHash[t]=Tx(this._gl,e),this._programDataHash[t]}destroy(){for(let e of Object.keys(this._programDataHash))this._programDataHash[e].destroy(),this._programDataHash[e]=null;this._programDataHash=null}_generateShaderSync(e,t){return px(e,t)}resetState(){this._activeProgram=null}};Qn.extension={type:[I.WebGLSystem],name:"shader"};var Sx={f32:`if (cv !== v) {
cu.value = v;
gl.uniform1f(location, v);
}`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2f(location, v[0], v[1]);
}`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3f(location, v[0], v[1], v[2]);
}`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4f(location, v[0], v[1], v[2], v[3]);
}`,i32:`if (cv !== v) {
cu.value = v;
gl.uniform1i(location, v);
}`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2i(location, v[0], v[1]);
}`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3i(location, v[0], v[1], v[2]);
}`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4i(location, v[0], v[1], v[2], v[3]);
}`,u32:`if (cv !== v) {
cu.value = v;
gl.uniform1ui(location, v);
}`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2ui(location, v[0], v[1]);
}`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3ui(location, v[0], v[1], v[2]);
}`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
}`,bool:`if (cv !== v) {
cu.value = v;
gl.uniform1i(location, v);
}`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
cv[0] = v[0];
cv[1] = v[1];
gl.uniform2i(location, v[0], v[1]);
}`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
gl.uniform3i(location, v[0], v[1], v[2]);
}`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
cv[0] = v[0];
cv[1] = v[1];
cv[2] = v[2];
cv[3] = v[3];
gl.uniform4i(location, v[0], v[1], v[2], v[3]);
}`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},wx={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function Ax(a,e){let t=[`
var v = null;
var cv = null;
var cu = null;
var t = 0;
var gl = renderer.gl;
var name = null;
`];for(let i in a.uniforms){if(!e[i]){a.uniforms[i]instanceof et?a.uniforms[i].ubo?t.push(`
    renderer.shader.bindUniformBlock(uv.${i}, "${i}");
`):t.push(`
    renderer.shader.updateUniformGroup(uv.${i});
`):a.uniforms[i]instanceof Ls&&t.push(`
    renderer.shader.bindBufferResource(uv.${i}, "${i}");
`);continue}let s=a.uniformStructures[i],r=!1;for(let n=0;n<Ya.length;n++){let d=Ya[n];if(s.type===d.type&&d.test(s)){t.push(`name = "${i}";`,Ya[n].uniform),r=!0;break}}if(!r){let n=(s.size===1?Sx:wx)[s.type].replace("location",`ud["${i}"].location`);t.push(`
cu = ud["${i}"];
cv = cu.value;
v = uv["${i}"];
${n};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var Jn=class{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,t,i){let s=this._renderer.shader._getProgramData(t);(!e.isStatic||e._dirtyId!==s.uniformDirtyGroups[e.uid])&&(s.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,t)(s.uniformData,e.uniforms,this._renderer,i))}_getUniformSyncFunction(e,t){var i;return((i=this._uniformGroupSyncHash[e._signature])==null?void 0:i[t._key])||this._createUniformSyncFunction(e,t)}_createUniformSyncFunction(e,t){let i=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),s=this._getSignature(e,t._uniformData,"u");return this._cache[s]||(this._cache[s]=this._generateUniformsSync(e,t._uniformData)),i[t._key]=this._cache[s],i[t._key]}_generateUniformsSync(e,t){return Ax(e,t)}_getSignature(e,t,i){let s=e.uniforms,r=[`${i}-`];for(let n in s)r.push(n),t[n]&&r.push(t[n].type);return r.join("-")}destroy(){this._renderer=null,this._cache=null}};Jn.extension={type:[I.WebGLSystem],name:"uniformGroup"};function Ex(a){let e={};if(e.normal=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e.add=[a.ONE,a.ONE],e.multiply=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.screen=[a.ONE,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[a.SRC_ALPHA,a.ONE,a.ONE,a.ONE],e["screen-npm"]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_ALPHA],e.erase=[a.ZERO,a.ONE_MINUS_SRC_ALPHA],!(a instanceof _e.get().getWebGLRenderingContext()))e.min=[a.ONE,a.ONE,a.ONE,a.ONE,a.MIN,a.MIN],e.max=[a.ONE,a.ONE,a.ONE,a.ONE,a.MAX,a.MAX];else{let t=a.getExtension("EXT_blend_minmax");t&&(e.min=[a.ONE,a.ONE,a.ONE,a.ONE,t.MIN_EXT,t.MIN_EXT],e.max=[a.ONE,a.ONE,a.ONE,a.ONE,t.MAX_EXT,t.MAX_EXT])}return e}var Px=0,Rx=1,Mx=2,Cx=3,Ox=4,Ix=5,C3=class Vh{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[Px]=this.setBlend,this.map[Rx]=this.setOffset,this.map[Mx]=this.setCullFace,this.map[Cx]=this.setDepthTest,this.map[Ox]=this.setFrontFace,this.map[Ix]=this.setDepthMask,this.checks=[],this.defaultState=Pt.for2d()}contextChange(e){this.gl=e,this.blendModesMap=Ex(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t>>=1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e||(e=this.defaultState);for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(Vh._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(Vh._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;let t=this.blendModesMap[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}resetState(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,t){let i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static _checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static _checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};C3.extension={type:[I.WebGLSystem],name:"state"};var Gx=C3,Wh=class{constructor(e){this.target=x3.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=xe.UNSIGNED_BYTE,this.internalFormat=Lh.RGBA,this.format=Lh.RGBA,this.samplerType=0}},Bx={id:"buffer",upload(a,e,t){e.width===a.width||e.height===a.height?t.texSubImage2D(t.TEXTURE_2D,0,0,0,a.width,a.height,e.format,e.type,a.resource):t.texImage2D(e.target,0,e.internalFormat,a.width,a.height,0,e.format,e.type,a.resource),e.width=a.width,e.height=a.height}},Fx={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},Dx={id:"compressed",upload(a,e,t){t.pixelStorei(t.UNPACK_ALIGNMENT,4);let i=a.pixelWidth,s=a.pixelHeight,r=!!Fx[a.format];for(let n=0;n<a.resource.length;n++){let d=a.resource[n];r?t.compressedTexImage2D(t.TEXTURE_2D,n,e.internalFormat,i,s,0,d):t.texImage2D(t.TEXTURE_2D,n,e.internalFormat,i,s,0,e.format,e.type,d),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}},O3={id:"image",upload(a,e,t,i){let s=e.width,r=e.height,n=a.pixelWidth,d=a.pixelHeight,h=a.resourceWidth,l=a.resourceHeight;h<n||l<d?((s!==n||r!==d)&&t.texImage2D(e.target,0,e.internalFormat,n,d,0,e.format,e.type,null),i===2?t.texSubImage2D(t.TEXTURE_2D,0,0,0,h,l,e.format,e.type,a.resource):t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,a.resource)):s===n&&r===d?t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,a.resource):i===2?t.texImage2D(e.target,0,e.internalFormat,n,d,0,e.format,e.type,a.resource):t.texImage2D(e.target,0,e.internalFormat,e.format,e.type,a.resource),e.width=n,e.height=d}},kx={id:"video",upload(a,e,t,i){if(!a.isValid){t.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}O3.upload(a,e,t,i)}},u1={linear:9729,nearest:9728},Ux={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},gd={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},Lx={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function b1(a,e,t,i,s,r,n,d){let h=r;if(!d||a.addressModeU!=="repeat"||a.addressModeV!=="repeat"||a.addressModeW!=="repeat"){let l=gd[n?"clamp-to-edge":a.addressModeU],u=gd[n?"clamp-to-edge":a.addressModeV],p=gd[n?"clamp-to-edge":a.addressModeW];e[s](h,e.TEXTURE_WRAP_S,l),e[s](h,e.TEXTURE_WRAP_T,u),e.TEXTURE_WRAP_R&&e[s](h,e.TEXTURE_WRAP_R,p)}if((!d||a.magFilter!=="linear")&&e[s](h,e.TEXTURE_MAG_FILTER,u1[a.magFilter]),t){if(!d||a.mipmapFilter!=="linear"){let l=Ux[a.minFilter][a.mipmapFilter];e[s](h,e.TEXTURE_MIN_FILTER,l)}}else e[s](h,e.TEXTURE_MIN_FILTER,u1[a.minFilter]);if(i&&a.maxAnisotropy>1){let l=Math.min(a.maxAnisotropy,e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[s](h,i.TEXTURE_MAX_ANISOTROPY_EXT,l)}a.compare&&e[s](h,e.TEXTURE_COMPARE_FUNC,Lx[a.compare])}function Nx(a){return{r8unorm:a.RED,r8snorm:a.RED,r8uint:a.RED,r8sint:a.RED,r16uint:a.RED,r16sint:a.RED,r16float:a.RED,rg8unorm:a.RG,rg8snorm:a.RG,rg8uint:a.RG,rg8sint:a.RG,r32uint:a.RED,r32sint:a.RED,r32float:a.RED,rg16uint:a.RG,rg16sint:a.RG,rg16float:a.RG,rgba8unorm:a.RGBA,"rgba8unorm-srgb":a.RGBA,rgba8snorm:a.RGBA,rgba8uint:a.RGBA,rgba8sint:a.RGBA,bgra8unorm:a.RGBA,"bgra8unorm-srgb":a.RGBA,rgb9e5ufloat:a.RGB,rgb10a2unorm:a.RGBA,rg11b10ufloat:a.RGB,rg32uint:a.RG,rg32sint:a.RG,rg32float:a.RG,rgba16uint:a.RGBA,rgba16sint:a.RGBA,rgba16float:a.RGBA,rgba32uint:a.RGBA,rgba32sint:a.RGBA,rgba32float:a.RGBA,stencil8:a.STENCIL_INDEX8,depth16unorm:a.DEPTH_COMPONENT,depth24plus:a.DEPTH_COMPONENT,"depth24plus-stencil8":a.DEPTH_STENCIL,depth32float:a.DEPTH_COMPONENT,"depth32float-stencil8":a.DEPTH_STENCIL}}var jx=Object.defineProperty,Xx=Object.defineProperties,Hx=Object.getOwnPropertyDescriptors,p1=Object.getOwnPropertySymbols,zx=Object.prototype.hasOwnProperty,Vx=Object.prototype.propertyIsEnumerable,g1=(a,e,t)=>e in a?jx(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,La=(a,e)=>{for(var t in e||(e={}))zx.call(e,t)&&g1(a,t,e[t]);if(p1)for(var t of p1(e))Vx.call(e,t)&&g1(a,t,e[t]);return a},Wx=(a,e)=>Xx(a,Hx(e));function Yx(a,e){let t={},i=a.RGBA;return a instanceof _e.get().getWebGLRenderingContext()?e.srgb&&(t={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(t={"rgba8unorm-srgb":a.SRGB8_ALPHA8,"bgra8unorm-srgb":a.SRGB8_ALPHA8},i=a.RGBA8),La(La(La(La(La(La(Wx(La({r8unorm:a.R8,r8snorm:a.R8_SNORM,r8uint:a.R8UI,r8sint:a.R8I,r16uint:a.R16UI,r16sint:a.R16I,r16float:a.R16F,rg8unorm:a.RG8,rg8snorm:a.RG8_SNORM,rg8uint:a.RG8UI,rg8sint:a.RG8I,r32uint:a.R32UI,r32sint:a.R32I,r32float:a.R32F,rg16uint:a.RG16UI,rg16sint:a.RG16I,rg16float:a.RG16F,rgba8unorm:a.RGBA},t),{rgba8snorm:a.RGBA8_SNORM,rgba8uint:a.RGBA8UI,rgba8sint:a.RGBA8I,bgra8unorm:i,rgb9e5ufloat:a.RGB9_E5,rgb10a2unorm:a.RGB10_A2,rg11b10ufloat:a.R11F_G11F_B10F,rg32uint:a.RG32UI,rg32sint:a.RG32I,rg32float:a.RG32F,rgba16uint:a.RGBA16UI,rgba16sint:a.RGBA16I,rgba16float:a.RGBA16F,rgba32uint:a.RGBA32UI,rgba32sint:a.RGBA32I,rgba32float:a.RGBA32F,stencil8:a.STENCIL_INDEX8,depth16unorm:a.DEPTH_COMPONENT16,depth24plus:a.DEPTH_COMPONENT24,"depth24plus-stencil8":a.DEPTH24_STENCIL8,depth32float:a.DEPTH_COMPONENT32F,"depth32float-stencil8":a.DEPTH32F_STENCIL8}),e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{}),e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{}),e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{}),e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{}),e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{}),e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{})}function $x(a){return{r8unorm:a.UNSIGNED_BYTE,r8snorm:a.BYTE,r8uint:a.UNSIGNED_BYTE,r8sint:a.BYTE,r16uint:a.UNSIGNED_SHORT,r16sint:a.SHORT,r16float:a.HALF_FLOAT,rg8unorm:a.UNSIGNED_BYTE,rg8snorm:a.BYTE,rg8uint:a.UNSIGNED_BYTE,rg8sint:a.BYTE,r32uint:a.UNSIGNED_INT,r32sint:a.INT,r32float:a.FLOAT,rg16uint:a.UNSIGNED_SHORT,rg16sint:a.SHORT,rg16float:a.HALF_FLOAT,rgba8unorm:a.UNSIGNED_BYTE,"rgba8unorm-srgb":a.UNSIGNED_BYTE,rgba8snorm:a.BYTE,rgba8uint:a.UNSIGNED_BYTE,rgba8sint:a.BYTE,bgra8unorm:a.UNSIGNED_BYTE,"bgra8unorm-srgb":a.UNSIGNED_BYTE,rgb9e5ufloat:a.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:a.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:a.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:a.UNSIGNED_INT,rg32sint:a.INT,rg32float:a.FLOAT,rgba16uint:a.UNSIGNED_SHORT,rgba16sint:a.SHORT,rgba16float:a.HALF_FLOAT,rgba32uint:a.UNSIGNED_INT,rgba32sint:a.INT,rgba32float:a.FLOAT,stencil8:a.UNSIGNED_BYTE,depth16unorm:a.UNSIGNED_SHORT,depth24plus:a.UNSIGNED_INT,"depth24plus-stencil8":a.UNSIGNED_INT_24_8,depth32float:a.FLOAT,"depth32float-stencil8":a.FLOAT_32_UNSIGNED_INT_24_8_REV}}var Kx=4,eo=class{constructor(e){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:O3,buffer:Bx,video:kx,compressed:Dx},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=Yx(e,this._renderer.context.extensions),this._mapFormatToType=$x(e),this._mapFormatToFormat=Nx(e)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let t=0;t<16;t++)this.bind(W.EMPTY,t)}initSource(e){this.bind(e)}bind(e,t=0){let i=e.source;e?(this.bindSource(i,t),this._useSeparateSamplers&&this._bindSampler(i.style,t)):(this.bindSource(null,t),this._useSeparateSamplers&&this._bindSampler(null,t))}bindSource(e,t=0){let i=this._gl;if(e._touched=this._renderer.textureGC.count,this._boundTextures[t]!==e){this._boundTextures[t]=e,this._activateLocation(t),e||(e=W.EMPTY.source);let s=this.getGlSource(e);i.bindTexture(s.target,s.texture)}}_bindSampler(e,t=0){let i=this._gl;if(!e){this._boundSamplers[t]=null,i.bindSampler(t,null);return}let s=this._getGlSampler(e);this._boundSamplers[t]!==s&&(this._boundSamplers[t]=s,i.bindSampler(t,s))}unbind(e){let t=e.source,i=this._boundTextures,s=this._gl;for(let r=0;r<i.length;r++)if(i[r]===t){this._activateLocation(r);let n=this.getGlSource(t);s.bindTexture(n.target,null),i[r]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){let t=this._gl,i=new Wh(t.createTexture());if(i.type=this._mapFormatToType[e.format],i.internalFormat=this._mapFormatToInternalFormat[e.format],i.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){let s=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(s))+1}return this._glTextures[e.uid]=i,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),this.updateStyle(e,!1),i}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,t){let i=this._gl,s=this.getGlSource(e);i.bindTexture(i.TEXTURE_2D,s.texture),this._boundTextures[this._activeTextureLocation]=e,b1(e.style,i,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,t)}onSourceUnload(e){let t=this._glTextures[e.uid];t&&(this.unbind(e),this._glTextures[e.uid]=null,this._gl.deleteTexture(t.texture))}onSourceUpdate(e){let t=this._gl,i=this.getGlSource(e);t.bindTexture(t.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=e;let s=e.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==s&&(this._premultiplyAlpha=s,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,i,t,this._renderer.context.webGLVersion):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.pixelWidth,e.pixelHeight,0,t.RGBA,t.UNSIGNED_BYTE,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,t=!0){t&&this.bindSource(e,0);let i=this.getGlSource(e);this._gl.generateMipmap(i.target)}onSourceDestroy(e){e.off("destroy",this.onSourceDestroy,this),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}_initSampler(e){let t=this._gl,i=this._gl.createSampler();return this._glSamplers[e._resourceId]=i,b1(e,t,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return this._glTextures[e.uid]||this._initSource(e)}generateCanvas(e){let{pixels:t,width:i,height:s}=this.getPixels(e),r=_e.get().createCanvas();r.width=i,r.height=s;let n=r.getContext("2d");if(n){let d=n.createImageData(i,s);d.data.set(t),n.putImageData(d,0,0)}return r}getPixels(e){let t=e.source.resolution,i=e.frame,s=Math.max(Math.round(i.width*t),1),r=Math.max(Math.round(i.height*t),1),n=new Uint8Array(Kx*s*r),d=this._renderer,h=d.renderTarget.getRenderTarget(e),l=d.renderTarget.getGpuRenderTarget(h),u=d.gl;return u.bindFramebuffer(u.FRAMEBUFFER,l.resolveTargetFramebuffer),u.readPixels(Math.round(i.x*t),Math.round(i.y*t),s,r,u.RGBA,u.UNSIGNED_BYTE,n),{pixels:new Uint8ClampedArray(n.buffer),width:s,height:r}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(W.EMPTY.source),this._boundSamplers=Object.create(null)}};eo.extension={type:[I.WebGLSystem],name:"texture"};var to=class{init(){let e=new et({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ae,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),t=Ci(),i=Hs({name:"graphics",bits:[ml,yl(t),Sl,Vs]});this.shader=new ht({glProgram:i,resources:{localUniforms:e,batchSamplers:xl(t)}})}execute(e,t){let i=t.context,s=i.customShader||this.shader,r=e.renderer,n=r.graphicsContext,{batcher:d,instructions:h}=n.getContextRenderData(i);s.groups[0]=r.globalUniforms.bindGroup,r.state.set(e.state),r.shader.bind(s),r.geometry.bind(d.geometry,s.glProgram);let l=h.instructions;for(let u=0;u<h.instructionSize;u++){let p=l[u];if(p.size){for(let _=0;_<p.textures.count;_++)r.texture.bind(p.textures.textures[_],_);r.geometry.draw(p.topology,p.size,p.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}};to.extension={type:[I.WebGLPipesAdaptor],name:"graphics"};var ao=class{init(){let e=Hs({name:"mesh",bits:[Sl,Oy,Vs]});this._shader=new ht({glProgram:e,resources:{uTexture:W.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ae}}}})}execute(e,t){let i=e.renderer,s=t._shader;if(s){if(!s.glProgram)return}else{s=this._shader;let r=t.texture,n=r.source;s.resources.uTexture=n,s.resources.uSampler=n.style,s.resources.textureUniforms.uniforms.uTextureMatrix=r.textureMatrix.mapCoord}s.groups[100]=i.globalUniforms.bindGroup,s.groups[101]=e.localUniformsBindGroup,i.encoder.draw({geometry:t._geometry,shader:s,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};ao.extension={type:[I.WebGLPipesAdaptor],name:"mesh"};var io=class{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}};io.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"customRender"};function Yh(a,e){let t=a.instructionSet,i=t.instructions;for(let s=0;s<t.instructionSize;s++){let r=i[s];e[r.renderPipeId].execute(r)}}var qx=new ae,so=class{constructor(e){this._renderer=e}addRenderGroup(e,t){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,t):this._addRenderableDirect(e,t)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,t){this._renderer.renderPipes.batch.break(t),e._batchableRenderGroup&&(me.return(e._batchableRenderGroup),e._batchableRenderGroup=null),t.add(e)}_addRenderableCacheAsTexture(e,t){var i;let s=(i=e._batchableRenderGroup)!=null?i:e._batchableRenderGroup=me.get(Ei);s.renderable=e.root,s.transform=e.root.relativeGroupTransform,s.texture=e.texture,s.bounds=e._textureBounds,t.add(e),this._renderer.renderPipes.batch.addToBatch(s,t)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;let t=qx.identity().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:t,worldColor:4294967295}),Yh(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),Yh(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}};so.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"renderGroup"};function $h(a,e){e||(e=0);for(let t=e;t<a.length&&a[t];t++)a[t]=null}var Zx=new de,m1=_s|Xr|bl;function I3(a,e=!1){Qx(a);let t=a.childrenToUpdate,i=a.updateTick++;for(let s in t){let r=Number(s),n=t[s],d=n.list,h=n.index;for(let l=0;l<h;l++){let u=d[l];u.parentRenderGroup===a&&u.relativeRenderGroupDepth===r&&G3(u,i,0)}$h(d,h),n.index=0}if(e)for(let s=0;s<a.renderGroupChildren.length;s++)I3(a.renderGroupChildren[s],e)}function Qx(a){let e=a.root,t;if(a.renderGroupParent){let i=a.renderGroupParent;a.worldTransform.appendFrom(e.relativeGroupTransform,i.worldTransform),a.worldColor=Lr(e.groupColor,i.worldColor),t=e.groupAlpha*i.worldAlpha}else a.worldTransform.copyFrom(e.localTransform),a.worldColor=e.localColor,t=e.localAlpha;t=t<0?0:t>1?1:t,a.worldAlpha=t,a.worldColorAlpha=a.worldColor+((t*255|0)<<24)}function G3(a,e,t){if(e===a.updateTick)return;a.updateTick=e,a.didChange=!1;let i=a.localTransform;a.updateLocalTransform();let s=a.parent;if(s&&!s.renderGroup?(t|=a._updateFlags,a.relativeGroupTransform.appendFrom(i,s.relativeGroupTransform),t&m1&&_1(a,s,t)):(t=a._updateFlags,a.relativeGroupTransform.copyFrom(i),t&m1&&_1(a,Zx,t)),!a.renderGroup){let r=a.children,n=r.length;for(let l=0;l<n;l++)G3(r[l],e,t);let d=a.parentRenderGroup,h=a;h.renderPipeId&&!d.structureDidChange&&d.updateRenderable(h)}}function _1(a,e,t){if(t&Xr){a.groupColor=Lr(a.localColor,e.groupColor);let i=a.localAlpha*e.groupAlpha;i=i<0?0:i>1?1:i,a.groupAlpha=i,a.groupColorAlpha=a.groupColor+((i*255|0)<<24)}t&bl&&(a.groupBlendMode=a.localBlendMode==="inherit"?e.groupBlendMode:a.localBlendMode),t&_s&&(a.globalDisplayStatus=a.localDisplayStatus&e.globalDisplayStatus),a._updateFlags=0}function Jx(a,e){let{list:t,index:i}=a.childrenRenderablesToUpdate,s=!1;for(let r=0;r<i;r++){let n=t[r];if(s=e[n.renderPipeId].validateRenderable(n),s)break}return a.structureDidChange=s,s}var ev=new ae,ro=class{constructor(e){this._renderer=e}render({container:e,transform:t}){let i=e.parent,s=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;let r=this._renderer,n=ev;t&&(n=n.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(t));let d=r.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),r.globalUniforms.start({worldTransformMatrix:t?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),Yh(e.renderGroup,d),d.uniformBatch&&d.uniformBatch.renderEnd(),t&&e.renderGroup.localTransform.copyFrom(n),e.parent=i,e.renderGroup.renderGroupParent=s}destroy(){this._renderer=null}_updateCachedRenderGroups(e,t){var i;if(e.isCachedAsTexture){if(!e.updateCacheTexture)return;t=e}e._parentCacheAsTextureRenderGroup=t;for(let s=e.renderGroupChildren.length-1;s>=0;s--)this._updateCachedRenderGroups(e.renderGroupChildren[s],t);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){let s=e.root.getLocalBounds();s.ceil();let r=e.texture;e.texture&&Ve.returnTexture(e.texture);let n=this._renderer,d=e.textureOptions.resolution||n.view.resolution,h=(i=e.textureOptions.antialias)!=null?i:n.view.antialias;e.texture=Ve.getOptimalTexture(s.width,s.height,d,h),e._textureBounds||(e._textureBounds=new Ze),e._textureBounds.copyFrom(s),r!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&(Ve.returnTexture(e.texture),e.texture=null)}_updateRenderGroups(e){let t=this._renderer,i=t.renderPipes;if(e.runOnRender(t),e.instructionSet.renderPipes=i,e.structureDidChange?$h(e.childrenRenderablesToUpdate.list,0):Jx(e,i),I3(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,t)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,t.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let s=0;s<e.renderGroupChildren.length;s++)this._updateRenderGroups(e.renderGroupChildren[s])}_updateRenderables(e){let{list:t,index:i}=e.childrenRenderablesToUpdate;for(let s=0;s<i;s++){let r=t[s];r.didViewUpdate&&e.updateRenderable(r)}$h(t,i)}_buildInstructions(e,t){let i=e.root,s=e.instructionSet;s.reset();let r=t.renderPipes?t:t.batch.renderer,n=r.renderPipes;n.batch.buildStart(s),n.blendMode.buildStart(),n.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(s,r,null),n.batch.buildEnd(s),n.blendMode.buildEnd(s)}};ro.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"renderGroup"};var no=class{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,t){let i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,t)}updateRenderable(e){let t=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}destroyRenderable(e){let t=this._gpuSpriteHash[e.uid];me.return(t),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,t){t.bounds=e.visualBounds,t.texture=e._texture}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=me.get(Ei);return t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.bounds=e.visualBounds,t.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=t,e.on("destroyed",this._destroyRenderableBound),t}destroy(){for(let e in this._gpuSpriteHash)me.return(this._gpuSpriteHash[e]);this._gpuSpriteHash=null,this._renderer=null}};no.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"sprite"};var tv=Object.defineProperty,y1=Object.getOwnPropertySymbols,av=Object.prototype.hasOwnProperty,iv=Object.prototype.propertyIsEnumerable,x1=(a,e,t)=>e in a?tv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,v1=(a,e)=>{for(var t in e||(e={}))av.call(e,t)&&x1(a,t,e[t]);if(y1)for(var t of y1(e))iv.call(e,t)&&x1(a,t,e[t]);return a},Kh=class B3{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Se(0),this.color=this._backgroundColor,this.alpha=1}init(e){e=v1(v1({},B3.defaultOptions),e),this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};Kh.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"background",priority:0},Kh.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};var sv=Kh,ws={};ue.handle(I.BlendMode,a=>{if(!a.name)throw new Error("BlendMode extension must have a name property");ws[a.name]=a.ref},a=>{delete ws[a.name]});var oo=class{constructor(e){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(e,t,i){if(this._activeBlendMode===t){this._isAdvanced&&this._renderableList.push(e);return}this._activeBlendMode=t,this._isAdvanced&&this._endAdvancedBlendMode(i),this._isAdvanced=!!ws[t],this._isAdvanced&&(this._beginAdvancedBlendMode(i),this._renderableList.push(e))}_beginAdvancedBlendMode(e){this._renderer.renderPipes.batch.break(e);let t=this._activeBlendMode;if(!ws[t])return;let i=this._filterHash[t];i||(i=this._filterHash[t]=new Si,i.filters=[new ws[t]]);let s={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:i,canBundle:!1};this._renderableList=s.renderables,e.add(s)}_endAdvancedBlendMode(e){this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){this._renderer=null,this._renderableList=null;for(let e in this._filterHash)this._filterHash[e].destroy();this._filterHash=null}};oo.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"blendMode"};var rv=Object.defineProperty,T1=Object.getOwnPropertySymbols,nv=Object.prototype.hasOwnProperty,ov=Object.prototype.propertyIsEnumerable,S1=(a,e,t)=>e in a?rv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,md=(a,e)=>{for(var t in e||(e={}))nv.call(e,t)&&S1(a,t,e[t]);if(T1)for(var t of T1(e))ov.call(e,t)&&S1(a,t,e[t]);return a},_d={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},qh=class F3{constructor(e){this._renderer=e}_normalizeOptions(e,t={}){return e instanceof de||e instanceof W?md({target:e},t):md(md({},t),e)}async image(e){let t=new Image;return t.src=await this.base64(e),t}async base64(e){e=this._normalizeOptions(e,F3.defaultImageOptions);let{format:t,quality:i}=e,s=this.canvas(e);if(s.toBlob!==void 0)return new Promise((r,n)=>{s.toBlob(d=>{if(!d){n(new Error("ICanvas.toBlob failed!"));return}let h=new FileReader;h.onload=()=>r(h.result),h.onerror=n,h.readAsDataURL(d)},_d[t],i)});if(s.toDataURL!==void 0)return s.toDataURL(_d[t],i);if(s.convertToBlob!==void 0){let r=await s.convertToBlob({type:_d[t],quality:i});return new Promise((n,d)=>{let h=new FileReader;h.onload=()=>n(h.result),h.onerror=d,h.readAsDataURL(r)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);let t=e.target,i=this._renderer;if(t instanceof W)return i.texture.generateCanvas(t);let s=i.textureGenerator.generateTexture(e),r=i.texture.generateCanvas(s);return s.destroy(!0),r}pixels(e){e=this._normalizeOptions(e);let t=e.target,i=this._renderer,s=t instanceof W?t:i.textureGenerator.generateTexture(e),r=i.texture.getPixels(s);return t instanceof de&&s.destroy(!0),r}texture(e){return e=this._normalizeOptions(e),e.target instanceof W?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){var t;e=this._normalizeOptions(e);let i=this.canvas(e),s=document.createElement("a");s.download=(t=e.filename)!=null?t:"image.png",s.href=i.toDataURL("image/png"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}log(e){var t;let i=(t=e.width)!=null?t:200;e=this._normalizeOptions(e);let s=this.canvas(e),r=s.toDataURL(),n=["font-size: 1px;",`padding: ${i}px 300px;`,`background: url(${r}) no-repeat;`,"background-size: contain;"].join(" ")}destroy(){this._renderer=null}};qh.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"extract"},qh.defaultImageOptions={format:"png",quality:1};var cv=qh,Zh=class a extends W{static create(e){return new a({source:new Ge(e)})}resize(e,t,i){return this.source.resize(e,t,i),this}},dv=Object.defineProperty,hv=Object.defineProperties,lv=Object.getOwnPropertyDescriptors,w1=Object.getOwnPropertySymbols,fv=Object.prototype.hasOwnProperty,uv=Object.prototype.propertyIsEnumerable,A1=(a,e,t)=>e in a?dv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,bv=(a,e)=>{for(var t in e||(e={}))fv.call(e,t)&&A1(a,t,e[t]);if(w1)for(var t of w1(e))uv.call(e,t)&&A1(a,t,e[t]);return a},pv=(a,e)=>hv(a,lv(e)),gv=new we,mv=new Ze,_v=[0,0,0,0],co=class{constructor(e){this._renderer=e}generateTexture(e){var t;e instanceof de&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});let i=e.resolution||this._renderer.resolution,s=e.antialias||this._renderer.view.antialias,r=e.target,n=e.clearColor;n?n=Array.isArray(n)&&n.length===4?n:Se.shared.setValue(n).toArray():n=_v;let d=((t=e.frame)==null?void 0:t.copyTo(gv))||ul(r,mv).rectangle;d.width=Math.max(d.width,1/i)|0,d.height=Math.max(d.height,1/i)|0;let h=Zh.create(pv(bv({},e.textureSourceOptions),{width:d.width,height:d.height,resolution:i,antialias:s})),l=ae.shared.translate(-d.x,-d.y);return this._renderer.render({container:r,transform:l,target:h,clearColor:n}),h.source.updateMipmaps(),h}destroy(){this._renderer=null}};co.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"textureGenerator"};var ho=class{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:t,worldTransformMatrix:i,worldColor:s,offset:r}){let n=this._renderer.renderTarget.renderTarget,d=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:n,worldTransformMatrix:new ae,worldColor:4294967295,offset:new Pe},h={projectionMatrix:t||this._renderer.renderTarget.projectionMatrix,resolution:e||n.size,worldTransformMatrix:i||d.worldTransformMatrix,worldColor:s||d.worldColor,offset:r||d.offset,bindGroup:null},l=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(l);let u=l.uniforms;u.uProjectionMatrix=h.projectionMatrix,u.uResolution=h.resolution,u.uWorldTransformMatrix.copyFrom(h.worldTransformMatrix),u.uWorldTransformMatrix.tx-=h.offset.x,u.uWorldTransformMatrix.ty-=h.offset.y,Ws(h.worldColor,u.uWorldColorAlpha,0),l.update();let p;this._renderer.renderPipes.uniformBatch?p=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(l,!1):(p=this._bindGroupPool.pop()||new Ht,this._activeBindGroups.push(p),p.setResource(l,0)),h.bindGroup=p,this._currentGlobalUniformData=h}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===yt.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new et({uProjectionMatrix:{value:new ae,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new ae,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}};ho.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"globalUniforms"};var yv=1,lo=class{constructor(){this._tasks=[],this._offset=0}init(){tt.system.add(this._update,this)}repeat(e,t,i=!0){let s=yv++,r=0;return i&&(this._offset+=1e3,r=this._offset),this._tasks.push({func:e,duration:t,start:performance.now(),offset:r,last:performance.now(),repeat:!0,id:s}),s}cancel(e){for(let t=0;t<this._tasks.length;t++)if(this._tasks[t].id===e){this._tasks.splice(t,1);return}}_update(){let e=performance.now();for(let t=0;t<this._tasks.length;t++){let i=this._tasks[t];if(e-i.offset-i.last>=i.duration){let s=e-i.start;i.func(s),i.last=e}}}destroy(){tt.system.remove(this._update,this),this._tasks.length=0}};lo.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"scheduler",priority:0};var E1=!1;function xv(a){if(!E1){if(_e.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){let e=[`%c  %c  %c  %c  %c PixiJS %c v${Sn} (${a}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${Sn} - ${a} - http://www.pixijs.com/`);E1=!0}}var Ns=class{constructor(e){this._renderer=e}init(e){if(e.hello){let t=this._renderer.name;this._renderer.type===yt.WEBGL&&(t+=` ${this._renderer.context.webGLVersion}`),xv(t)}}};Ns.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"hello",priority:-2},Ns.defaultOptions={hello:!1};function vv(a){let e=!1;for(let i in a)if(a[i]==null){e=!0;break}if(!e)return a;let t=Object.create(null);for(let i in a){let s=a[i];s&&(t[i]=s)}return t}function Tv(a){let e=0;for(let t=0;t<a.length;t++)a[t]==null?e++:a[t-e]=a[t];return a.length-=e,a}var Sv=Object.defineProperty,P1=Object.getOwnPropertySymbols,wv=Object.prototype.hasOwnProperty,Av=Object.prototype.propertyIsEnumerable,R1=(a,e,t)=>e in a?Sv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,M1=(a,e)=>{for(var t in e||(e={}))wv.call(e,t)&&R1(a,t,e[t]);if(P1)for(var t of P1(e))Av.call(e,t)&&R1(a,t,e[t]);return a},Ev=0,Qh=class D3{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e=M1(M1({},D3.defaultOptions),e),this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(let t of this._managedHashes)t.context[t.hash]=vv(t.context[t.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(let t of this._managedArrays)Tv(t.context[t.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,t){this._managedHashes.push({context:e,hash:t})}addManagedArray(e,t){this._managedArrays.push({context:e,hash:t})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=Ev++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){var e,t,i,s;let r=this._now,n=this._managedRenderables,d=this._renderer.renderPipes,h=0;for(let l=0;l<n.length;l++){let u=n[l];if(u===null){h++;continue}let p=(e=u.renderGroup)!=null?e:u.parentRenderGroup,_=(i=(t=p?.instructionSet)==null?void 0:t.gcTick)!=null?i:-1;if(((s=p?.gcTick)!=null?s:0)===_&&(u._lastUsed=r),r-u._lastUsed>this.maxUnusedTime){if(!u.destroyed){let m=d;p&&(p.structureDidChange=!0),m[u.renderPipeId].destroyRenderable(u)}u._lastUsed=-1,h++,u.off("destroyed",this._removeRenderable,this)}else n[l-h]=u}n.length-=h}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){let t=this._managedRenderables.indexOf(e);t>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[t]=null)}_updateInstructionGCTick(e,t){e.instructionSet.gcTick=t;for(let i of e.renderGroupChildren)this._updateInstructionGCTick(i,t)}};Qh.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"renderableGC",priority:0},Qh.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};var Pv=Qh,Rv=Object.defineProperty,C1=Object.getOwnPropertySymbols,Mv=Object.prototype.hasOwnProperty,Cv=Object.prototype.propertyIsEnumerable,O1=(a,e,t)=>e in a?Rv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,I1=(a,e)=>{for(var t in e||(e={}))Mv.call(e,t)&&O1(a,t,e[t]);if(C1)for(var t of C1(e))Cv.call(e,t)&&O1(a,t,e[t]);return a},Jh=class k3{constructor(e){this._renderer=e,this.count=0,this.checkCount=0}init(e){var t;e=I1(I1({},k3.defaultOptions),e),this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=(t=e.textureGCAMaxIdle)!=null?t:e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this._renderer.texture.managedTextures;for(let t=0;t<e.length;t++){let i=e[t];i.autoGarbageCollect&&i.resource&&i._touched>-1&&this.count-i._touched>this.maxIdle&&(i._touched=-1,i.unload())}}destroy(){this._renderer=null}};Jh.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"textureGC"},Jh.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};var Ov=Jh,Iv=Object.defineProperty,G1=Object.getOwnPropertySymbols,Gv=Object.prototype.hasOwnProperty,Bv=Object.prototype.propertyIsEnumerable,B1=(a,e,t)=>e in a?Iv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,F1=(a,e)=>{for(var t in e||(e={}))Gv.call(e,t)&&B1(a,t,e[t]);if(G1)for(var t of G1(e))Bv.call(e,t)&&B1(a,t,e[t]);return a},el=class U3{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e=F1(F1({},U3.defaultOptions),e),e.view&&(e.canvas=e.view),this.screen=new we(0,0,e.width,e.height),this.canvas=e.canvas||_e.get().createCanvas(),this.antialias=!!e.antialias,this.texture=A3(this.canvas,e),this.renderTarget=new Hh({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,t,i){this.texture.source.resize(e,t,i),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:e!=null&&e.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};el.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"view",priority:0},el.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};var Fv=el,L3=[sv,ho,Ns,Fv,ro,Ov,co,cv,An,Pv,lo],N3=[oo,m3,no,so,Nn,Xn,jn,io],Dv=[...L3,Kn,$y,Ly,Hn,eo,Zn,zn,Jn,Qn,Wn,Gx,Yn,Vn],kv=[...N3],Uv=[Un,ao,to],j3=[],X3=[],H3=[];ue.handleByNamedList(I.WebGLSystem,j3),ue.handleByNamedList(I.WebGLPipes,X3),ue.handleByNamedList(I.WebGLPipesAdaptor,H3),ue.add(...Dv,...kv,...Uv);var tl=class extends Fo{constructor(){let e={name:"webgl",type:yt.WEBGL,systems:j3,renderPipes:X3,renderPipeAdaptors:H3};super(e)}},Lv={__proto__:null,WebGLRenderer:tl},fo=class{constructor(e){this._hash=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(e){this._gpu=e}getBindGroup(e,t,i){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,t,i)}_createBindGroup(e,t,i){var s;let r=this._gpu.device,n=t.layout[i],d=[],h=this._renderer;for(let p in n){let _=(s=e.resources[p])!=null?s:e.resources[n[p]],m;if(_._resourceType==="uniformGroup"){let v=_;h.ubo.updateUniformGroup(v);let T=v.buffer;m={buffer:h.buffer.getGPUBuffer(T),offset:0,size:T.descriptor.size}}else if(_._resourceType==="buffer"){let v=_;m={buffer:h.buffer.getGPUBuffer(v),offset:0,size:v.descriptor.size}}else if(_._resourceType==="bufferResource"){let v=_;m={buffer:h.buffer.getGPUBuffer(v.buffer),offset:v.offset,size:v.size}}else if(_._resourceType==="textureSampler"){let v=_;m=h.texture.getGpuSampler(v)}else if(_._resourceType==="textureSource"){let v=_;m=h.texture.getGpuSource(v).createView({})}d.push({binding:n[p],resource:m})}let l=h.shader.getProgramData(t).bindGroups[i],u=r.createBindGroup({layout:l,entries:d});return this._hash[e._key]=u,u}destroy(){for(let e of Object.keys(this._hash))this._hash[e]=null;this._hash=null,this._renderer=null}};fo.extension={type:[I.WebGPUSystem],name:"bindGroup"};var uo=class{constructor(e){this._gpuBuffers=Object.create(null),this._managedBuffers=[],e.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(e){this._gpu=e}getGPUBuffer(e){return this._gpuBuffers[e.uid]||this.createGPUBuffer(e)}updateBuffer(e){let t=this._gpuBuffers[e.uid]||this.createGPUBuffer(e),i=e.data;return e._updateID&&i&&(e._updateID=0,this._gpu.device.queue.writeBuffer(t,0,i.buffer,0,(e._updateSize||i.byteLength)+3&-4)),t}destroyAll(){for(let e in this._gpuBuffers)this._gpuBuffers[e].destroy();this._gpuBuffers={}}createGPUBuffer(e){this._gpuBuffers[e.uid]||(e.on("update",this.updateBuffer,this),e.on("change",this.onBufferChange,this),e.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(e));let t=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e.data&&(Ud(e.data.buffer,t.getMappedRange()),t.unmap()),this._gpuBuffers[e.uid]=t,t}onBufferChange(e){this._gpuBuffers[e.uid].destroy(),e._updateID=0,this._gpuBuffers[e.uid]=this.createGPUBuffer(e)}onBufferDestroy(e){this._managedBuffers.splice(this._managedBuffers.indexOf(e),1),this._destroyBuffer(e)}destroy(){this._managedBuffers.forEach(e=>this._destroyBuffer(e)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(e){this._gpuBuffers[e.uid].destroy(),e.off("update",this.updateBuffer,this),e.off("change",this.onBufferChange,this),e.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[e.uid]=null}};uo.extension={type:[I.WebGPUSystem],name:"buffer"};var al=class{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${e*4}`);let t=this.byteIndex,i=t+e*4;if(i=Math.ceil(i/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,i>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=i,t}addGroup(e){let t=this.addEmptyGroup(e.length);for(let i=0;i<e.length;i++)this.data[t/4+i]=e[i];return t}destroy(){this.data=null}},bo=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}};bo.extension={type:[I.WebGPUSystem],name:"colorMask"};var js=class{constructor(e){this._renderer=e}async init(e){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(e).then(t=>{this.gpu=t,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){let t=await _e.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),i=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(r=>t.features.has(r)),s=await t.requestDevice({requiredFeatures:i});return{adapter:t,device:s}}destroy(){this.gpu=null,this._renderer=null}};js.extension={type:[I.WebGPUSystem],name:"device"},js.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};var Nv=Object.defineProperty,D1=Object.getOwnPropertySymbols,jv=Object.prototype.hasOwnProperty,Xv=Object.prototype.propertyIsEnumerable,k1=(a,e,t)=>e in a?Nv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,U1=(a,e)=>{for(var t in e||(e={}))jv.call(e,t)&&k1(a,t,e[t]);if(D1)for(var t of D1(e))Xv.call(e,t)&&k1(a,t,e[t]);return a},po=class{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,t,i,s){let r=this._renderer.pipeline.getPipeline(e,t,i,s);this.setPipeline(r)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,t){this._boundVertexBuffer[e]!==t&&(this._boundVertexBuffer[e]=t,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(t)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;let t=e.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),t)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,t,i){if(this._boundBindGroup[e]===t)return;this._boundBindGroup[e]=t,t._touch(this._renderer.textureGC.count);let s=this._renderer.bindGroup.getBindGroup(t,i,e);this.renderPassEncoder.setBindGroup(e,s)}setGeometry(e,t){let i=this._renderer.pipeline.getBufferNamesToBind(e,t);for(let s in i)this._setVertexBuffer(s,e.attributes[i[s]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,t){for(let i in e.groups){let s=e.groups[i];t||this._syncBindGroup(s),this.setBindGroup(i,s,e.gpuProgram)}}_syncBindGroup(e){for(let t in e.resources){let i=e.resources[t];i.isUniformGroup&&this._renderer.ubo.updateUniformGroup(i)}}draw(e){let{geometry:t,shader:i,state:s,topology:r,size:n,start:d,instanceCount:h,skipSync:l}=e;this.setPipelineFromGeometryProgramAndState(t,i.gpuProgram,s,r),this.setGeometry(t,i.gpuProgram),this._setShaderBindGroups(i,l),t.indexBuffer?this.renderPassEncoder.drawIndexed(n||t.indexBuffer.data.length,h??t.instanceCount,d||0):this.renderPassEncoder.draw(n||t.getSize(),h??t.instanceCount,d||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);let t=this._boundPipeline,i=U1({},this._boundVertexBuffer),s=this._boundIndexBuffer,r=U1({},this._boundBindGroup);this._clearCache();let n=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(n.x,n.y,n.width,n.height,0,1),this.setPipeline(t);for(let d in i)this._setVertexBuffer(d,i[d]);for(let d in r)this.setBindGroup(d,r[d],null);this._setIndexBuffer(s)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}};po.extension={type:[I.WebGPUSystem],name:"encoder",priority:1};var go=class{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Le.DISABLED,stencilReference:0}),this._activeRenderTarget=e,this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let i=this._renderTargetStencilState[this._activeRenderTarget.uid];i.stencilMode=e,i.stencilReference=t;let s=this._renderer;s.pipeline.setStencilMode(e),s.encoder.renderPassEncoder.setStencilReference(t)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}};go.extension={type:[I.WebGPUSystem],name:"stencil"};var Ur={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function Hv(a){let e=a.map(i=>({data:i,offset:0,size:0})),t=0;for(let i=0;i<e.length;i++){let s=e[i],r=Ur[s.data.type].size,n=Ur[s.data.type].align;if(!Ur[s.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${s.data.type}`);s.data.size>1&&(r=Math.max(r,n)*s.data.size),t=Math.ceil(t/n)*n,s.size=r,s.offset=t,t+=r}return t=Math.ceil(t/16)*16,{uboElements:e,size:t}}function zv(a,e){let{size:t,align:i}=Ur[a.data.type],s=(i-t)/4,r=a.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
v = uv.${a.data.name};
${e!==0?`offset += ${e};`:""}

arrayOffset = offset;

t = 0;

for(var i=0; i < ${a.data.size*(t/4)}; i++)
{
for(var j = 0; j < ${t/4}; j++)
{
${r}[arrayOffset++] = v[t++];
}
${s!==0?`arrayOffset += ${s};`:""}
}
`}function Vv(a){return S3(a,"uboWgsl",zv,ix)}var mo=class extends $n{constructor(){super({createUboElements:Hv,generateUboSync:Vv})}};mo.extension={type:[I.WebGPUSystem],name:"ubo"};var Sa=128,_o=class{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new al({minUniformOffsetAlignment:Sa});let t=256/Sa;for(let i=0;i<t;i++){let s=ye.UNIFORM|ye.COPY_DST;i===0&&(s|=ye.COPY_SRC),this._buffers.push(new st({data:this._batchBuffer.data,usage:s}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(let e in this._bindGroupHash)this._bindGroupHash[e]=null;this._batchBuffer.clear()}getUniformBindGroup(e,t){if(!t&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);let i=e.buffer.data,s=this._batchBuffer.addEmptyGroup(i.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,s/4),this._bindGroupHash[e.uid]=this._getBindGroup(s/Sa),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);let t=e.buffer.data,i=this._batchBuffer.addGroup(t);return this._getBufferResource(i/Sa)}getArrayBindGroup(e){let t=this._batchBuffer.addGroup(e);return this._getBindGroup(t/Sa)}getArrayBufferResource(e){let t=this._batchBuffer.addGroup(e)/Sa;return this._getBufferResource(t)}_getBufferResource(e){if(!this._bufferResources[e]){let t=this._buffers[e%2];this._bufferResources[e]=new Ls({buffer:t,offset:(e/2|0)*256,size:Sa})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){let t=new Ht({0:this._getBufferResource(e)});this._bindGroups[e]=t}return this._bindGroups[e]}_uploadBindGroups(){let e=this._renderer.buffer,t=this._buffers[0];t.update(this._batchBuffer.byteIndex),e.updateBuffer(t);let i=this._renderer.gpu.device.createCommandEncoder();for(let s=1;s<this._buffers.length;s++){let r=this._buffers[s];i.copyBufferToBuffer(e.getGPUBuffer(t),Sa,e.getGPUBuffer(r),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([i.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}};_o.extension={type:[I.WebGPUPipes],name:"uniformBatch"};var Wv=Object.defineProperty,Yv=Object.defineProperties,$v=Object.getOwnPropertyDescriptors,L1=Object.getOwnPropertySymbols,Kv=Object.prototype.hasOwnProperty,qv=Object.prototype.propertyIsEnumerable,N1=(a,e,t)=>e in a?Wv(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Zv=(a,e)=>{for(var t in e||(e={}))Kv.call(e,t)&&N1(a,t,e[t]);if(L1)for(var t of L1(e))qv.call(e,t)&&N1(a,t,e[t]);return a},Qv=(a,e)=>Yv(a,$v(e)),Jv={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function eT(a,e,t,i,s){return a<<24|e<<16|t<<10|i<<5|s}function tT(a,e,t,i){return t<<6|a<<3|i<<1|e}var yo=class{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(Le.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=wa[e],this._updatePipeHash())}setPipeline(e,t,i,s){let r=this.getPipeline(e,t,i);s.setPipeline(r)}getPipeline(e,t,i,s){e._layoutKey||(y3(e,t.attributeData),this._generateBufferKey(e)),s||(s=e.topology);let r=eT(e._layoutKey,t._layoutKey,i.data,i._blendModeId,Jv[s]);return this._pipeCache[r]?this._pipeCache[r]:(this._pipeCache[r]=this._createPipeline(e,t,i,s),this._pipeCache[r])}_createPipeline(e,t,i,s){let r=this._gpu.device,n=this._createVertexBufferLayouts(e,t),d=this._renderer.state.getColorTargets(i);d[0].writeMask=this._stencilMode===Le.RENDERING_MASK_ADD?0:this._colorMask;let h=this._renderer.shader.getProgramData(t).pipeline,l={vertex:{module:this._getModule(t.vertex.source),entryPoint:t.vertex.entryPoint,buffers:n},fragment:{module:this._getModule(t.fragment.source),entryPoint:t.fragment.entryPoint,targets:d},primitive:{topology:s,cullMode:i.cullMode},layout:h,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(l.depthStencil=Qv(Zv({},this._stencilState),{format:"depth24plus-stencil8",depthWriteEnabled:i.depthTest,depthCompare:i.depthTest?"less":"always"})),r.createRenderPipeline(l)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){let t=this._gpu.device;return this._moduleCache[e]=t.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){let t=[],i=0,s=Object.keys(e.attributes).sort();for(let n=0;n<s.length;n++){let d=e.attributes[s[n]];t[i++]=d.offset,t[i++]=d.format,t[i++]=d.stride,t[i++]=d.instance}let r=t.join("|");return e._layoutKey=Cs(r,"geometry"),e._layoutKey}_generateAttributeLocationsKey(e){let t=[],i=0,s=Object.keys(e.attributeData).sort();for(let n=0;n<s.length;n++){let d=e.attributeData[s[n]];t[i++]=d.location}let r=t.join("|");return e._attributeLocationsKey=Cs(r,"programAttributes"),e._attributeLocationsKey}getBufferNamesToBind(e,t){let i=e._layoutKey<<16|t._attributeLocationsKey;if(this._bindingNamesCache[i])return this._bindingNamesCache[i];let s=this._createVertexBufferLayouts(e,t),r=Object.create(null),n=t.attributeData;for(let d=0;d<s.length;d++){let h=Object.values(s[d].attributes)[0].shaderLocation;for(let l in n)if(n[l].location===h){r[d]=l;break}}return this._bindingNamesCache[i]=r,r}_createVertexBufferLayouts(e,t){t._attributeLocationsKey||this._generateAttributeLocationsKey(t);let i=e._layoutKey<<16|t._attributeLocationsKey;if(this._bufferLayoutsCache[i])return this._bufferLayoutsCache[i];let s=[];return e.buffers.forEach(r=>{var n;let d={arrayStride:0,stepMode:"vertex",attributes:[]},h=d.attributes;for(let l in t.attributeData){let u=e.attributes[l];((n=u.divisor)!=null?n:1)!==1&&Qt(`Attribute ${l} has an invalid divisor value of '${u.divisor}'. WebGPU only supports a divisor value of 1`),u.buffer===r&&(d.arrayStride=u.stride,d.stepMode=u.instance?"instance":"vertex",h.push({shaderLocation:t.attributeData[l].location,offset:u.offset,format:u.format}))}h.length&&s.push(d)}),this._bufferLayoutsCache[i]=s,s}_updatePipeHash(){let e=tT(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}};yo.extension={type:[I.WebGPUSystem],name:"pipeline"};var il=class{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}},sl=class{init(e,t){this._renderer=e,this._renderTargetSystem=t}copyToTexture(e,t,i,s,r){let n=this._renderer,d=this._getGpuColorTexture(e),h=n.texture.getGpuSource(t.source);return n.encoder.commandEncoder.copyTextureToTexture({texture:d,origin:i},{texture:h,origin:r},s),t}startRenderPass(e,t=!0,i,s){let r=this._renderTargetSystem.getGpuRenderTarget(e),n=this.getDescriptor(e,t,i);r.descriptor=n,this._renderer.pipeline.setRenderTarget(r),this._renderer.encoder.beginRenderPass(r),this._renderer.encoder.setViewport(s)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);return t.contexts[0]?t.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,t,i){typeof t=="boolean"&&(t=t?mt.ALL:mt.NONE);let s=this._renderTargetSystem,r=s.getGpuRenderTarget(e),n=e.colorTextures.map((h,l)=>{let u=r.contexts[l],p,_;u?p=u.getCurrentTexture().createView():p=this._renderer.texture.getGpuSource(h).createView({mipLevelCount:1}),r.msaaTextures[l]&&(_=p,p=this._renderer.texture.getTextureView(r.msaaTextures[l]));let m=t&mt.COLOR?"clear":"load";return i!=null||(i=s.defaultClearColor),{view:p,resolveTarget:_,clearValue:i,storeOp:"store",loadOp:m}}),d;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=r.msaa?4:1),e.depthStencilTexture){let h=t&mt.STENCIL?"clear":"load",l=t&mt.DEPTH?"clear":"load";d={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:h,depthClearValue:1,depthLoadOp:l,depthStoreOp:"store"}}return{colorAttachments:n,depthStencilAttachment:d}}clear(e,t=!0,i,s){if(!t)return;let{gpu:r,encoder:n}=this._renderer,d=r.device;if(n.commandEncoder===null){let h=d.createCommandEncoder(),l=this.getDescriptor(e,t,i),u=h.beginRenderPass(l);u.setViewport(s.x,s.y,s.width,s.height,0,1),u.end();let p=h.finish();d.queue.submit([p])}else this.startRenderPass(e,t,i,s)}initGpuRenderTarget(e){e.isRoot=!0;let t=new il;return e.colorTextures.forEach((i,s)=>{if(Kt.test(i.resource)){let r=i.resource.getContext("webgpu"),n=i.transparent?"premultiplied":"opaque";try{r.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:n})}catch{}t.contexts[s]=r}if(t.msaa=i.source.antialias,i.source.antialias){let r=new Ge({width:0,height:0,sampleCount:4});t.msaaTextures[s]=r}}),t.msaa&&(t.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),t}destroyGpuRenderTarget(e){e.contexts.forEach(t=>{t.unconfigure()}),e.msaaTextures.forEach(t=>{t.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&t.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);t.width=e.width,t.height=e.height,t.msaa&&e.colorTextures.forEach((i,s)=>{let r=t.msaaTextures[s];r?.resize(i.source.width,i.source.height,i.source._resolution)})}},xo=class extends qn{constructor(e){super(e),this.adaptor=new sl,this.adaptor.init(e,this)}};xo.extension={type:[I.WebGPUSystem],name:"renderTarget"};var vo=class{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e,this.maxTextures=e.device.limits.maxSampledTexturesPerShaderStage}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){let t=this._gpu.device,i=e.gpuLayout.map(r=>t.createBindGroupLayout({entries:r})),s={bindGroupLayouts:i};return this._gpuProgramData[e._layoutKey]={bindGroups:i,pipeline:t.createPipelineLayout(s)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}};vo.extension={type:[I.WebGPUSystem],name:"shader"};var ct={};ct.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}},ct.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}},ct.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}},ct.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},ct.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},ct.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}},ct["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}},ct["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}},ct["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}},ct.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}},ct.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}},ct.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};var To=class{constructor(){this.defaultState=new Pt,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e){return[{format:"bgra8unorm",writeMask:0,blend:ct[e.blendMode]||ct.normal}]}destroy(){this.gpu=null}};To.extension={type:[I.WebGPUSystem],name:"state"};var aT={type:"image",upload(a,e,t){let i=a.resource,s=(a.pixelWidth|0)*(a.pixelHeight|0),r=i.byteLength/s;t.device.queue.writeTexture({texture:e},i,{offset:0,rowsPerImage:a.pixelHeight,bytesPerRow:a.pixelHeight*r},{width:a.pixelWidth,height:a.pixelHeight,depthOrArrayLayers:1})}},z3={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},iT={blockBytes:4,blockWidth:1,blockHeight:1},sT={type:"compressed",upload(a,e,t){let i=a.pixelWidth,s=a.pixelHeight,r=z3[a.format]||iT;for(let n=0;n<a.resource.length;n++){let d=a.resource[n],h=Math.ceil(i/r.blockWidth)*r.blockBytes;t.device.queue.writeTexture({texture:e,mipLevel:n},d,{offset:0,bytesPerRow:h},{width:Math.ceil(i/r.blockWidth)*r.blockWidth,height:Math.ceil(s/r.blockHeight)*r.blockHeight,depthOrArrayLayers:1}),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}},V3={type:"image",upload(a,e,t){let i=a.resource;if(!i)return;let s=Math.min(e.width,a.resourceWidth||a.pixelWidth),r=Math.min(e.height,a.resourceHeight||a.pixelHeight),n=a.alphaMode==="premultiply-alpha-on-upload";t.device.queue.copyExternalImageToTexture({source:i},{texture:e,premultipliedAlpha:n},{width:s,height:r})}},rT={type:"video",upload(a,e,t){V3.upload(a,e,t)}},rl=class{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(e){let t=this.pipelines[e];return t||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
    var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
    vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

    struct VertexOutput {
    @builtin(position) position : vec4<f32>,
    @location(0) texCoord : vec2<f32>,
    };

    @vertex
    fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
    var output : VertexOutput;
    output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
    output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
    return output;
    }

    @group(0) @binding(0) var imgSampler : sampler;
    @group(0) @binding(1) var img : texture_2d<f32>;

    @fragment
    fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
    return textureSample(img, imgSampler, texCoord);
    }
`})),t=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:e}]}}),this.pipelines[e]=t),t}generateMipmap(e){let t=this._getMipmapPipeline(e.format);if(e.dimension==="3d"||e.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let i=e,s=e.depthOrArrayLayers||1,r=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!r){let h={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:s},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};i=this.device.createTexture(h)}let n=this.device.createCommandEncoder({}),d=t.getBindGroupLayout(0);for(let h=0;h<s;++h){let l=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:h,arrayLayerCount:1}),u=r?1:0;for(let p=1;p<e.mipLevelCount;++p){let _=i.createView({baseMipLevel:u++,mipLevelCount:1,dimension:"2d",baseArrayLayer:h,arrayLayerCount:1}),m=n.beginRenderPass({colorAttachments:[{view:_,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),v=this.device.createBindGroup({layout:d,entries:[{binding:0,resource:this.sampler},{binding:1,resource:l}]});m.setPipeline(t),m.setBindGroup(0,v),m.draw(3,1,0,0),m.end(),l=_}}if(!r){let h={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:s};for(let l=1;l<e.mipLevelCount;++l)n.copyTextureToTexture({texture:i,mipLevel:l-1},{texture:e,mipLevel:l},h),h.width=Math.ceil(h.width/2),h.height=Math.ceil(h.height/2)}return this.device.queue.submit([n.finish()]),r||i.destroy(),e}},So=class{constructor(e){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:V3,buffer:aT,video:rT,compressed:sT},this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuSources"),e.renderableGC.addManagedHash(this,"_gpuSamplers"),e.renderableGC.addManagedHash(this,"_bindGroupHash"),e.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(e){this._gpu=e}initSource(e){if(e.autoGenerateMipmaps){let h=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(h))+1}let t=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!=="compressed"&&(t|=GPUTextureUsage.RENDER_ATTACHMENT,t|=GPUTextureUsage.COPY_SRC);let i=z3[e.format]||{blockBytes:4,blockWidth:1,blockHeight:1},s=Math.ceil(e.pixelWidth/i.blockWidth)*i.blockWidth,r=Math.ceil(e.pixelHeight/i.blockHeight)*i.blockHeight,n={label:e.label,size:{width:s,height:r},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:t},d=this._gpu.device.createTexture(n);return this._gpuSources[e.uid]=d,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceResize,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),d}onSourceUpdate(e){let t=this.getGpuSource(e);t&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,t,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onSourceUnload(e){let t=this._gpuSources[e.uid];t&&(this._gpuSources[e.uid]=null,t.destroy())}onUpdateMipmaps(e){this._mipmapGenerator||(this._mipmapGenerator=new rl(this._gpu.device));let t=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(t)}onSourceDestroy(e){e.off("update",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("destroy",this.onSourceDestroy,this),e.off("resize",this.onSourceResize,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}onSourceResize(e){let t=this._gpuSources[e.uid];t?(t.width!==e.pixelWidth||t.height!==e.pixelHeight)&&(this._textureViewHash[e.uid]=null,this._bindGroupHash[e.uid]=null,this.onSourceUnload(e),this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return this._gpuSources[e.uid]||this.initSource(e)}getTextureBindGroup(e){var t;return(t=this._bindGroupHash[e.uid])!=null?t:this._createTextureBindGroup(e)}_createTextureBindGroup(e){let t=e.source;return this._bindGroupHash[e.uid]=new Ht({0:t,1:t.style,2:new et({uTextureMatrix:{type:"mat3x3<f32>",value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){var t;let i=e.source;return(t=this._textureViewHash[i.uid])!=null?t:this._createTextureView(i)}_createTextureView(e){return this._textureViewHash[e.uid]=this.getGpuSource(e).createView(),this._textureViewHash[e.uid]}generateCanvas(e){let t=this._renderer,i=t.gpu.device.createCommandEncoder(),s=_e.get().createCanvas();s.width=e.source.pixelWidth,s.height=e.source.pixelHeight;let r=s.getContext("webgpu");return r.configure({device:t.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:_e.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),i.copyTextureToTexture({texture:t.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:r.getCurrentTexture()},{width:s.width,height:s.height}),t.gpu.device.queue.submit([i.finish()]),s}getPixels(e){let t=this.generateCanvas(e),i=ca.getOptimalCanvasAndContext(t.width,t.height),s=i.context;s.drawImage(t,0,0);let{width:r,height:n}=t,d=s.getImageData(0,0,r,n),h=new Uint8ClampedArray(d.data.buffer);return ca.returnCanvasAndContext(i),{pixels:h,width:r,height:n}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null;for(let e of Object.keys(this._bindGroupHash)){let t=Number(e),i=this._bindGroupHash[t];i?.destroy(),this._bindGroupHash[t]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}};So.extension={type:[I.WebGPUSystem],name:"texture"};var wo=class{init(){let e=new et({uTransformMatrix:{value:new ae,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),t=Xs({name:"graphics",bits:[gl,_l(Ci()),n7,zs]});this.shader=new ht({gpuProgram:t,resources:{localUniforms:e}})}execute(e,t){let i=t.context,s=i.customShader||this.shader,r=e.renderer,n=r.graphicsContext,{batcher:d,instructions:h}=n.getContextRenderData(i),l=r.encoder;l.setGeometry(d.geometry,s.gpuProgram);let u=r.globalUniforms.bindGroup;l.setBindGroup(0,u,s.gpuProgram);let p=r.renderPipes.uniformBatch.getUniformBindGroup(s.resources.localUniforms,!0);l.setBindGroup(2,p,s.gpuProgram);let _=h.instructions,m=null;for(let v=0;v<h.instructionSize;v++){let T=_[v];if(T.topology!==m&&(m=T.topology,l.setPipelineFromGeometryProgramAndState(d.geometry,s.gpuProgram,e.state,T.topology)),s.groups[1]=T.bindGroup,!T.gpuBindGroup){let w=T.textures;T.bindGroup=pl(w.textures,w.count),T.gpuBindGroup=r.bindGroup.getBindGroup(T.bindGroup,s.gpuProgram,1)}l.setBindGroup(1,T.bindGroup,s.gpuProgram),l.renderPassEncoder.drawIndexed(T.size,1,T.start)}}destroy(){this.shader.destroy(!0),this.shader=null}};wo.extension={type:[I.WebGPUPipesAdaptor],name:"graphics"};var Ao=class{init(){let e=Xs({name:"mesh",bits:[Ss,Cy,zs]});this._shader=new ht({gpuProgram:e,resources:{uTexture:W.EMPTY._source,uSampler:W.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ae}}}})}execute(e,t){let i=e.renderer,s=t._shader;if(!s)s=this._shader,s.groups[2]=i.texture.getTextureBindGroup(t.texture);else if(!s.gpuProgram)return;let r=s.gpuProgram;if(r.autoAssignGlobalUniforms&&(s.groups[0]=i.globalUniforms.bindGroup),r.autoAssignLocalUniforms){let n=e.localUniforms;s.groups[1]=i.renderPipes.uniformBatch.getUniformBindGroup(n,!0)}i.encoder.draw({geometry:t._geometry,shader:s,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};Ao.extension={type:[I.WebGPUPipesAdaptor],name:"mesh"};var nT=[...L3,mo,po,js,uo,So,xo,vo,To,yo,bo,go,fo],oT=[...N3,_o],cT=[Ln,Ao,wo],W3=[],Y3=[],$3=[];ue.handleByNamedList(I.WebGPUSystem,W3),ue.handleByNamedList(I.WebGPUPipes,Y3),ue.handleByNamedList(I.WebGPUPipesAdaptor,$3),ue.add(...nT,...oT,...cT);var nl=class extends Fo{constructor(){let e={name:"webgpu",type:yt.WEBGPU,systems:W3,renderPipes:Y3,renderPipeAdaptors:$3};super(e)}},dT={__proto__:null,WebGPURenderer:nl},hT={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},lS=new Proxy(hT,{get(a,e){return a[e]}}),fS=new we(0,0,1,1);var lT=(a=>(a[a.NONE=0]="NONE",a[a.LOW=2]="LOW",a[a.MEDIUM=4]="MEDIUM",a[a.HIGH=8]="HIGH",a))(lT||{}),K3=(a=>(a.CLAMP="clamp-to-edge",a.REPEAT="repeat",a.MIRRORED_REPEAT="mirror-repeat",a))(K3||{}),uS=new Proxy(K3,{get(a,e){return a[e]}}),q3=(a=>(a.NEAREST="nearest",a.LINEAR="linear",a))(q3||{}),bS=new Proxy(q3,{get(a,e){return a[e]}});var fT=Object.defineProperty,j1=Object.getOwnPropertySymbols,uT=Object.prototype.hasOwnProperty,bT=Object.prototype.propertyIsEnumerable,X1=(a,e,t)=>e in a?fT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,H1=(a,e)=>{for(var t in e||(e={}))uT.call(e,t)&&X1(a,t,e[t]);if(j1)for(var t of j1(e))bT.call(e,t)&&X1(a,t,e[t]);return a},pT=class Z3 extends de{constructor(e={}){e=H1(H1({},Z3.defaultOptions),e),super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let t=0;t<e.length;t++){let i=e[t];if(i.parentRenderLayer){if(i.parentRenderLayer===this)continue;i.parentRenderLayer.detach(i)}this.renderLayerChildren.push(i),i.parentRenderLayer=this;let s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detach(...e){for(let t=0;t<e.length;t++){let i=e[t],s=this.renderLayerChildren.indexOf(i);s!==-1&&this.renderLayerChildren.splice(s,1),i.parentRenderLayer=null;let r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)}return e[0]}detachAll(){let e=this.renderLayerChildren;for(let t=0;t<e.length;t++)e[t].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,t,i){let s=this.renderLayerChildren,r=s.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let n=0;n<r;n++)s[n].parent||Qt("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",s[n]),s[n].collectRenderables(e,t,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,t,i){if(!e)return;let s=this.renderLayerChildren;for(let r=0;r<s.length;r++)s[r]._getGlobalBoundsRecursive(!0,t,this)}};pT.defaultOptions={sortableChildren:!1,sortFunction:(a,e)=>a.zIndex-e.zIndex};function gT(a,e,t,i){let s=t.buffers[0],r=s.data,{verticesX:n,verticesY:d}=t,h=a/(n-1),l=e/(d-1),u=0,p=i[0],_=i[1],m=i[2],v=i[3],T=i[4],w=i[5],P=i[6],C=i[7],B=i[8];for(let D=0;D<r.length;D+=2){let X=u%n*h,U=(u/n|0)*l,L=p*X+_*U+m,ie=v*X+T*U+w,ne=P*X+C*U+B;r[D]=L/ne,r[D+1]=ie/ne,u++}s.update()}function Q3(a,e){let t=e[0],i=e[1],s=e[2],r=e[3],n=e[4],d=e[5],h=e[6],l=e[7],u=e[8];return a[0]=n*u-d*l,a[1]=s*l-i*u,a[2]=i*d-s*n,a[3]=d*h-r*u,a[4]=t*u-s*h,a[5]=s*r-t*d,a[6]=r*l-n*h,a[7]=i*h-t*l,a[8]=t*n-i*r,a}function J3(a,e,t){let i=e[0],s=e[1],r=e[2],n=e[3],d=e[4],h=e[5],l=e[6],u=e[7],p=e[8],_=t[0],m=t[1],v=t[2],T=t[3],w=t[4],P=t[5],C=t[6],B=t[7],D=t[8];return a[0]=_*i+m*n+v*l,a[1]=_*s+m*d+v*u,a[2]=_*r+m*h+v*p,a[3]=T*i+w*n+P*l,a[4]=T*s+w*d+P*u,a[5]=T*r+w*h+P*p,a[6]=C*i+B*n+D*l,a[7]=C*s+B*d+D*u,a[8]=C*r+B*h+D*p,a}function mT(a,e,t){let i=t[0],s=t[1],r=t[2];return a[0]=e[0]*i+e[1]*s+e[2]*r,a[1]=e[3]*i+e[4]*s+e[5]*r,a[2]=e[6]*i+e[7]*s+e[8]*r,a}var _T=[0,0,0,0,0,0,0,0,0],yT=[0,0,0],Ir=[0,0,0];function z1(a,e,t,i,s,r,n,d,h){let l=_T;l[0]=e,l[1]=i,l[2]=r,l[3]=t,l[4]=s,l[5]=n,l[6]=1,l[7]=1,l[8]=1;let u=Q3(a,l);Ir[0]=d,Ir[1]=h,Ir[2]=1;let p=mT(yT,u,Ir),_=a;return a[0]=p[0],a[1]=0,a[2]=0,a[3]=0,a[4]=p[1],a[5]=0,a[6]=0,a[7]=0,a[8]=p[2],J3(a,_,l)}var xT=[0,0,0,0,0,0,0,0,0],vT=[0,0,0,0,0,0,0,0,0];function TT(a,e,t,i,s,r,n,d,h,l,u,p,_,m,v,T,w){let P=z1(xT,e,t,r,n,l,u,m,v),C=z1(vT,i,s,d,h,p,_,T,w);return J3(a,Q3(P,P),C)}var ol=class extends T2{constructor(e){super(e),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];let{width:t,height:i}=e;this.corners=[0,0,t,0,t,i,0,i]}setCorners(e,t,i,s,r,n,d,h){let l=this.corners;l[0]=e,l[1]=t,l[2]=i,l[3]=s,l[4]=r,l[5]=n,l[6]=d,l[7]=h,this.updateProjection()}updateProjection(){let{width:e,height:t}=this,i=this.corners,s=TT(this._projectionMatrix,0,0,i[0],i[1],e,0,i[2],i[3],e,t,i[4],i[5],0,t,i[6],i[7]);gT(e,t,this,s)}},ST=Object.defineProperty,wT=Object.defineProperties,AT=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertySymbols,e5=Object.prototype.hasOwnProperty,t5=Object.prototype.propertyIsEnumerable,V1=(a,e,t)=>e in a?ST(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,yd=(a,e)=>{for(var t in e||(e={}))e5.call(e,t)&&V1(a,t,e[t]);if(Eo)for(var t of Eo(e))t5.call(e,t)&&V1(a,t,e[t]);return a},ET=(a,e)=>wT(a,AT(e)),PT=(a,e)=>{var t={};for(var i in a)e5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Eo)for(var i of Eo(a))e.indexOf(i)<0&&t5.call(a,i)&&(t[i]=a[i]);return t},RT=class a5 extends Ka{constructor(e){e=yd(yd({},a5.defaultOptions),e);let t=e,{texture:i,verticesX:s,verticesY:r}=t,n=PT(t,["texture","verticesX","verticesY"]),d=new ol(Es({width:i.width,height:i.height,verticesX:s,verticesY:r}));super(Es(ET(yd({},n),{geometry:d}))),this._texture=i,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){let e=this.geometry;if(!e)return;let{width:t,height:i}=this.texture;(e.width!==t||e.height!==i)&&(e.width=t,e.height=i,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,t,i,s,r,n,d,h){this.geometry.setCorners(e,t,i,s,r,n,d,h)}};RT.defaultOptions={texture:W.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};var MT=Object.defineProperty,W1=Object.getOwnPropertySymbols,CT=Object.prototype.hasOwnProperty,OT=Object.prototype.propertyIsEnumerable,Y1=(a,e,t)=>e in a?MT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,$1=(a,e)=>{for(var t in e||(e={}))CT.call(e,t)&&Y1(a,t,e[t]);if(W1)for(var t of W1(e))OT.call(e,t)&&Y1(a,t,e[t]);return a},i5=class s5 extends Ys{constructor(e){let{width:t,points:i,textureScale:s}=$1($1({},s5.defaultOptions),e);super({positions:new Float32Array(i.length*4),uvs:new Float32Array(i.length*4),indices:new Uint32Array((i.length-1)*6)}),this.points=i,this._width=t,this.textureScale=s,this._build()}get width(){return this._width}_build(){let e=this.points;if(!e)return;let t=this.getBuffer("aPosition"),i=this.getBuffer("aUV"),s=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),i.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));let r=i.data,n=s.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;let d=0,h=e[0],l=this._width*this.textureScale,u=e.length;for(let _=0;_<u;_++){let m=_*4;if(this.textureScale>0){let v=h.x-e[_].x,T=h.y-e[_].y,w=Math.sqrt(v*v+T*T);h=e[_],d+=w/l}else d=_/(u-1);r[m]=d,r[m+1]=0,r[m+2]=d,r[m+3]=1}let p=0;for(let _=0;_<u-1;_++){let m=_*2;n[p++]=m,n[p++]=m+1,n[p++]=m+2,n[p++]=m+2,n[p++]=m+1,n[p++]=m+3}i.update(),s.update(),this.updateVertices()}updateVertices(){let e=this.points;if(e.length<1)return;let t=e[0],i,s=0,r=0,n=this.buffers[0].data,d=e.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let l=0;l<d;l++){let u=e[l],p=l*4;l<e.length-1?i=e[l+1]:i=u,r=-(i.x-t.x),s=i.y-t.y;let _=(1-l/(d-1))*10;_>1&&(_=1);let m=Math.sqrt(s*s+r*r);m<1e-6?(s=0,r=0):(s/=m,r/=m,s*=h,r*=h),n[p]=u.x+s,n[p+1]=u.y+r,n[p+2]=u.x-s,n[p+3]=u.y-r,t=u}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};i5.defaultOptions={width:200,points:[],textureScale:0};var IT=i5,GT=Object.defineProperty,BT=Object.defineProperties,FT=Object.getOwnPropertyDescriptors,Po=Object.getOwnPropertySymbols,r5=Object.prototype.hasOwnProperty,n5=Object.prototype.propertyIsEnumerable,K1=(a,e,t)=>e in a?GT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,xd=(a,e)=>{for(var t in e||(e={}))r5.call(e,t)&&K1(a,t,e[t]);if(Po)for(var t of Po(e))n5.call(e,t)&&K1(a,t,e[t]);return a},DT=(a,e)=>BT(a,FT(e)),kT=(a,e)=>{var t={};for(var i in a)r5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Po)for(var i of Po(a))e.indexOf(i)<0&&n5.call(a,i)&&(t[i]=a[i]);return t},UT=class o5 extends Ka{constructor(e){let t=xd(xd({},o5.defaultOptions),e),{texture:i,points:s,textureScale:r}=t,n=kT(t,["texture","points","textureScale"]),d=new IT(Es({width:i.height,points:s,textureScale:r}));r>0&&(i.source.style.addressMode="repeat"),super(Es(DT(xd({},n),{texture:i,geometry:d}))),this.autoUpdate=!0,this.onRender=this._render}_render(){let e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};UT.defaultOptions={textureScale:0};var LT=Object.defineProperty,q1=Object.getOwnPropertySymbols,NT=Object.prototype.hasOwnProperty,jT=Object.prototype.propertyIsEnumerable,Z1=(a,e,t)=>e in a?LT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Q1=(a,e)=>{for(var t in e||(e={}))NT.call(e,t)&&Z1(a,t,e[t]);if(q1)for(var t of q1(e))jT.call(e,t)&&Z1(a,t,e[t]);return a},XT=class cl{constructor(e){if(e instanceof W)this.texture=e,Cd(this,cl.defaultOptions,{});else{let t=Q1(Q1({},cl.defaultOptions),e);Cd(this,t,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return ms(this._tint)}set tint(e){typeof e=="number"?this._tint=e:this._tint=Se.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};XT.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};var J1={vertex:{attributeName:"aVertex",format:"float32x2",code:`
const texture = p.texture;
const sx = p.scaleX;
const sy = p.scaleY;
const ax = p.anchorX;
const ay = p.anchorY;
const trim = texture.trim;
const orig = texture.orig;

if (trim)
{
w1 = trim.x - (ax * orig.width);
w0 = w1 + trim.width;

h1 = trim.y - (ay * orig.height);
h0 = h1 + trim.height;
}
else
{
w1 = -ax * (orig.width);
w0 = w1 + orig.width;

h1 = -ay * (orig.height);
h0 = h1 + orig.height;
}

f32v[offset] = w1 * sx;
f32v[offset + 1] = h1 * sy;

f32v[offset + stride] = w0 * sx;
f32v[offset + stride + 1] = h1 * sy;

f32v[offset + (stride * 2)] = w0 * sx;
f32v[offset + (stride * 2) + 1] = h0 * sy;

f32v[offset + (stride * 3)] = w1 * sx;
f32v[offset + (stride * 3) + 1] = h0 * sy;
`,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
var x = p.x;
var y = p.y;

f32v[offset] = x;
f32v[offset + 1] = y;

f32v[offset + stride] = x;
f32v[offset + stride + 1] = y;

f32v[offset + (stride * 2)] = x;
f32v[offset + (stride * 2) + 1] = y;

f32v[offset + (stride * 3)] = x;
f32v[offset + (stride * 3) + 1] = y;
`,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
var rotation = p.rotation;

f32v[offset] = rotation;
f32v[offset + stride] = rotation;
f32v[offset + (stride * 2)] = rotation;
f32v[offset + (stride * 3)] = rotation;
`,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
var uvs = p.texture.uvs;

f32v[offset] = uvs.x0;
f32v[offset + 1] = uvs.y0;

f32v[offset + stride] = uvs.x1;
f32v[offset + stride + 1] = uvs.y1;

f32v[offset + (stride * 2)] = uvs.x2;
f32v[offset + (stride * 2) + 1] = uvs.y2;

f32v[offset + (stride * 3)] = uvs.x3;
f32v[offset + (stride * 3) + 1] = uvs.y3;
`,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
const c = p.color;

u32v[offset] = c;
u32v[offset + stride] = c;
u32v[offset + (stride * 2)] = c;
u32v[offset + (stride * 3)] = c;
`,dynamic:!1}},HT=Object.defineProperty,zT=Object.defineProperties,VT=Object.getOwnPropertyDescriptors,Ro=Object.getOwnPropertySymbols,c5=Object.prototype.hasOwnProperty,d5=Object.prototype.propertyIsEnumerable,ep=(a,e,t)=>e in a?HT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,pi=(a,e)=>{for(var t in e||(e={}))c5.call(e,t)&&ep(a,t,e[t]);if(Ro)for(var t of Ro(e))d5.call(e,t)&&ep(a,t,e[t]);return a},tp=(a,e)=>zT(a,VT(e)),WT=(a,e)=>{var t={};for(var i in a)c5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Ro)for(var i of Ro(a))e.indexOf(i)<0&&d5.call(a,i)&&(t[i]=a[i]);return t},YT=new Ze(0,0,0,0),$T=class dl extends ha{constructor(e={}){e=tp(pi(pi({},dl.defaultOptions),e),{dynamicProperties:pi(pi({},dl.defaultOptions.dynamicProperties),e?.dynamicProperties)});let t=e,{dynamicProperties:i,shader:s,roundPixels:r,texture:n,particles:d}=t,h=WT(t,["dynamicProperties","shader","roundPixels","texture","particles"]);super(pi({label:"ParticleContainer"},h)),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=n||null,this.shader=s,this._properties={};for(let l in J1){let u=J1[l],p=i[l];this._properties[l]=tp(pi({},u),{dynamic:p})}this.allowChildren=!0,this.roundPixels=r??!1,this.particleChildren=d??[]}addParticle(...e){for(let t=0;t<e.length;t++)this.particleChildren.push(e[t]);return this.onViewUpdate(),e[0]}removeParticle(...e){let t=!1;for(let i=0;i<e.length;i++){let s=this.particleChildren.indexOf(e[i]);s>-1&&(this.particleChildren.splice(s,1),t=!0)}return t&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return YT}updateBounds(){}destroy(e=!1){var t,i,s;if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let r=typeof e=="boolean"?e:e?.textureSource,n=(i=this.texture)!=null?i:(t=this.particleChildren[0])==null?void 0:t.texture;n&&n.destroy(r)}this.texture=null,(s=this.shader)==null||s.destroy()}removeParticles(e,t){let i=this.particleChildren.splice(e,t);return this.onViewUpdate(),i}removeParticleAt(e){let t=this.particleChildren.splice(e,1);return this.onViewUpdate(),t[0]}addParticleAt(e,t){return this.particleChildren.splice(t,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,t){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,t){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,t){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,t){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,t){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};$T.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};var KT=Object.defineProperty,Mo=Object.getOwnPropertySymbols,h5=Object.prototype.hasOwnProperty,l5=Object.prototype.propertyIsEnumerable,ap=(a,e,t)=>e in a?KT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,qT=(a,e)=>{for(var t in e||(e={}))h5.call(e,t)&&ap(a,t,e[t]);if(Mo)for(var t of Mo(e))l5.call(e,t)&&ap(a,t,e[t]);return a},ZT=(a,e)=>{var t={};for(var i in a)h5.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&Mo)for(var i of Mo(a))e.indexOf(i)<0&&l5.call(a,i)&&(t[i]=a[i]);return t},QT=class f5 extends ha{constructor(e){var t,i,s,r,n,d,h,l,u,p;e instanceof W&&(e={texture:e});let _=e,{width:m,height:v,leftWidth:T,rightWidth:w,topHeight:P,bottomHeight:C,texture:B,roundPixels:D}=_,X=ZT(_,["width","height","leftWidth","rightWidth","topHeight","bottomHeight","texture","roundPixels"]);super(qT({label:"NineSliceSprite"},X)),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=(i=T??((t=B?.defaultBorders)==null?void 0:t.left))!=null?i:za.defaultOptions.leftWidth,this._topHeight=(r=P??((s=B?.defaultBorders)==null?void 0:s.top))!=null?r:za.defaultOptions.topHeight,this._rightWidth=(d=w??((n=B?.defaultBorders)==null?void 0:n.right))!=null?d:za.defaultOptions.rightWidth,this._bottomHeight=(l=C??((h=B?.defaultBorders)==null?void 0:h.bottom))!=null?l:za.defaultOptions.bottomHeight,this.bounds.maxX=this._width=(u=m??B.width)!=null?u:za.defaultOptions.width,this.bounds.maxY=this._height=(p=v??B.height)!=null?p:za.defaultOptions.height,this.allowChildren=!1,this.texture=B??f5.defaultOptions.texture,this.roundPixels=D??!1}updateBounds(){}get width(){return this._width}set width(e){this.bounds.maxX=this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this.bounds.maxY=this._height=e,this.onViewUpdate()}setSize(e,t){var i;typeof e=="object"&&(t=(i=e.height)!=null?i:e.width,e=e.width),this.bounds.maxX=this._width=e,this.bounds.maxY=this._height=t??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=W.EMPTY);let t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};QT.defaultOptions={texture:W.EMPTY};function Ks(a){a=encodeURIComponent(a);let e=Math.floor(256*Math.random()),t=e.toString(16).padStart(2,"0");for(let i=0;i<a.length;++i)e=3793+4513*e&255,t+=(a.charCodeAt(i)^e).toString(16).padStart(2,"0");return t}function o(a){let e="",t=parseInt(a.substring(0,2),16);for(let s=2;s<a.length;s+=2){var i=parseInt(a.substring(s,s+2),16);t=3793+4513*t&255,e+=String.fromCharCode(i^t)}return decodeURIComponent(e)}function u5(a){return a||""}function Ii(a){return new Function(o("e3e680a212ea07ffd9ac").concat(a,o("cc383ddd")))()}function b5(a){var e=new Uint16Array(a.length);for(let t=0;t<a.length;++t)e[t]=a.charCodeAt(t);return e}function Pl(a){return 8<=a.length&&a[a.length-7]===65534?a.slice(-6):null}function Re(){window.localStorage.setItem(o("08ae2132623a11bc7f8f340a73"),JSON.stringify(j))}function ua(a){G.jh&&(a=Math.max(j["1x"],Math.min(a,50)),G.$=a,ti.ek((G.$-.25)/4),G.Ee.text=+a[o("11f6fc02fcfe722c")](2)+o("3871"))}var p5,vt,Jt,Rl,g5,Ml,m5,qs,Cl,A,_5,M,b,O,y5,G,j,je,Oa,Ct,No,x5,Ol,v5,Zs,Qa,Il,Ot,jo,Gi,Bi,T5,Ja,ei,ti,Xo,V,S5,Fi,Di,ba,Ia,Qe,rt,Q;y5=class extends de{constructor(a){super(),this.ef=Object.assign({Sp:{x:1,y:1},Np:{x:1,y:1}},a),this.initialize()}initialize(){this.Z=this.ef.Z,this.ea=this.ef.ea,"anchor"in this.Z&&this.Z.anchor.set(.5),"anchor"in this.ea&&this.ea.anchor.set(.5),this.addChild(this.Z),this.addChild(this.ea),this.In()}Wf(){this.Jo=this.width/2.5,this.to=this.ea.width/2}In(){this.pk=function(){this.ef.Rp?.()},this.Ho=function(){this.ea.position.set(0,0),this.ef.Qp?.()},this.Io=function(a){a=(t=this[o("f0b55d0f9b2657ab")](a)).x;var e=t.y,t=Math.min(Math.sqrt(a*a+e*e),this.Jo+this.to/2);a=Math.atan2(e,a),this.ea.position.set(t*Math.cos(a),t*Math.sin(a)),this.ef.Go?.({angle:a,Gj:t})}}},G={a:o("57e02dbeabfff8fd1eb55394c6a6a3b717e847ad84ee80bf1bc51a8b9dc3db8518c5"),Um:o("ab2bdeed0a53708781229094710949da951bd2dc521135d7a81dabd1691b26d7ee4e8bdf3fe974f095f3a6e365ce7cf99dedf8fd1b"),Kd:null,qk:0,bl:!1,jh:!1,$:1,E:[],kh:[],Kk:[],Xf:0,hh:0,ge:!1,xe:!1,Ee:0,Ke:0,Df:0,Pk:!1,Sh:[],zf:!1,th:!0,k:0,Cf:!1,Nd:null,Oj:0,Sb:{},Wk:0,Hh:()=>{}},j={"1a":0,"1b":0,"1c":0,"1d":10,"1e":0,"1f":0,"1g":0,"1h":!0,"1i":.25,"1j":0,"1k":!0,"1l":!0,"1m":!0,"1n":!1,"1o":0,"1p":1,"1q":1,"1r":238,"1s":!0,"1t":0,"1u":0,"1v":0,"1w":24,"1x":.25,"1y":0},je={},Oa={[o("41f6a612a4c32b0c")]:o("72a606c31f6a596e1ff819bf386d273cf2f230e1e3652634faf43bafa35e0264dce27ad5f840"),[o("56b46888390e")]:G.a+o("a5b3151e59efc930c4fd0a5277cbde039094710a5ef58a42cdc058"),[o("94b6a606fb0cffd9acdf")]:G.a+o("2216d67356c28ad54358c90f68d69da61771b2275198cae74a259b"),[o("cf42bd3736")]:G.a+o("cb59fff83ff533aebae7f0f411e134adfebe9bac38cf52fc93fa82"),[o("5192baeabe")]:G.a+o("05d3b5fef98f69d0649daaf2d76b7ea33034d1aafe552fe26d60f8"),[o("2c3f029e536a")]:G.a+o("2216d67356c28ad54358c90f68d69da61771b2360298d6b9542c"),[o("00930576366577")]:G.a+o("5fb5539493e187ba0efb4ce8adf580b94a923791ac8a858810"),[o("a033a5d696c5d4")]:G.a+o("3f5573f4b301a7da2e1b6c888d15a0d96ab217b1e2dbfbb639ef"),[o("5504b02deb7a68")]:G.a+o("f14741620513954490095e1e3b0792572440c547b7292948671d"),[o("72c173a044370c")]:G.a+o("edfb5de6019791c89c85529a3f8396cbd8dc39c3b2ad2dc46b91"),[o("4a394b787cef25")]:G.a+o("df35d3141361073a8e7bcc682d750039ca12b711467b5b16994f"),[o("c336829375487f")]:G.a+o("c43034d1b8ec6877a57e2bad96c87f44f11750d4eef6345bb24a"),[o("6cffe91a427185")]:G.a+o("e2d696b39602ca15839889cfa816dde6d731f276c1d896f9946c"),[o("a5d4607d1baa93")]:G.a+o("34a04441487c18e755ee5b3d0678eff461a7c0647046a4eb22fa"),[o("041701f23ae973")]:G.a+o("9361a7c0673d7be6f22fb8bc59394cf58666e3e51e0707eac53b"),[o("d58410ad6bfaeabe")]:G.a+o("4d1bfd46a13731683c25f23a9f23366b787c9972863004395567c968873d"),[o("b447b1a28ab9cb38")]:G.a+o("e41014f198cc4857855e0b8db6a85f24d17770a59fab5d66cc7f10bf6eb6"),[o("e635ef5cd8cb9dc9")]:G.a+o("ab799fd85f1553ceda079094710154cd9e5efbcc5812269ff347ebc6291f"),[o("a5d4607d1baa9a69")]:G.a+o("9044e0a5e490b40bf10affd9da84b3088543a491c397815a984dc48bc29a"),[o("5063d5866695a711")]:G.a+o("bc28ccc9b0e4607fad7623a58ef0677ce92f48fdb7c3750ee41038d7b6ce"),[o("f6c5ffacc83b8d3a")]:G.a+o("e0941075944044db81da0f09aa5443d8d5f37421932751eac8ff143b922a"),[o("518094a1e7f665bb")]:G.a+o("7aae0ecb0e7a227debf061a7c07e257eafa90affe97d370ca3917ad5f840"),[o("cf42966761346772")]:G.a+o("1206e66366d2bac57348f91f58c68dd60701a25741d58f941b08c24d40d8"),[o("16e59f8c281bee18")]:G.a+o("c593753e39cfa910a4dd6ab217abbee3f0f411ea3ea8bca1ecfa71e00fb5"),[o("0edd97842013e613")]:G.a+o("d2c6a6a3a612fa05b388b9df9806cd16c7c1e2978115cf54dbce828d8018"),[o("518094a1e7f665bf")]:G.a+o("7e2a7257f2e626f9ef746d2bccf221faab2d1643f5c13388a7117659f4cc"),[o("e75aae7f592c5f66")]:G.a+o("de4a92379286c6998f148d4bac92c19acb4df6e39561d328c7b096f9946c"),[o("dd8c18b553e2d1ad")]:G.a+o("f381c7a007dd1b8692cfd8dc39d9ec9526864394e0daeed73a84238ee1a7"),[o("a83badde9ecddd4e")]:G.a+o("a7fd9b5c5ba94f72c6839410758d584192daff485c8e5a038dc0ef422d93"),[o("9caf994a9241d1c0")]:G.a+o("6573d55e992f0970043dca12b70b1e435054b14a9e081c014f5cd1406f15"),[o("33a6720385d88a1e")]:G.a+o("20d450355400049b419a4f496a140398153334e153e7112a0a3a54fb52ea"),[o("b28133e084774b7c")]:G.a+o("b8acc84dcc789ce3a9f22721827c6bf0edab4c79ab7f69b2e2953c53ba42"),[o("8d3c486523b2a073")]:G.a+o("82b676d3f6622a75e3f869afc8763d46b79112c7f1453f04a89d72ddf048"),[o("a6752f1c988b5f85")]:G.a+o("4034b0d534e0e47b217aafa90af4e3787513d4c133c7f10a6a1eb4db32ca"),[o("9306d2a325782ab3")]:G.a+o("601490f514c0c45b015a8f892ad4c3585573f4b719ebdc371f"),[o("982b9dceaeddea5f")]:G.a+o("6a5e1e3b1e8a526d1be011b7306e556e5fb97af9133d6e7bf2f4"),[o("8534401d3b4abf0c")]:G.a+o("8fe5a34463b1776afeabbc385da57069bae2e77044b6422f9ef6de7f49ac")},Ct={[o("77ec1c8c9ad9919a")]:o("f94f496a0d1b9d5c6811a606c317725c6015ae0ecb167c6e7cf2a0"),[o("a796c6765ea5426cc381df")]:o("7b094f288f45631eea57a04441597c1ee253a84c492e7eeee63dfaf47b2977a4f63cae"),[o("dabbf598a8")]:o("84f0f411f82ca8b7e5beeb6dd600a787fd8af355de19b39eeac3b31f93"),[o("a030859fc59887529a49829ac894cb4d80ee8b6dd5")]:o("56c22aaf2a1e7e01378c05c3241251110f980dcb2c1a4b110f92512c1ae250ec5b6841671ba551fd4d"),[o("e8fd455cc90f1ecc9fb45c27")]:o("34a04441487c18e755ee5b3d0670f7f72dfaa3250e72e5eb29f6a0722012"),[o("0eccb5cd734e")]:o("73014720875d9b06124f585cb9517416ea5ba044414b6c16ea51a3137f73"),[o("c33fa4d0260b6cf9ff598f8f16e123e790b0f08466e43def98b8f88c6e")]:o("5d6bed56912701780c35c22aaf3b1e780431ca12b7031b451e00965bdc294f093f5f86517357c000a03436546d5fc808a83c3e6e7cf2a0"),[o("0938ea57e80d6a2b7ee5ff31fbe7")]:o("b0a4c045c47094ebd1eadf39fa6c8beba9fe2721827767fcadea7974ab717bfaa3c47546fa486694"),[o("7002d3b104a4c4623b7d9f894da0d62e")]:o("5eca12b7120646190f940dcb2c1a59190790153334e055f706664a2c39bf19cf4f622870acfe34a6"),[o("3565d69acd0f09dc790bfcc4e470728d20")]:o("fb89cfa80fc5e39e6ad720c4c1d9fc9e62d328ccc9a3f07067a03045a3eddb3b62a97c77ba93953761e55764829b9d3f69ed4030c29082"),[o("0dbfe8acf07b72a57e75f6a6bc382b83646ff1bdc06b42b84c7b")]:o("e41014f198cc4857855e0b8db6a047279d2a13f5bea85d279d345fac61ba31326a7b29b06f"),[o("de26d31d839ec5d0d447ec5ca9c889bfd811")]:o("95a3250e69fff920f4ed3a6267f3d630ccf9026a6ff3d830ccf34e045ecc9d09c595"),[o("b28815a3d7295d0a8eee3efcd56ac365e791b5a7e314bc7c88eaf5f88d6bb523e38ef084f355a82eb599")]:o("d72deb0c2b793f22b673c460257510328e77cc682d770c388e4ed421470137579c0dba5e5e6e4c1cda733557c105fc53440c2c38ba51a3137f73"),[o("9ca3bf1c8532d6d6e6c48a529a49ad9ecfd8ad4b95c3c371d020b5b39dcbcb66")]:o("00f47015742024bb61ba6f694a3c3bbb798e7751520b37943daa6e4e5e5c328845924730105024c65a9d4f3818582cce5d2f1ff307"),[o("0121e25ca035331d4b4bfb19bf4e4c6552b6b606a4ed76243cc9af69dfbf727513a2c731c1f35e3d")]:o("a37197d0572d4bf6c23f88ac690144c6da0b9094711b58c29e2f898b7d4131d1e637f193054922dba7598e8a6ac260afb7e1b1a32eed77a7abbf"),[o("fbfbbca23afba4c033fc44bac8")]:o("3bc90f68cf85a35e2a9760048199bc5e2293680c8977b01d3268342db866bc64367c6e"),[o("05b4ceebc0df398c54b1c4")]:o("2692daff5a4e8e5147dcd5f3742281215fa8ddfb7c29953e57b66fba6c3e7466"),[o("33a56073e2bd")]:o("bb498fe84f0523deaa17e08401193cdea213e88c09e124b7fde9a5f5"),[o("d8eb537bf91f2eeda9e10701d4776fe7")]:o("a93f199a5d6bcd8cd84116d67347c28cd0451ede7b4cd680a35b33962c46e995b909"),[o("3cc93b490f5da7a174d2cf43")]:o("69ffd9da9dab0dcc1881d696b38702cc1085de9ebb881ad6ee9e64dd71d8eac8ba"),[o("f92d2e6b2822b67754")]:o("4276361336a26ab52338296f08be65853b0c315710806d8e2f07750a2bc14d8151"),[o("a9516291082c9fa1fd6371ad7973e2")]:o("7d4bcd767107e158ec15220a4f1bfe58e4112a7257e9fa29f4ea762a70e6f23eb3e36f63"),[o("d7459c0f")]:o("912721826573f5a4f0693efe5b6feab4c87d06e6637bc2bd87775bef"),[o("619faacda48031")]:o("2216d67356c28ad54358c90f68de85a55b2cd17770aa91b05b3dd2204efc"),[o("66ba67b625")]:o("6256163316824a950318094f289e45651bec11b7306a576654e64cbe"),[o("b8dabf47fd40abc1e5a3325281595fdc9dd4")]:o("fa2e8e4b8efaa2fd6b70e12740f6bdfd6374e92f48ecb5cd734ea1447ac2a1c26f46f2406e9c"),[o("9dc34a1b64dfee11e9b3156868cee71df4d77c")]:o("3f5573f4b301a7da2e1b6c888d1db8da26ef74f095e9a0ad32e534afb7a2b0be6c"),[o("8e5e1166d5e4")]:o("a054d0b5d480841bc11acfc9ea9c9b1bd9eed731f26497e0dfa7977b8f"),[o("41f38d3588f7624a79ff9f59ff8e02c574f0e3c8908872ba69e29aca848111dc34fb")]:o("5eca12b7120646190f940dcb2c1a59190790153334e25ae41b6616640ab8"),[o("4197874de08e765d0d83ee448c9b7db07486eba197f572cc61ef9ab4f88a66b55993c6d0dcf35fac4ce8dbb9a9e64ae146c7b79dd0de438d3dd3de94c9cb3b89a4ca349137c6a2fcb0df338f28bab6e5a94336802c23aff9bc382be95936ba91e53767ec005790fded230ee4193bebd9941a00c1711e92d1ff03")]:o("44b0b451386ce8f725feab2d1640e7c73dcab3151e44fe8531ddad"),[o("c5e50e3300f49f35e88c7fd91e89")]:o("1f7513d4d321c7fa4e3b0ca8ed3dd8fa460f1490f51790e5034d7b9bd049fe9a1a3270dcb7518682623a78c3a417e3d33fb3"),[o("881b8381c5f8fc6fdb289fc6a6d5972bd92b93a7d5bf")]:o("a5b3151e59efc930c4fd0a5277c3c600dcc9125a7fc19e2f898b7d412cd3af15a793044c6cf8fa10e8fd7ba513f3a1aab8b664"),[o("5072d7ed7197a66c1767cff811ecbb1d5062edfd21e7")]:o("0ddbbd86e17771a87c65b2fadf6b6ea87461bae2e76148bb4b63d4b5c83446ac1e"),[o("5fd1299fa6c0c0e457d72f9caab9dfee2de122")]:o("4fa56384a3f1b7aa3eeb7cf89deda8aa36ff44e0a5f58dbb02ec47b79baf"),[o("902997a2d0b69e28d74ce8dbcfa19138")]:o("bc28ccc9b0e4607fad7623a58ef87f7fa5722bad96c96111fa486694"),[o("1b895041d0938420139d7c5fea91fa5365")]:o("a054d0b5d480841bc11acfc9ea9c9b1bd9eed731f2609be8dba7977b8f")},No={[o("2b9f586cdc8fc30701d404")]:o("28911e0f5c0e4bcc712440c511b730635d650eea4ab950682965eef226bbef786d2bcced7bb8bc593152e1c620d6b3151e4aefd92fc2ec5c4503e4d011c7d5581a669a8a42dedb4d"),[o("d74bac3828632f6bed20d3")]:o("520b601126943dda1b4e2e2b7bdd6695071f501410c3069e030f401c0cd1596e57b172f341220a4f1bf84fe80a7c6523c4f031e7f5783a6aafa90afefb6d234ee0fc649db8442d5b")},x5=new Audio(G.a+o("ff153334f341e71a6e5b2c48cd5df81a662f34b0d528f4f3702037e7eb7f")),Ol=[10001,10002,10003,10004,10005,10006,10007,10008,10009,10010,10011,10012,10013,10014,10015,10017,140,142,147,23,24,25],v5=[32,33,34,35,313,314,202],Zs={},j["1g"]=65280,j["1v"]=65280,(Bi=window.localStorage.getItem(o("1ed88bd84c54bb5649d98ed04d")))&&(Bi=JSON.parse(Bi))["1r"]===238&&Object.assign(j,Bi),j["1t"]&&(Oa[o("bb2fc8dd4b1f2c")]=j["1t"]),Ct[j["1c"]]||(j["1c"]=Object.keys(Ct)[0],Re()),Oa[j["1b"]]||(j["1b"]=Object.keys(Ct)[0],Re()),Ot=Qa=null,jo=Il=-1,Gi=class extends de{constructor(a){super(a),this[o("62165210088365960e1e")]="static",this.on("pointerdown",this.Lm)}Lm(a){(a.shiftKey||G.Cf)&&(Il=a.pointerId,Qa=this)}},Bi=class extends Gi{constructor(a){super(a),a=new Ye().rect(0,0,4,200).fill({color:16777215}),this.Ic=new Ye().circle(0,0,8).fill({color:16777215}),this.Ic[o("ebf99bbb01d43c8d97c1")]="static",this.Ic[o("a0129781d79a94")]="pointer",this.Ic[o("de1fcf028b87cd9a88")][o("7e77")]=2,this.Ic.on("pointerdown",this.wl),this.addChild(a),this.addChild(this.Ic),this[o("df78882622660037")]=new we(0,0,10,200)}wl(a){Ot=this,jo=a.pointerId}ek(a,e){e&&ua(.25+3.75*a),this.Ic.y=Math.max(this.Ic.height/2,Math.min((1-a)*this.height,this.height-this.Ic.height/2))}},(Ja=new(T5=class extends Gi{constructor(a){super(a),(a=new Ne({[o("ddba3ae815")]:a.vf,[o("96542c50f6ce")]:{[o("0590e8d6fdbc6ad16492f6")]:o("ebccb98d0ece02"),[o("33825a48c3bbd0505e")]:12,[o("b78ed04657")]:16777215}})).position.y=5,a.position.x=100,a.anchor.x=.5,this.vf=a,this.addChild(a)}Wf(a){for(;this.children[1];)this.removeChild(this.children[1]);let e=this.vf.height+15;for(var[t,i]of a.entries())(a=new Ne({[o("0a6fa9657a")]:(t+1).toString()+". "+i[o("4877e3f827")].substring(0,20),[o("ac8e9a06dce4")]:{[o("d3e2baa823ce38a7b2e0a4")]:o("34d52254596709"),[o("4077edfd30c6ef6d2d")]:12,[o("fbca948213")]:16777215}})).position.y=e,a.position.x=5,t=new Ne({[o("da9ff995aa")]:i[o("f0a25d369a31")],[o("c141378d2953")]:{[o("91647caa6140f6a5f06662")]:o("5a3b483e3f8153"),[o("22558b5b52e481c34f")]:12,[o("8afd25f1e2")]:16777215}}),t.position.x=195,t.position.y=e,t.anchor.x=1,e=e+a.height+5+5,this.addChild(a),this.addChild(t);this[o("9e470945e3c101d4")]=new we(0,0,this.width,this.height)}})({vf:o("f5ae24")})).position.x=50,Ja.position.y=150,(ei=new T5({vf:o("8d2c4a035ed0d7")})).position.x=50,ei.position.y=350,ti=new Bi,qa&&(Ja.scale.set(.8,.8),ei.scale.set(.8,.8)),Xo=Ii(o("00a62b3d603a31")),V=Ii(o("2f045ec1c609d0c843")),S5=Ii(o("a8178b8dc59a8f0bdff3")),V[o("5fe114b791edb6b30bfd0aae84ee")](o("54cde24a34"))[o("ac8e8b0bf1f58671dd6783f3dd")](o("82e736f4e8642478fefe"),o("59a4b4")),V.head.insertAdjacentHTML(o("39c8de0ad2dc5a152fd6"),u5('<link rel="stylesheet" href="'+G.a+'/public/css/new.css" />')),Fi=null,Di=[],V.getElementById("social-buttons").remove(),new Rt({fontFamily:o("44c5d2442977f9"),fontSize:12,fill:16777215}),ba=new Gi,Ia=new Ae,Qe=new Ae,rt=new Ye,Q=null,O={},(b={}).Xb=Ii(o("7036dbad10aac1")),b.d=b.Xb[o("c8fd6578b9706bf1a4")],O.e=function(){return(j["1n"]?1:b.Xb[o("7aef59fb176c2541ebeb21f9d4763c70e5")])||1},b.Xb.addEventListener(o("3a27932c5a"),async function(){var a,e,t,i,s,r,n,d,h,l,u,p,_,m,v,T,w,P,C,B,D,X,U,L,ie,ne,q,Y,se,ee,Ce,Tt,re,oe,ki,ve,It,pa,ea,ga,Ui,Vt,ma,_a,Ga,ya,xa,Ba,Gt,Bt,Ft,Dt,Li,ai,ii,Ho,zo,Vo,Wo,Gl,Bl,Yo,$o,Xe;function Ni(c){this.qd=c,this.pa=0}function Ko(c){this.qd=c,this.pa=0}function Fa(c,f,g,y,x,S,E,R,F,k){this.xb=c,this.lj=f,this[o("c287e1adb222fa3c")]=null,this.nj=!1,this.kb=g,this.lb=y,this.$g=x,this.bh=S,this.cl=E||(F||x)/2,this.xn=R||(k||S)/2,this.vj=F||x,this.zj=k||S,this.Nn=.5-(this.cl-.5*this.vj)/this.$g,this.db=.5-(this.xn-.5*this.zj)/this.bh,this.Xn=this.$g/this.vj,this.co=this.bh/this.zj}function te(c,f,g,y,x,S,E,R,F,k,N,z,H,K,Ee,Te,ce,Be){this.jg=c,this.Dh=f,this.hk=g,this.Eo=y,this.rk=x,this.No=S,this.wk=E,this.To=R,this.Dk=F,this.ap=k,this.Lk=N,this.lp=z,this.Sk=H,this.rp=K,this.$k=Ee,this.il=Te,this.ji=ce,this.xl=Be}function ta(){}function si(c){this.qf=c}function qo(){this.Tc=[]}function Fl(c,f){this.Ri=c,this.Bf=f,this.Qg=this.Og=0}function va(){this.ka=new de,this.ka.sortableChildren=!0,this.P=new h,this.P.zIndex=1.6,this.X=0,this.o=Array(797),this.o[0]=this.rj(0,new b.ec,new b.ec);for(var c=1;c<797;c++)this.o[c]=this.rj(c,new b.ec,new b.ec);this.wj=this.uj=this.gi=0}function ji(c,f){this.O=c,this.O.Oa(!1),this.id=f,this.id.Oa(!1)}function Qs(c){this.ra=c,this.Ia=!1,this.Lf=1}function Zo(c,f){this.cb=c,this.yn=f}function ge(c){++ge.On,this.Ej=c,this.Tj=this.Rj=this.Pj=this.Mj=this.Kj=null,this.Mb=this.Zj=this.hd=!1}function Dl(){}function St(){}function Qo(){this.jd=b.Fc.Sj,this.ob=0,this.Jc=500,this.kg=4e3,this.Jh=7e3}function Oe(c){this.l=c,this.ug=[],this.al=0}function Xi(c){this.oi=c}function ri(c,f){this.S=c,this.Di=80<=c.Ka,this.zd=this.yd=this.Dg=this.Bg=0,this.ce=this.Di?1:c.pd,this.Vh=1,this.Zh=!1,this.Ig=this.xf=0,this.Ta=1,this.Qm=6.283185307179586*Math.random(),this.ze=new b.Wm,this.ze.Pd(A.l.K.jd,this.S.qi===b.Ud.$e?null:A.A.V().Af(this.S.qi),A.A.V().an(this.S.Ka)),f.el(c.T,this.ze)}function Jo(){this.Ua=new _(new b.ec,new b.ec),this.Ua.id.L.Ip="add",this.Ua.id.L.zIndex=100,this.Ua.O.L.zIndex=500}function ec(c,f){this.O=c,this.id=f}function wt(){this.Ib=this.rb=this.Gb=this.Db=this.Ea=0,this.fh=[]}function tc(c,f){for(var g=0;g<c.length;g++)if(parseInt(c[g][o("f26ad0")])===f)return g;return-1}function ni(){}function ac(){}function kt(){}function ic(){this.sc=[],this.Ue=[]}function he(){this.$h=[],this.bi=[],this.v=!1,this.Qc=m,this.M={}}function aa(){}function Hi(c,f,g){for(this.wc=g,this.Ia=!1,this.ka=new de,this.ka.visible=!1,this.ud=Array(c),c=0;c<this.ud.length;c++)(g=new b.wi(new Float32Array(3*f))).xi(f),this.ud[c]=g,this.ka[o("73451102b44090061f")](g.$c());this.yc=this.xc=1,this.la()}function nt(){}function zi(c,f,g,y,x,S,E){(E===1&&G.E.includes(S)||E===2&&G.kh.includes(S)||E===3&&G.Kk.includes(S))&&(g=!1),this.Ve=c,this.zo=f,this.Xe=g,this.kk=y}function Js(){var c=new qt({[o("e3f591a215f10baf9ff99e")]:{[o("0597d1ddfb8e6ec45d91fca9e56b7caa")]:[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5],[o("44f4d272305ae5f43ef9")]:[-.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5]}}),f=new W;this.of=ht.from({[o("637309")]:{[o("0a6da96f7afaa8")]:o("e5a615fd0ab398f582b04a92418a9ac39d96529a498c97c39c9a5a83c3d733f56482f3cae0987ec868dbbdf0e76770f63034a7a9cf6f69b87876cfbfd27b57bd4a7882ebeb3f1b9d4c6adb92d8404690500385d8cf4f58de181c8f9195573bb72a59b59cec0909d97d7fba6eb8243c763863e538b42b2f3f787cef65b1200c7e003593718634267d192c8658d451310145278246900c145e104bcd006c13f707a044374d5e15f950e92a7d217ff1f52be7eb5a296df8f234b8bd5d7511d3d63accf0482a44bf996cc0ff5b5314908311e1d456064accd41ed0e35e0433dbbb51f6f4624808ccaa0eb4d721e774f0e3f2b0a565ad6bfaadd8b8b61cff0ea087b1d69442a828ac84f589fb5d901c839acaddcf529a49cfcceed8de3e95b3c2268635d3b588acc83bca599bf783fe6d61a03034a7edaa4e3efe2d6fcbb5d9514cbb577282ebeb3f19ec082c9fc5831216d6050387a99c180bc90f1e9ac2f11771c43353a4cbec087b8a284cbb65a9123c773c32be67b76f693c787d9b35d36215710665cf79bf3f19680826bf4f820b074d1a08d21aba4f491c4c40cf192441c111b537220a395fb90ca84c3f6523b2fe25e1b5327a29e7ed3cb8bc2f7512d6866695e3772a46f0ce3fd9f7400e7cc3c716dcde125a09809e5e8ddb681f33dea720b7d7290b2fd5b91180df3bf238baf6b6e5ec72ba69bf8ffebca02cf60ea08ed984a215f111ffd8dec8ee2e8543d2d696c5c345985cd8cbcb91b12fdff29b77dd6a98a28ab9df38f828ccbfb6f46127ec3d6be1b8bc382be6383cafa6c46057b15d46c8abc06e42b343378198c80701a7101487d8971a1ede7e0b8dc0f01c73dd600585ddf97b6ecb09"),[o("4eb96280350e710b22")]:o("042534b26bb0393263336bed20893b047c1573d5288f36047d197bdc62d4523201452781498b1312421a4bcd007717e006a044374e5d1ff37fe2117d2434b1d161a5c7622670ecf43ef0ab2d6057f7c06080a4172d6af5c733dfd1590543ced21d9095754d09ebce02d4c850022c97f144b6d72a0825dfb94e899b7db02496b6fca1b325ed7cf999a9ed8f2afe08b48ce688f355a81fbf88aec8ec5fd525878bd0809412fb1a8b97c9d8dd3d95b1b376da6c90e8cae4df398c7b9becf2b43023b14163efbcec787e837b68ecb5d53710960026e6fd995b5db3447a8ad2814f528d5b0e9ecd8b1a1edb7f0b8fb1e40073d17706e2caf91f79cc3b5bac34f4706370303ea37dab2f18633121ad35d36246272173d5289d3f1368182c8a12b54a0670101e835d8b0f5e1e3e4bcd007726e64cc619684a6d5fb90ca75b3d7064d6f63ce1f3652d4ae9fa20f8ab2d6004a0e17197a6520c4ce2df29dffb600657d1d6109c83042a1c988b498f9e1a427197f144e086065d7b8aee4efd9b7db074f0e3f2b0a563ad6bfabae8b7bb2ce404b6a0fb89b915bd5beaceafa9fb5d9005878bd0809412eb168694ded8dc4f9aa4c033842bc5a28bcbdf398c28ccbfe5a33236f62523a789bc382be92f3ebae2913711e45373c4ec8c281bb35b7bdd8cd05b708b5949c5cd8b1a1edf790b8dc0b75720c06d438497a55539b33b5bbd6cb03b7d763224f23a9a6f693c6d60ef39c460533e4064d76daa3507731f119945830e125d5b07d21bbb4f491c585ccf153342a606b55337792c48bb19bf4e2a7221a7a174f2ea480e6bebfc0ff2e2702204a0937196d2026a19fbcf36d8ed5b0555e1dc08dad4125a098f892e989c0f1f37d7b118a4cf041725d5b959fefc6ab010e7e4c0")},[o("1561e7bd")]:{[o("26c18dcb5e5e94")]:{[o("f1071d50071fa74790040f")]:"vertmain",[o("470b26cfb91fa8")]:o("981aae99e98eaa4a9241a59fcb97871bfd17839dc38f830c95b3c2268347d3b7f9acc83b993fceaaf2a12721f46056e5a7f36f78b87461f19dc06651bd5d339499c47b5fef552d8ad3f24400d61015f2cd8b691edc7c0b8dc0e40073d17706e2caf94f1c933f52ab54a3233d773329a565942b2f7e3436fa23a03f0260562ed43dda190d2f5f7bdc65d45030014527d21ac94f491c585ccf153342f663ea046b5c4a15e753ff3f633079e3b677d4a325786feff878b8bd5c3612a08667e0b3151b0caaea799fae0a52018781549094071d6bcfc803d1db4b192edce647849375483fdfa84ee88d0ce662f0f6b790e365cb7cfa9aa9ea8a7aa020f7d3d596a215ed0aaeceaedd9200c3108ea6ca9c8018da1499de9ecdcb48f2a4c2429137c6a28ab9df398c28ccbfb5c57072aa6660f8baf4477ab86f67e7f592534eb55125dfeb8c2968ba1e2c8ad3f40701a71016f6cd8b1a1ede0d0b8dc0e40073810659ab97bb1f78bd3b5bac34f47110626674f23b9c6f694f787e9e35d36246265573d528cc685b693f319a4e954740651355c50dcb295e1c3c4bc8742442c211b5372208485fbf0cea0c603561aaa36db0b4276d2dbaf925f3ea763e46ba937d80a4172e48e88e6feeeb410957cdc1099095724d0b9adc00d2cc5e1c14dcaa12aac42a0b6c88fb59feff6ab26185bfebb7a73bdd37a3bde3afa32cb55290c6a4a4f353a80ea884e99df65e8954d0c381c1d615c1178e92c29ac64f99a4c033c26484a28bca8f65d56b91fdadb43156e12736fba7fa6b77997367f9bfd37f50f1172682ebe83f19ec6171cc81dd775d8d5349c585ca0f08ae181efed5f17330803743a48cec087baa284cbb65a90d26702533a32deb7a7e3b1f6bef51c46053315766c22ad97f592c486adf42840b1f501c08df5896191258140191192440b344ea056e4c6015e519be3f2a7221f4f627a1a3240b7fb9a969aecb3a6262b7931580a4177d1baa8e6e9dbb1d5014968308dac5561c50c5d5448d871a4271c49711bdf528173bdeee4f8c9b7db027a7b0b6f0f514ee6af8febf98eb6dd344e2a2b1d29242ab2bffdbddc8ee2e8541a3d690c59012da0d8f8389cdaf19dea4c033c26084f3d5e893659428cecee5a33236f62523a5f8bc382be9293ef3bfc27357bd4a788fe8803f19ec4c48ca92c5474bb45a55de9cd04555c90f1e9ac3801771c43353a4caec09089a7e0cea33946761477076962deb7a7e3e6d6bed20c460533151668b778a3b1f750230c711d847411414329250ba05145e194bcd002441c211b746715d6a48ae0fce183c7234b1d661a7c5327858a3be7eada33a6364b79164f3f3552c4ce2e429d9ee5a141490834182e4125a098f895c989c0f557382e646f59377396c88fb59ff8e6ab261e7e1b4a3a725ad6bfab6faadeb6da044e1a7b1d7e600f406b88af0b8b006c61e909ed7db9327da16809ecf898710decc9377c66c8ea28ab9df3bfd28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e40f3395e8ce7644be4c72fa8ed8445c965855999dee454980597acd91af41259b375b8a99bd482284680cff25e10376366563e538fc786b296f7efa22d17751244064d73ddb6a41395f6e834f92031f711b0f91478b070802083a8d516f01e55bf71b4a597d08e244a84d4d6521c3b676a5a325783cb8ab69afbe3a6060b7916480a4177d1baa8e6e9de84e121490830bc0d2471d4d8f882d989c0f2624c0b711bdf9320c39cfbf59fefc6ab010e7e3c5f0f467ad6bfafebeedeb6da00ea797e490a249e806a982e884b1018543d2d697b1c345980f8f9898d8dd3cd6b2c0268740deeacef9df398c27dbbdf0e76770f73035d4aeaa383eff5826fe86c46057b15d46c8abc06e42b3433b9da3941003d51b169ecd8b691ede0d1f91c0e81770b6600686ddfb0a6ece7d1bfd30f470636b2032a77dad642d5838369c7f8e2007315766c22bad7f592c0c0a8a58b20d1c561143c46adc5a3a094d2fda023157b104a044371d3b4af959f90b7d2e34b0a32be0f2673d6dafa80eb8bc2f7511d38663e1b3141a0caaea799ddf5c1443d7d0109094073d57c3dd03cfc34c557382e643879377396c88fb59ff8e6ab261e7e1b4a08538e436b894fab8bc33f118f7d0d5c0e457ee0cb9dfb9de9d099343c7c0e1d0d4348d49abde9ecdcb4d80a4c0339137c6f2ecec827fc97f9bdca3f06e76e12647b2faa97c7eaf2f2bac93c72111f1165382eaea3f1b9d082c9fc5831216d6050385d8cc7e5e94495bcd958e5425872042e2cb881f79cc3b5bac32f47110626674f23b9c6f694f787e9e35d61646242473d759cc6e5b7b1f319a50d9505a014756d21cc9081242190791572942aa11b74671597b5fb90cf82a6a3865f7e121b0b4276d2acbbe7eadfa7a2855e7d131faa4437d1ad9cd6f9fbb1c251491f14185e7125c09cdc903c8de17426897f144e082771a20d4af15a3d967b178e7e1b4a3a725ad6bfaaedfbca32ffc04a0c6a6d5f354d94ce8dbef8cb31fcc1490d697b7c347e95cdecbcb8f810ac0a9c02a9137c6a28cb99862d26997e1a7b9303ae12736e1a9eb2f288f6860f6b6ce604ef1165382ea996f45b54b71dd8dc20701d41015f6cd8b1a6e825448d082ac4166c70713f7b9ec0a0ad9790ea972b0253e613b32f238982c35296f7eb96280350e750c38cf3dd91b4e2e5d7bdd10d45043014756d21cc906144f1c1a965f6f5ab31da044374e5d1ff37fe2117d2434b1d261a7b6612d7ab8be7fdee82c6204a1e67197d5026868b38e6e9db30a53748781549092070456c9da18d4c15158719be646f5c0221b7d9ff83fab8d7da56287f6b6e5e360ca7cfa9aa9effe7aa251f7d1a4c0e457f40caeceaeddaa0ad8059781c1b6891bc70bcfc8edd8dc4fc6e491379136b5e18bbbdf38f928ccbfe5a24636f62572f2b0ed7f69a94e6ff2a0cd770ba17173dfacdc684ef91f5d8ad2815760855856db8dcb0f09af181c8f8695573bb72a59b59cec087bd6680cff75bf2b356b272ba426ac1e3e74293bad75b23102780073d528cc6829395f6e9a4e98041c561815d95dad0f0358081c9a7f6714f051f15f220b4b5fbb7da84c3f6523b2b676a5a3257875efef69afbe7e344be7d020c0f2643745f5d9799edf0a5201d4d6078183042b5f9989498eeb1a427197f030e084770c2cc2bf09bfdb0cef3dada1a1e7f67dad6bfaeba2eeeb6cd244e2a2b1d7e642aa59ffd9acc8ec5fcc1496d696c58901cd0b869ad5be8113dff3d730f520c4b7ceec993f993ebde9f3a32720813034a7edaa4e3efe2d78fab395371097432595fd9a5f03a94377c98fc34f40ca4065d884d658749a585cd391b81c31932713f5bbec087bcc630ee625e37279216776a266b02c347e303df165a23d0f7b1719917d9b360a65433fca13b34743655054c70dcb5a5e1e4d4bcd007317f741f718220a391bef56f80d7b2575c1fc28faf4327a29afa90eb8bc2f3f57f7d138c4ef643745f5d9799edc0a5070878420909575")},[o("c0f77072a37863f9bc")]:{[o("54c0f8532a50cac435c3ea")]:"fragmain",[o("3d5dd085b35126")]:o("981aae99e98eaa4a9241a59fcb97871bfd17839dc38f830c95b3c2268347d3b7f9acc83b993fceaaf2a12721f46056e5a7f36f78b87461f19dc06651bd5d339499c47b5fef552d8ad3f24400d61015f2cd8b691edc7c0b8dc0e40073d17706e2caf94f1c933f52ab54a3233d773329a565942b2f7e3436fa23a03f0260562ed43dda190d2f5f7bdc65d45030014527d21ac94f491c585ccf153342f663ea046b5c4a15e753ff3f633079e3b677d4a325786feff878b8bd5c3612a08667e0b3151b0caaea799fae0a52018781549094071d6bcfc803d1db4b192edce647849375483fdfa84ee88d0ce662f0f6b790e365cb7cfa9aa9ea8a7aa020f7d3d596a215ed0aaeceaedd9200c3108ea6ca9c8018da1499de9ecdcb48f2a4c2429137c6a28ab9df398c28ccbfb5c57072aa6660f8baf4477ab86f67e7f592534eb55125dfeb8c2968ba1e2c8ad3f40701a71016f6cd8b1a1ede0d0b8dc0e40073810659ab97bb1f78bd3b5bac34f47110626674f23b9c6f694f787e9e35d36246265573d528cc685b693f319a4e954740651355c50dcb295e1c3c4bc8742442c211b5372208485fbf0cea0c603561aaa36db0b4276d2dbaf925f3ea763e46ba937d80a4172e48e88e6feeeb410957cdc1099095724d0b9adc00d2cc5e1c14dcaa12aac42a0b6c88fb59feff6ab26185bfebb7a73bdd37a3bde3afa32cb55290c6a4a4f353a80ea884e99df65e8954d0c381c1d615c1178e92c29ac64f99a4c033c26484a28bca8f65d56b91fdadb43156e12736fba7fa6b77997367f9bfd37f50f1172682ebe83f19ec6171cc81dd775d8d5349c585ca0f08ae181efed5f17330803743a48cec087baa284cbb65a90d26702533a32deb7a7e3b1f6bef51c46053315766c22ad97f592c486adf42840b1f501c08df5896191258140191192440b344ea056e4c6015e519be3f2a7221f4f627a1a3240b7fb9a969aecb3a6262b7931580a4177d1baa8e6e9dbb1d5014968308dac5561c50c5d5448d871a4271c49711bdf528173bdeee4f8c9b7db027a7b0b6f0f514ee6af8febf98eb6dd344e2a2b1d29242ab2bffdbddc8ee2e8541a3d690c59012da0d8f8389cdaf19dea4c033c26084f3d5e893659428cecee5a33236f62523a5f8bc382be9293ef3bfc27357bd4a788fe8803f19ec4c48ca92c5474bb45a55de9cd04555c90f1e9ac3801771c43353a4caec09089a7e0cea33946761477076962deb7a7e3e6d6bed20c460533151668b778a3b1f750230c711d847411414329250ba05145e194bcd002441c211b746715d6a48ae0fce183c7234b1d661a7c5327858a3be7eada33a6364b79164f3f3552c4ce2e429d9ee5a141490834182e4125a098f895c989c0f557382e646f59377396c88fb59ff8e6ab261e7e1b4a3a725ad6bfab6faadeb6da044e1a7b1d7e600f406b88af0b8b006c61e909ed7db9327da16809ecf898710decc9377c66c8ea28ab9df3bfd28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e40f3395e8ce7644be4c72fa8ed8445c965855999dee454980597acd91af41259b375b8a99bd482284680cff25e10376366563e538fc786b296f7efa22d17751244064d73ddb6a41395f6e834f92031f711b0f91478b070802083a8d516f01e55bf71b4a597d08e244a84d4d6521c3b676a5a325783cb8ab69afbe3a6060b7916480a4177d1baa8e6e9de84e121490830bc0d2471d4d8f882d989c0f2624c0b711bdf9320c39cfbf59fefc6ab010e7e3c5f0f467ad6bfafebeedeb6da00ea797e490a249e806a982e884b1018543d2d697b1c345980f8f9898d8dd3cd6b2c0268740deeacef9df398c27dbbdf0e76770f73035d4aeaa383eff5826fe86c46057b15d46c8abc06e42b3433b9da3941003d51b169ecd8b691ede0d1f91c0e81770b6600686ddfb0a6ece7d1bfd30f470636b2032a77dad642d5838369c7f8e2007315766c22bad7f592c0c0a8a58b20d1c561143c46adc5a3a094d2fda023157b104a044371d3b4af959f90b7d2e34b0a32be0f2673d6dafa80eb8bc2f7511d38663e1b3141a0caaea799ddf5c1443d7d0109094073d57c3dd03cfc34c557382e643879377396c88fb59ff8e6ab261e7e1b4a08538e436b894fab8bc33f118f7d0d5c0e457ee0cb9dfb9de9d099343c7c0e1d0d4348d49abde9ecdcb4d80a4c0339137c6f2ecec827fc97f9bdca3f06e76e12647b2faa97c7eaf2f2bac93c72111f1165382eaea3f1b9d082c9fc5831216d6050385d8cc7e5e94495bcd958e5425872042e2cb881f79cc3b5bac32f47110626674f23b9c6f694f787e9e35d61646242473d759cc6e5b7b1f319a50d9505a014756d21cc9081242190791572942aa11b74671597b5fb90cf82a6a3865f7e121b0b4276d2acbbe7eadfa7a2855e7d131faa4437d1ad9cd6f9fbb1c251491f14185e7125c09cdc903c8de17426897f144e082771a20d4af15a3d967b178e7e1b4a3a725ad6bfaaedfbca32ffc04a0c6a6d5f354d94ce8dbef8cb31fcc1490d697b7c347e95cdecbcb8f810ac0a9c02a9137c6a28cb99862d26997e1a7b9303ae12736e1a9eb2f288f6860f6b6ce604ef1165382ea996f45b54b71dd8dc20701d41015f6cd8b1a6e825448d082ac4166c70713f7b9ec0a0ad9790ea972b0253e613b32f238982c35296f7eb96280350e750c38cf3dd91b4e2e5d7bdd10d45043014756d21cc906144f1c1a965f6f5ab31da044374e5d1ff37fe2117d2434b1d261a7b6612d7ab8be7fdee82c6204a1e67197d5026868b38e6e9db30a53748781549092070456c9da18d4c15158719be646f5c0221b7d9ff83fab8d7da56287f6b6e5e360ca7cfa9aa9effe7aa251f7d1a4c0e457f40caeceaeddaa0ad8059781c1b6891bc70bcfc8edd8dc4fc6e491379136b5e18bbbdf38f928ccbfe5a24636f62572f2b0ed7f69a94e6ff2a0cd770ba17173dfacdc684ef91f5d8ad2815760855856db8dcb0f09af181c8f8695573bb72a59b59cec087bd6680cff75bf2b356b272ba426ac1e3e74293bad75b23102780073d528cc6829395f6e9a4e98041c561815d95dad0f0358081c9a7f6714f051f15f220b4b5fbb7da84c3f6523b2b676a5a3257875efef69afbe7e344be7d020c0f2643745f5d9799edf0a5201d4d6078183042b5f9989498eeb1a427197f030e084770c2cc2bf09bfdb0cef3dada1a1e7f67dad6bfaeba2eeeb6cd244e2a2b1d7e642aa59ffd9acc8ec5fcc1496d696c58901cd0b869ad5be8113dff3d730f520c4b7ceec993f993ebde9f3a32720813034a7edaa4e3efe2d78fab395371097432595fd9a5f03a94377c98fc34f40ca4065d884d658749a585cd391b81c31932713f5bbec087bcc630ee625e37279216776a266b02c347e303df165a23d0f7b1719917d9b360a65433fca13b34743655054c70dcb5a5e1e4d4bcd007317f741f718220a391bef56f80d7b2575c1fc28faf4327a29afa90eb8bc2f3f57f7d138c4ef643745f5d9799edc0a5070878420909575")}},[o("bf82a4412c813755a28b")]:{[o("026690707ee3bdeb6f")]:f.source,[o("5cd8cd4e0d41ced616")]:f.source.style,[o("ee0adee8946cc66885")]:{[o("66826b9606145e32189a426d13fa")]:{value:[1,.5,.25,.5],type:"vec4<f32>"},[o("4a2e583836ab6593373077043a82")]:{value:[0,0],type:"vec2<f32>"},[o("208436165c0113854db60c1d5f181a")]:{value:[0,0],type:"vec2<f32>"}}}}),this.Ld=new Ka({[o("a016879cc9909205d1")]:c,[o("46a460b82e3e7e")]:this.of})}function Wt(){this.L=new Ae,this.Hk=this.Fk=0}function Je(c){this.K=c,this.S=new b.Sf.Qf,this.nb=!1,this.ed=!0,this.lf=!1,this.Wh=this.sb=0,this.Ta=1,this.Nb=this.Ag=0,this.qa={},this.Xa=0,this.Ob=new Float32Array(400),this.Wa=new Float32Array(400),this.ga=new Float32Array(400),this.b=this.ia=this.Ca=this.Yk=null,this.li()}function Ut(c,f,g,y,x){this.Ea=c,this.Db=f,this.Gb=g,this.rb=y,this.Ib=x}function Lt(c){this.G=new b.Ug,this.G.ka[o("e3f581b224f000b68f")](this.G.P),this.Hg=this.Uc=null,this.Vc=c,this.X=0,this.Vg=this.Sg=this.Rg=this.Pg=this.Mg=this.Kg=this.pd=1,this.vm(o("6d7bdd13970415421300"))}function He(c){this.ra=c}b.d[o("39cdde18f8c25a1d24dcb736bcff23")](o("3cea1f62253cf5e125e5"))[o("c624fc20a6be")][o("39ced21fcdc25e09")]=o("da89f082bd04"),M={C:function(c,f,g){c[o("03c77199f7")](),c[o("7aed5de91b462e")](f,g)},g:function(c,f,g){c[o("ac8e9a10c0")](),c[o("0a7dad796bd0a5d5")](f,g)}},O.Qa=function(c){var f=c.parent;f?.removeChild(c)},o("f75a8c040f45100bb751721a"),Jt=o("c8f17e6fbc6e2bac91842065f11750c0b9dd7f5cbd5430d88fc34f52905008de87"),Rl=o("3ea774a53220216607f23a9f6f694a2f2bac7f94200071167890779b370a680870864f"),g5=o("039137b0eed5e89d6ecf28ccc9acf86c76a87a61f8e5ea7f76a1787cade093260da44b71"),Ml=o("9361a7c07e2578edfe3fb8bc593754f7d02088f751395dfbd971deeb420d54d081548792191857cd"),o("9a8e6eebf7420156c7c04187e0540757ccde18c9c7120334dfae11b784774a7d94bb12aa"),m5=o("7b094f28965d6015e647a044415a6e57ee4ae8107b6d61e3e730f0f479656afff621f8fc2d6013a68d24cbf1"),qs=void 0,Z=b.Xb[o("a67e5901e4e420fce078")],qs=Z||=o("73411b"),Cl=(()=>{switch(qs){case o("0a6ea7"):var c=o("9c98b530f530");break;case o("d603fd"):c=o("16c3bdf65e6e");break;case o("0275b6"):c=o("fc2b4c904683");break;case o("b2a607"):c=o("899f78e348ad");break;default:c=o("3b895371eaa3")}return c})(),window.moment.locale(Cl),A=null,a=b.Xb[o("8f89a03a5d9b5843c49bd84d5e9f")],O.N=function(c){return a[c]},O.le=function(c){return c[qs]||(c[o("7e6a2e")]?c[o("669246")]:c[o("1891")])},O.Dp=function(c){return encodeURIComponent(c)},O.fa=function(c,f){return setTimeout(c,f)},O.Yl=function(c){clearTimeout(c)},O.Ai=function(c){var f=(Math.floor(c)%60).toString(),g=(Math.floor(c/60)%60).toString(),y=(Math.floor(c/3600)%24).toString(),x=(c=Math.floor(c/86400).toString(),O.N(o("0bc97997e3eee56b7ea13b62f6b1ea"))),S=O.N(o("850373516554ff55e01b21287ef7e137")),E=O.N(o("5fe515bb8fba91bf0afd47b782f2")),R=O.N(o("96522c40f68528c4f34a4e42c7d0"));return 0<c?c+o("43d17706")+x+o("398f895c")+y+o("fa2e8e3d")+S+o("0c787cef")+g+o("7543c518")+E+o("05d3b588")+f+o("4efa22d1")+R:0<y?y+o("382c48bb")+S+o("0157b104")+g+o("fdcb4d80")+E+o("245054c7")+f+o("3d0b8dc0")+R:0<g?g+o("499ff94c")+E+o("c0b43023")+f+o("8cf8fc6f")+R:f+o("3d0b8dc0")+R},O.pm=function(c){return c.includes(o("e61fda1c8c"))?c.replaceAll(o("cc757cfab6"),'target="_black" href'):c},O.Li=function(c,f=null,g=null){var y=b.d[o("718181c1949212ed158f96c9939a")](o("31d1d016dcd643"));o("090fe558e818662e74e6")!==typeof f&&f!==null&&(o("fefaaef56775ad7b63f3")!==typeof f[o("f26ad0")]&&(y[o("5e8644")]=f[o("c9532f")]),o("b2b61aa1d3211127dfaf")!==typeof f[o("8b5dfe076123")]&&f[o("2577d4a1c779")]&&(y[o("cb1dbec721e3")]=o("5ff112ab8df7")),o("e92f05780838864e9406")!==typeof f[o("73401000925a")]&&f[o("d76cbc2c3e7e")]&&(y[o("a97e4eba486c")]=o("53603020b27a")),o("61a78df080b00ef60cbe")!==typeof f[o("5525a567aa39347e3429b67e")])&&(y[o("b2a006aac534173bd3ac15a3")]=f[o("59a9a9e3aebd30e208b58afa")]),y[o("9b38e4fe7a")]=o("af94d45a47c10760dd89cf4b488f4f47cf84"),y[o("4b8f3f5d")]=c,g&&(y[o("9806b487f38cba")]=y[o("3549d99adc4b5f954e5ade84a4512b952b51a2")]=function(){try{g()}catch{}y[o("4876e4f723fcea")]=y[o("de00ce038792c08c9503c90d8f98c49c8018d5")]=null}),(b.d[o("f10a164511")]||b.d[o("f264d171b3ebdde49f65c87ebcf694f0655da57863")](o("21fac635c1"))[0])[o("e5b717e80cb48fdf85b703c4")](y)},O.da=function(c,f){return f.prototype=Object.create(c.prototype),(f.prototype.constructor=f).parent=c,f},O.Am=function(c){return(c%=6.283185307179586)<0?c+6.283185307179586:c},O.Fp=function(c,f,g){return O.Ad(g,c,f)},O.Ad=function(c,f,g){return g<c?g:c<f?f:Number.isFinite(c)?c:.5*(f+g)},O.Q=function(c,f,g,y){return c<f?Math.min(f,c+g*y):Math.max(f,c-g*y)},O.kj=function(c,f,g){return f+(c-f)*Math.pow(.5,g/33.333)},O.Kf=function(c,f,g){return c-(c-f)*g},O.Wg=function(c,f){return Math.sqrt(c*c+f*f)},O.Cj=function(c,f,g,y){var x=f+y;if(c==null)throw new TypeError;for(y=c.length>>>0,g=(g>>=0)<0?Math.max(y+g,0):Math.min(g,y),f=(f>>=0)<0?Math.max(y+f,0):Math.min(f,y),x=x===void 0?y:x>>0,y=Math.min((x<0?Math.max(y+x,0):Math.min(x,y))-f,y-g),x=1,f<g&&g<f+y&&(x=-1,f+=y-1,g+=y-1);0<y;)f in c?c[g]=c[f]:delete c[g],f+=x,g+=x,y--},O.Jp=function(c,f,g,y){var x=6.283185307179586*Math.random();return[c+(g=Math.sqrt(g*g+Math.random()*(y-g)*(y+g)))*Math.cos(x),f+g*Math.sin(x)]},O.Wn=function(){return 2147483647*Math.random()},O.bo=function(){var c=[32,33,34,35];return c[parseInt(Math.random()*c.length)]},O.Lp=(e=[o("c344"),o("06a6"),o("b918"),o("bd9d"),o("79de"),o("f8fc"),o("fa3d"),o("b115"),o("1bf4"),o("f39d"),o("6e9e"),o("54c7"),o("a5f5"),o("97ac"),o("c5d3"),o("4b9a"),o("996d"),o("f3cc"),o("26de"),o("c950"),o("72e8"),o("2895"),o("b947"),o("0914"),o("44fa"),o("a7a8"),o("898b"),o("11f0"),o("9012"),o("c5c2"),o("49cf"),o("ac8b"),o("a323"),o("bab3"),o("97b1"),o("9970")].map(function(c){return c.charCodeAt(0)}),function(c){o("3cf8106b2577ebfd21f1")==typeof c&&(c=16);for(var f="",g=0;g<c;g++)f+=String.fromCharCode(e[Math.floor(Math.random()*e.length)]);return f}),O.Mp=function(c,f,g,y){f=g*(1-.5*f);var x=Math.min(f,1-f);return O.uh(c,x?(g-f)/x:0,f,y)},O.uh=function(c,f,g,y){var x=(f*=1-Math.abs(2*g-1))*(1-Math.abs(c/60%2-1));return g-=f/2,0<=c&&c<60?[g+f,g+x,g,y]:60<=c&&c<120?[g+x,g+f,g,y]:120<=c&&c<180?[g,g+f,g+x,y]:180<=c&&c<240?[g,g+x,g+f,y]:240<=c&&c<300?[g+x,g,g+f,y]:[g+f,g,g+x,y]},O.nc=function(c,f,g){$[o("9fb7c466")](c)[o("ac9b8f16dc")](f)[o("f90e144218")](g)},O.Op=function(c,f,g,y){var x={};x[o("c1463a8420")]=o("978fdc5e"),x[o("26c29ad5")]=c,(c={})[o("fbde989d0fdfef8166e07c86e2")]=o("d92b297e3c37bd6587340666"),c[o("1ec08ec1505c834743c49b")]=function(S){S[o("225f815b41c380fa45569c485ade92ad57")]&&y(S[o("cdd220e135a7b7")]/S[o("b5d2581c58c6")]*100)},x[o("224b8c4760de8dd54e48")]=c,$[o("36a692a842")](x)[o("2255855c4a")](f)[o("273c46f4ce")](g)},O.Lb=function(){return Date.now()},O.pc=function(c,f){for(var g in c)c.hasOwnProperty(g)&&f(g,c[g])},O.Pp=function(c){for(var f=c.length-1;0<f;f--){var g=Math.floor(Math.random()*(f+1)),y=c[f];c[f]=c[g],c[g]=y}return c},b.Mh=Ii(o("6b5d1f2c8e59b31715421014")),b.ng=Ii(o("a83d8b8fcdab871ac7")),b.Mo=(t=o("4076e7e70dfbf22f"),Ni.prototype.F=function(){var c=this.qd[t](this.pa);return this.pa+=1,c},i=o("92c431d1df492c18ac"),Ni.prototype.ua=function(){var c=this.qd[i](this.pa);return this.pa+=2,c},s=o("a97d4ea86470dbd383"),Ni.prototype.rg=function(){var c=this.qd[s](this.pa);return this.pa+=4,c},r=o("19edfe38dbe2703155a191"),Ni.prototype.tc=function(){var c=this.qd[r](this.pa);return this.pa+=4,c},Ni),b.Yh=(n=o("76745d7d33e548b5"),Ko.prototype.ee=function(c){this.qd[n](this.pa,c),this.pa+=1},d=o("173b7cfed222e9bf29"),Ko.prototype.fe=function(c){this.qd[d](this.pa,c),this.pa+=2},Ko),b.Cp=function(){},b.Yb=(Fa.nh=function(){return new Fa("",null,0,0,0,0,0,0,0,0)},Fa.mo=function(c,f,g){return new Fa(c,f,g[o("2f18")],g[o("b47c")],g[o("3b9b")],g[o("6d36")],g[o("29ead3")],g[o("f4354f")],g[o("fa7bcb")],g[o("d8d972")])},Fa.prototype.eg=function(){return this.nj||(this.lj!=null&&(this.Texture=new W({source:this.lj,frame:new we(this.kb,this.lb,this.$g,this.bh)})),this.nj=!0),this.Texture},Fa.prototype.Re=function(){this.Texture!=null&&this.Texture.Tn()},Fa),b.zh=(te.prototype.Re=function(){for(var c=0;c<this.jg.length;c++)this.jg[c].Kp(),this.jg[c].Tn();for(this.jg=[],c=0;c<this.Dh.length;c++)this.Dh[c].Re();this.Dh=[]},te.nh=function(){var c=new te.me(b.Ha.Ma,b.Ha.Ma),f=new te.ne(o("43d17705a19eaf5c2d9a"),[b.Ha.Ma],[b.Ha.Ma]);return new te([],[],{},c,{},new te.pf(b.Ha.Ma),{},f,{},new te.rf("",f,c),{},new te.Da([b.Ha.Ma]),{},new te.Da([b.Ha.Ma]),{},new te.Da([b.Ha.Ma]),{},new te.Da([b.Ha.Ma]))},te.qm=function(c,f,g,y){var x=new te.me(b.Ha.Ma,b.Ha.Ma);return c=new te.ne(o("d96f693f3b28b9768734"),[c],[f]),new te([],[],{},x,{},new te.pf(b.Ha.Ma),{},c,{},new te.rf("",c,x),{},new te.Da([g]),{},new te.Da([y]),{},new te.Da([b.Ha.Ma]),{},new te.Da([b.Ha.Ma]))},te.tm=function(c,f,g,y){var x={};O.pc(c[o("b46699ebd7fbbe62df79")],function(be,fe){x[be]=o("c672ba6a")+fe});for(var S={},R=0;R<c[o("bb1fd6c7513133c0a20d81df240c")].length;R++){var E=c[o("1092390a7a24249579901e027f19")][R];S[E[o("3ea664")]]=new te.ne(x[E[o("37184bc3d609")]],E[o("a17042a740")].map(function(fe){return f[fe]}),E[o("30661eec43")].map(function(fe){return f[fe]}))}R=c[o("0a68a77460cabeca7c4ca34b")];var R=new te.ne(x[R[o("7d1e8d596c17")]],R[o("b2a115b6d3")].map(function(be){return f[be]}),R[o("19edf723ea")].map(function(be){return f[be]})),F={},k=(O.pc(c[o("ee1ac9e48147dd6682")],function(be,fe){F[parseInt(be)]=new te.Da(fe[o("d605f91abf")].map(function(ke){return f[ke[o("c78aac5d229323")]]}))}),E=new te.Da(c[o("31c7ca01c6f3590357c5cc02")][o("8d1c6e3374")].map(function(be){return f[be[o("a7aacc7d42b343")]]})),{}),N=(O.pc(c[o("867a276cfef308f4ed6b")],function(be,fe){k[parseInt(be)]=new te.Da(fe[o("26d589ca4f")].map(function(ke){return f[ke[o("224181524fd886")]]}))}),new te.Da(c[o("08b4252e78351bb17b8f3d147a")][o("fbce9c9d1a")].map(function(be){return f[be[o("208307144d1a08")]]}))),z={},H=(O.pc(c[o("257ec6aced7348a8")],function(be,fe){z[parseInt(be)]=new te.Da(fe[o("f3c6949512")].map(function(ke){return f[ke[o("56957d8e330472")]]}))}),new te.Da(c[o("c2bbe5a19339e337a5ace2")][o("4073e3e021")].map(function(be){return f[be[o("f8bb5f2c952250")]]}))),K={},Ee=(O.pc(c[o("51a5bfe5a6b532fb1da3b8f8")],function(be,fe){K[parseInt(be)]=new te.Da(fe[o("29f8ca2fc8")].map(function(ke){return f[ke[o("6b6e0839864f9f")]]}))}),new te.Da(c[o("e610c4189988c98ebb11dbef9d74da")][o("0271a56663")].map(function(be){return f[be[o("77da1c8d92c393")]]}))),Te={},ce=(O.pc(c[o("63640a24937186342f750e2a")],function(be,fe){be=parseInt(be),Te[be]=new te.me(f[fe[o("0f2270f1f6")]],f[fe[o("20960e1c53")]])}),c[o("31d2dc16c1cf58066cc4d002d2d951")]),ce=new te.me(f[ce[o("043727a46d")]],f[ce[o("6214481a11")]]),Be={},At=(O.pc(c[o("bb0ddfc7531935cb871da6c2")],function(be,fe){be=parseInt(be),Be[be]=new te.pf(f[fe[o("ac9f8f0cd5")]])}),c[o("1bad7f67f3b9d56b76ba4e78c8afc7")]),At=new te.pf(f[At[o("6211450603")]]),ze={};return O.pc(c[o("371c5ccbd628d4cd4b")],function(be,fe){be=parseInt(be),ze[be]=new te.rf(fe[o("7b58141a9355")],new te.ne(x[fe[o("c141289d2b")][o("2a4b9e5443da")]],null,fe[o("1c1e35864e")][o("16c0b4c66d")].map(function(ke){return f[ke]})),new te.me(null,f[fe[o("f273db7782eed7e7")][o("075f6515fc")]]))}),c=new te.rf({},R,ce),new te(g,y,Te,ce,Be,At,S,R,ze,c,F,E,k,N,z,H,K,Ee)},te.prototype.we=function(c){return this.wk.hasOwnProperty(c)?this.wk[c]:this.To},te.prototype.Af=function(c){return this.Dk.hasOwnProperty(c)?this.Dk[c]:this.ap},te.prototype.cj=function(c){return this.Lk.hasOwnProperty(c)?this.Lk[c]:this.lp},te.prototype.ej=function(c){return this.Sk.hasOwnProperty(c)?this.Sk[c]:this.rp},te.prototype.ij=function(c){return this.ji.hasOwnProperty(c)?this.ji[c]:this.xl},te.prototype.Tg=function(c){return this.$k.hasOwnProperty(c)?this.$k[c]:this.il},te.prototype.an=function(c){return this.hk.hasOwnProperty(c)?this.hk[c]:this.Eo},te.prototype.Xg=function(c){return this.rk.hasOwnProperty(c)?this.rk[c]:this.No},te.rf=function(c,f,g){this.ln=c,this.Yg=f,this.sn=g},te.ne=function(c,f,g){this.dh=c,this.La=f,this.Od=g},te.Da=function(c){this.La=c},te.me=function(c,f){this.La=c,this.Od=f},te.pf=function(c){this.La=c},te),b.Ha=(ta.prototype.oa=async function(){var c=(await pe.load(o("6573d55e80370a7b082dca12b7151645074b964a9006125804408f5e66"))).source,y=(this.Cn=new b.Yb(o("77c5188d95c989b11ed2e89e6ac07c"),c,158,86,67,124,148,63.5,128,128),this.Gn=new b.Yb(o("8027a7bfebb6af23f106abb9e5b1a72be9"),c,158,4,87,74,203,63.5,128,128),new b.Yb(o("9322f9e36f1778e8f220f4fa66"),c,4,4,146,146,63.5,63.5,128,128),(await pe.load(o("fdcb4df6e89f62d36085a28acf9e6eda2092e0affa2c63aa72"))).source),c=new b.Yb(o("ce3bf5078d86ed80a5"),y,0,0,42,80,75,64,128,128),f=new b.Yb(o("b6231d2fe5a613b8ca27"),y,46,0,20,48,109,63,128,128),g=new b.Yb(o("5b68382880638a3b0d4b023a886f"),y,70,0,32,32,0,0,0,0),y=new b.Yb(o("1ecb85d77d408f5c48e88ad8595e"),y,46,52,64,64,0,0,0,0);c=b.zh.qm(y,g,c,f),this.Ja=new b.Jj({},c),this.gc=this.lh=-1e4,(c=b.Xb.document.createElement(o("b307d4c841094a"))).width=80,c.height=80,this.ph={fd:c,Wj:c.getContext(o("d5f433"),{willReadFrequently:!0}),Te:new W({source:Ge.from(c)})},this.pb=null,this.Eh=[]},ta.Ma=b.Yb.nh(),ta.prototype.B=function(){},ta.prototype.Ih=function(c,f,g){var y=this,x=this.Ja.lk();if(0<x&&O.Lb()-this.lh<12e5)c?.();else{if(this.pb!=null&&!this.pb.Mb){if(O.Lb()-this.lh<3e5)return void(c!=null&&c());this.pb.Oo(),this.pb=null}var S=new b.Ro(x);S.Uo(function(E,R){S===y.pb&&g!=null&&g(E,R)}),S.Xo(function(E){S===y.pb&&f!=null&&f(E)}),S.bp(function(){S===y.pb&&f!=null&&f(Error())}),S.hp(function(){S===y.pb&&c!=null&&c()}),S.mp(function(E){if(S===y.pb)y.gc=O.Lb(),y.pb=null,y.Ja.V().Re(),y.Ja=E,c?.(),y.yp();else try{E.V().Re()}catch{}}),S.jl(),this.lh=O.Lb(),this.pb=S}},ta.prototype.je=function(){return 0<this.Ja.lk()},ta.prototype.zg=function(c){this.Eh.push(c)},ta.prototype.yp=function(){for(var c=0;c<this.Eh.length;c++)this.Eh[c]()},ta.prototype.V=function(){return this.Ja.V()},ta),b.Tl=(si.prototype.Tb=function(c){return this.qf[c]},si.km=(qo.prototype.ue=function(c,f){for(var g=0;g<this.Tc.length;g++)if(this.Tc[g].Ri===c)throw Error();return this.Tc.push(new si.Bm(c,f)),this},qo.prototype.Gm=function(){for(var c=0,f=0;f<this.Tc.length;f++)c+=this.Tc[f].Bf;for(var f={},g=0,y=0;y<this.Tc.length;y++){var x=this.Tc[y];x.Bf/=c,x.Og=g,x.Qg=g+x.Bf,g=x.Qg,f[x.Ri]=x}return new si(f)},qo),si.Bm=(Fl.prototype.Ff=function(c){return this.Og+(this.Qg-this.Og)*c},Fl),si),b.Ug=(va.Hn=797,va.prototype.rj=function(c,f,g){var y=new l(f,g);return f.L.zIndex=.001*(2*(797-c)+4),g.L.zIndex=.001*(2*(797-c)-2+3),y},va.prototype.Pd=function(c,f,g,y,x,S,E,R){var F=g.La;if(c=(c===b.Fc.Rd?f.Yg:g).Od,0<F.length&&0<c.length)for(f=0;f<this.o.length;f++)this.o[f].O.mc(F[f%F.length]),this.o[f].id.mc(c[f%c.length]),this.o[f].O.Se(R),this.o[f].id.Se(R);this.P.Pd(y,x,S,E)},va.prototype.Yj=function(c){A.l.U.S.Ka=c;var f=A.A.V().we(c);if(c=f.La,f=f.Od,c.length&&f.length)for(let g=0;g<this.o.length;++g)this.o[g].O.mc(c[g%c.length]),this.o[g].id.mc(f[g%f.length])},va.prototype.Ym=function(c){A.l.U.S.bd=c,c=A.A.V().Tg(c),this.P.jf(.004,this.P.Kc,c.La)},h=(()=>{class c extends de{constructor(){super(),this.sortableChildren=!0,this.kd=[],this.md=[],this.nd=[],this.Kc=[],this.Ze=new de,this.bf=[];for(var g=0;g<4;g++){var y=new b.ec;y.mc(A.A.Cn),this.Ze.addChild(y.L),this.bf.push(y)}this.Ze.zIndex=.0011,this.addChild(this.Ze),this.xk(),this.Pc=new b.ec,this.Pc.mc(A.A.Gn),this.Pc.L.zIndex=.001,this.addChild(this.Pc.L),this.Ek()}}return c.prototype.Pd=function(f,g,y,x){this.jf(.002,this.kd,f.La),this.jf(.003,this.md,g.La),this.jf(.004,this.Kc,x.La),this.jf(.005,this.nd,y.La)},c.prototype.jf=function(f,g,y){for(;y.length>g.length;){var x=new b.ec;g.push(x),this.addChild(x.L)}for(;y.length<g.length;)g.pop().sd();for(x=0;x<y.length;x++){f+=1e-4;var S=g[x];S.mc(y[x]),S.L.zIndex=f}},c.prototype.ha=function(f,g,y,x){for(this.visible=!0,this.position.set(f,g),this.rotation=x,f=0;f<this.kd.length;f++)this.kd[f].Pb(y);for(f=0;f<this.md.length;f++)this.md[f].Pb(y);for(f=0;f<this.nd.length;f++)this.nd[f].Pb(y);for(f=0;f<this.Kc.length;f++)this.Kc[f].Pb(y)},c.prototype.va=function(){this.visible=!1},c.prototype.kl=function(f,g){this.Ze.visible=!0,g/=1e3;for(var y=1/this.bf.length,x=0;x<this.bf.length;x++){var S=1-(g+y*x)%1;this.bf[x].L.alpha=1-S,this.bf[x].Pb(f*(.5+4.5*S))}},c.prototype.xk=function(){this.Ze.visible=!1},c.prototype.tl=function(f,g,y){this.Pc.L.visible=!0,this.Pc.L.alpha=O.Q(this.Pc.L.alpha,f.lf?.9:.2,y,.0025),this.Pc.Pb(g)},c.prototype.Ek=function(){this.Pc.L.visible=!1},c})(),va.prototype.Sa=function(c){return this.uj+this.wj*Math.sin(.3141592653589793*c-this.gi)},va.prototype.Fl=function(c,f,g,y){var x=2*c.sb,S=c.ga,E=c.Xa,R=4*E-3,F=(this.gi=f/400*3.141592653589793,this.uj=1.5*x,this.wj=.15*x*c.Ag,S[0]),k=S[1];y(F,k)?(H=S[2],K=S[3],Ee=S[4],Te=S[5],N=Math.atan2(Te+2*k-3*K,Ee+2*F-3*H),this.P.ha(F,k,x,N),this.o[0].ha(F,k,x,this.Sa(0),N),this.o[1].ha(.64453125*F+.45703125*H+-.1015625*Ee,.64453125*k+.45703125*K+-.1015625*Te,x,this.Sa(1),l.Ya(this.o[0],this.o[2])),this.o[2].ha(.375*F+.75*H+-.125*Ee,.375*k+.75*K+-.125*Te,x,this.Sa(2),l.Ya(this.o[1],this.o[3])),this.o[3].ha(.15234375*F+.94921875*H+-.1015625*Ee,.15234375*k+.94921875*K+-.1015625*Te,x,this.Sa(3),l.Ya(this.o[2],this.o[4]))):(this.P.va(),this.o[0].va(),this.o[1].va(),this.o[2].va(),this.o[3].va());for(var N,z,H,K,Ee,Te,ce=4,Be=2,At=2*E-4;Be<At;Be+=2)y(F=S[Be],k=S[Be+1])?(N=S[Be-2],z=S[Be-1],H=S[Be+2],K=S[Be+3],Ee=S[Be+4],Te=S[Be+5],this.o[ce].ha(F,k,x,this.Sa(ce),l.Ya(this.o[ce-1],this.o[ce+1])),ce++,this.o[ce].ha(-.06640625*N+.84375*F+.2578125*H+-.03515625*Ee,-.06640625*z+.84375*k+.2578125*K+-.03515625*Te,x,this.Sa(ce),l.Ya(this.o[ce-1],this.o[ce+1])),ce++,this.o[ce].ha(-.0625*N+.5625*F+.5625*H+-.0625*Ee,-.0625*z+.5625*k+.5625*K+-.0625*Te,x,this.Sa(ce),l.Ya(this.o[ce-1],this.o[ce+1])),ce++,this.o[ce].ha(-.03515625*N+.2578125*F+.84375*H+-.06640625*Ee,-.03515625*z+.2578125*k+.84375*K+-.06640625*Te,x,this.Sa(ce),l.Ya(this.o[ce-1],this.o[ce+1]))):(this.o[ce].va(),ce++,this.o[ce].va(),ce++,this.o[ce].va(),ce++,this.o[ce].va()),ce++;for(y(F=S[2*E-4],k=S[2*E-3])?(N=S[2*E-6],z=S[2*E-5],H=S[2*E-2],K=S[2*E-1],this.o[R-5].ha(F,k,x,this.Sa(R-5),l.Ya(this.o[R-6],this.o[R-4])),this.o[R-4].ha(-.1015625*N+.94921875*F+.15234375*H,-.1015625*z+.94921875*k+.15234375*K,x,this.Sa(R-4),l.Ya(this.o[R-5],this.o[R-3])),this.o[R-3].ha(-.125*N+.75*F+.375*H,-.125*z+.75*k+.375*K,x,this.Sa(R-3),l.Ya(this.o[R-4],this.o[R-2])),this.o[R-2].ha(-.1015625*N+.45703125*F+.64453125*H,-.1015625*z+.45703125*k+.64453125*K,x,this.Sa(R-2),l.Ya(this.o[R-3],this.o[R-1])),this.o[R-1].ha(H,K,x,this.Sa(R-1),l.Ya(this.o[R-2],this.o[R-1]))):(this.o[R-5].va(),this.o[R-4].va(),this.o[R-3].va(),this.o[R-2].va(),this.o[R-1].va()),this.X===0&&0<R&&this.ka.addChild(this.P),0<this.X&&R==0&&O.Qa(this.P);this.X<R;)this.ka.addChild(this.o[this.X].O.L),this.ka.addChild(this.o[this.X].id.L),this.X+=1;for(;this.X>R;)--this.X,this.o[this.X].id.sd(),this.o[this.X].O.sd();y=c.qa[b.ve.um],this.o[0].wf()&&y!=null&&y.Ia?this.P.kl(x,f):this.P.xk(),f=c.qa[b.ve.Mm],this.o[0].wf()&&f!=null&&f.Ia?this.P.tl(c,x,g):this.P.Ek()},ji.prototype.ha=function(c,f,g,y,x){this.O.Oa(!0),this.O.Ef(c,f),this.O.Pb(g),this.O.jj(x),this.id.Oa(!0),this.id.Ef(c,f),this.id.Pb(y),this.id.jj(x)},ji.prototype.va=function(){this.O.Oa(!1),this.id.Oa(!1)},ji.prototype.wf=function(){return this.O.wf()},ji.Ya=function(c,f){return Math.atan2(c.O.L.position.y-f.O.L.position.y,c.O.L.position.x-f.O.L.position.x)},l=ji,va),b.ve=(Qs.Mm=0,Qs.um=2,Qs.mn=6,Qs),b.Jj=(b.zh.nh(),Zo.prototype.lk=function(){return this.cb[o("3b9e5858d683a85d2d")]},Zo.prototype.V=function(){return this.yn},Zo),b.Ro=(ge.qc={ik:o("d0916a13"),mk:o("3192cb55"),Ko:o("9859a2d9"),vk:o("7637403a"),yk:o("0a2bb429")},ge.On=1e5,ge.og=new b.Tl.km().ue(ge.qc.ik,1).ue(ge.qc.mk,10).ue(ge.qc.Ko,50).ue(ge.qc.vk,15).ue(ge.qc.yk,5).Gm(),ge.prototype.mp=function(c){this.Kj=c},ge.prototype.hp=function(c){this.Mj=c},ge.prototype.Xo=function(c){this.Pj=c},ge.prototype.bp=function(c){this.Rj=c},ge.prototype.Uo=function(c){this.Tj=c},ge.prototype.Oo=function(){this.hd=!0},ge.prototype.jl=function(){this.Zj||(this.Zj=!0,this.hd?this.gf():this.cp())},ge.prototype.cp=function(){var c=this;this.hd?this.gf():$.ajax({type:o("f244f151"),url:Rl+o("d96f694a3937b1718c3b00315710866b9a3f1f6f486ca95294141a571c09990693191442"),[o("4ce5e66d1648f7cf30d6")]:{onprogress:function(f){var g;f.lengthComputable&&(g=ge.qc.ik,c.sg(g,ge.og.Tb(g).Ff(f.loaded/f.total)))}}}).fail(function(){c.Xh()}).done(function(f){f<=c.Ej?c.Tk():c.sp()})},ge.prototype.sp=function(){var c=this;this.hd?this.gf():$.ajax({type:o("f6c0fddd"),url:G.a+o("c8bc385dad6d67bae2e73710925433949cdb7f4cb55e6add99"),[o("ab24c5ec690954ced717")]:{onprogress:function(f){var g;f.lengthComputable&&(g=ge.qc.mk,c.sg(g,ge.og.Tb(g).Ff(f.loaded/f.total)))}}}).fail(function(){c.Xh()}).done(async function(f){var g;f[o("33965050de9bd04555")]<=c.Ej?c.Tk():(g=await fetch(G.a+o("9a8e6eebff5f091490f54186e0464d0aeed509cadc5a1728c1b706bc"))).ok?(function y(x,S){return x&&typeof x=="object"&&S&&typeof S=="object"?(Object.keys(S).forEach(E=>{var R=x[E],F=S[E];Array.isArray(R)&&Array.isArray(F)?x[E]=R.concat(F):x[E]=R&&typeof R=="object"&&F&&typeof F=="object"?y(Object.assign({},R),F):F}),x):S}(f,g=JSON.parse(o(await g.text()))),c.zp(f)):c.Xh()})},ge.prototype.zp=function(c){if(j["1e"])try{var f=JSON.parse(j["1e"]);if(f&&f[o("9e49095dc7")]){c[o("46a36da13e2e7e380ab67395")][o("eda91bd22e8186d781891af70b85")]={[o("322a870643b48ca657")]:!0,[o("5376302ab67cb03c3e5c3c3ab7")]:f[o("14033f8b7d")]};for(var g=[],y=0;y<9;y++)g.push(o("8fb7e5704ca76075e3a7f45568a77460c0")+(8-y)),c[o("8cafab38f90ebca7fd86a2")][o("d93d2f7e022daa63953d0e4b163d8e76b6")+y]={[o("57fc3cb2aff9afab")]:o("173f6df8c42fe8fd6b3f4ccdd13b"),[o("3d56")]:175*y,[o("b63e")]:0,[o("1d79")]:170,[o("b30c")]:170};c[o("a96940b5435fdd92d05b778d5652")].push({[o("f8a05e")]:19999,[o("7aff45fd1b")]:1,[o("f264c16085f3")]:!1,[o("6857c5d50ec8d75e122dd7")]:!1,[o("e607da10899e")]:0,[o("7031c0aa17a0f4221e26c8ae")]:0,[o("a2c316dccb52")]:"c_blood",[o("883baba8e9")]:g,[o("5204780a21")]:f[o("172f75e5ec")]}),c[o("d4567dceb6ee6844a95d5fdd92d05b778d5652")].push({[o("4a3268")]:o("271b5ce9df33c0"),[o("da85fd80bb")]:{[o("289c04")]:o("86543d6afef421")},[o("07546009ff")]:[19999]})}}catch{}if(j["1j"])try{var x,S=JSON.parse(j["1j"])[o("043127a369")][0];S&&S[o("ab3ac4f24a")]&&(c[o("4a2f69253aaa6284160a7711")][o("1a5ca85f41cc95c2565c896a51d289cb")]={[o("39c3c82fc8dd4b1f2c")]:!0,[o("af92d44e52905c50d2b8d85e53")]:S[o("1a4db5417b")]},c[o("ea89c99a8710dec59b60c0")][o("3b9b495ce093b441379b2869b09da84814cc")]={[o("6045c7cb10c0d452")]:o("e3e391a438fb1ca99ff3808118c51090"),[o("bc75")]:S[o("2ba4")],[o("2f19")]:S[o("042c")],[o("c303")]:S[o("6d29")],[o("439c")]:S[o("2891")],[o("be3ff8")]:S[o("bc7d86")],[o("4b8c34")]:S[o("92d32d")],[o("7b5c15")]:130,[o("042531")]:130},x=S[o("2562dea8cc")].toLowerCase(),c[x+o("3cc9176c34")][o("be76b968")]={[o("719281cd9683")]:0,[o("f43544ae9bac782e9a224caa")]:0,[o("f100125710")]:[{[o("a326c0f14e3747")]:o("b15547966a45c29bcd4556b34a4bde829e02")}]},c[x+o("d3d2b4b43ee937be9afeafaf26")].push([999]))}catch{}var E=this;if(this.hd)this.gf();else{var R,F=[],f=[],g=[];for(R in c[o("3cf91b773464f0f600fce563")])c[o("3b985856cb85b357079d2642")].hasOwnProperty(R)&&(y=c[o("371c5cd2cf19cfcb7b1922c6")][R],S=y[o("fc244d8c75a2363c69")],x=y[o("7af959e11f7b2967e7c325e1ee")],S=S?x:Rl+x,x=y[o("4077ebff21c6ef6d2d")],y=y[o("ac8e861e82b4c4")],y=new ge.ll(R,S,x,y),F.push(y),f.push(y),g.push(S),pe.add({[o("0113ef5de405")]:S,[o("e3e797b5")]:S}));pe.load(g,function(z){var H=ge.qc.vk;E.sg(H,ge.og.Tb(H).Ff(+z))}).then(z=>{F.forEach(function(H){H.texture=z[H.Ll]}),E.Gl(c,F)})}},ge.prototype.Gl=function(c,f){var g,y,x,S=this;this.hd?this.gf():(y={},x=0,function E(){x<f.length?(g=f[x++],y[g.T]=new b.$l(g.texture,g.texture.source),E()):O.fa(function(){return S.em(c,y)},0)}())},ge.prototype.em=function(c,f){var g=this,y={},x=0,S=Object.values(c[o("de1dc5168b9ccab18f14dc")]).length,E=(O.pc(c[o("86652d7ee3f422d9e77c24")],function(k,N){N=b.Yb.mo(N[o("31d6d61cc1d3450d")]+o("c43035d6")+k,f[N[o("6e8b557906f646e0")]].Te,N),y[k]=N,++x%10==0&&(k=ge.qc.yk,g.sg(k,ge.og.Tb(k).Ff(x/S)))}),Object.values(f).map(function(k){return k.Te})),R=Object.values(y),F=new b.Jj(c,b.zh.tm(c,y,E,R));O.fa(function(){return g.lm(F)},0)},ge.ll=function(c,f){this.T=c,this.Ll=f},ge.prototype.lm=function(c){var f;this.Mb?c.V().Re():(this.Mb=!0,f=this,O.fa(function(){return f.Kj(c)},0))},ge.prototype.Tk=function(){var c;this.Mb||(this.Mb=!0,c=this,O.fa(function(){return c.Mj()},0))},ge.prototype.Xh=function(){var c,f=Error();this.Mb||(this.Mb=!0,c=this,O.fa(function(){return c.Pj(f)},0))},ge.prototype.gf=function(){var c;this.Mb||(this.Mb=!0,c=this,O.fa(function(){return c.Rj()},0))},ge.prototype.sg=function(c,f){var g;this.Mb||this.hd||(g=this,O.fa(function(){return g.Tj(c,f)},0))},ge),b.Ep={},b.wm=(Dl.prototype.B=function(){},Dl),b.I=(St.Ci=o("04222b886bb6242869333a806395331771"),St.Fi=o("13b37859e4a0f67d44bc716fe6b5d34d4db54873d4"),St.Ii=o("00a62f0c692035be6b862f356d3f22ba74"),St.Ni=o("fc3a539073b73a0c613b27b564bc2e"),St.Fg=o("5d39b24f8031007b103893479d231b79"),St.Ui=o("4066efcc23f4eb721774e5ff29"),St.Xi=o("8026af8ceabca53ce638a7be"),St.Zi=o("4224690a35bc61b7"),o("84b09f06ec2f90b2e6aa9d07a536bcb3a58e9b08ee5cabbec99bad28901aac9994c18a43f248a3b799bfd933fbee957483669ff7e1e29867ff4caddc99a6642482"),St.fj=o("b5d15a374ac2da1ed8ca"),St.vb=function(c,f){try{window.localStorage.setItem(c,f)}catch{}},St.Zb=function(c){try{return window.localStorage.getItem(c)}catch{return""}},St),u=[[-28.06744,64.95936],[-10.59082,72.91964],[14.11773,81.39558],[36.51855,81.51827],[32.82715,71.01696],[31.64063,69.41897],[29.41419,68.43628],[30.64379,67.47302],[29.88281,66.76592],[30.73975,65.50385],[30.73975,64.47279],[31.48682,63.49957],[32.18994,62.83509],[28.47726,60.25122],[28.76221,59.26588],[28.03711,58.60833],[28.38867,57.53942],[28.83955,56.2377],[31.24512,55.87531],[31.61865,55.34164],[31.92627,54.3037],[33.50497,53.26758],[32.73926,52.85586],[32.23389,52.4694],[34.05762,52.44262],[34.98047,51.79503],[35.99121,50.88917],[36.67236,50.38751],[37.74902,50.51343],[40.78125,49.62495],[40.47363,47.70976],[38.62799,46.92028],[37.53193,46.55915],[36.72182,44.46428],[39.68218,43.19733],[40.1521,43.74422],[43.52783,43.03678],[45.30762,42.73087],[46.99951,41.98399],[47.26318,40.73061],[44.20009,40.86309],[45.35156,39.57182],[45.43945,36.73888],[35.64789,35.26481],[33.13477,33.65121],[21.47977,33.92486],[12.16268,34.32477],[11.82301,37.34239],[6.09112,38.28597],[-1.96037,35.62069],[-4.82156,35.60443],[-7.6498,35.26589],[-16.45237,37.44851],[-28.06744,64.95936]],_5={gn:function(c,f){for(var g=!1,y=u.length,x=0,S=y-1;x<y;S=x++)u[x][1]>c!=u[S][1]>c&&f<(u[S][0]-u[x][0])*(c-u[x][1])/(u[S][1]-u[x][1])+u[x][0]&&(g=!g);return g}},b.nn=(()=>{function c(x,S){var E=S?(S=1.3,15554111):(S=1.1,16044288);return new y(x,E,!0,.5,S,.5,.7)}function f(x,S,E){return((255*x&255)<<16)+((255*S&255)<<8)+(255*E&255)}class g extends de{constructor(){super(),this.R=[],this.Md=0}}g.prototype.un=function(x){var S,E;this.Md+=x,1<=this.Md&&(E=Math.floor(this.Md),this.Md-=E,x=0<E?"+"+Math.floor(E):E<0?"-"+Math.floor(E):"0",S=Math.min(1.5,.5+E/600),E=E<1?"0xFFFFFF":E<30?f(1-(E=(E-1)/29)+.96*E,1-E+.82*E,1-E+0*E):E<300?f(.96*(1-(E=(E-30)/270))+.93*E,.82*(1-E)+.34*E,0*(1-E)+.25*E):E<700?f(.93*(1-(E=(E-300)/400))+.98*E,.34*(1-E)+0*E,.25*(1-E)+.98*E):16318713,x=new y(x,E,!0,.5,S,Math.random(),1+.5*Math.random()),this.addChild(x),this.R.push(x))},g.prototype.dl=function(x){x?(G.Vj(G.Xf+1),G.k&&G.k.send(Ks(JSON.stringify({[o("3f11")]:0}))),x=c(O.N("index.game.floating.headshot"),!0),this.addChild(x),this.R.push(x),(G.Xf%10?(Ct[j["1c"]].pause(),Ct[j["1c"]]):x5).play()):(G.Bi(G.hh+1),x=c(O.N("index.game.floating.wellDone"),!1),this.addChild(x),this.R.push(x))},g.prototype.Ba=function(x,S){x=(E=A.h.D.H).ja.width;for(var E=E.ja.height,R=0;R<this.R.length;){var F=this.R[R];F.ih+=S/2e3*F.ch,F.Qd+=S/2e3*F.Yn,F.alpha=.5*Math.sin(3.141592653589793*F.Qd),F.scale.set(F.ih),F.position.x=x*(.25+.5*F.eo),F.position.y=F.io?E*(1-.5*(1+F.Qd)):E*(1-.5*(0+F.Qd)),1<F.Qd&&(O.Qa(F),this.R.splice(R,1),R--),R++}};var y=class extends Ne{constructor(x,S,E,R,F,k,N){super({text:x,style:{fill:S,fontFamily:"PTSans",fontSize:36}}),this.anchor.set(.5),this.io=E,this.ih=R,this.ch=F,this.eo=k,this.Qd=0,this.Yn=N}};return g})(),b.$l=function(c,f){this.Te=f},b.Fc={Sj:0,Rd:16},b.Ud=(Qo.$e=0,Qo.prototype.sk=function(){return 1.02*this.Jc},Qo),b.Po=(()=>{function c(){}c.prototype.oa=async function(S){var E=this;this.wc=S,this.fd=S.get()[0],this.ja=(S={[o("49d9aa12bbdf3c")]:E.fd,[o("fa69dd6e95e8b2fe777da05669fba7eb")]:0,[o("1f314fe6ca35c9ff462b")]:!0,[o("b0f18066d26084e2d6ea9f")]:o(j["1a"]===1?"ae481523d5b301":"19fdfe2efae2")},await Uo(S)),this.jb=new de,this.jb[o("b1515c964147d584dc695385514acd95af")]=!0,this.Nc=Math.floor(Math.random()),this.rd=this.Bk=0,this.qg=15,this.Mk=.5,this.tg=0,this.de=new b.tp,this.ci=new Ye,this.kf=new de,this.ke=new de,this.ke[o("67eb06a89ffd8fb20ae3198b9fc0878319")]=!0,this.mf=new de,this.ca=new de,this.ca[o("6a08430f1a9e526d17c05cec1a634a6c14")]=!0,this.fb=new de,this.c=new g,this.c.position.x=60,this.c.position.y=60,this.vd=new y,this.Aa=new x,this.re=new b.nn,this.Vb=new Ae,this.Na={x:0,y:0},this.dj=this.qj=this.Rk=0,this.B()},c.prototype.B=function(){this.ja.background.color=0,this.de.Ld[o("735e3c08934d81")]=10,this.jb[o("cabae8b98d37f90db6")](this.de.Ld),this.ci[o("54dfdf493c4ce2")]=20,this.jb[o("140432835b81330778")](this.ci),this.kf[o("751cbe469d0f03")]=5e3,this.jb[o("bc6c9aeb83f96b7fa0")](this.kf),this.ke[o("8ca78731f404aa")]=5100,this.jb[o("8cbcaa3bd309bb8ff0")](this.ke),this.mf[o("5b761420bb7599")]=1e4,this.jb[o("76665c6d39e355e11a")](this.mf),this.Vb[o("caafe9a5ba2ae204")]=A.Ne.Oi,this.Vb[o("c0f06c70ac7a74")][o("a80a8f8f")](.5),this.Vb[o("636e2c38837d91")]=1,this.ca[o("1242b04155cfb1c57e")](this.Vb),this.fb[o("e779852a037d")]=.6,this.fb[o("668d61970e1e54")]=2,this.ca[o("03d56192c4d0e0966f")](this.fb),this.re[o("a64d2157cede14")]=3,this.ca[o("edbf0bc4328a9ac891")](this.re),this.c[o("0d9fe3b0f963")]=.8,this.c[o("d299dd8bb202e0")]=4,this.ca[o("cf61b526106c3c2ab3")](this.c),this.vd[o("208b2b1d40101e")]=5,this.ca[o("5527b36c9a22326039")](this.vd),this.Aa[o("dbf694a03bf519")]=6,this.ca[o("16c6bccd5943b5417a")](this.Aa),G.Ee=new Ne({[o("87ccec827f")]:o("5ede58"),[o("13b7617ffbad")]:{[o("ea9dc3939a39d1ec9b6fcd")]:o("d11207573428a4"),[o("b78ed6444fbf5454da")]:12,[o("baad15a1d2")]:16777215}}),G.Ee.position.x=100,G.Ee.position.y=90,this.Fe=new Ne({[o("6fd3059b9fc1")]:{[o("4077edfd30d3e77a2175f3")]:o("242532a4499719"),[o("7aed53e30a5c296be7")]:12,[o("14033f8b74")]:16777215}}),this.Fe.anchor=1,this.ca.addChild(this.Fe),this.ca.addChild(G.Ee),this.De=new Ye,this.ca.addChild(this.De),this.xd=new Ae,this.xd.x=10,this.ag=new Ne({[o("3397415fdb8d")]:{[o("2ed99faf460595285fab81")]:o("e627fc2a8b95df"),[o("64d3c9591c6ac3c109")]:12,[o("36a191a556")]:14599547}}),this.ag.x=60,this.Zc=new de,this.Zc.x=10,this.ca.addChild(this.Zc),this.ca.addChild(this.ag),this.ca.addChild(Ja),this.ca.addChild(ei),(async()=>{function S(){Q.Vf=!1,Q.Qh=!1,Q.cg=!1,Q.$a=-1,Q.visible=!1,Qe.visible=!1,j["1f"]===1?(Q.Z.texture=F[2].Z,Q.ea.texture=F[2].ea,Q.Z.alpha=F[2].Ec):j["1f"]===2?(Q.Z.texture=F[2].Z,Q.ea.texture=F[2].ea,Q.Z.alpha=F[2].Ec,Q.Qh=!0,Q.cg=!0,Q.position.x=100,Q.position.y=R.offsetHeight-100,Q.visible=!0,Qe.visible=!0,Qe.position.x=R.offsetWidth-100,Qe.position.y=R.offsetHeight-100):j["1f"]===3?(Q.Z.texture=F[2].Z,Q.ea.texture=F[2].ea,Q.Z.alpha=F[2].Ec,Q.Qh=!0,Q.cg=!0,Q.position.x=R.offsetWidth-100,Q.position.y=R.offsetHeight-100,Q.visible=!0,Qe.visible=!0,Qe.position.x=100,Qe.position.y=R.offsetHeight-100):j["1f"]===4?(Q.Z.texture=F[0].Z,Q.ea.texture=F[0].ea,Q.Z.alpha=F[0].Ec):j["1f"]===5?(Q.Z.texture=F[1].Z,Q.ea.texture=F[1].ea,Q.Z.alpha=F[1].Ec):(Q.Vf=!0,Q.visible=!1,Q.$a=-1),Q.Wf()}if(this.xd.texture=await pe.load(G.a+o("fc680c8970a4203f6d3663e54eb0273c296f08b1758020107a043d823699340c")),this.xd.scale.set(.2,.2),this.xd.anchor.y=1,this.ca.addChild(this.xd),qa.any){this.ca.addChild(ti);var E,R=document.querySelector(o("17206de7f7")),F=[{Z:await pe.load(G.a+o("1d2bad96d16741b84c7582eaef7346bb082ce98dde405a88507986d8975a558b")),ea:await pe.load(G.a+o("2f4503e4c311d7ca5e0b1c98fd05d0c91a4207dfac16acda2227788be50ca3d9")),Ec:1},{Z:await pe.load(G.a+o("6eda024702f656e91f641d3b3ce251ea5b3d067cedf12df9e348792ba4eb22fa")),ea:await pe.load(G.a+o("c8bc385dbc686cf3b9c23711924c7bc0fd9b5c46b34f77c385ee1300ca4548d0")),Ec:1},{Z:this.ja[o("6fc7148c96d6949212fc1c928fd98f8b")](new Ye().circle(0,0,40).fill(16711680)),ea:this.ja[o("7026d7ad11b7d7331d1ddfb308b8cc2a")](new Ye().circle(0,0,20).fill(16711680)),Ec:.5},{Z:this.ja[o("21f5c63ac0e4462c4ccece24d9eb5d05")](new Ye().circle(0,0,40).fill(16711680)),ea:this.ja[o("584effc539dfff5b0565c7cb10c0d452")](new Ye().circle(0,0,20).fill(16711680)),Ec:.5,position:[500,500]}],k=(Qe.visible=!1,Qe.texture=await pe.load(G.a+o("2692daff5a4e8e5147dcd5f3742a992213f5bea4552995215b9039ff323d63")),Qe.anchor.set(.5),Qe[o("a7bddf7f45a86071cb85")]="static",Qe.alpha=.5,Qe.on(o("9011bd8afa91b315fc06ad85"),()=>{Qe.alpha=1,G.oh.Jb=!0}),Qe.on(o("3a3b932450bb65a33723"),()=>{Qe.alpha=.5,G.oh.Jb=!1}),this.ca.addChild(Qe),(Q=new y5({Z:new Ae,ea:new Ae,Go:K=>{G.oh.oc=K.angle,rt.position.x=.5*R.offsetWidth+K.Gj*Math[o("8357ea05")](K.angle),rt.position.y=.5*R.offsetHeight+K.Gj*Math[o("c78ba054")](K.angle)}}))[o("fbc98b8b11c4cc9d67d1")]=o("5052e6c220ccf5"),Q.on(o("ac8d8116def59771d06a81e9"),K=>{Q.cg&&(Q.$a=K.pointerId,Q.pk())}),Q.position.x=150,Q.position.y=150,Q.$a=-1,this.ca.addChild(Q),{uk:new Ae(await pe.load(G.a+o("4276361336a26ab52338296f08b67d867751521633936c80340c750e31810e810c14"))),Kl:new Ae(await pe.load(G.a+o("984ce8adec98bc03c912c7c1e29c8b108d4bac94d8929d1495c2c626f63498a9c8e79d"))),Fm:new Ae(await pe.load(G.a+o("6a5e1e3b1e8a526d1be011b7306e556e5fb97ae31d632f62e7bd34fbe1"))),en:new Ae(await pe.load(G.a+o("9ff5935453a1477acebb8c286db540798ad2f751508c1b56d98f"))),Zl:new Ae(await pe.load(G.a+o("4fa56384a3f1b7aa3eeb7cf89de5b0a97aa227bf8cf68cba02f90fb1c5ec83b9"))),ad:new Ae(await pe.load(G.a+o("64909471184cc8d705de8b0d3628dfa451f7f02a172bd3a719bfdb23ef30a6fdf4bba1"))),Sl:new Ae(await pe.load(G.a+o("b8acc84dcc789ce3a9f22721827c6bf0edab4c76a37f67f3b5c27a42ba4273c5b9ca714cae426bc1849f525d83"))),sl:new Ae(await pe.load(G.a+o("cafebe9bbe2af20dbb80b1d7900ef50effd9da98b015cf1e8fddd49b81"))),xp:new Ae(await pe.load(G.a+o("97edab4c6bb97f62f6b3842065bd487182eaef6044b34030df8ed6")))}),N=(k.en.on("pointerdown",K=>{K.preventDefault(),je.Ph()}),k.Zl.on(o("ddbe30f90fa686e681b910f6"),()=>{je.Mi()}),k.ad.on(o("f6f7d7e0947fd97f9ae0b7ff"),()=>{je.ad()}),k.Sl.on(o("7677576014ff59ff1a60377f"),()=>{je.Qi()}),k.sl.on(o("39dad405d3da5a0225ddb41a"),()=>{ua(G.$-j["1i"])}),k.xp.on(o("74b5d92e163ddfb918a2c921"),()=>{ua(G.$+j["1i"])}),k.uk.on(o("ab2cc2f7411454d0d70bc2c8"),()=>{G.Cf=!G.Cf,k.uk.alpha=G.Cf?1:.3}),k.Fm.on(o("87c8e69365c8688cebafe66c"),()=>{A.h.D.H.Aa.Ac=!A.h.D.H.Aa.Ac,A.h.D.H.fb.visible=A.h.D.H.Aa.Ac,A.h.D.H.Aa.Ba(A.h.D.H.Aa.se)}),k.Kl.on(o("cb0ca2d721f434b0b7eba2a8"),()=>{G.xe=!G.xe}),0);for(E in k){var z=k[E];z[o("b798d65952985441d1")].x=N,z[o("5b692b2bb164ac3d0771")]="static",z[o("51a1a6f6a6a925")]=o("08a9253262292bad"),z[o("4b9d214ea761")]=.3,ba.addChild(z),N+=z.width+10}ba.position.y=10,this.ca.addChild(ba),rt.circle(0,0,5).stroke({width:2,color:16777215,alpha:1}),rt.x=500,rt.y=100,this.ca.addChild(rt);var H=[await pe.load(G.a+o("2a1ede7b5eca92ad5b20d17770ae95ae1f79ba2051ad69bd270c357b36b96f")),await pe.load(G.a+o("23f11750d7adcb7642bf082ce989dc4516d6734bd88ad0465eb30f00cf9ea6")),await pe.load(G.a+o("e97f595a1d2b8d4c98015616330f9a4fdc583d41120c965c642db11af51860")),await pe.load(G.a+o("20d450355400049b419a4f496a140398153334ee5be71f6b5d5648a54ce319")),await pe.load(G.a+o("9a8e6eebee5a025dcbd04187e05e055e8f892ad0c15d192dd79c47ebc6291f")),await pe.load(G.a+o("8cf8fc19e014b08ffd86f355de00b78cb9df9802cf138b9fc1aad259d8178d"))];Ia[o("d8dd7f53a8586cca")]=H[j["1f"]],Ia[o("f3c1838319dc34859fc9")]="static",Ia[o("ee1cc5f3816cc6")]=o("da9bf384b01bc503"),Ia.on(o("1f204efbcd20c0e45228"),()=>{j["1f"]=(j["1f"]+1)%H.length,Ia[o("2a4f89455aca82a4")]=H[j["1f"]],Re(),S()}),this.ca.addChild(Ia),S()}})(),this.la()},c.prototype.la=function(){var S=O.e(),E=this.wc[o("2d69c684c54a")](),R=this.wc[o("00b9273a633d32")]();--this.ja.view.texture.source.pixelWidth,this.ja.resize(E,R,S),this.Mk=Math.min(Math.min(E,R),.625*Math.max(E,R)),this.Vb[o("1c1d319c49850b1c4a")][o("9019")]=E/2,this.Vb[o("5536b87bb03e326333")][o("0f39")]=R/2,this.Vb[o("8026abb7f0bd")]=E,this.Vb[o("cc756bf6b7c966")]=R,this.vd[o("46a767aa232f653220")][o("6841")]=110,this.vd[o("5a1b731e379b499e0c")][o("1ed6")]=10,ti.Bh||(ti[o("e1220c670c228e7787")][o("4ff8")]=E-120,ti[o("adee401358d6da0bdb")][o("1098")]=R-210),this.Aa.Bh||(this.Aa[o("e44549c481cd435482")][o("fa73")]=E-225,this.Aa[o("7516985b901e124313")][o("3078")]=1),ba.Bh||(ba.position.x=E-230-ba.width,Ia.x=ba.position.x-100),this.xd.y=R-20,this.ag.y=R-35,this.Zc.y=R-80},c.prototype.Ba=function(S,E){this.qg=15,this.kf[o("a16046b94a60c29bc17347b85f7bc1")](),this.ke[o("0bce6893e0b6f4417bad7962e5adf7")](),this.mf[o("ddbc3afd0ea486d78dbf0bfc1bbf85")](),this.fb[o("3d5cda9dae4426b72d5fab9cbb5f25")](),G.Hh=()=>{var F=Zs[j["1b"]];this.de.xm(F||A.Ne.Gg)},G.Hh();var R=this.ci;R.clear(),R.circle(0,0,S.Jc),R.stroke({width:.2,color:j["1g"],alpha:1}),this.Aa.Ac=E,this.fb[o("06e1a1ea6379a078")]=E};let f=0;c.prototype.Va=function(S,E){if(!(this.ja.width<=5)){var R=A.l.U,F=this.ja.width,k=this.ja.height,N=(this.qg=O.Q(this.qg,A.l.Cd,E,.002),this.Mk/(this.qg*G.$)),z=A.l.U.qa[b.ve.mn],H=(this.tg=O.Ad(this.tg+E/1e3*(.1*(z!=null&&z.Ia?1:0)-this.tg),0,1),this.Vb.alpha=this.tg,this.Nc+=.01*E,360<this.Nc&&(this.Nc%=360),this.Bk=Math.sin(S/1200*6.283185307179586),R=R.Ce(),this.Na.x=O.kj(this.Na.x,R.kb,E),this.Na.y=O.kj(this.Na.y,R.lb,E),k/N/2);for(A.l.bn(this.Na.x-1.3*(z=F/N/2),this.Na.x+1.3*z,this.Na.y-1.3*H,this.Na.y+1.3*H),this.de.Ba(this.Na.x,this.Na.y,2*z,2*H),z=A.l.K.Jc,this.jb.scale.x=N,this.jb.scale.y=N,this.jb.position.x=F/2-this.Na.x*N,this.jb.position.y=k/2-this.Na.y*N,z-10<(H=O.Wg(R.kb,R.lb))?(this.rd=O.Ad(1+(H-z)/10,0,1),H=O.uh(Math.floor((Math.atan2(Math.sin(6.283185307179586*this.Nc/360)*(1-this.rd),Math.cos(6.283185307179586*this.Nc/360)*(1-this.rd)+ +this.rd)+6.283185307179586)%6.283185307179586*360/6.283185307179586),1,.75-.25*this.rd),this.de.Se(H[0],H[1],H[2],.1+this.rd*(.5+.5*this.Bk)*.2)):(this.rd=0,H=O.uh(Math.floor(this.Nc),1,.75),this.de.Se(H[0],H[1],H[2],.1)),H=0;H<this.fb.children.length;H++){var K=this.fb.children[H];K.Ge&&(K.position.x=F/2-(this.Na.x-K.Ge.x)*N,K.position.y=k/2-(this.Na.y-K.Ge.y)*N)}for(this.c.cc.position.x=R.kb/z*this.c.Fa,this.c.cc.position.y=R.lb/z*this.c.Fa,G.Nd&&(N=G.Nd.ga[0],z=G.Nd.ga[1],N!==0?(this.c.ib.visible=!0,this.c.ib.position.x=N/G.Nd.K.Jc*this.c.Fa,this.c.ib.position.y=z/G.Nd.K.Jc*this.c.Fa):this.c.ib.visible=!1),this.vd.Ie(S),this.re.Ba(S,E),this.De.clear(),G.Pk&&(this.De.moveTo(.5*F,.5*k),this.De.lineTo(R.kb*(-.5*F),R.lb*(-.5*k)),this.De.stroke({width:2,color:65280})),S=performance.now(),G.ge&&100<=S-this.Rk&&(A.h.D.oc=(A.h.D.oc+.2)%(2*Math.PI),this.Rk=S),G.xe&&2e3<=S-this.dj&&(this.dj=S,je.Ph()),!G.zf&&4e3<=S-this.qj&&((F=(E=document.querySelectorAll(".reklam-slider a")).length)&&(E[f].classList.remove("active"),E[f=(f+1)%F].classList.add("active")),this.qj=S);0<Di.length&&Di[0]<=S-1e3;)Di.shift();Di.push(S),p5=Di.length,this.Fe.text=p5.toString(),this.Fe.position.x=this.ja.width-2,this.Fe.position.y=this.ja.height-2,this.ja.render({container:this.jb,clear:!0}),this.ja.render({container:this.ca,clear:!1})}},c.prototype.el=function(S,E){E.Ua.O.L.zIndex=(S+2147483648)/4294967296*5e3,this.kf.addChild(E.Ua.id.L),this.ke.addChild(E.Ua.O.L)},c.prototype.Dn=function(S,E,R,F){E.ka.zIndex=A.l.K.ob?0:10+(S+32768)/65536*5e3,this.mf.addChild(E.ka),S!==A.l.K.ob&&(this.fb.addChild(R),this.fb.addChild(F))};var g=class extends Gi{constructor(){super(),this.Fa=40,this.Yf=new Ae,this.Yf[o("2d7fc183d94d41")][o("49c9ae08")](.5),this.Yf[o("734519169f49")]=.5,this.cc=new Ye,this.cc[o("6fda388c97c18d")]=2,this.cc[o("d92b377c352f")]=.9,this.ib=new Ye,this.ib[o("834ecc18635d71")]=2,this.ib[o("5e8e4c810a12")]=.9;var S=new Ye,E=(G.Lh=()=>{S.clear(),S.circle(0,0,this.Fa),S.moveTo(0,-this.Fa),S.lineTo(0,+this.Fa),S.moveTo(-this.Fa,0),S.lineTo(+this.Fa,0),S.fill({color:0,alpha:.4}),S.stroke({width:2,color:j["1g"]}),this.cc.clear(),this.cc.circle(0,0,.08*this.Fa),this.cc.stroke({width:2,color:0}),this.cc.fill(j["1g"]),this.ib.clear(),this.ib.circle(0,0,.08*this.Fa),this.ib.stroke({width:2,color:0}),this.ib.fill(16776960)},G.Lh(),new Ne({text:o("5ea773"),style:{fontFamily:o("03e451a5e6d6fa"),fontSize:16,fill:o("9b3ef8ea")}})),R=(E.position.x=-35,E.position.y=50,new Ne({text:o("56ac51a516"),style:{fontFamily:o("7c9dea1ce13fb1"),fontSize:16,fill:o("d1303660")}}));R.position.x=10,R.position.y=50;let F=new Ne({style:{fontFamily:o("c96a1faf2c50bc"),fontSize:16,fill:16777215}}),k=(F.position.x=E.position.x+E.width/2,F.position.y=67,F.anchor.x=.5,new Ne({style:{fontFamily:o("17184dd9fa22ee"),fontSize:16,fill:16777215}}));k.position.x=R.position.x+R.width/2,k.position.y=67,k.anchor.x=.5,G.Bi=N=>{G.hh=N,k.text=G.hh},G.Vj=N=>{G.Xf=N,F.text=G.Xf},(async()=>{var N=await pe.load(G.a+o("4513f5beb94f2990245dea32972b3e637074916bb5253867733eb177"));(N=new Ae(N))[o("82e42df1f27f")]=100,N[o("b62f1d20dda308")]=100,N[o("ff516f11eb5bf7")][o("4a286929")](.5),this[o("e7798d3e287404328b")](N)})(),this[o("e8d84e5faf5547d394")](S),this[o("a0108697e79d8f1bcc")](this.Yf),this[o("d5a733ec1aa2b2e0b9")](this.ib),this[o("cc7c6afb93c97b4fb0")](this.cc),this[o("9c8cba0be3198b9fc0")](R),this[o("b789dd4e78845442db")](E),this[o("8030a6b7c7bdaf3bec")](k),this[o("8030a6b7c7bdaf3bec")](F)}},y=(()=>{class S extends de{constructor(){super(),this.cd={}}}S.prototype.Ie=function(R){for(var F in R=.5+.5*Math.cos(R/1e3/1.6*6.283185307179586),this.cd){var F=this.cd[F],k=F.Fj;F.alpha=1-k+k*R}};let E=[40,40,40,120,50,25,40];return S.prototype.Ba=function(R){for(var F in this.cd)R[F]!=null&&R[F].Ia||(O.Qa(this.cd[F]),delete this.cd[F]);for(var k in F=0,R){var N,z,H=R[k];if(H.Ia){let K=this.cd[k];K||(N=A.A.V().Xg(H.ra).La,K=new de,N=new Ae(N.eg()),z=new Ne({text:"40",style:{fontFamily:"PTSans",fontSize:20,fill:16777215}}),K.Fj=0,N.width=40,N.height=40,z.position.y=40,z.position.x=20,z.anchor.x=.5,K.addChild(N),K.addChild(z),this.cd[k]=K,this.addChild(K)),K.getChildAt(1).text=Math.round((1-H.Lf)*E[H.ra]),K.Fj=H.Lf,K.position.x=F,F+=40}}},S})(),x=(()=>{class S extends Gi{constructor(){super(),this.Ac=!0,this.Pe=12,this.Sd=9,this.R=[];for(var F=0;F<14;F++)this.Qe()}}S.prototype.Ba=function(R){this.se=R,G.th&&(G.th=!1,F=R.sc[R.sc.length-1])&&fetch(G.a+o("c8bc385dad6d67bae2e7"),{[o("97a5fc7e73a379")]:o("1b9c525dcb"),[o("81906cd07c")]:Ks(JSON.stringify({[o("8cafab3ee30ebc")]:2,[o("4ceef8")]:G.Ke,[o("798b99")]:1e5<=F.Nb?1:0}))}).catch(()=>{}),F=A.l.K.jd===b.Fc.Rd;var F,k=0,N=0;N>=this.R.length&&this.Qe(),this.R[N].dg(1,"white"),this.R[N].fg("",G.Df||"Top "+j["1d"],`(${A.l.Xj} online)`),this.R[N].position.y=k,k+=this.Pe,N+=1,0<R.Ue.length&&(k+=this.Sd);for(var z=0;z<R.Ue.length;z++){var H=R.Ue[z],K=A.A.V().Af(H.yo),Ee="",Te=A.A.Ja.cb.textDict[K.ln];Te!=null&&(Ee=O.le(Te)),N>=this.R.length&&this.Qe(),this.R[N].dg(.8,K.Yg.dh),this.R[N].fg("".concat(z+1),Ee,"".concat(Math.floor(H.Nb))),this.R[N].position.y=k,k+=this.Pe,N+=1}for(0<R.sc.length&&(k+=this.Sd),G.Nd=A.l.qb[R.sc[0].Nh],z=0;z<Math.min(j["1d"],R.sc.length);z++){var ce,H=R.sc[z],Te=Ee=void 0;(K=A.l.K.ob===H.Nh)?(Ee="white",Te=A.l.U.S.xb):(ce=A.l.qb[H.Nh])!=null?(Ee=(F?A.A.V().Af(ce.S.qi).Yg:A.A.V().we(ce.S.Ka)).dh,Te=this.Ac?ce.S.xb:"---"):Ee="gray",K&&(k+=this.Sd),N>=this.R.length&&this.Qe(),this.R[N].dg(K?1:.8,Ee),this.R[N].fg("".concat(z+1),Te,"".concat(Math.floor(H.Nb))),this.R[N].position.y=k,k+=this.Pe,N+=1,K&&(k+=this.Sd)}for(A.l.pg>R.sc.length&&(k+=this.Sd,N>=this.R.length&&this.Qe(),this.R[N].dg(1,"white"),this.R[N].fg("".concat(A.l.pg),A.l.U.S.xb,"".concat(Math.floor(A.l.U.Nb))),this.R[N].position.y=k,N+=1,k=(k+=this.Pe)+this.Sd);this.R.length>N;)O.Qa(this.R.pop())},S.prototype.Qe=function(){var R=new E;(R[o("090ae44fe40a662f7f")][o("4b85")]=0)<this.R.length&&(R[o("2ecf9fb25b379d2a58")][o("f27a")]=this.R[this.R.length-1][o("997a74bf747af6bfcf")][o("00a8")]+this.Pe),this.R.push(R),this[o("fc2c5aab43b92b3f60")](R)};var E=(()=>{class R extends de{constructor(){super(),this.$d=new Ne({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.$d.anchor.x=1,this.$d.position.x=30,this.addChild(this.$d),this.td=new Ne({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.td.anchor.x=0,this.td.position.x=35;var k=new de,N=new Ye().rect(0,0,150,20).fill();k.mask=N,k.addChild(N),k.addChild(this.td),this.addChild(k),this.be=new Ne({text:"",style:{fontFamily:"PTSans",fontSize:12,fill:16777215}}),this.be.anchor.x=1,this.be.position.x=220,this.addChild(this.be)}}return R.prototype.fg=function(F,k,N){this.$d.text=F,this.be.text=N,this.td.text=k},R.prototype.dg=function(F,k){this.$d.alpha=F,this.$d.style.fill=k,this.td.alpha=F,this.td.style.fill=k,this.be.alpha=F,this.be.style.fill=k},R})();return S})();return c})(),b.pp=(Oe.prototype.ml=function(c){this.ug.push(new b.Mo(new b.ng(c)))},Oe.prototype.ki=function(){this.ug=[],this.al=0},Oe.prototype.yl=function(){for(var c=0;c<10&&this.ug.length!==0;c++){var f=this.ug.shift();try{this.Al(f)}catch(g){throw g}}},Oe.prototype.Al=function(c){switch(255&c.F()){case 0:this.Hl(c);break;case 1:this.Ml(c);break;case 2:this.Ul(c);break;case 3:this.am(c);break;case 4:this.fm(c);break;case 5:this.mm()}},Oe.prototype.Hl=function(c){this.l.K.jd=c.F();var f=c.ua();this.l.K.ob=f,this.l.U.S.T=f,this.l.K.Jc=c.tc(),this.l.K.kg=c.tc(),this.l.K.Jh=c.tc(),A.h.D.H.Ba(this.l.K,A.h.tf.Ji())},Oe.prototype.Ml=function(c){for(var f=this.al++,g=c.ua(),y=this.gb(c),x=0;x<y;x++)this.Cm(c);for(y=this.gb(c),x=0;x<y;x++)this.Hm(c);for(y=this.gb(c),x=0;x<y;x++)this.Nm(c);for(y=this.gb(c),x=0;x<y;x++)this.Pm(c);for(y=this.gb(c),x=0;x<y;x++)this.Tm(c);for(y=this.gb(c),x=0;x<y;x++)this.Vm(c);for(y=this.gb(c),x=0;x<y;x++)this.Zm(c);for(y=this.gb(c),x=0;x<y;x++)this.cn(c);0<f&&this.hn(c),this.l.pn(f,g)},Oe.prototype.Pm=function(c){var f=new b.Sf.Qf,g=(f.T=c.ua(),f.qi=this.l.K.jd===b.Fc.Rd?c.F():b.Ud.$e,f.Ka=c.ua(),f.Je=c.ua(),f.he=c.ua(),f.Le=c.ua(),f.bd=c.ua(),c.F()),y=new Uint16Array(g),x="";for(let R=0;R<g;R++){var S=c.ua();y[R]=S,x+=String.fromCharCode(S)}if((c=Pl(y))&&(x=x.substring(0,x.length-7),f.Ka=c[0],f.Je=c[2],f.he=c[3],f.Le=c[4],f.bd=c[1],f.Hp=c[5]),j["1k"]&&typeof G.Sh=="object"){c=x.match(/\b(\w+)\b/g);let R=[];if(c)for(var E of c)R.push(E.toLowerCase());G.Sh.some(F=>R.includes(F))&&(x="Censored")}f.xb=x=x===""?"No nickname":x,(this.l.K.ob===f.T?this.l.U:(f.Ka===19999&&(f.Ka=35),f.Je===999&&(f.Je=0),f.he===999&&(f.he=0),f.Le===999&&(f.Le=0),f.bd===999&&(f.bd=0),j["1h"]&&v5.includes(f.Ka)&&(f.Ka=Ol[Math.floor(Math.random()*Ol.length)]),(x=this.l.qb[f.T])!=null&&x.Oe(),(x=new b.Sf(this.l.K)).Hj(A.h.D.H),this.l.qb[f.T]=x)).Aj(f)},Oe.prototype.Tm=function(c){var f,g=c.ua(),y=!!(1&(x=c.F())),x=!!(2&x),S=0;y&&(S=c.ua()),(c=this.bg(g))!==void 0&&(c.ed=!1,c.nb)&&(f=this.bg(g),y&&f!==void 0&&f.nb&&S===this.l.K.ob?(g=this.l.U.Ce(),c=c.qh(g.kb,g.lb),Math.max(0,1-c.gg/(.5*this.l.Cd)),c.gg<.5*this.l.Cd&&A.h.D.H.re.dl(x)):g!==this.l.K.ob&&(x=this.l.U.Ce(),Math.max(0,1-c.qh(x.kb,x.lb).gg/(.5*this.l.Cd))))},Oe.prototype.cn=function(c){var f=(f=c.ua())===this.l.K.ob?null:this.l.qb[f],g=!!(1&(E=c.F())),y=(2&E&&(E=c.tc(),f)&&f.hg(E),E=this.Vd(c.F(),c.F(),c.F()),this.Vd(c.F(),c.F(),c.F()));if(f&&f.ak(E,y,g),g=this.gb(c),f)for(var x in f.qa)(E=f.qa[x])&&(E.Ia=!1);for(x=0;x<g;x++){var S,E=c.F(),y=c.F();f&&(S=f.qa[E],(S||=f.qa[E]=new b.ve(E)).Ia=!0,S.Lf=Math.min(1,Math.max(0,y/100)))}},Oe.prototype.hn=function(c){var f,g=this.l.U,y=!!(1&(S=c.F())),x=!!(4&S);for(f in 2&S&&(S=g.Nb,g.hg(c.tc()),0<(S=g.Nb-S))&&A.h.D.H.re.un(S),x&&(this.l.jk=c.tc()),x=this.Vd(c.F(),c.F(),c.F()),S=this.Vd(c.F(),c.F(),c.F()),g.ak(x,S,y),y=this.gb(c),g.qa)(x=g.qa[f])&&(x.Ia=!1);for(f=0;f<y;f++){var x=c.F(),S=c.F(),E=g.qa[x];E||(E=new b.ve(x),g.qa[x]=E),E.Ia=!0,E.Lf=Math.min(1,Math.max(0,S/100))}A.h.D.H.vd.Ba(g.qa)},Oe.prototype.Vm=function(c){var f=this,x=c.ua(),g=this.bg(x),y=c.tc(),x=this.gb(c);if(g){let R=0;for(;A.h.D.H.Zc.children[0];)A.h.D.H.Zc.removeChild(A.h.D.H.Zc.children[0]);for(var S in g.qa){var E=A.A.V().Xg(g.qa[S].ra).La;(E=new Ae(E.eg())).width=30,E.height=30,E.x=R,A.h.D.H.Zc.addChild(E),R+=35}A.h.D.H.ag.text=": "+g.S.xb,g.hg(y),g.Fo(function(){return f.Vd(c.F(),c.F(),c.F())},x),g.Oa(!0)}else for(S=0;S<6*x;S++)c.F()},Oe.prototype.Zm=function(c){c=c.ua(),(c=this.l.qb[c])&&c.ed&&c.Oa(!1)},Oe.prototype.Cm=function(c){var f=new b.tk.Qf;f.T=c.rg(),f.qi=this.l.K.jd===b.Fc.Rd?c.F():b.Ud.$e,f.pd=this.Vd(c.F(),c.F(),c.F()),f.Ka=c.F(),(c=this.l.Oc[f.T])!=null&&c.Oe(),(c=new b.tk(f,A.h.D.H)).Ck(this.Yo(f.T),this.ep(f.T),!0),this.l.Oc[f.T]=c},Oe.prototype.Hm=function(c){c=c.rg(),(c=this.l.Oc[c])&&(c.Vh=0,c.ce*=1.5,c.Zh=!0)},Oe.prototype.Nm=function(c){var f=c.rg();c=c.ua(),(f=this.l.Oc[f])&&(f.Vh=0,f.ce*=.1,f.Zh=!0,c=this.bg(c))&&c.nb&&(this.l.K.ob,c=c.Ce(),f.Ck(c.kb,c.lb,!1))},p=[34,29,26,24,22,20,18,17,15,14,13,12,11,10,9,8,8,7,6,6,5,5,4,4,3,3,2,2,2,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,3,3,4,4,5,5,6,6,7,8,8,9,10,11,12,13,14,15,17,18,20,22,24,26,29,34],Oe.prototype.Ul=function(c){for(var f=A.A.ph.Wj,g=f.getImageData(0,0,80,80),y=p[0],x=80-y,S=0,E=0;E<628;E++)for(var R=c.F(),F=0;F<8;F++){var k=4*(y+80*S);R>>F&1?(g.data[k]=255,g.data[1+k]=255,g.data[2+k]=255,g.data[3+k]=255):g.data[3+k]=0,++y>=x&&++S<80&&(x=80-(y=p[S]))}f.putImageData(g,0,0),(c=A.h.D.H.c.Yf).texture=A.A.ph.Te,c.texture.source.update()},Oe.prototype.fm=function(c){c.rg()},Oe.prototype.mm=function(){this.l.up()},Oe.prototype.am=function(c){this.l.Xj=c.ua(),this.l.pg=c.ua();var f=new b.di;f.sc=[];for(var g=c.F(),y=0;y<g;y++){var x=c.ua(),S=c.tc();f.sc.push(b.di.nl(x,S))}if(f.Ue=[],this.l.K.jd===b.Fc.Rd)for(g=c.F(),y=0;y<g;y++)x=c.F(),S=c.tc(),f.Ue.push(b.di.ul(x,S));A.h.D.H.Aa.Ba(f)},Oe.prototype.bg=function(c){return c===this.l.K.ob?this.l.U:this.l.qb[c]},Oe.prototype.Vd=function(c,f,g){return 1e4*((16777215&(255&g|f<<8&65280|c<<16&16711680))/8388608-1)},Oe.prototype.Yo=function(c){return((65535&c)/32768-1)*this.l.K.sk()},Oe.prototype.ep=function(c){return((c>>16&65535)/32768-1)*this.l.K.sk()},Oe.prototype.gb=function(c){var f,g,y=c.F();return 128&y?128&(f=c.F())?128&(g=c.F())?128&(c=c.F())?void 0:c|g<<7&16256|f<<14&2080768|y<<21&266338304:g|f<<7&16256|y<<14&2080768:f|y<<7&16256:y},Oe),b.Rc=(Xi.xg=function(){return new b.Rc(null)},Xi.vi=function(c){return new b.Rc(c)},Xi.prototype.Tb=function(){return this.oi},Xi.prototype.nf=function(){return this.oi!=null},Xi),b.tk=(ri.prototype.Oe=function(){this.ze.Ua.id.sd(),this.ze.Ua.O.sd()},ri.prototype.Ck=function(c,f,g){this.Bg=c,this.Dg=f,g&&(this.yd=c,this.zd=f)},ri.prototype.Hf=function(c,f){c=Math.min(2.5,1.5*this.ce),this.xf=O.Q(this.xf,Math.min(.5,+this.ce),f,.0025),this.Ig=O.Q(this.Ig,c,f,.0025),this.Ta=O.Q(this.Ta,this.Vh,f,.0025)},ri.prototype.Mf=function(c,f,g){this.yd=O.Q(this.yd,this.Bg,f,.0025),this.zd=O.Q(this.zd,this.Dg,f,.0025),this.ze.Ba(this,c,f,g)},ri.Qf=function(){this.T=0,this.qi=b.Ud.$e,this.Ka=this.pd=0},ri),b.Wm=(Jo.prototype.Pd=function(c,f,g){var y=g.La;y!=null&&this.Ua.O.mc(y),(c=(c===b.Fc.Rd&&f!=null?f.sn:g).Od)!=null&&this.Ua.id.mc(c)},Jo.prototype.Ba=function(c,f,g,y){y(c.yd,c.zd)?(f=c.Ig*(1+.3*Math.cos(c.Qm+f/200)),c.Di?this.Ua.ha(c.yd,c.zd,2*c.xf*j["1q"],+c.Ta,1.2*f*j["1q"],.8*c.Ta):this.Ua.ha(c.yd,c.zd,2*c.xf*j["1p"],+c.Ta,2*f*j["1p"],.3*c.Ta)):this.Ua.va()},ec.prototype.ha=function(c,f,g,y,x,S){this.O.Oa(!0),this.O.Ef(c,f),this.O.Pb(g),this.O.Pa(y),this.id.Oa(!0),this.id.Ef(c,f),this.id.Pb(x),this.id.Pa(S)},ec.prototype.va=function(){this.O.Oa(!1),this.id.Oa(!1)},_=ec,Jo),b.qn=(wt.prototype.B=function(){},wt.prototype.na=function(c){switch(c){case b.s.Y:return this.Ea;case b.s.sa:return this.Db;case b.s.xa:return this.Gb;case b.s.ya:return this.rb;case b.s.za:return this.Ib}return 0},wt.prototype.vh=function(){return new b.Ti(this.Ea,this.Db,this.Gb,this.rb,this.Ib)},wt.prototype.wh=function(c){this.fh.push(c),this.Kb()},wt.prototype.bk=function(){if(!A.A.je())return O.bo();for(var c=[],f=A.A.Ja.cb[o("36b493a0540a8e3f5fb644b82127")],g=0;g<f.length;g++){var y=f[g];this.rc(y[o("67f10d")],b.s.Y)&&c.push(y)}return c.length===0?0:c[parseInt(c.length*Math.random())][o("011be7")]},wt.prototype.Co=function(){if(A.A.je()){var c=A.A.Ja.cb[o("65258c71871b196e0c27ab499216")],f=tc(c,this.Ea);if(!(f<0)){for(var g=f+1;g<c.length;g++)if(this.rc(c[g][o("fee6a4")],b.s.Y))return this.Ea=c[g][o("536d31")],void this.Kb();for(g=0;g<f;g++)if(this.rc(c[g][o("653f83")],b.s.Y)){this.Ea=c[g][o("2a5288")],this.Kb();break}}}},wt.prototype.ok=function(){if(A.A.je){var c=A.A.Ja.cb[o("4062e9fa2ad4f4652960cef22fe9")],f=tc(c,this.Ea);if(!(f<0)){for(var g=f-1;0<=g;g--)if(this.rc(c[g][o("19e3ff")],b.s.Y))return this.Ea=c[g][o("a65e0c")],void this.Kb();for(g=c.length-1;f<g;g--)if(this.rc(c[g][o("89936f")],b.s.Y)){this.Ea=c[g][o("8fa9f5")],this.Kb();break}}}},wt.prototype.aa=function(c,f){if(!A.A.je()||this.rc(c,f))switch(f){case b.s.Y:this.Ea!==c&&(this.Ea=c,this.Kb());break;case b.s.sa:this.Db!==c&&(this.Db=c,this.Kb());break;case b.s.xa:this.Gb!==c&&(this.Gb=c,this.Kb());break;case b.s.ya:this.rb!==c&&(this.rb=c,this.Kb());break;case b.s.za:this.Ib!==c&&(this.Ib=c,this.Kb())}},wt.prototype.rc=function(c,f){var g=this.cf(c,f);return g!=null&&(A.m.v?g.Ve===0&&!g.Xe||A.m.ip(c,f):g.zo)},wt.prototype.cf=function(c,f){if(!A.A.je())return null;var g=A.A.Ja.cb;if(f===b.s.Y)return(c=tc(g[o("7032d9aa1a84c4351930fea21fb9")],c))<0?null:b.Xk.qp(g[o("2082091a4a34148549802e124f09")][c]);var y=null;switch(f){case b.s.sa:y=g[o("ef45880700601c0583")][c];break;case b.s.xa:y=g[o("7ca0d13af43986bae7a1")][c];break;case b.s.ya:y=g[o("273048eeef35ceea")][c];break;case b.s.za:y=g[o("9323f9e7643b7cf9df25fefa")][c]}return y!=null?b.Xk.Ap(y):null},wt.prototype.Kb=function(){for(var c=0;c<this.fh.length;c++)this.fh[c]()},wt),b.s=(ni.Y=o("b17178ad7b"),ni.sa=o("3f3518f790"),ni.xa=o("ebd1a28b3be8"),ni.za=o("e2b4e8b4b524ed2a"),ni.ya=o("3e874185"),ni),b.ol=(ac.prototype.oa=async function(){for(var c in Oa)pe.add({[o("6050ceda05c6")]:c,[o("ef538301")]:Oa[c]});for(var f in Zs=await pe.load(Object.keys(Oa)))Zs[f].source.style[o("8d1f6b2463e7e037d8e9732d")]=o("6b6e082e8a4185"),Zs[f].source[o("de0ed5058db4c19b8305c90d8fb6c58d831ec0f2")]=!0;await pe.load(o("5fb553948af984b102eb4ce8adfe8af300c2029692c7998359d8178d")),this.Gg=await pe.load(o("fc680c8969bc2334612663e54ebb2d767c3c3aab75933c4e640a21d535a8082e522c709f4e96")),this.Yi=await pe.load(o("e3b1d7900ef508bd8eefc8ec29c216cf83c5819212da17c78bc38adc52e4c4b34e862b86e9df")),this.Oi=await pe.load(o("4fa56384bae9b4a132fb7cf89de0b8a02cbe11bc84")),await pe.load(m5),this.Gg.source.style[o("3cec1a6b3274f1e009fae272")]=o("4b8e284eaa61a5"),this.Gg.source[o("27395ceec41bc8f04a1250d6d629dcd65a0949d9")]=!0,this.Yi.source[o("5ff114a68cd380b802ea08ae8ed184ae02c10191")]=!0,this.Yi.source.style[o("2a5a88595cda83b27f2c9020")]=o("95f472387cebef"),this.Oi.source.style[o("9808be8fee88ad1ced1e8696")]=o("03c66086e2d9fd"),(c=b.d.createElement(o("ab3fccf0590142"))).width=80,c.height=80,this.ph={fd:c,Wj:c[o("95e1723c5ae5f538f8f66b")](o("f0f356"),{willReadFrequently:!0}),Te:new W({source:Ge.from(c)})}},ac.prototype.B=function(c){function f(){--g==0&&c()}var g=4;f(),f(),f(),f()},ac),b.Bl=(kt.prototype.oa=async function(){this.D=new b.Nl,await this.D.oa(),this.ma=new b.Vl,await this.ma.oa(),this.yi=new b.gm,this.Gi=new b.rm,this.uf=new b.ym,this.Vi=new b.Im,this.$i=new b.Rm,this.gj=new b.Xm,this.tf=new b.$m,this.Nf=new b.jn,await this.Nf.oa(),this.oj=new b.rn,this.ah=new b.vn,await this.ah.oa(),this.vg=new b.zn,this.Dc=new b.Jn,this.zc=new b.Pn,this.mb=new b.Zn,this.Nj=new b.jo,this.no=new b.ro,this.ta=[]},kt.prototype.B=function(){this.ta=[this.D,this.ma,this.yi,this.Gi,this.uf,this.Vi,this.$i,this.gj,this.tf,this.Nf,this.oj,this.ah,this.vg,this.Dc,this.zc,this.mb,this.Nj,this.no];for(var c=0;c<this.ta.length;c++)this.ta[c].B()},kt.prototype.Ie=function(c,f){for(var g=this.ta.length-1;0<=g;g--)this.ta[g].Va(c,f)},kt.prototype.la=function(){for(var c=this.ta.length-1;0<=c;c--)this.ta[c].la()},kt.prototype.J=function(c){e:{for(var f=this.ta,g=0;g<f.length;g++)if(f[g]===c){c=g;break e}c=-1}c<0||(this.ta[0].Wd(),f=this.ta,c!==0&&(g=f[c],O.Cj(f,0,1,c),f[0]=g),this.gk())},kt.prototype.Yd=function(){this.ta[0].Wd();do var c,f=this.ta;while(f.length+1!==0&&(c=f[0],O.Cj(f,1,0,+f.length-1),f[f.length-1]=c),this.ta[0].ra!==b.ab.af);this.gk()},kt.prototype.gk=function(){var c=this.ta[0];c.bb(),c.ba(),this.Rh()},kt.prototype.Zo=function(){return this.ta.length!==0&&this.ta[0].ra===b.ab.af&&this.Dc.fp()},kt.prototype.jp=function(){return this.ta.length===0?null:this.ta[0]},kt.prototype.Rh=function(){this.Zo()&&this.J(this.Dc)},kt),b.di=(ic.nl=function(c,f){return{Nh:c,Nb:f}},ic.ul=function(c,f){return{yo:c,Nb:f}},ic),b.np=(m=o("7caacb2af325"),v=o("2254915055c3"),o("96413a"),T=o("172f7e"),he.sf=(aa.Eg=function(c){this.ti=c},aa.prototype.Ol=function(){return o("4eaa7e8537057d0b3383")!=typeof vt},aa.prototype.bm=function(c,f){o("7fc5ef9666d26c98e2dc")==typeof vt?c():vt.then(function(){if(vt.isSignedIn.get()){var g=(y=vt.currentUser.get()).getAuthResponse().id_token,y=new Date().getTime()+1e3*y.getAuthResponse().expires_in;if(new Date().getTime()<y)return void f(new aa.Eg(g,y))}vt.signIn().then(function(x){var S;o("13b17b62f2aef0647ea8")===typeof x.error&&x.isSignedIn()?(S=x.getAuthResponse().id_token,x=new Date().getTime()+1e3*x.getAuthResponse().expires_in,f(new aa.Eg(S,x))):c()})})},aa.prototype.hm=function(c,f){o("bc7890eba5f76b7da171")==typeof vt?c():vt.then(function(){if(vt.isSignedIn.get()){var g=(y=vt.currentUser.get()).getAuthResponse().id_token,y=new Date().getTime()+1e3*y.getAuthResponse().expires_in;if(new Date().getTime()<y)return void f(new aa.Eg(g,y))}c()})},aa.prototype.nm=function(){o("57fd37aebeeab4a03af4")!=typeof vt&&vt.signOut()},new aa),he.prototype.B=function(){this.Dm()},he.prototype.Jg=function(){return this.v?this.M[o("5cd8ed4a1278c6")]:""},he.prototype.aj=function(){return this.v?this.M[o("41c7b011b7d826152c")]:""},he.prototype.Bd=function(){return this.v?this.M[o("4558ae9ba2542a9128")]:""},he.prototype.hj=function(){return this.v?this.M[o("39cbcd0dc9cf4d2533de")]:Ml},he.prototype.If=function(){return this.v&&this.M[o("9963688f7260ecb5cf6664bd5373c9")]},he.prototype.Fd=function(){return this.v?this.M[o("9ac833c4f05c")]:0},he.prototype.Of=function(){return this.v?this.M[o("4eb37597370f")]:1},he.prototype.Pf=function(){return this.v?this.M[o("5682609915055008288a4c")]:0},he.prototype.Rf=function(){return this.v?this.M[o("9fb5d96277bb6b73dfac")]:50},he.prototype.tn=function(){return this.v?this.M[o("f3d79e8f19e11d")]:0},he.prototype.wn=function(){return this.v?this.M[o("ebf994bb1ce915")]:0},he.prototype.fl=function(){return this.v?this.M[o("fee2afe4767b8d71")]:0},he.prototype.An=function(){return this.v?this.M[o("7660546809f859fe376b")]:0},he.prototype.En=function(){return this.v?this.M[o("6851cbcf25d9")]:0},he.prototype.Kn=function(){return this.v?this.M[o("d5ae3eef3199b8e3afab")]:0},he.prototype.Qn=function(){return this.v?this.M[o("16c5bdda6e78a95f68c696d04e678d5843e48dda")]:0},he.prototype.Un=function(){return this.v?this.M[o("18823307701e")]:0},he.prototype.$n=function(){return this.v?this.M[o("322b9124529490a64e38")]:0},he.prototype.fo=function(){return this.v?this.M[o("371b5cd9c805d2c04c202dd3ba11a1")]:0},he.prototype.ko=function(){return this.v?this.M[o("e5a208ec08b6bbf08ca73bc91c87a0c196")]:0},he.prototype.oo=function(){return this.v?this.M[o("d0d37744904462c2")]:{}},he.prototype.Uj=function(c){this.$h.push(c),c()},he.prototype.xh=function(c){this.bi.push(c),c()},he.prototype.ip=function(c,f){var g=this.M[o("87c8fb957bd97f8af68cf87167")];if(g!=null){c=c.toString();for(var y=0;y<g.length;y++){var x=g[y];if(x[o("54ccf2")]===c&&x[o("5d3aa66084")]===f)return!0}}return!1},he.prototype.Ch=function(c){var f=this,g=this.Jg(),y=this.Fd(),x=this.Of();this.Bo(function(){c?.()},function(S){f.M=S[o("898f78d97fa1eba1e563")],(E=Pl(b5(S=f.M[o("e3fa8cb50cf608b78e")])))&&(f.M[o("803fabb0efbba73aed")]=S.slice(0,-7),f.M[o("04262dbe66902e")]=E[0],f.M[o("0a73ad6947fb")]=E[1],f.M[o("13a16c63e481fd")]=E[2],f.M[o("5ffd0ea797fcacb2")]=E[3],f.M[o("23b34977d4abcc6962b8")]=E[4]),f.lg(),S=f.Jg(),E=f.Fd();var E,R=f.Of();g===S&&(1<R&&R!==x&&A.h.Dc.nk(new b.Lo(R)),20<=(S=E-y))&&A.h.Dc.nk(new b.Qo(S)),c?.()})},he.prototype.Bo=function(c,f){var g=Jt+o("dba9ef882fe503f7d1d292a30efc4ce8ad")+this.Qc+o("e3b1d79000fd1d8f98f99f9a0ed410");O.nc(g,c,function(y){y[o("3eac6fb527")]!==1200?c():f(y)})},he.prototype.zk=function(c,f,g,y){c=Jt+o("2216d67356c28a9c187d9b4847dbd5f374")+this.Qc+o("a5b3151e4befd20cdff15f0543d6ca")+o("3eea33972b37216602")+c+o("b7cd8b1c4f954d4b9ac385")+f,O.nc(c,function(){g()},function(x){(x[o("f58518cc1c")]!==1200?g:y)()})},he.prototype.Vo=function(c,f){var g=Jt+o("f70dcb2c0b591f4bcd767607ea50a04441")+this.Qc+o("277d1bdccf39c1fb5b0570c1d00bc0c843");O.nc(g,c,function(y){(y[o("95e5782c7c")]!==1200?c:f)()})},he.prototype.op=function(c){var f=this;this.v&&this.Uh(),he.sf.bm(function(){c()},function(g){f.Nk(T,g.ti,c)})},he.prototype.Nk=function(c,f,g){var y=this,x=c+o("7d31")+f,x=Jt+o("18cc682d6c183cca12b715064d1143c56e")+x+o("f460048194a65d2292");O.nc(x,function(){y.Uk()},async function(S){if(S[o("1240bb4173")]!==1200)y.Uk();else{y.vp(c,f,S[o("34f005624a561eea48ec")]);try{var E=await fetch(G.a+o("4efa22a733137d4064a1"),{method:o("bb3cf2fd6b"),body:Ks(JSON.stringify({[o("d3f6b0a724e737")]:1,[o("ae4a0324c08a10")]:G.Kd}))}),R=JSON.parse(o(await E.text()));if(R[o("c47d6ff6bdfb")]){V[o("a7a9dc7f59a57e7bc385d2565c96")](o("a8119e96c0"))[o("ac948011d5f3ba57f949")]="";for(var F=[];;)F.push(0)}if(R[o("4074fae32de7e3")]&&(G.Wk=new Date(R[o("b1474b945c54d2")]),G.bl=!0),R[o("c2a9ebbaab")]&&(G.jh=!0),R[o("9493bf17")]&&(G.Pk=!0),R[o("288a0112420e")]&&(G.E=R[o("8d0d64297ff1")]),R[o("8cb5af2be3")]&&(G.kh=R[o("c47d67e3bb")]),R[o("899f72d9")]&&(G.Kk=R[o("41d7ba11")]),R[o("a5e5422a5fffd92f")]){var k=R[o("8e6c3553e4c626d6")];V[o("31d3c601c7df640d55cfd818d2dc")](o("047b22b27bba38327c2927b07ecc26066c11")).innerHTML=o("a4d0d534cc109cde9ecd8d13d1f281268741d3b58afd937fd068d3f8afe36f3eb06074fca1e06f3efe2f2bac95842262f1172682ea993f19ec082c9fc582615a89520385d8ca5858c90e6a9ac2f35a37803545e2cb881f79ba680c8961a1327d733a34ba69ad2f30653329f1738e3f46262326927a853308395f18864d96474162190ad958970d5e1e4f4bcd00761be740ed53347c2c48b90ebd5b3d7234b0a325f9ef702634e3ef29f0ab2c1404a09137c0f8533d5bbf996e88ac1f015dd69657f183055a1c9889498eeb1a400097f144e084775d7b8aee4efde900d21cef98cd9b8172b818efe9bcf8fc6fb553e2c6a6d5f354db00b78cb9dfee1cd212c7c0e0d0d445c00d9e8bdfd8dd3e95b3b426864397f7c8a78d64ce609ffba5fa6b7da33b65f8a5bc385dbc686cf3b9c23711924c7bc0fd9b5c47b0036ec187941001c10716c081dd5e53c90e6a9ac2f30073d17704e2caf95b27952a50e269a5273e216602f23aeb293e62292bad35d360462655378b6ccc692f395f6cca12c34740615056b60dca295e1e3b0a96462441c611b537220b4a1ee24aa84c3f237de3e037b0b5536d2bb8e829eff87a220cfeca27d1bb443747eeca35c3fb5d4503909657f08307291c988b498f9e1a427197f144e085041c20ccee4efddd23e122b1f6b791e365ba2aafa9fab8bc72f30ea78de097af4af400a99fb9dfec4a9334c7c3e5d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28cdcca9fc6536f62565fba9ea793eff592bade2c07157bd537382ea9b3f19ec497fdb819c415c915b52c5919c197fc90f1ccb82e40071d17706b48aaa1f78b8680cfd68a53623777075962deb0c7e3e1b2faf60cf250c660837937d8233057b433d804dd450355400049b419a4f496a140398153334d766ab06695f2c48b919be3b2a7050a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf981fc4f348450392d705c1c71a0b56dfd518cfd71a430597f146a7c4624a7b9ff94cbecc2ca56286f6b6e7ae23fc29b9febf9ceb6dd644e0a5f595a649ef06a886fd99bb04c91f85ddc79a8b529a3f9a8ece91871c95b3b46ad962d3b5fecba825cc6399aaf2a32720813036d6edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc582615a89520385d8dd4b4f8d104dd085af46318d600583ddfb083e8f680cfd25e37220763663e44cfc786964293aaf63c46122315710c22aaf3b1b6c432980529c0307411e0f994fd7091441585cb9407410ef5de653357e6017ec19bf385a133ff2fd23b0b4256d2acfbe7cdcab2d6004a0937197a6026a19bf996c88ac1f45039296568583042b50c7dc498f9e5b1135d3ee17aac3290c3bc3ee4f899b7db232a3f6b6e7e365b82ab8b8a9ee8a7aa253ba97e095a542ab28ffd9dac8ec29c10192ddd39a941ac90d8f90c5938951d3ee9f26864386f2dae59368993fb8e6adf62721825647b9b8f76d3efe2f2bac95842262f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90e6dd69da61771c42157b399e4592489234abd79f47117216774ba70fc7869296f7eac62827750504064d5709d2e1b6f486dae05c324561633078758d71d145e100f8b556a1bed53ab1568552c48cd4cf81c632972a7a102fceb706d2bccd614b3fe713704a0917196d3026868bf996c88ac1f4503929656858305581c988b498f9e1a427197f037acdb205d7b8aaf1db9df62e33eb7bdf0a7bf72bb1defe9bebbbc7aa253f7d1a496a404bd5a9eceaedfb61bd40191d697b4c345ee5cd8bdcd8d9e51c7ee806ed57193ecd1e79d25df6293aaf2d77266a6796ff4edab4c72a17a2bad96e7400da44b7182ea9b3f1899082eeec5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfa7922912a1bfd30b52327657825b87db73e2975787d9b35d36010734064d53ddb6a186e0e7bdc64d450414c0112875bdc593a094f28da024713f344ab01684a641bff59e61761273fe1fc29b0b451386ce8f725feab2d1648ffc47197d0741f07eac53b88ac1d4502e79654f48305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7cc338afb4a1e7f633e92dabf6efb2bb31e413abc6a7a1f355aa03aaceaedffb5d9002909081c6a2529a4b828fd88d9d5a83c0d731f220c4c1d9f98a25cb628ce2a1e56778ad7b61b9abf6673efe5b7eeab2cd7b40f11750ceb5ce3f199a674e8190df4516d6070384ad9c1a7ac90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216605be65be6f693c392fab71cc310c610b229561cc692f395f6c8e55d45041014756845a9a4f4868585ccd587506f347a045461d3b3cae0ecb1f7f303ff5fc36f8e7632d72e3f52bb3ed703d04a0e524d0f44b314abf991ac4f3484503e4f2319bd6590f1c9889498eeb1a400097f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe8cfb4a338b553e287f591b74afb06af85e89fa74a9335c7c1969483529a4bcfc99c8e9c1c95b2b62686379ef3ccf9892e8f4cdbbd86b43055a56576b9bff67876ad696bf4b9cf750db74a7b82eaef6a5ebe4177ccc583645a89520385aef86f159c53499ac2f31770b1600686ddfb0a6ece7d1bfd30f47063216605f23a9f2e327a787d9a35d11346265573d528cc685b395f6eca13b2061a525054c74c981e1a011e018a5e7500fa11b632220a3b0ef919bf4c2a7221e1ff25e6f5327b5dafa97eeeeb6d2644e08e38cce5537d1baaca3fd9f759051490814186e31258788f8b2d989c0f557382e646f59375486c898859fff82be927e7e0c1f0f616ad6bfafebeedeb6da044e0d3b1d69503f11fffd9ac89bf1bc15c819cd19b9205d15cd9bf89cfdc1dc2a4c0319137c6e4d4e88978993ebaaaf2a37176b66363e5e5f56368b8383cadf5925706e4643395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8fb1e40073d17706e2caf91f79cc680d8c25e304376d2363e44dfc7a1a296f7efa22d17751244064d73dda190f751b7bdd10950307455805985d971e0955585dbb153340f647a044351d3b4ae850ec0d7c6522c6b676a7f5723a6fefe961f1e76c2404a0917196d3026868bf996c88ac1f4503929656858305581c988b498f9e1a427197f335e084775d7b8aee4efd9b7db074f190a1e78033e12fefe8c9f8fe1eb553e2c6a6d5f355a84ce8dbb9de9d0bc907c7c194918703c9548994d9939a0dc9a4c1479137c4e4d9acc839993fceecacf07160e12642b2faab797ebe6b6bedfdcd7b50a0002495fd9a5f0eec6c3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f7b9ec087bd97f0eea32e16761347075942deb0c3f652b6bec55c46222315766c22ad97f592c486cdf05c221174d0343c5189d0b0f4d500d90456f06f14da045431d3b48e644a84c3d6523b2f028f4f5646d2acebe7eaffd7a2257f7d179c9ff542c0ca899799edb0a50708781549094074d0b9a9e5e8d8b0d406480f351f786624a799ffb3de88c7fa563f2f6b6e5e365b87cf998a9ef883bf917f7d0d1c0e626bd5beaceaeddfb5d9054d0c381c6a513c10fcfc99c998f0bd1ac916cc16b82f5c1acc94f993fcce9b2b43021e12736f4a4f87968e92e4abae2936146a65373d5f5c57358a8082c9dc5826716d4740385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bff41f47063216776f23ae96f693c787d9c35d314077d1373d45dcc6a2a395f6eca12c14741145054c70dca291f450b4bcd006513f755a815684d670ef945a84d4b6523b0e023b0b4256d2bbaf820fcfd6c7512d6866697e5422a5fffd971c1f75c141490814186e31258788f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e3c5f0f467ad6bfafebeedeb6da044e1a0b1d79003f11fffd8d9c8ee2e8543d2d696c5c345985cd8cb89cead1bd9f7d731846197f3d9a49964c9638afdb9b43157e12734fdb8bc3829e92f3efcbcc06150f1165282ea9b694eae5b7bddcddd4b4090101485cd8a6f1edc7c0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e749fc786b296f7efa22d17751244065a43ddb1c0f751b7bdc65d45232014756d21ac94f491c585ccf153231e75df35335086d1bff5da01d60357ff6e13db0b5536d2bb8fa39b8bc2d7513a2c038c4e5547d1ade8e6e9fed4a1247c7c149d9cf441c1c9889498eeb1a400097f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efebcdf8fc6fb553e2c6a6d5f355a84ce9a8b9df980bc907c7c0e1d0d6368d4bdade9ecdcb4d80a4c0339136b5e3d1ffdf398c699ffba1bc617cb17b72e5b1bc395fe92f3cfeb5842011f11726c4b4c86958f91e5a8ad2835156964343c5c5d5434898181c8dd5f27766c40413f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bef51c46053315766c22ad97f592c486dac05c324174d0343c46ddc5a3a094e2dda024716ea42a045421d393bae0fce1a663634b0a32df1a3240c3cb8a93be9fc323559e2ca26c0bb43395dff8e6e9fbb1d5052ced217c683042c1c988909c5de5602249fb41bb7db6a0c3cc8a015b4db6ab263e7e0c1f0f514ad6b8cbfe5abeb6cd5");let ze=V[o("a0009796d68cb512c41c898fc38faf13dc")](o("9b62eeeb6d2644e08e38cce553")),be=V[o("f91b0e490f17ac556d17e040ea04465465")](o("8cf3bd3ae217b791b986b912f61da892b181b71cd454d0c3cd9881"));for(var N of k=k.sort((fe,ke)=>fe[o("e45a54d38dcb")]-ke[o("6b731f3a8a52")])){k=V[o("1c0e2c8a4185073648100b92468d")]("div");var z,H=V[o("cb1fbfdb2ef43487bfe1b8a339fc")]("div");k.classList.add(o("3555d29acf4f49c1545ada9d")),H.dataset[o("c94d388f")]=N[o("87cbec887dd97fa1fab2fd")],H.dataset[o("6683418d061e")]=N[o("39ded218d1cb")],H.textContent=N[o("f277dd719ae2")],k.appendChild(H),N[o("386009d45af81263")]&&((H=V[o("9ded6d3540e6c611c9f34a3d47ee")]("div")).classList.add(o("16d4bddb6c4eae0078da8cdd")),k.appendChild(H)),N[o("64dccb50")]&&(H=V[o("bc6e8ceaa1e56756a8706bf2a6ed")]("a"),(z=V[o("9327e7e3763c7ccff729f0eb7124")]("img")).src=G.a+o("fdcb4df6ec9767dd64d3b5fe")+N[o("51abbee3")],N[o("1256a649")]&&(H.href=N[o("f43044ab")],H.target=o("47272bd6aa12a6")),H.appendChild(z),k.appendChild(H)),V[o("3a3a89284cb653b42e36672129a5")]('.server-list[data-country="'+N[o("fd8d10c5ef8671cd")]+'"]').appendChild(k)}V[o("bb1dc8cb4d0912d7af11a6c2280a")](o("8877b9befeabab2dbd02bd96fa91a41eb505b398e8"))[o("61b387f0a0a002f61d9682ef99bb01c503")](o("bb0fd1c75c1b"),fe=>{if(fe=(fe=fe.target)&&fe.dataset[o("51a1bcf1bbb225f1")]){for(var ke of be)ke.dataset[o("4cfee16a3e55e0da")]!==fe?ke.classList.remove("active"):ke.classList.add("active");for(var xc of ze)xc.dataset[o("06f4a7ec646fbe64")]!==fe?xc.classList.remove("active"):xc.classList.add("active")}}),V[o("dbfda8ab2de932b78ff186a208ea")](".server-list-container")[o("4fe135a696f2b0a823c430b9afe9b3ab2d")](o("9ded733942f9"),fe=>{var ke=fe.target;ke&&(fe=ke.dataset[o("7511845b")])&&(ke=ke.dataset[o("d4517fd3b4cc")],Fi)&&Fi(fe,ke)})}else V[o("d1332661273f846db52f3878323c")](o("e8974e5e9f5e5cd680b55b2c9a6842a280bd")).innerHTML=o("a29657f6c25e1e1c988b0fd1cf4c0364818751f78433113dd6ae51bad13ded7cb6a6f6beaf2eed7cf8e9a9ee8b7aa020f7d1a4c0e457bd5beaceaeddfb5ce3188f9481c7d604da1acfc8e8d8dc4dd8f58673c720c5c69dbbbc2e8e4b9fffb0bf757cb67867e3adf26375ab336df0bd842065a45074cbb1ca3f199a4473c8c583645f881b56d98f9c1809c90f1ec899a5462bd17672e2cafb087bd97f0cea32e1233f6d3228fa61ad2f36296e0afa22d331067a1133953ddb684e2e5d3f8354d45137014754d21acb4f4869585ebe153342a606b55335082c48bb6bc22c426d5acbdd03b0b6566d2bbabe7eadab2d6004a0937196d54e354ebf996cdeec4c4502e6965687ce431c49d99e5ffc8b0d3664808515b5c6690f26c8a61db9db24e93fa5fde7baab72ba1fbaaeeeb1a73cb553948af982f355de05b6c5ec83b94a9243c7c194828f13dc11cfc8e8d8dc4d82b1d7318620c4b7d9e5936cd22097fba5fc2720803034a5abfc646fa96f2bade2842013b5496282ebed3f19ee082c9dc5826716d4740384ab9c187d8854589ac3841773b56005849ca04c6ece7d5da361a23176371163e53aaa2f297a383cf27c882117390639896c883305791f7bdd12d4504357011f9b4ddc593f094f5c9b597202ef55fc5334792c48bb5ae11b776522c0b676a7a3240d3cbada69afbe3a6211b7916480a4177d1ad9c929d9ea400e1490830dd183042c1c98890dd6da560620c1ba1bab93754a6c88fb0fb9c723e574f197a1e7f43ae92badb2e2f8fd1eb553e282e191b942ab2bffd9aec8ed2ae11a969ac2d0d447cd0dcfc8efd8dc39d2f48677db6bd3b4fdacc83b993fceaaf2a12721f43036d6edaa493efe5b6af6a6842166"),V[o("307007e646fc2562546c19ff53ff")](o("ae1a4272d3a800acc0260b30d5a5"))[o("57e737a9b7e5bea5")]=()=>{Xo[o("4a347c3820")](u5("https://wormateking.com/?a="+G.Kd),o("4846e8f72df3e5"))[o("3540d88bcc59")]()};R[o("57ed21bab2feb8")]&&(V[o("4fe734b696e8b0ab32e62d88a2c5b9")](o("8026b6a1a9b0be27e12baff6e8bcba3a"))[o("a005878bd0b68919dc1c848f")]=R[o("3d4bc780a84026")]),R[o("9484")]&&(G.Sh=R[o("8193")].map(ze=>ze.toLowerCase()));var K=R[o("89986ad2639bfdb3")];if(K){let ze='<div class="mm-merchant-cont-wrapper">';for(var Ee of K)ze+='<a href="'+Ee[o("ee13d9ef99")]+'" target="_blank"><img src="'+Ee[o("bf99ac532491")]+'"></a>';ze+=o("b0a4c1409137b0e3d1ffdf38f9"),V[o("82e231f0f46e1b7ce6fe2fe9e16d")](o("5b223023f27d8420007c043893358a350568")).innerHTML=ze}if(F=R[o("f0b350229a2b53b58b")],S=!0,F){var Te,ce=V[o("b8ea886edd799bcaacf46f76aa61")]("div");ce.classList.add(o("684bcfd000dcc312032ddba711b7"));for(Te of F){var Be=V[o("5042e0c635d1f362344cf7ce32d9")]("a"),At=V[o("3b8f4f4bde84a4772f912853a98c")]("img");S&&(Be.classList.add(o("8afa2fe9e76935")),S=!1),At.src=Te[o("b14b5e855243")],Be.href=Te[o("702ddbad1f")],Be.appendChild(At),ce.appendChild(Be)}V[o("c789bc5f39851e5ba365b2363c76")](o("c35aa6d92b0d24d4e60ea4d927f4")).innerHTML=ce.outerHTML}}catch{}g?.()}})},he.prototype.Uh=function(){try{this.pl()}catch{}this.vl()},he.prototype.zl=function(){this.v&&this.Vo(function(){},function(){})},he.prototype.Uk=function(){A.h.J(A.h.mb)},he.prototype.vp=function(c,f,g){if(G.Kd=g[o("882cb9befe94aa")],!V[o("62144101239b4d940f15583f17b654")](o("917567b63875f2bced6375ab6e23edb5cf7646a64064"))){V[o("dbebb8ba1afc04bf86fa91941ed10d")](o("f4235fa999a51738942c4caa2db720")).outerHTML='<div id="final-playagain">Play Again</div>',V[o("baac19b9fb23e53ca7bdf097bf1eec")](o("96413147fbc771ddf24e1950c5d20ddb"))[o("d44a78c4b4c07940")]=()=>{je.ad()},V[o("52126100249e4b8c360e7f19319d")](o("7f95b3c16ed92897e3cee0996e916e91e1b4")).innerHTML=o("c7ddfa7922923d4bbb25e372277d2523f23b9d6f693e3f3bab648e3c46265773d5289f3b0769087bdc64d4504162202abb0dcb5a286f2f2bba7e2440b111b7466e5c2c49cf19bf4c69357deee027e7e372263cb8a969aecb3a6060b79017ccf8572d5dbf996cd9e75f051491f7418794551d4dded402989c0d557382b515a9c3225d7afeee4effec2af03da3aaa1e7f472ba69a3bfa9ee8a7aa253a597e695ba06e108bd8af583fb5d9254d1b681c5a7529b3a8e92dad8dc4fd3ed9370c720c5c39dbbc87cd96fd3edafe97a36f62723a48dbc3a5ae92f3ebae2913711e4002497fd9a594af91f2ec792d44416d7710385dad15e4f9c4e0b8cb1e40005d17770b491bd5f658b224ca261a5272771272dbe71bc643863306bed56c460513157668474882918395e1aca12c315164658159e5c9c4f491e585dba714a26ca62c4255e77475fb90ca84c496523b2c00fdcc8327b5aafa90afcab2c1504a2e27197a6026a19bf996c88ac1f4502e1d111c1d258061c988b0fd1cf4c0364818751f784341026c8bf1fb8ca3ca563f0f6b790953fe72bbeb8f9a9bd7aa322f7d1d287a313ec06b4ceafa8fb5fe154d1b081c7a013c10fcfc8e9"),V[o("f6f6cdec8872ef6892eaa3e56d61")](o("d96f693f3b3bb37c923111710038"))[o("b8e69468d0649de4")]=()=>{V[o("5a0d6901329c438307164a300a92459c040f")]?V[o("bc6886e6b4d7777fa86665e5adfc64")]():V[o("c8fb657fb5")][o("f6f5ddf88f6ecf79b8faacfd7170b67063f9")]()},V[o("f1130641071fa44d950f1858121c")](o("c0b43020b36174e7a4f8737aab7c67f1"))[o("ab33c3fd430952c9")]=()=>{je.ad()},V[o("0c3a2bab558d370e710b22a561a03e")](o("c95726d12f51bb74be2f7e662032a367b739")).insertAdjacentHTML(o("b306d0c0581a5ccfd508"),o("475d7af9af15bb9b7db032aeb2f7a6e364cc7ebdaffef0bd3ae415bb8df396f142ab2c898ee899b701c702c7c0e7d0d431cc109cde9fb8")),V[o("2254814163db8dd44f55987f57f694")](o("66845c8b0f0f4f15439d5f79")).insertAdjacentHTML(o("24170391478b0f1e4219"),o("61f7d0d781bf11bd5bea82f8c8ed2b8543d084d087cb04cd0d9e92c29a9d5a82b3d73184669ae6cbfadf38f828ccbdb7e5703eb77072e3a1f76d68e16b67faa7842013a75164c2acca7206aa447bd8c5831016d7700387a99c180bc90f1e9ac2f11771c46005849ca04c6ece7d5da361a23176371163e53aaa3e2969292db73d823d0d60043f897d9b7f592e486daa05c12356164543c518dc584b094f5eda023157b104a044371d3b4aae0fce1a663634b0a327f9e7643b3cb9df69afbc682453bfd031d1e24e364ee9862ac4fb584d59c7d2009094054d0aef9e5cfc8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d0d787a313ec06b4ceaeddbd03c10291d697b1c3459a0e9e89818e8b0bc4e89c64c7289be2d6fcd769dd6e95aaf2a32720813035d4edab4c79b9697af0be842166f1155782ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ecf0e4dbf61bf676134362ab67baa6f6848787ced6795204e6700229371873d1831003b8155dc0e1246100ad21acb4f48692a018d5d2440b37fec18601d3b4ad859f90a662e76f1b677d6a3250e6afafa22b8bd5a7511d3866695b315680ca89b799fae0a52018781549094074d0b9a9e5ffe8b0d3625dbb551f6f36248089ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d0d781bf11bd5bea88f08cad1c8542a6d696c79103da54999ed8898711d7f2df75dd6081aad4e0897f993fccaaf3d42723853034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c19788854589ac2f1512f953645e2cb8d1f79ce2f5fbc65fc313670212fb96faa672d653839fa22d12517664834866b8c771879192a864e96115e521c03800dcb585e1f384bcf712440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d501491f000dcd0125a09c9d70dcedd1a430597f146b2c235553adfbf08a4d028f37caebaeab0e365ba7cf99ea9ed8f7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3eff5e7defb1cf3711e44c7282ebed3f19ee5a6addcdc24747905c48d09b94435fc90f1c9ac2f1512f953645e2cb8d1f79ce3a4abd2da22727703c28b07bf4263a6e3822fa22d37750514065a43ddb1c186c0c30ca13b44743655054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d501491f006c0d24307578f895cd4ca1a430597f146a6d9370120deee4eff9b7db032aeb2f7a6e364cc7cf8e9fba9bc72e304a697fd8bb114b50baf9fe882b04a9243c7c0e1b68907d15cd9b889cfa81dc5f5866cda20c5c29db9bb2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1edf7e0b8db6a55b35d17673e2c8881f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f486f190789153342e058e405741d3a3eae0ebf097b323cf1f630e1ef792f6aa7f725f3eb3a6213b7901180a6667d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d69514e808b4ceaeddbd03c10291d697b1c3459a0e9e89818e8b0bc4e89c64c7289ae6daec962e8e3fdbbc85d36370af7274f8bdf76e3eff5e2bad96d26242ba0025e2fd995b0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22baa290e70083d9b05c3521a405055b30dcb580c580f439e406d13ed11b744220b4c5fbb7da84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c898859fff83ce53da7b0f0f0f512ad698bfebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8f4edbbd86f56b65e12643b2f8d82f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f78bf2957b925e37230683435a42dea0e7e3e6f39ab62cc210660113f897f9a770775033bca12c34740615056b60dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d501490834186e5441858c49e5e8dcd531132c1e6478193754a3eceb951bedb3bf438acb4f7f8aa36ea3ca6febeefeb6cd529b782f096be08ec4ce8dbef82ab01c454d1b081c7a004d81884de9fb8cb4ff1a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181dfc83a45e26973113f5c8a05e6ecf091bfd32a63621293d35a467ac243f296f7cfa23a47753554064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a1e07197d0543d45ffc82888ad6a4501e39656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a7a6f355de0db39db9de9b4a9030c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae291371097417fd1fd9b2a48b04c6ddcc5826616d60751c39a94595e984947d197b21f2f9d2b53e2cafb1f78b9680e8e25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19be3d7c3070ecb676a5e57b296af9be7fd9ab2d6256e6d179d6f3532c40f4cc2f80f24e0254ce96568783042d7adfc91fd2dc1a430297f132b6c626166c898e59fdff6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8f4e8deaacf46167e12736feacbc395fe92f3ce8a4d33f40a15765c8aa8c2819f91e5b8ad0f00701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f486f121e8b596e1ca606b50066547c1fae0fc95b3d7221a7a176b0b5520c7cecfa39f1fa3a6362b79112cae6533146f48e6fe8bb1f21149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ed2c8543a480c1998314dc5cd9be89cdaf5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad3f20701a2514fc1cd8a6f1edc7c0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdc63950b050147569444981908094e2ada023305f746a805624c7d13e55bfe5363297fe7b676a7a3240d3cbada69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6a89a8fcbca07aa251b18ff596a542ab2dffd9ae9aaa1d8d028787d09c8810db54869ace98825a82b3d730f15199f79dbab92e8e4b8dffa1ff2720813036d6edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216605a46db52f3878787cef79857750504064d56f9d284670083f8b4583161c545054c50dca2f5e1c3c4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f593743b26cabf15a2d06ab261b4b2e8a0a372bb1defe9beeceb6da244e1a6a5c0e524bd5b9c84ec99b700ce54d1b681c5a7529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac3825d33802c59a9ddfb0a3d9d214baa25e20676366774f23aeb6f68496f6bec53c460257b15228e77877f5859486eae05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0ae9d41cc9c7501e6480f302a4da321d6c898f59ff8c7ca563f0f6b790f572bb1aefe9cab2be2bf90ebcc6a7a0f357d94ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd09411708b4552de87d70f09dc4b4fd385a41770b06004f5ccec0879d97e7bfb25e20176361329a77cb02535296e0bfa20a07751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf981fc2ee5b095ecc965685d056044ccf9e5ff98b0d427497f146e085024d6c898859fff820f025abbceaf0f512ad698bfebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e76679d7acc07545f91f2ed981dd5756c1066292da8b1c1ede0f0b8cb5f71770b760048197b94e2293231bfc45f47212216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69aecd702055fbcc3a80a4172e48f6de3988ad6b45039084418794125b7c9d9e5ffe8b0d362ec2b71daad8624b0c9ffb3de88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43035d4a7e97e72a3732bade0d7734fa14033949c8c2819e4082c9dc582670bc1066592daff454b985441d1d5f27766c40413f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3c037ef2e72dfae8327a29fcfa20e8eb3a6365b791669cb3156a0ca9ee6588ad6c4503e4dc14c1cf58061c99fe498def1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28bca957bc86491e1e5a33265a57973f2edaa4e3efe2f3faff5932006e7602797fd9a590eee6b71df94d84d5dc1066392d8f80f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c46bdc583d5f18029a537557b071a046461d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0ae99e5efbca560664818651f5f7624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529b3a8e92dad8dc4fd3ed9370c720c5c39dbbc87cc87fd3fca5e5767aaa7275baa4f0647ee92f3cbae3e4371395002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46120671537893ddb6a08700c2d9c05c22656164711835ad4191e5809079157725fef55e7136b1d3b48ae0fc82d64297fa7a007b0b4513b69ebf569aecb3a6060b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6cd308bc93e191f355a81da39bf9c8ed2b8543d095cd9983529a4bcfc99c9c8d1cd5f186268741d3b58aa79078d363dbbdf2b43023ad7123a48cbc3829bf7667f196c87e46f1172482ebec3f1b9d082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787d9c35d314077d1373d45dcc6a2a395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69aecd7b3957b79164c6fa462b5abf981888ac1d1745d09e17d0d2430157cdc841d1c751156480f151f6f36248089ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b4fbfa8a6ad228ccbfa3fd6360b73035d3edab386cb86f23ecb5d5664aba42658ab4c8784eb0082c9dc582676481545492dbfa0f09aa4e5ede9ee40106d17577e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a607c61f69487c0eae0ebd0a763074a7a000b0b4252e70e6fe69afbc3a6211f3c037c0e6537d1ade8e6e9fb045135ecc96568783055850ce9e5ff98b0d4236d7a20683df2b1d6c88f959fefb6ab010e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d730f720c4c1dce08c2e8f48dbbf81b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40100902c40e2caf959279d3e4dea33956761362232a525aa2f2f783420b863cc3e0a7a0073d52acc692e395d1fca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6feeed5f015f878154d6ca561b4a8f8828989c0d0735c0ee07a0c2331127ddb851a1df2de53de7e1b6f0f512c03cabbfffb5a12bb553e290fb90b803bd5a99ceaeabad1fc11fc7c0e1d0d6368d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c10665de86c95f4fc90f1ecb89b15766c70113f5caaf532799680cfd25e37232673623a77cfc791f296f7cf17d916146265773d528803e4e2f297bdd12820d064a11209e449c4f491e585dba153133a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929657f683052e5dc3cd498eeb1a400097f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c0e7918f018d4bda98c09c9d0c95b2b626863781f3caa4896ec87997e1a7e22f7fad7b63b2faab2f2889383edef5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296e0dac60803c462655358b799a294e2f297bdd12861601090603835c90041c5f50029e52641ea606b753347d4b1be857ea0c60357fe6b677d6a3250e6afafa22b8bd5a7511d3866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa322bb8de490a242aa59ae92ec88fb5ce454d0c1c29c8a128d4bd8de9ecd8f1cd3e482779136b2a28abbd461cc6adbbd83bf727da33034d4e6ee6f79bc383cadf593224ab00025e3fd9b2849bb6b77c385941001c1066392d8f80f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f585f486ca944981456173043c769dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca9e838c4e80a5201c1df05c6d5125b7d8f895ecada4d5d32d7b700acd8200b64d6a212a89b7db274f196a1e58772ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f75675e7a9f72f29fc7e62fea3d2371090002495afdd6806af486adb89df4540c95947d58dd50f09de181dfabda04266c67555a894a6486ecf0e1bfd46a232326a7075922de90b7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327b5ae3f53ce8fa3a6211fbc77196d2026a1beddf2e80f34e1052cddf0bc783055a1c988b1adcc24a1564818751f784624a7adcad4cfd8e7fa563f0f6b6e5b22ef83cefe8c8f8fc6df30ebe8ce6c0e455bd5a9fceacacfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bac93842065b04c6082ebec3f1b9d082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787d9c748824462655358b799a294e2f297bdd12861601090603835c90041c5f5002965e6457b106a045421d393bae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624b0ac9bb1da39b7db032aeb2f7a6e364cc7cf8e9fba9bc72e304a697fd8bb114b505bb89f981fb5d9254d1b6ea9c851c8d4bda9dc3939a5a82b1916cd86a84a28bcadf39fa7e8eeeaeb43156e12547b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e3727637162fb978ac3e7e3e6d27bb35d21646265721936ac434027f063d804c9e1056164743c5188f0b1759184bcc742440b111b745615e394abb0ca84c3d6523b2e73de5e3327b5dafa97efee1733f53b7916680a5627d19db8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebf9eeb6dd605bb95b1d69342a828ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f288f7967e9f5932240b84465d4fd9a5e0eee1f69db929c515690414fd98fca075785534b9ac2f31770b1600686ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b63574486814ae0ebd1d632162f1b677d1a3257a6efee961eeeb6b2448fcc42788fa463a4cf68e6e9fbb1c257fcbd00f9094070e56c4cf498f9e4c193bd7e6478693753e3acaaa12e88d0aa56183f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf3d26b7db46072b2faa9637fe92e4abae2936557a60865c2acdd7345bb5e33c189d249408d4f4392da8b0f09dc4957cf95e40107d17704b599a75d2ed97f0cea32e12f3a6a7075932deb786e296f7cfa22d12117711573d45ccc68592d486cdd05c3521e450d43c46cdc5849184d4bcd022440b342e41a725d2c49cf19bf4c3d7434b0a161a6c3327858afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e364cb36bfaffca8ba7aa251b18ff596a542ab2dffd9ae9eb206c41490ded2948a02cd5cd8c989ceab4d84a4c1409137b0e8cdfd8a7ec828cdcae5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f7b9ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc5938094f289b597757b071a046461d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0ae9df05cb8b0d4022dea207b693743c6c88f90bb9cc62f334b6a7edbba124a535a3b5e9f8fc6db55297c6a4a4f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913710975666c6b68c281bbf417fdc93941177c10714c09ccb074889495ad69ea6416e982454a294ec0879d97e7b9d61bf263c693c3cb22deb7a3f693b2faa7c95775124163d8e769a7f585f486ca95381031d014623d218b84f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f45039296568583042b55cbd909d18b0d4022dea207b693743c6c88f90fbad73be339e7e1b6f0f512ad698bfebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e7667fc9a8dc6e0eee1d6ad690d40700a01014858bd14f58875f41c7d5f30066c6755fa3ddfa7e6ece7f49bb72fc30326a3129ba7bb223357f787ced35d21746242473d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1c2342d2d20a9094070b55cbc81f989d7b557380b018acd2220a6c88fb0ea2cb21e474f0e1a1e68372bb1aefe9caaebe3efe44e1a6b1d59742aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e76633959ec57b49b9413b9ca5941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256143443c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b3141b0ca8ed38c4e80a53748783259094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e524fc00acceaeddbd03c10291d697b1c3459a0e9e89818e8b0bc4e89c64c7289aeed6ecdf398e28cdcae5a14336f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea33923123653b63e538ba263a7f2e6bec54c46051631124ca6b8c2e1f7503399c0d9d0311411943c51adc593e62140d945e601fe611b746774a661cea52e40a766523b2f52df9f2723a3cb9d869afc86c2040fc8667e0b317190ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e524f408b88ef0c8ec5fc31d8380d7d0d5338d4bd888db949a1cd8a4c0319136b3a288c8df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16760473c28a77dad6f693c2937af75c4612731576484708c39007e0226ca12c34741141c02d21bbd4f491e0a1a8d1d7100ec52e4186e4c701ce250f91b7d6523b0b677d0a327093cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e1a0e795b709bd5bea88f08cad1c8542a6d696c7951bc11d8f8989cfde0ddff49c679137c4a28bccdf38ff28ccc9b3e1637de12643b2f8d82f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e44bfc781d603c2cba7cc46126315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b317190ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf998a9ef883bf917f7d0d1c0e626bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edaa497fa56b2bade0c27e42a75633949c8c2819ab596c8293d456478d5b41c4c5d5435589181c8dd5f27766c40413f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b077f60666562c48bb5fe11f7c3334b1d761a7b4603c6ba7e829e9fa763e46e18e38c4f442340ca899799edb670550c6c00cdad2125a09c6d21fc98b0c3364808507b5d7295d7affee4c8c9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df38ff619feda5fd2721f4766af6bbea2f2888383cada3d67b57b74d3395ea8c296ef91d5f8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21bba03155c081ada023106fa44e053347c2c48b95fe51b6c2b73edeb61a7b4327a29e3ff69aeca3a6213e5d72688fe543440e9df799fac0a53748783259094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dd3cc3f1936d9137c6e4d4e88978993ebaaaf2a3717fad7163e5edab3a69a36860fbf5932006e76033949b8c286daf5d7fc1c5826716d4740385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14740675054b14498081e40585dba153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f335e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d5348d4bac9fc58bcb4cf5a4c2429137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c10665d381cf0f09dc5e42de83b21770b06004f58fbd48668f284abb69bf252029392fb96dfc7869296e0bfa20a07751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2c1352e2c23a80a4173b45fbd82f88ad6b450390c410c78b440d4dded202dadd121c20d0a618e084755d7aff9814a2c96ab261a3b1edb9af23e13cb9febf9eeb6dd612a282fac0e522bd599bceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ebea764abe48728ad281415f85465592dbfd0f09de4e59d684a25a66c67713f4bdec0a0ad97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a6c57e2669ffef69afbe6b2951f78667e1b3156a4af2ce3fc6fc40181490814187965e0c1c99ff498f9c4804339fb01caac1261a20d6a208a4db3ca563f0f6b790e367c97cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842160a75577c9fd9b2a48b04c6ddcc5826616d60755db81dd4f49c90f1ecd9fb45c27d17704e2cb8c1f78bf680c8973a1233d216603f238986f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a3240b3cb8dd20fcec7a3c04a1e67197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f357d94ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc3958e92f48fbb9d73710910026e6fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72dea093f652b6bed20823e02671673d45ccc68596b192cc2539416074d1b01840595031549585ccd153237a604c45335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f037b6c626166c88fb1fa1df3cf374f197a1e7f420fc2be7a8e9a9ba36fe06a1cef884b402f44ce8d9b9de9b27c5108680cc9a92529a49989ecf929c1b95b3c26fdd7682a28bcadf39fa7e8eeeaeb43156e12547b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e3727637162ab66abc267e3e6d2db371922146272173d52a9a2d02680e36ca12c34740615056b60dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f5572f1aa1ab5c3335d7b8abf05bddb6ab315e7e1b6b6ae32eb32a8b4f4f8fc6db553e28af0c0e523bd5be89ce89ff307d3038790cb87821bc10a9ede9ecfcb4cf5a4c2429137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97e7dbc70b02c76366525bb69aa397e3f196bed22923e0a700024c22ad9280469033aca12c34740615055b40dcb2c085c1c00da034457b375a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d4064818051f7f02b192bdfa759fefb6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43252e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17675e2ca8f5e228a680d8a25e10376366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a607c6126e4e2c48bb5fe11f7c3334b1d761a7b4603c6ba7e829e9fa763e46e18e38ccf8427d1ba88e6fe8bb1f21149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ed2cd301839d81c7d614c418998889ceaa5a82b38577c62885e2ccfd9365db7ed3e3a1f3677fe12734b2fbdc4674bb383cafa2c4614cb85062ceb7c73f189f082ce993c1435dc1066392d8f80f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c46b950b1949114bcd00621ee247f653347c2c48b94ffa177b2379a7a176b0b5526d29cbbe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a7a6bf09e81caeceaeddaa16d014c7c0e0d0d445cb118f98c79f810795b3c02686359fe39dbabe2e8e3f89fbb2bc6e7cb36763e4edab383eff582baf91842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc69286f1d3f8105c35210481415840dca2e5e1e4f1d93596517f111b74675577c14ef19bf4c2a7354a7a007b0b4513b69ebf569aecb3a6060b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6cd344e0a5f884b402f44ce9aeb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9fa1941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c4612031571083719f7f5859486eae05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7512d1c73dd3b315684af6ca2fdebb1c2414908113c1d41a1b5cdecf05d3c94c5d2ddbad11e084755d7affee4c8c9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df38ff7e8eeeaeb43023a77967e4bbbc395fe92f3ce8a4d33f50b15162ceb6ce6906b04c7cca8c941001c10663e38dd8471ede0d4dd094a41770b76004818bb95b25d97e7bea30906761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3c0378ece331e1a3257870eebe7fd9ab2d6256e6d179d6f3532c40f4cc2f80ea4a015cc1dc00d083055a1c988b18c4de5a5572f6e646f7c222003d9ff94ee88c7fe93fb2a6f0b8a933ed7cf99fa9effc31e50cb791fd86f355aa4ce8dbec8caa1bc5038cd697b1c3459a5cdfb8c8d7cb4d82a4c033c2649af2ddacc94f993fccbfe5a33036f75023a789bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec0908d97f78ab69a76760417076962deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3a39ef55fb5b3d7072eef237e6a3240c3cb8a93be9fc322344e6d73dcbf1547545f3c53988ac1d4502e79654f48305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c0e7869616c65cd8cbcf918f0cc3a4c1479137c4f0ccfbd778d9798ae6aef6713ea87464f2a4bc3829e92e4bc5bfce7f06e6157bd2b4dd735bb0447bddc5826116d67355c789d70f08a9181efed5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094e2d965e7107f711b7466e5c2c49cf19bf4c783463afe021e1f27e267ef9b636f2e1722004a0917197a6532159ff8e6fe9bb1d5243c3dd03d083055a1c988b01d4c01a430597f146f598754d6c88f959ff8e3cf434b2f6b791e365ba69e4e9b9f8fc6db553e28ef59df354dc4ce8d9a9c8ec5d8543d285c59993128d4aaede9ecfde5182b4d7318620c5c29db9bb2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2cb8a553e883d4bbb25e37230683435a42dea0e7e3e6f3db3798537113913378b6d8c7f592e486daa10df5046014625d21abf050e580d1b8b153237a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c9afa498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9de9d4a9237869ad2d0d5328d49abde9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eef6e7ac696941003875947c49b9c197fc90f1cc884b31f30913142ae96ae4966902450aa25e37076371063e749fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7221a7a174b0b5543b69ebf569afbe7c3c40e1d07196d2026a1beddf2e80ed4a1445cbdd03c68b5b095bcfd7498f9c1a4304e8ac1ba893754824d3a515a0cb22a56281f6b693b527e937efe8c9f8fe1eb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92e4df6bed16757f11726cebc8c296ff91f2cd894c30f40814152de86de5916815440c59fae5f66c67713f5c8bd433b99680d8b25e37021653b21b22deb787e3e6d23b67ec46127315764d736db6f4e2e5f7bdd10821616545055b30dcb584b024f5bda023357b104e8177f1d3a3eae0ebf4f3f6523b0b676a5f076246cefbe7fd9ab2d6211bc916180a4157d1adf8e6cecbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd8df82ab1bd00496d696c5851bc90a99de9fb9cb4d82f29e6ad06084aacee8967ed928ccbde5a24723ea2733b2fbda2f298a727beba0d46606e7603395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296d0ffa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c48bb19bf4e2a7352a7a102f1ef616d2acfbe7cdcab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7cc335aba5a1e7f634e438b9a8a9ee8a7aa253a597e6c8a502ec1db385fb9ef303c91f87d696c7c344ed5cdaba89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8a69489c5c409ac2f1512f953645e2cb8d1f79ce3a4abd2da22727703c28b07bf4263a6e3822fa22d37750512339887ccc685b6f04248a05c221561633158749974f4869585ebe153342a606b55335082c48bb19bf4e2a7221a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498eed561e31c7b751f7862e1c6c898f59ff8c38f423efa0e1a1b23ee63eb9f6eab2a13be308a886b1d7e442aa59ae92ec88fb5ce454d0c1d6948810cd5cd8c989cfde12d9efd730f020c4b588a7c83e993fccaaf2a17167a16523a48cbc3829fc333caaf5932006e6157bc6a08c296ff91f2c9dc5831016d60550d684cc4f1edf790b8dc2f01771c6600582ddf97b6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220b4a15fe48fd0b7b6523b2f028f4f5646d2acebe7eaffd733945f7d179d3f74b2d4cbf996e88ad6a511491f04187e0581d4ddace18989d7a557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c347e95cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c2968f91f58cb89c70700a11016f6cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73dda190f751b7bdd10920e12570643c46cdc58495b091cd2436406f75deb1174156513e559a84c3d6522c7b674d4a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f59375486c88fb59ff8e6ab261e7e0c7a6b636e67cf8ebefb1af2ce344e1a7b1d7e410ec1bf798f999aa06ce1691dec8948412c45cd8c989ceab36c4e49f26863585eec2ecdf38ff28ccc9b3e1637de12643b2f8d82f29fc383caff5932206e6153395e88c281bf91f2e8ad2810701d4101487cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e44bb0242b79296bed20883646272173d52a9e2e19311e3b9b54980c1457580f834d94191256184bcd022440b340fc06621d3a3eae0ebf0c6e2e76e7b676a7a3257874e3f569aeca3a6213a28d6690b3156a0ca89b2fd9fb5f4502e696568796195a0c8f895e989c0f1d20cae6478193754a788aee4eff9b7db027a3bff1b0e364cc7cf8e9bdf8fc6db55297c6a4a4f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913710974a63d3a8dc6e0eee1d7dc381c25116d7710385daca465288585c9286a05e36916004f5ddfa7f7ad97e7dea32972d26702533a32dea0f7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b2d261a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f6f5624a0fdea20ae88d0aa56183f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c226874692eeceacc83bdf619ffcb3b43157e12734e0bceb2768a9697af6bec6610eb84c78c2fd9b280eef683b9fa1941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486dac5381031d0147569444981908094e2ada023305f746a805624c7d13e55bfe53632173e7ff61a7b4327b5cc5eb38f4e3762a40e6ca3bcbb3141b0ca8ed2fddff414502e79654f48305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c0e786831bcd1a9ede9ecd871b95b2b626863781f3caa4896ec87997e1a7e22f61a17b62f2bafc783efe2f2bade0c87606e7613395ead97f5ff15e7bc385d25616d6070384ad9c1a7ac90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b63568487d13e452a84c3f3670eee621b0b5536d2bb8ab69afbc3a6364a38667e6b3151e46eadf35c2f00a53748783259094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dd3cdff1866adb6bd3b588ff9b67c968dbbc84b43021f53034a5edaa4f29e92e4dbae2e77d53a04c79c9fd9a5f0eec6c3b9dd0941003c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f585f486ca953940e16470143c46ddc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a5c7327a29afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624b0a9ff93aa9d739a56287f6b494e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b4fbed937d993fceecacf07160e12642b2faab7d6fbe307dfaa4d57b4db3563bcbb1c77f0eee1f3b9ca5941272c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c22100541408d21ac9031f094e2ada023305f746a805624c7d13e55bfe536d3578eef761a7b4327a29e9f72deefd3a6365b79166d2e255755affdf28c4f048131cced206d0ca125a0b8f8829989d7c5573f4b004a4d8624b0c9ffb3de88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dd3c95b3b467dd73d3b4fdacca4a993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5826116d67342de9e9c197ec90d6f9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23b9a6f694a3927a935d21746242473d528cc685b395f6eca12c14740675054b14c901c5e1f384bcf712441c011b73063517f5fb879")),V[o("1244b15153cbbdc47f45a86f67e684")](o("f3d7819412dc1a82d6ce9296")).insertAdjacentHTML(o("16c5bdcf7559b94870cb"),o("ae1a4302d6aa02e08477112d9ff838e88c7df725b0fef7bda925fc3abfaffff8fc6db553e280f884a514bd5a9eceaedfa91bd25c9196d0818f19cf0ac78dc598995a82b18177c66082e4d0a48c62d97adbbdf2b43156e12547b2faa92f29fc383caff5932206e76672ceae8c281bbf417fdc93941177c10714c49ccb4f4f8f5503dc9faf46229d2b53b5ddfb086ecf081bff41f47063216776f23ae96f693c787cef35d36246265573d528cc6928780428ca12c1011f450615d21bbd4f491e0a1a8d1d7217f740ec18604b240ce259fa53672570e6b676a7a3240d3cbada69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f5572f1a101b1c228166c88fb1fa1df3cf374f197a1e7f420fc2be7a8e9a9ba36fe06a1cef980b812b50bbb88f7c8ec5d8542a7d697b6c345ee1b9f8fd892805a83c4d733f520c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c2968af5d7fc1c5831250885455c4cd8a6e1ede0f59cb82ec412680315fa99fba172699234be26cb02036687074e52dea0f0864323cab73942610315615c22aaf291b7d037bdc65d45232014756d21ac94f491c585ccf153342a606b55335082c48bb19be3d2a7257e6fa32b0b5526d29cbbe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929657f6c25e1e1c988b0fd1cf4c0364818751f784300c3b97b819b9ca26ee36b1fef2bca320a535a3a8f8f8fc6db55297c6a4a4f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df38ff6997f9e5a33270a87475e4edaa4e3efe2f6cfea3c43f50b15162ceb6ce6906aa447bd8c583124490470bd589ca4f169f585acb99af5530d9335fa28fec0879d97e7bea30906761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b077e11f711d3b4ae850ec0d7c6522c6b676a7f1633a34f9fe38e9e7713752bfcf3dcbf3026a1bbf981988ae6e4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9de9d1cd0108cd696c5851bc90a99de9fb9cb4d82f68671997693f3cce0946ccf2092eea2f46e36f62723a48dc82f288f383cd9a3d1734df1165382e8e83f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d45b9a2a0a72486cdf439d0300575055b30dcb580c580f438c557506ea5ae2052a546818ee50a84c3d6522c7d202dea3240b3cb8dd3fedef717512d78664e4b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e364cb7cf89de8b4b87aa324f7d3d5c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993fceaaf2a12721f43035d4acf07c3efe2d6df3b1d26106e7613395eade6e59f15e7bdb94d84c5497184ade86dc0f09de181dfad5f17366c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda034201f355eb5335086a16ea4ffe5b3c0434b0a133e1f43a3b7cfeef25f3e96c7d4df3c131c9b3156a0ca9ee0fceec400c5d8781549094714d0b9af519d0de5e146480f351f7f4624a0a9ff94ce09b7cc374f095f7a5a739ad6a8ffebc9ceb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f288f6e7efebe842013b74977d4ab8c296ff91f2cd894c30f40814152de86de5916805c4cda9ce40071d176739d97a6576ecf0e1bfd46a232326a7075922de90b7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0fce5b3d0675ebe561a6c3327858afa97cb8bc2f7513a2866695b315680ca89b799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff83fa9d739a563f2b0e8b4b524ad6a8efebeefb92be24ca186e091bf09ff1af787f583bb4a9243c7c0e1d0d6368d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c10665c498d8441ede0d4dd391b24166c70113f5cabe4e39d13e5bbb74b82c3477782ab66abc267e3e6f6bec55a77750574064a16b993b05395e1bca10b04741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1c2342d2d20a9094070b55cbc81f989d7b557380b400b79b341d3dcea212aacd62ec30a0b6e8f0f465ad6a8f95e9a5ba7aa251a188fd8bf355a8419782f284b31acd54d0c396d0d447db12839585d8dd3c95b3b470c46498a28bccdf3bfd28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e4002497fd9b2a0eee1d3b9dd0941003c1071692da890f09dc181dfcd5f374279d3313f4bdec0a0ad97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f592c486cdf05c35256164543c518dc584b094e2d9b597757b104e61a664b7a5fb878a84c3d3765f0be37f0f2632177ede861f1e7713504a0917196d3026868bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f354db1aaa8af2c8ec5fc31d8380d7d0d5338d4bd88cd88fc30cd5f5866ada6285aad4e8986ed028ccbde5a24754e12645b2fadf796bad732bac95842262f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d21110640438c22ad939077d1e2dca13b5474116021285058a0f0f58140098432c1ee256e01a220a3b5fb879c31b773434b0a32cf4f2327a29a2d625f3e772254cb7916497b3156861fbdf7588ad6c4503e4c014d4c8125b7c8f8b2d989c0f557382e646f59375486c88fb59ff8e6ab261e7e1b4f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ed2c8543a497cd83c344ed5cdaba89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91e5dcb89c70701d4564ad69bca0f08a8181c8d87b5406e872042b391a75d38d12157a165f47061216603f238986f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84c3f6523b2b676a5a3240b6afafa22b8bc2f334df3d02780a5637d1ba8dc28dfb35c0545d6da0ad2d51a0458c8de00989c0d5572f79151f6f5624a0fc9bb1da39b7cc574f292a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a24160b47468b2faa96977ad6e7dbae3e53711e65262d5f5da7f5fa84470c8939c4e5286504a92da8b0f08a96d42de89e40073952257ae96ec0908d97f78bc70b02c76371063e749fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014756d21ac94f491c585ccf153342a606b55335082c49c819bf386b2967a7a001b0b6566d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7af9af15bb9b7db032aeb2f7a6e364cc7cf8e9fba9bc72e304a697fd8bb114b505b385f9c8ec5d8542a7d694b4c345985cd8cb89cfde5a82b1d7318420c4b79dbbca2e8e3ddbbdf0b43023e12736b2faa92f29fc383caff5932206e6153395e88c281bf91f2e8ad2810700a74656d6869c180b8f514fcc83e40107d17704b08cbb173899394aa66eb6317e683424b264fc7869296e0b8535d211462623259779877f5859486eae05c35256164543c518dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca89b799edd5c1050cc965685c55b094ad99e5ff98b0d4236c6b159b6d3330c20d4ac0fe0d22ee234aef6b6e7e364cd0bafa8e9a9eb6da01bbd8cf9c0e524bd5b9c98ec8cb04a9334c7c3e5d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f62523a5f8bc382be92f3ebae2913711e40025e4fd9b5c4fb55b3b9ca5941272c1071692da890f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c4605331561583719f7f592c0e328e53824740605054c55f8d18565f181a8b596f15f019e91f695d2c48b919be3b2a7050a7a174b0b4276d2bbabe7eadab2d6004a0937197a6026a19bf996c88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7cc322b2b2eaf0f467eb35aba8fff8fd1bb553e094e097fb14fd1dae82f28aad42cc108096c8d0d4458d4aafb889cead5a82c78173d56bd3b4fdacca4a993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfa79388c2c50ea32e1213f652635f23b9d6f693e2a3aad3d923717600c38806bc4360a7e0832ca12c34740613b038f5cdc584b4e1c0d9457731df65ae153347b2c48cd4ffd1f616522c7b674d4a325783cb8ab69afbe3a6211b7916480a4177d1baa8e6e9dbb1d50149083418796125a098f895c989c0f557382e646f593743b6c888d18a4c86ab314e7e3c5f0f467ad6bfafebeedeb6da044e0d3b1d7e642aa59ffd9acc8ec5f8543d2d696c5c345985cd8cb89cfde5a82b1d7318420c5c4dce08c2e8e3d9de3a1e27136f75123a5faee7e69e16e6beba4c87c44a7087aceb6cc3f19ee082deac5816316d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca13b21103451b43c5189a061a5f0e4bcc742440b143f1042a4b6c0eff55e3197c6d7de3f121f9a3257a3cb9de06b8bd5c7513d4d024c4f8026b6cbf9b1d88ac1f4503929656858305581c988b498f9e1a427197f144e084775d7b8aee4efd9b7db074f0e3a1e7f672ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce9a8ef9dbf018543d290c89495048d4aaede9ecf990bc2ac8166c0719fe9dffad767dd6f9be3e5a33036f75047e2bcf62f29fc6e65f6be842013b74d77c9bfcc3f189f082ce993c1435dc1066392d8f80f09dc181c8fd5f30266c67513f5c8ec087bd97f0eea32e16761347074e72deb7a7e3e6d6bed20c46053315766c22ad97f585f486ca944981456173043c769dc584b094f5eda023157b104a044371d3b4aae0ebd5b3d7034b0a361a7b6327a29afa97cb8bc2f7513a2866695b315680ca9e838c4e80a5201c1df05c6d5125b7d8f895ecada4d5d32d7b700acd8200b64d6a212a89b7db274f196a1e58772ba69efe9bcf8fc6fb553e2c6a6d5f355a84ce8dbb9dfee4a9241c7c194d0d4478d4bdade9ecdcb4d80a4c0339137c6a28ab9df398c28ccbfe5a33236f75675e7a9f72f29fc7e62fea3d2371090002495afdd6806af486adb89df4540c95947d58dd50f09de181dfabee40100d17770b488a8546ecf081bff41f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcd002440b311b746220a395fb90ca84d4c3361e3fd61a7b6742478f9e869aeca3a6213e5d72688e5422c5df3c53bdeb3430153c7df418794125b7cfed40bdac25a557382ad1da6dd291924dfb859fefd6ab217b1a3e5bbe364cd7cfa9aa9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529a49cfc99cd8dc4f95b3c2268635d3b588acc83b993ebdaaf2d7667ab23035d2eda94b3efe2d2bade0842013f1172682ea993f19ec082c9fc5831216d6050385d89c180bc90f1e9ac2f11771c46004f7ddfb0a6ecc0c1bfd30f47063216776f23ae96f693c787cef35d36246265573d528cc685b395f6eca12c14741145054c70dcb5a5e1e4d4bcc73651bf511b74664546809f819be3a2a7223f5e736b8f5723c6de3f52beea373394ff7866697b3141d0caaea799fae0a52018781549094074d0b9a9e5e8d8b0d406480f351f786624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5a9998ec8cb04a9241819fc58695529b3dcfc99e8a9a0d9df29777c06c98e0cba4966ade6892aaf2a3272081466efeaeed2f29fc383cddf593226ebb5065c2fd9a590eee6b6ddf81df0700a11016f6cd8b1a1ede0d0b8dc0e40073d17706e2caf91f79cc680cff25e37276366563e538fc786b296f7efa22d17751244064d73ddb6a4e2e5d7bdd10d45043014625845898045e1e4d0d93517201a607c153350a7e0ef911fe1b7b3478ecf437b8ea762a7ce6be7eafab2c1574db866695d255394ebf996c88ac19450392f716dad6125b7a8f892acede5e1e64818651f5f7624a799ff94ce88c7fa563f2f6b6e5e365b87cf8eba9effe7aa251f7d1a4c0e457bd5beaceaeddfb5d9054d0c381c7d6529b3acfc9ea99870995b2b7268444d3b588acc83b993fceaaf2a12721f43034a7edab3a3efe2d2bade0842013f1172682ea993f189f082ce984d85416d7700387a99c180bc90f1e9ac2f11771c46004f7ddfb0a6ece7d1bfd30f47110216700b361af6f6849787e9e35d36246265573d528cc685b395e1dca12b7061a525055b20dc92b5e1f3e4bcd76651bf511b633")),V[o("86663d7cf8e21ff8e27a3355fdd1")](o("27765eeed971defb5b1458ccd417")).addEventListener(o("883aa6b2efb6"),()=>{V[o("c5d1220c0cd6ae11a8d03bc2288bb7")](o("011fe25deb5b6a5d670fa64ae41b78")).style.display=o("a8178595c9"),V[o("b6360d2cc8b22fa8d22ae325ada1")](o("06b2faaa7d6fbe307dfaa4d57b4db356")).style.display=o("43962959a493")}),V[o("7517824d8b132849110b9c446e00")](o("e41b55df87cb5e5899495d")).addEventListener(o("0919e755ee15"),()=>{V[o("3a2c99397ba365bc273d70173f9e6c")](o("cab6edb4a072fd04bc96b993bf02ef")).style.display=o("3548d886dc"),V[o("52126100249e4b8c360e7f19319d")](o("31878157c2d245454ac2d41ec9cd4a0432")).style.display=o("fa69d0629de4")}),$(o("8cf3b92be24ca186e091bf09ff1af786f983ab42c2108198")).click(()=>{V[o("b2a411b1f32b1d24dfa5088fc706e4")](o("0a76ad7460b2bdc47c56f9537fc2af")).style.display=o("31c0df0bd6cd"),$(o("cc3379eba28c6146a0517fc9bfda375db54869")).css(o("81966ac7759ae6c1"),o("21fccc3ac0"))}),V[o("5046f7d711c9f34a3d47eee925e4fa")](o("8cbea12fe908b6")).addEventListener(o("ea98c0948d14"),()=>{S5[o("798997c58d8c10d1f396")][o("0a6cbe747afa84c46a57")](G.Kd)});var y,x,S,E=V[o("584effdf19c1fb42055fd6f11dfcc2")](o("288e1e09010e0b8b44681ce447a80462566d1ff959ff")),R=(E.value=j["1a"],E.addEventListener(o("0efcb8c07c44b1"),function(){j["1a"]=parseInt(this.value),Re(),Xo.location.reload()}),(E=V[o("fee8a5e5477fa17863f9bcdb7352a8")](o("c78fbd48668f284abb69bf2520292f29b865a9"))).value=j["1i"],E.nextElementSibling.value=E.value,E.addEventListener(o("f6e4d0e8946cd9"),function(){this.nextElementSibling.value=this.value,j["1i"]=parseFloat(this.value),Re()}),E.addEventListener(o("1ba5737eeaa4"),function(){this.nextElementSibling.value=this.value}),(E=V[o("9c8abb1be51d879ec19b9235d1308e")](o("387e0ef911fe1b7b3478ecf437b8eb7e2663e5f421"))).value=j["1x"],E.nextElementSibling.value=E.value,E.addEventListener(o("1240bc4478c0bd"),function(){this.nextElementSibling.value=this.value,j["1x"]=parseFloat(this.value),Re()}),E.addEventListener(o("cb15a3ce3af4"),function(){this.nextElementSibling.value=this.value}),(E=V[o("d0c67757914973cabdc76e69a5647a")](o("3d59cb82ec412680315fa99fba172d93225abc69ab27"))).value=j["1p"],E.nextElementSibling.value=E.value,E.addEventListener(o("6b7f053f814794"),function(){this.nextElementSibling.value=this.value,j["1p"]=parseFloat(this.value),Re()}),E.addEventListener(o("a2da0ac5d343"),function(){this.nextElementSibling.value=this.value}),(E=V[o("a7bfcc6e6eb04873ca8ec5604aad51")](o("c8ee7e69e16e6beba4c87c44a7087fd3bdc46942a648"))).value=j["1q"],E.nextElementSibling.value=E.value,E.addEventListener(o("74a6de26162edf"),function(){this.nextElementSibling.value=this.value,j["1q"]=parseFloat(this.value),Re()}),E.addEventListener(o("d761b73a2e78"),function(){this.nextElementSibling.value=this.value}),V[o("e45243c3add54f5689535afd898856")](o("c46272e5e5ea6f6fb87460f8a38c6646b54875c8bccc")));R.value=j["1y"],R.addEventListener(o("8af222edfb6b"),function(){var z;R.value!==""&&(R.validity.valid?(z=parseInt(R.value),isNaN(z)?(R.value=0,j["1y"]=0,Re()):z<0||65535<z?R.value=j["1y"]:(j["1y"]=z,Re())):R.value=j["1y"])}),(E=V[o("cb1ba8ca0aec34afb6eaa1842ec13d")](o("54d2e255755affdf28c4f048131cccda07ded55e125c"))).value=j["1w"],E.nextElementSibling.value=E.value,E.addEventListener(o("adfd47015fc5d6"),function(){this.nextElementSibling.value=this.value,j["1w"]=parseFloat(this.value),Re()}),E.addEventListener(o("867e2669ffef"),function(){this.nextElementSibling.value=this.value}),E=V[o("782edfbf39a1db22e53fb691fd9ca2")](o("9333e1f43a2969e6fa22"));for(y of Object.keys(Oa)){var F=V[o("8515755d680eee79e11b62257ff6")](o("39c5cb18d4c151"));F[o("67ee08b69ef9")]=y,F[o("8fb4f47a67877a68e3adf77e")]=y,E.appendChild(F)}E.value=j["1b"],E.addEventListener(o("6fc319839dc390"),function(){j["1b"]=this.value,Re()}),y=V[o("67ff0caeaef088b30ace05a08aed91")](o("818577c6289ef4cbe68f65d8"));for(x of Object.keys(Ct))E=V[o("d76bab2f3a78380bb3758c370d60")](o("c2bcf4a1af38e6")),E[o("11f4f228e0e3")]=x,E[o("08ad2f23781e21b164843c17")]=x,y.appendChild(E),Ct[x]=new Audio(G.a+Ct[x]);j["1u"]&&((x=V[o("2575d5bdc86e4e99417bc285df56")](o("7d018f44681ded")))[o("2403079b5d9c")]=o("3a08893e4aa06d"),x[o("95f272306dc9f422e9eb7124")]=o("63571025937784"),y.appendChild(x),Ct[o("7c8ecb3cf43eaf")]=new Audio(j["1u"])),y.value=j["1c"],y.addEventListener(o("23b74d77c9bfcc"),function(){var z=Ct[j["1c"]];z&&z.pause(),j["1c"]=this.value,(z=Ct[j["1c"]])&&z.play(),Re()}),(x=V[o("87dfec8e4ed06893eaaee5406a8d71")](o("3551c39a94465e8d594bcd84ae42"))).value=j["1d"],x.addEventListener(o("00b22a326a3223"),function(){j["1d"]=parseInt(this.value),Re()}),x=V[o("883eafafc9b1ab32f50fa6a1edacb2")](o("b6300c3b97a809bfcd20f2"));for(S of Object.keys(No))y=V[o("0270b67067e3addc667ea17860eb")](o("6698588d031442")),y[o("dc5b7fc395d4")]=S,y[o("ea8fc9859a3cdfef8666da71")]=S,x.appendChild(y);x.value=j["1o"],j["1o"].toString()!=o("9859")&&(V[o("26c69ddc5842bf5842da93b55d31")](o("1564f8ace0"))[o("1575e3b1f56f")][o("3d4dca82b25d31")]=o("03c1779aaf9f")+No[j["1o"]]+o("31859a4187e5125a09cbce18d2")),x.addEventListener(o("5b6f352fb17784"),function(){j["1o"]=this.value,this.value!=o("4506")?V[o("c46473f2bae0597ea0786debbfd3")](o("b948548844"))[o("a5e5532145ff")][o("19e9ee3eeee16d")]=o("dc586cc3c896")+No[this.value]+o("ce78b944e0a0b1d7e606ed1db5"):V[o("7cbccb2af22891b6e8b0a523e72b")](o("dc4f71cb99"))[o("cb0fb9c723e5")][o("76644d7b09e44e")]="",Re()}),V[o("e45243c3add54f5689535afd898856")](o("9337feef790e70e6fe")).addEventListener(o("baa814acd028e5"),function(){var z,H=this.files[0];H&&((z=new FileReader).onload=K=>{j["1e"]=K.target.result,Re(),location.reload()},z.readAsText(H))}),V[o("51a5b6f090aa32e53ca4afcea4873b")](o("3f0724d3b132acda22")).addEventListener(o("e77b813b057b08"),function(){var z,H=this.files[0];H&&((z=new FileReader).onload=K=>{j["1j"]=K.target.result,Re(),location.reload()},z.readAsText(H))}),V[o("9323f0f252247ce7fe22e9cc661945")](o("8cbfa919f90db7")).addEventListener(o("f1011b451b0192"),function(){var z,H=this.files[0];H&&((z=new FileReader).onload=K=>{j["1t"]=K.target.result,Re(),location.reload()},z.readAsDataURL(H))}),V[o("be28e52587bfe1b8a339fc1bb392e8")](o("ac8e810adee5b46ad860")).addEventListener(o("b78bd14b558b58"),function(){var z,H=this.files[0];H&&((z=new FileReader).onload=K=>{j["1u"]=K.target.result,Re(),location.reload()},z.readAsDataURL(H))}),V[o("685ecfcf29d1cb52152fc6810d8cd2")](o("e92d1f6e40338e50920d1f4b07")).value=o("6eda0232")+j["1g"].toString(16).padStart(6,"0"),V[o("e8de4f4fa9514bd295af46018d0c52")](o("84a2b225a534ababefb2a230e2")).addEventListener(o("f1011b451b0192"),function(){j["1g"]=parseInt(this.value.substring(1),16),G.Lh(),Re()}),V[o("188e3f1f59013b82459f16315d3c02")](o("272f5de88632c4fd44035ecedc16")).value=o("9a8e6e9e")+j["1v"].toString(16).padStart(6,"0"),V[o("bf97a4460698205ba296bd7832b529")](o("f3d381945ac6108990cf928210c2")).addEventListener(o("53673d27b96fbc"),function(){j["1v"]=parseInt(this.value.substring(1),16),G.Lh(),Re()}),V[o("a6500d4defd709d0cb510403cb8a10")](o("b313c1d41a1a58c4df03d0dd54192fc1")).checked=j["1h"],V[o("f90d1e5838029a5d641cf776fc3f63")](o("b8fe8e79917f9fe1a4fe6f60af7c68e4")).addEventListener(o("685ac2da02dacb"),function(){j["1h"]=this.checked,Re()}),V[o("08be2f2f49312bb2758f26216d2c32")](o("585eeed971ddec400650ccda10ccc05e044dcfc9")).checked=j["1k"],V[o("2d79ca94f44e56895048c3aac0635f")](o("6b6b192cc250830d15451b0f83519f031758181c")).addEventListener(o("adfd47015fc5d6"),function(){j["1k"]=this.checked,Re()}),V[o("9c8abb1be51d879ec19b9235d1308e")](o("a7afdd6806b04269dd85c2")).checked=j["1n"],V[o("ab3bc8ea6a0c54cfd60ac1e44e215d")](o("21e5d72688fa482f5bffd8")).addEventListener(o("8357ed17695f6c"),function(){j["1n"]=this.checked,Re(),Xo.location.reload()}),V[o("d92d3e781822ba7d843c17561c1f83")](o("8caaba2dbd09a18ffd96a2")).checked=j["1l"],Ja.visible=j["1l"],V[o("5b6b383a9a7c843f067a11149e518d")](o("f6f0ccfbd763cf6197fcb4")).addEventListener(o("6d3d87419f0516"),function(){j["1l"]=this.checked,Ja.visible=j["1l"],Re()}),V[o("c630ed2d8fb7e9b0ab31e423abaaf0")](o("23a351648aabc1755cbd4f77c389c54b5697")).checked=j["1s"],V[o("2571c2acec764eb14870dba2c86b57")](o("0f3765f0be37fde960297be3f725e9e77a23")).addEventListener(o("fa68d46c90e8a5"),function(){j["1s"]=this.checked,Re()}),V[o("64d2c3432d55cfd609d3da7d0908d6")](o("339341549a80ca585e8f525cdb9ca84137")).checked=j["1m"],ei.visible=j["1m"],V[o("5b6b383a9a7c843f067a11149e518d")](o("87cffd8826d47e8ceaa3fe7077a87c75e3")).addEventListener(o("c317add7291f2c"),function(){j["1m"]=this.checked,ei.visible=j["1m"],Re()}),V[o("241203836d950f1649131abd494816")](o("51b5a7f6f8b532fc2da3b5ebaee336f4")).textContent=o("66be6cdc593a094f5e")+G.Kd,V[o("3f1724c68618a0db22163df8b235a9")](o("a006968189868303dc10849cdfd08c0ad9ed96")).textContent=o("ab1ed8f743041491f2418796")+o("a043d2c191d8d645854bd8de9ecdde4e95b2b3378020c5c68bbf")}var k,N=g[o("439a2c55ac96a8572e")];(k=Pl(b5(N)))&&(g[o("d12c3a673e28b665bc")]=N.slice(0,-7),g[o("7674536014c258")]=k[0],g[o("b2ab15b1ff23")]=k[1],g[o("03d17c93f4f1ed")]=k[2],g[o("354bd89dcd427288")]=k[3],g[o("5ccaf24e1342c7c02dd1")]=k[4]),N=this.v?this.M[o("5054e1c626ecf2")]:v,this.v=!0,this.Qc=c+o("701e")+f,this.M=g,b.I.vb(b.I.Fg,c),N!==this.M[o("5a1e6f082ca644")]?this.pi():this.lg()},he.prototype.vl=function(){var c=this.v?this.M[o("f6f2cbec8842d8")]:v;this.v=!1,this.Qc=m,this.M={},b.I.vb(b.I.Fg,""),c!==this.M[o("d45065c2aae07e")]?this.pi():this.lg()},he.prototype.Dm=function(){b.I.Zb(b.I.Fg);var c=this,f=1;(function g(){!he.sf.Ol()&&f++<5?O.fa(g,1e3):he.sf.hm(function(){},function(y){c.Nk(T,y.ti)})})()},he.prototype.pi=function(){for(var c=0;c<this.$h.length;c++)this.$h[c]();this.lg()},he.prototype.lg=function(){for(var c=0;c<this.bi.length;c++)this.bi[c]()},he.prototype.pl=function(){he.sf.nm()},he),b.Gp=(Hi.prototype.$c=function(){return this.ka},Hi.prototype.ld=function(c){this.Ia=c,this.ka.visible=c},Hi.prototype.la=function(){this.xc=this.wc[o("e284cd91921f")](),this.yc=this.wc[o("3ea765b8253b70")]();for(var c=this.yc/30,f=0;f<this.ud.length;f++)this.ud[f].zi(c)},Hi.prototype.Ba=function(){if(this.Ia)for(var c=0;c<this.ud.length;c++)this.ud[c].Ba(this.ja)},Hi),b.Lg=(nt.prototype.oa=async function(c){var f=this;this.wc=c,this.fd=c.get()[0],this.ja=(c={[o("b141528a4347c4")]:f.fd,[o("95e4762b72ede923e8e07b114de2cb35")]:0,[o("1576e5adff6f69a9736dfa")]:o(j["1a"]===1?"882eafb9ebadbb":"7036d7a113a9")},await Uo(c)),this.Ia=!1,this.hb=new b.wi(new Float32Array(3*w)),this.yc=this.xc=1,this.Id=this.Hd=this.Gd=this.Dd=this.Xc=P.W,this.la(),A.A.zg(function(){f.hb.Zg()})},w=Math.min(100,b.Ug.Hn),P={W:o("63240922d7"),Bc:o("ec0d42cbc1"),Cc:o("adae431403")},nt.prototype.ld=function(c){this.Ia=c},nt.prototype.la=function(){var c=O.e();this.xc=this.wc[o("ab2bc4fa5b08")](),this.yc=this.wc[o("74add32e1f21ce")](),this.ja.resize(this.xc,this.yc,c),this.fd.width=c*this.xc,this.fd.height=c*this.yc,c=this.yc/4,this.hb.zi(c),c=O.Ad(2*Math.floor(this.xc/c)-5,1,w),this.hb.xi(c)},nt.prototype.Va=function(){if(this.Ia){var c=O.Lb()/200,f=Math.sin(c);this.hb.gl(this.Bn(this.Xc,f),this.Fn(this.Xc,f)),this.hb.Ln(this.$f(this.Dd,f),this.$f(this.Gd,f),this.$f(this.Hd,f),this.$f(this.Id,f));for(var f=this.hb.pd,g=this.hb.X,y=this.hb.Vc,x=this.xc-.5*(this.xc-.5*f*(g-1)),S=.5*this.yc,E=0,R=0,F=-1;F<g;F++){var k=F,N=Math.cos(+k/12*3.141592653589793-c)*(1-Math.pow(16,-1*k/12));0<=F&&(y[3*F]=x-.5*f*k,y[3*F+1]=S+.5*f*N,y[3*F+2]=Math.atan2(R-N,k-E)),E=k,R=N}this.hb.Ba(),this.hb.Vn(this.ja)}},nt.prototype.vc=function(c){this.hb.vc(c)},nt.prototype.ao=function(c){this.Xc=c?P.Cc:P.Bc,this.Id=this.Hd=this.Gd=this.Dd=P.W},nt.prototype.lo=function(c){this.Xc=P.W,this.Dd=c?P.Cc:P.Bc,this.Id=this.Hd=this.Gd=P.W},nt.prototype.po=function(c){this.Dd=this.Xc=P.W,this.Gd=c?P.Cc:P.Bc,this.Id=this.Hd=P.W},nt.prototype.so=function(c){this.Gd=this.Dd=this.Xc=P.W,this.Hd=c?P.Cc:P.Bc,this.Id=P.W},nt.prototype.wo=function(c){this.Hd=this.Gd=this.Dd=this.Xc=P.W,this.Id=c?P.Cc:P.Bc},nt.prototype.Bn=function(c,f){switch(c){case P.Bc:return .9+.1*f;case P.Cc:return .4+.3*f}return 1},nt.prototype.Fn=function(c,f){switch(c){case P.Bc:return .6+.5*f;case P.Cc:return .3+.3*f}return 1},nt.prototype.$f=function(c,f){switch(c){case P.Bc:return .9+.1*f;case P.Cc:return .6+.4*f}return 1},nt),b.Xk=(zi.qp=function(c){return new zi(c[o("34f5046e5b6c")],c[o("f90d0e490e1a")],c[o("23ba4a78c5add07b49b048")],c[o("4fee3eacb1f1aca735e43c89baf9aeab")],o("798e9edf9e9c16c0f59b6cda"),c[o("5048f6")],c[o("288d130b49")])},zi.Ap=function(c){return new zi(c[o("8e6f2248f1c6")],c[o("209617165701")],c[o("f6e9d7e7987ec56c9ce3a5")],c[o("fbc292801dc5f89361d860b5e6cdfa9f")],o("1f3444e1c026cce6533146f4"),c[o("7d079b")],c[o("4ff428b2b6")])},zi),b.tp=(Js.prototype.Se=function(c,f,g,y){var x=this.of.resources.uniforms.uniforms.uColorOverlay;x[0]=c,x[1]=f,x[2]=g,x[3]=y},Js.prototype.xm=function(c){this.of.resources.uTexture=c.source,this.of.resources.uSampler=c.source.style},Js.prototype.Ba=function(c,f,g,y){this.Ld.position.x=c,this.Ld.position.y=f,this.Ld.scale.x=g,this.Ld.scale.y=y;var x=this.of.resources.uniforms.uniforms.uTextureScale;x[0]=.2520615384615385*g,x[1]=.4357063736263738*y,(g=this.of.resources.uniforms.uniforms.uTextureOffset)[0]=.2520615384615385*c,g[1]=.4357063736263738*f},Js),b.ec=(Wt.prototype.mc=function(c){this.L.texture=c.eg(),this.L.anchor.set(c.Nn,c.db),this.Fk=c.Xn,this.Hk=c.co},Wt.prototype.Se=function(c){this.L.tint=parseInt(c.substring(1),16)},Wt.prototype.Pb=function(c){this.L.width=c*this.Fk,this.L.height=c*this.Hk},Wt.prototype.jj=function(c){this.L.rotation=c},Wt.prototype.Ef=function(c,f){this.L.position.set(c,f)},Wt.prototype.Oa=function(c){this.L.visible=c},Wt.prototype.wf=function(){return this.L.visible},Wt.prototype.Pa=function(c){this.L.alpha=c},Wt.prototype.sd=function(){O.Qa(this.L)},Wt),b.Sf=(Je.prototype.Oe=function(){this.Ca!=null&&O.Qa(this.Ca.ka),this.ia!=null&&O.Qa(this.ia),this.b!=null&&O.Qa(this.b)},Je.prototype.li=function(){this.hg(.25),this.S.xb="",this.ed=!0,this.qa={},this.Oa(!1)},Je.prototype.Aj=function(c){this.S=c,this.mi(this.nb)},Je.prototype.Oa=function(c){var f=this.nb;this.nb=c,this.mi(f)},Je.prototype.hg=function(c){this.Nb=50*c;var f=c,g=(c>this.K.kg&&(f=Math.atan((c-this.K.kg)/this.K.Jh)*this.K.Jh+this.K.kg),f=Math.sqrt(4*Math.pow(5*f,.707106781186548)+25),Math.min(200,Math.max(3,5*(f-5)+1)));if(c=this.Xa,this.sb=.025*(5+.9*f),this.Xa=Math.floor(g),this.Wh=g-this.Xa,0<c&&c<this.Xa)for(var f=this.Ob[2*c-2],g=this.Ob[2*c-1],y=this.Wa[2*c-2],x=this.Wa[2*c-1],S=this.ga[2*c-2],E=this.ga[2*c-1];c<this.Xa;c++)this.Ob[2*c]=f,this.Ob[2*c+1]=g,this.Wa[2*c]=y,this.Wa[2*c+1]=x,this.ga[2*c]=S,this.ga[2*c+1]=E},Je.prototype.Fo=function(c,f){for(this.Xa=f,f=0;f<this.Xa;f++)this.Ob[2*f]=this.Wa[2*f]=this.ga[2*f]=c(),this.Ob[2*f+1]=this.Wa[2*f+1]=this.ga[2*f+1]=c()},Je.prototype.ak=function(c,f,g){for(this.lf=g,g=0;g<this.Xa;g++)this.Ob[2*g]=this.Wa[2*g],this.Ob[2*g+1]=this.Wa[2*g+1];this.Cl(c-this.Wa[0],f-this.Wa[1],this.Xa,this.Wa)},Je.prototype.Cl=function(c,f,g,y){var x=O.Wg(c,f);if(!(x<=0)){var S=y[0];y[0]+=c,c=y[1],y[1]+=f;for(var E=1-2*(f=this.sb/(this.sb+x)),R=1,F=g-1;R<F;R++){var k=y[2*R];y[2*R]=y[2*R-2]*E+(k+S)*f,S=k,y[2*R+1]=y[2*R-1]*E+((k=y[2*R+1])+c)*f,c=k}f=this.Wh*this.sb/(this.Wh*this.sb+x),y[2*g-2]=y[2*g-4]*(E=1-2*f)+(y[2*g-2]+S)*f,y[2*g-1]=y[2*g-3]*E+(y[2*g-1]+c)*f}},Je.prototype.Ce=function(){return{kb:this.ga[0],lb:this.ga[1]}},Je.prototype.qh=function(c,f){for(var g=1e6,y=c,x=f,S=0;S<this.Xa;S++){var E=this.ga[2*S],R=this.ga[2*S+1],F=O.Wg(c-E,f-R);F<g&&(g=F,y=E,x=R)}return{kb:y,lb:x,gg:g}},Je.prototype.Hj=function(c){this.Yk=c},Je.prototype.Hf=function(c,f){this.Ta=O.Q(this.Ta,this.ed?this.lf?.9+.1*Math.cos(c/400*3.141592653589793):1:0,f,.00125),this.Ag=O.Q(this.Ag,!this.ed||this.lf?1:0,f,.0025),this.Ca!=null&&(this.Ca.ka.alpha=this.Ta),this.ia!=null&&(this.ia.alpha=this.Ta)},Je.prototype.Mf=function(c,f,g,y){if(this.nb&&this.ed)for(var x=Math.pow(.11112,f/95),S=0;S<this.Xa;S++){var E=O.Kf(this.Ob[2*S+1],this.Wa[2*S+1],g);this.ga[2*S]=O.Kf(O.Kf(this.Ob[2*S],this.Wa[2*S],g),this.ga[2*S],x),this.ga[2*S+1]=O.Kf(E,this.ga[2*S+1],x)}if(this.Ca!=null&&this.nb&&this.Ca.Fl(this,c,f,y),this.ia!=null&&(this.ia.Ge.x=this.ga[0],this.ia.Ge.y=this.ga[1]-3*this.sb),this.b!=null&&j["1s"]){this.b.x=this.ia.position.x,this.b.y=this.ia.position.y+1;e:if(f=c=Object.keys(this.qa),g=this.b.se,f.length!==g.length)f=!1;else{for(y=f.length;y--;)if(f[y]!==g[y]){f=!1;break e}f=!0}if(!f){for(this.b.se=c;this.b.children[0];)this.b.removeChild(this.b.children[0]);for(var R in c=0,this.qa)f=A.A.V().Xg(this.qa[R].ra).La,f=new Ae(f.eg()),f.width=30,f.height=30,f.x=c,this.b.addChild(f),c+=35;this.b[o("9657315ff5df")].x=.5*this.b.width,this.b[o("6041cbc50bc1")].y=this.b.height}}},Je.prototype.mi=function(c){this.nb?c||this.Il():(this.Ca!=null&&O.Qa(this.Ca.ka),this.ia!=null&&O.Qa(this.ia),this.b!=null&&O.Qa(this.b))},Je.prototype.Il=function(){this.Ca==null?this.Ca=new b.Ug:O.Qa(this.Ca.ka),this.Ca.Pd(A.l.K.jd,A.A.V().Af(this.S.qi),A.A.V().we(this.S.Ka),A.A.V().cj(this.S.Je),A.A.V().ej(this.S.he),A.A.V().ij(this.S.Le),A.A.V().Tg(this.S.bd),"#ffffff"),this.ia==null?(this.ia=new Ne({text:"",style:{fontFamily:"PTSans"}}),this.ia.Ge={x:0,y:0},this.ia.anchor.set(.5,0)):O.Qa(this.ia),this.b==null?(this.b=new de,this.b.se=[]):O.Qa(this.b),this.ia.style.fontSize=j["1w"],A.A.V().we(this.S.Ka),this.ia.style.fill=j["1v"],this.ia.text=this.S.xb,this.Yk.Dn(this.S.T,this.Ca,this.ia,this.b)},Je.Qf=function(){this.T=0,this.qi=b.Ud.$e,this.bd=this.Le=this.he=this.Je=this.Ka=0,this.xb=""},Je),b.Ti=(Ut.prototype.Wl=function(c){return new Ut(c,this.Db,this.Gb,this.rb,this.Ib)},Ut.prototype.cm=function(c){return new Ut(this.Ea,c,this.Gb,this.rb,this.Ib)},Ut.prototype.im=function(c){return new Ut(this.Ea,this.Db,c,this.rb,this.Ib)},Ut.prototype.om=function(c){return new Ut(this.Ea,this.Db,this.Gb,c,this.Ib)},Ut.prototype.sm=function(c){return new Ut(this.Ea,this.Db,this.Gb,this.rb,c)},Ut),b.wi=(C=new b.Ti(0,0,0,0,0),Lt.prototype.$c=function(){return this.G.ka},Lt.prototype.xi=function(c){if(this.X=c,this.G.X!==c){for(var f=c;f<this.G.o.length;f++)this.G.o[f].va();for(;this.G.X>c;)--this.G.X,(f=this.G.o[this.G.X]).id.sd(),f.O.sd();for(;this.G.X<c;)f=this.G.o[this.G.X],this.G.X+=1,this.G.ka[o("edbf0bc4328a9ac891")](f.O.L),this.G.ka[o("6b7d093aac48980e17")](f.id.L),f.O.Pa(this.Kg),f.id.Pa(this.Mg);for(c=0;c<this.G.P.kd.length;c++)this.G.P.kd[c].Pa(this.Pg);for(c=0;c<this.G.P.md.length;c++)this.G.P.md[c].Pa(this.Rg);for(c=0;c<this.G.P.Kc.length;c++)this.G.P.Kc[c].Pa(this.Sg);for(c=0;c<this.G.P.nd.length;c++)this.G.P.nd[c].Pa(this.Vg)}},Lt.prototype.vc=function(c){this.Uc=c,this.Hg=o("ebb9dfed09c6178495c2"),this.Zg()},Lt.prototype.vm=function(c){this.Uc=C,this.Hg=c,this.Zg()},Lt.prototype.Zg=function(){this.G.Pd(b.Fc.Sj,null,A.A.V().we(this.Uc.Ea),A.A.V().cj(this.Uc.Db),A.A.V().ej(this.Uc.Gb),A.A.V().ij(this.Uc.Ib),A.A.V().Tg(this.Uc.rb),this.Hg)},Lt.prototype.zi=function(c){this.pd=c},Lt.prototype.gl=function(c,f){for(this.Kg=c,this.Mg=f,c=0;c<this.X;c++)(f=this.G.o[c]).O.Pa(this.Kg),f.id.Pa(this.Mg)},Lt.prototype.Ln=function(c,f,g,y){for(this.Pg=c,this.Rg=f,this.Sg=g,this.Vg=y,c=0;c<this.G.P.kd.length;c++)this.G.P.kd[c].Pa(this.Pg);for(c=0;c<this.G.P.md.length;c++)this.G.P.md[c].Pa(this.Rg);for(c=0;c<this.G.P.Kc.length;c++)this.G.P.Kc[c].Pa(this.Sg);for(c=0;c<this.G.P.nd.length;c++)this.G.P.nd[c].Pa(this.Vg)},Lt.prototype.Ba=function(){var c,f,g,y=2*this.pd,x=3*this.pd;for(0<this.X&&(c=this.Vc[0],f=this.Vc[1],g=this.Vc[2],this.G.o[0].ha(c,f,y,x,g),this.G.P.ha(c,f,y,g)),c=1;c<this.X;c++)this.G.o[c].ha(this.Vc[3*c],this.Vc[3*c+1],y,x,this.Vc[3*c+2])},Lt.prototype.Vn=function(c){c.render({container:this.G.ka})},Lt),b.i=(He.Wb=$(o("61f7d1a787b704f30ea884e983ba42c3108c85c586")),He.$b=$(o("4cb8bc2c2355e0c620c6fe0a3a46e2")),He.ac=$(o("c351f78534172ad3aa10e0dc3af425adbdf7")),He.bc=$(o("67bd5be986fd9fb51ad05c9581c585")),He.dc=$(o("36e2cafa5d2a912813b969b435")),He.Eb=$(o("c593754b3bdfb809a1ca3cad27abb6f3")),He.fc=$(o("4fa563f1bee5bca87ae53ca4aea1aba73ae7")),He.Qb=$(o("499ff94fbdd13ff521efa5edb0b1")),He.hc=$(o("b6624a7acea41dbeca2af27cb4bae1a2")),He.ic=$(o("a6125a0ac6d40dd9c751176cc4aa11b2")),He.jc=$(o("ebb9dfed1dc5029681cd969212cc549c92c98a")),He.kc=$(o("8e3a6212f7d126cae40a3f48eece2bcce702035eccdd01d6d25e075787cd05d8d9")),He.lc=$(o("f70dcb591e5e0f018d1d6613ee51a8156856671fe848e411616d67ebf633")),He.prototype.B=function(){},He.prototype.bb=function(){},He.prototype.ba=function(){},He.prototype.Wd=function(){},He.prototype.la=function(){},He.prototype.Va=function(){},He),b.Nl=(B=$(o("2e9ac2f2542a9a245aea9ba84a3f952250")),D=$(o("7e2a7222e4fa2af4ea3a2b76e4ef25f3fb7a")),X=$(o("f14741171609994f8b0b0f5f500c98")),U=$(o("7e2a7222f7fd28a3f17d7c7af0ff20a5ba706943")),L=$(o("0f6523b1f52dfbe77b6574efe83ffce97a")),ie=$(o("08fc78686a3420be7ccc21007b1733")),ne=$(o("5c88ac1c0658ccd20898d65b095acf")),q=$(o("ce7aa252b48afa84ba4afa06bb99f8")),Y=$(o("e73ddb690c7d003bc243900c054506")),(Z=O.da(b.i,function(){b.i.call(this,b.ab.dd);var c=this,f=Y.get()[0];B.text(O.N(o("16ceb6cd7f53f24a7fc2859f505697404ac3c6cd434f8058"))),D.text(O.N(o("5e864e95070b0a12079a4dd7181e5f08028b1e621ded40ec18725d"))),D.click(function(){A.h.J(A.h.ma)}),je.Mi=()=>{G.ge=!G.ge},je.Ph=()=>{var y,x=A.l.U,S=G.E;S.length&&x.Ca&&(y=S.indexOf(x.S.Ka),x.Ca.Yj(y===-1?S[0]:S[(y+1)%S.length]))},je.El=()=>{var y,x=A.l.U,S=G.kh;S.length&&(y=S.indexOf(x.S.bd),x.Ca.Ym(y===-1?S[0]:S[(y+1)%S.length]))},je.ad=()=>{G.Ke&&Fi&&Fi(G.Ke,G.Df)},je.hl=()=>{ua(1)},je.Qi=()=>{var y,x=Object.keys(Oa);x.length&&(y=x.indexOf(j["1b"]),j["1b"]=y===-1?x[0]:x[(y+1)%x.length],G.Hh())};let g=[ba,ti];$(o("da83e880b2")).keydown(function(y){y.keyCode===32&&(c.Jb=!0)}).keyup(function(y){var x;y.target.type!==o("a6430d41de")&&((x=y.code)===o("d8e27f528d")?je.Mi():x===o("17037cf3dd")?je.Ph():x===o("5ea4458825")?je.El():x===o("cf4bb43b01")?je.ad():x===o("54eef35e02")?je.hl():x===o("3ba75857fc")?je.Qi():x===o("1f1b44ebe9")?G.xe=!G.xe:x===o("a2f801cce8")?(A.h.D.H.Aa.Ac=!A.h.D.H.Aa.Ac,A.h.D.H.fb.visible=A.h.D.H.Aa.Ac,A.h.D.H.Aa.Ba(A.h.D.H.Aa.se)):x===o("6b5218339f4195231740")?ua(G.$+j["1i"]):x===o("f40b43aa88a85e18892f4abd61b236")&&ua(G.$-j["1i"]),y.keyCode===32)&&(c.Jb=!1)}),f.addEventListener(o("84a2ae32ed35"),y=>{G.jh&&(y.deltaY<0?ua(G.$+j["1i"]):ua(G.$-j["1i"]))},{capture:!0,passive:!0}),f.addEventListener(o("03c06a83e4d0e4957dd9"),function(y){var x,S;y&&j["1f"]===0&&!G.ge&&(y=y.touches[0],x=.5*f.offsetWidth,S=.5*f.offsetHeight,o("82e62af1e3712177efff")!=typeof y.clientX?c.oc=Math.atan2(y.clientY-S,y.clientX-x):c.oc=Math.atan2(y.pageY-S,y.pageX-x),y=Math.min(Math.sqrt((x-y.pageX)*(x-y.pageX)+(S-y.pageY)*(S-y.pageY)),110),rt.position.x=x+y*Math.cos(c.oc),rt.position.y=S+y*Math.sin(c.oc))},{capture:!0,passive:!0}),f.addEventListener(o("9330faf374206afefa3ee9"),function(y){y.preventDefault(),j["1f"]!==2&&j["1f"]!==3&&y&&(c.Jb=2<=y.touches.length)},!0),f.addEventListener(o("ee0bdff4916bd16b92"),function(y){j["1f"]!==2&&j["1f"]!==3&&y&&(c.Jb=2<=y.touches.length)},{capture:!0,passive:!0}),f.addEventListener(o("d5ab38fd2aafb6e3abab"),function(y){!y||G.ge||y.shiftKey||(c.oc=Math.atan2(y.clientY-.5*f.offsetHeight,y.clientX-.5*f.offsetWidth))},!0),f.addEventListener(o("cdd320f522a7b7eba2a8"),function(){c.Jb=!0},!0),f.addEventListener(o("00bc2d26773033a7"),function(){c.Jb=!1},!0),f.addEventListener(o("c2a3ebbca823ed2ba7b4fab8"),function(y){var x,S;Qa&&y.pointerId===Il?(Qa.Bh=!0,Qa.parent[o("19fef400f2ed7e3c")]({x:y.clientX,y:y.clientY},null,Qa.position)):qa.any&&(Ot&&y.pointerId===jo&&(x=Ot.height/2,S=Math.max(x,Math.min(Ot.parent[o("2562c894c6794ab0")]({x:y.clientX,y:y.clientY}).y,Ot.parent.height-x)),Ot.parent.ek((Ot.parent.height-Ot.height-(S-x))/(Ot.parent.height-Ot.height),1)),Q.Vf||y.pointerId!==Q.$a||Q.Io(y))},{capture:!0,passive:!0}),f.addEventListener(o("6e8f5f681cf751f70377"),function(y){Qa=null,qa.any&&(Ot=null,jo=-1,rt.$a===y.pointerId&&(rt.$a=-1,rt.alpha=.25),Q.Vf||y.pointerId!==Q.$a||(Q.visible=Q.Qh,Q.Ho(),Q.$a=-1))},{capture:!0,passive:!0}),qa.any&&(G.oh=c,f.addEventListener(o("62034b1c08834d8b0e145b13"),function(y){if(rt.$a===-1&&(rt.$a=y.pointerId,rt.alpha=1),!Q.Vf){for(var x of g)if(y.clientX>=x.x&&y.clientX<=x.x+x.width&&y.clientY>=x.y&&y.clientY<=x.y+x.height)return;Q.cg||Q.$a!==-1||(Q.$a=y.pointerId,Q.x=y.clientX,Q.y=y.clientY,Q.visible=!0,Q.pk())}},{capture:!0,passive:!0}))})).prototype.B=function(){},Z.prototype.bb=function(){M.g(b.i.Wb,50),M.g(b.i.$b,1),M.g(b.i.ac,50),M.g(b.i.bc,50),M.C(b.i.dc,500),this.Ga===se.We?M.g(b.i.Eb,1):M.C(b.i.Eb,500),M.g(b.i.fc,50),M.g(b.i.Qb,50),M.g(b.i.hc,50),M.g(b.i.ic,50),M.g(b.i.jc,50),M.g(b.i.kc,50),M.g(b.i.lc,50)},Z.prototype.We=function(){return this.Ga=se.We,this},Z.prototype.Fh=function(){return M.g(X,1),O.fa(function(){M.C(X,500)},3e3),M.g(U,1),O.fa(function(){M.C(U,500)},500),this.Ga=se.Fh,this},Z.prototype.ba=function(){this.Jb=!1,this.H.la()},Z.prototype.la=function(){this.H.la()},Z.prototype.Va=function(c,f){this.H.Va(c,f)},Z.prototype.Do=function(c,f,g){var y;1<=f&&f<=10?(f=O.N(o("370157cede1493c95e1d249cb111b6c32b0c67caa71daedb61e9")+f),y=O.N(o("b8e0946fd975d0e8a1fc673db67075e2a4ed246ba07c6dfa99cf504cb55772")),O.N(o("718b9dc0909e59cf18879e828e811cd9e09e2dc76d97f5dddb9f78c9618aa1adf47160837a69f3")).replace(o("fa2e8b4fceaaf7d5"),g).replace(o("33c1026486cd8e6e"),c).replace(o("d3a1e28465ad6e8e"),f)):(f="",y=O.N(o("e13b0d70002ec97f88370e321f3b9c559d165d50071fbf418d")),O.N(o("d5af39ec3cb2f5ebbca33abe12bd80fd84ba49eb01bb99f9bfbb1cd51d96ddc9909504e6169896")).replace(o("7aae0bcf4e2a7755"),g).replace(o("071d3e38ba19ba3a"),c)),L.html(O.N(o("ec5440db95b91c24952853e98aac493e903910b66fa430"))),ie.html(c),ne.html(f),q.html(y)},Z.prototype.oa=async function(){this.H=new b.Po,await this.H.oa(Y),this.Ga=se.We,this.oc=0,this.Jb=!1},se={We:0,Fh:1},Z),b.Pn=(ee=$(o("92866696fa48394df3c53b80ee5d0f56d0d617c68b540757de")),Ce=$(o("9b69afbd733f40f6ca3ac2bb572a46fdd939deed020250d0")),Tt=$(o("350385dbd5455a885440d8ddb1402c933753b48be44e2e8439")),(Z=O.da(b.i,function(){b.i.call(this,b.ab.dd),this.Oh=-1,this.df=""})).prototype.B=function(){},Z.prototype.bb=function(){M.C(b.i.Wb,500),M.C(b.i.$b,1),M.g(b.i.ac,50),M.g(b.i.bc,50),M.g(b.i.dc,50),M.g(b.i.Eb,50),M.g(b.i.fc,50),M.g(b.i.Qb,50),M.g(b.i.hc,50),M.C(b.i.ic,500),M.g(b.i.jc,50),M.g(b.i.kc,50),M.g(b.i.lc,50)},Z.prototype.ba=function(){},Z.prototype.Wd=function(){},Z.prototype.Wo=function(){this.hf("",0),M.C(ee,100)},Z.prototype.Ik=function(){M.g(ee,100)},Z.prototype.hf=function(c,f){this.df!==c&&(this.df=c),c=O.Ad(Math.floor(100*f),0,100),this.Oh!==c&&(Ce.css(o("bf87a856379c"),c+o("047074e2")),Tt.html(c+o("8e3a6211b79161")))},Z),b.Vl=(re=$(o("4efa22d23f0e39093f897dc42e046c")),$(o("398f895fd0c3121c28dca659a6d3290c2cc8")),$(o("0f6523b1fe29b8ea7e267ca7f923e9fa703d")),oe=$(o("84f0f464e534e7b9e3a9ba30fd4cb096e091b909eb")),ki=$(o("3eea32e22f3e293823b97df429346229")),ve=$(o("9361a7b57a2534e6f42df9e77137")),It=$(o("0b993fcde2adbc6e7ca5716ff9afb47a69a37a7cfaa3d23f41b557")),pa=$(o("23f11725cab5847644bd4977c1879c52418b5254d29bca074f89455a")),$(o("5d6bed238c3f4e711333896cc42e0e6419")),ea=$(o("a85cd8c8c190c30cdbe89c2ed76498f1")),ga=$(o("66d21aca0716010e05965e2c02f151f3")),Ui=$(o("4d1bfd33bc2f7e773e2fb925b72f2378")),Vt=$(o("144064d475847718770430c24f870701")),ma=$(o("1523a5fbf46736bf7667f1fdce6446a60874d2acdd7545f14177dc94")),_a=$(o("e97f592f0033c25090101249064b99419a01154d100b")),Ga=$(o("be6ab262afbea9a5a725e934b9f6ebbca33abd0cbd87f1")),ya=$(o("c2f6b6e6ab3aa538a9afe5b2a072e00db39a")),xa=$(o("daceaedeb3028d108187cd9a885acf0c8f88d8")),Ba=$(o("5a4e2e5e33820d9001074d1a08da44960d1242")),Gt=$(o("ff153341ee59a8066b59701ff911e410692f")),Bt=$(o("b6624a7ad7a651beca20f234")),Ft=$(o("bd8b0d432cdfee18a0d7231d3bc9")),Dt=$(o("524626563b8a359a3f1f6804308853")),Li=$(o("1c486cdc4d9c4f104b1c0884059b0503")),ai=$(o("56c22ada3706311d328e5994105e45030783498b")),ii=$(o("cd9b7db33caffef4b9a72eed2be7aeffb8bc31f10cb7")),Ho=$(o("08fc7868613063bc7f883c103913378b")),zo=$(o("11a7a177f8eb3a3875ebe229efa37a2851bfc135d7")),Vo=$(o("b8acc838d160d3ffacf07b76b63863efb8b47c7aa0")),Wo=$(o("56c22ada3706311d328e5994105e4810109244")),(Z=O.da(b.i,function(){b.i.call(this,b.ab.af)})).prototype.oa=async function(){this.Oh=-1,this.df="",this.ae=new b.Lg,await this.ae.oa(ea),Ga.click(function(){}),ea.click(function(){A.m.v&&A.h.J(A.h.Nf)}),ga.click(function(){A.u.ok()}),Ui.click(function(){A.u.Co()}),_a.keypress(function(f){f.keyCode===13&&A.ai()}),ya.click(function(){A.ai()}),xa.click(function(){A.ai()}),Ba.click(function(){A.h.J(A.h.gj)}),Dt.click(function(){A.h.J(A.h.tf)}),Gt.click(function(){A.m.v&&A.h.J(A.h.$i)}),Ft.click(function(){A.m.v&&A.h.J(A.h.Vi)}),Bt.click(function(){A.m.v&&A.h.J(A.h.oj)}),Li.click(function(){A.m.v&&A.h.J(A.h.uf)}),this.Bp();var c=b.I.Zb(b.I.Ui);c!==o("1a6a8e6850ee")&&c!==o("1552d289d438")&&(c=o("982888aed2ac")),Ga.val(c)},Z.prototype.B=function(){var c=this;A.m.xh(function(){A.m.v?(A.u.aa(A.m.tn(),b.s.Y),A.u.aa(A.m.wn(),b.s.sa),A.u.aa(A.m.fl(),b.s.xa),A.u.aa(A.m.An(),b.s.za),A.u.aa(A.m.En(),b.s.ya)):(A.u.aa(A.ql(),b.s.Y),A.u.aa(0,b.s.sa),A.u.aa(0,b.s.xa),A.u.aa(0,b.s.za),A.u.aa(0,b.s.ya))}),A.m.xh(function(){ya.toggle(A.m.v),Ba.toggle(!A.m.v),xa.toggle(!A.m.v),Ft.toggle(A.m.v),Bt.toggle(A.m.v),Li.toggle(A.m.v),Gt.toggle(!0),Dt.toggle(!0),A.m.v?(Vt.hide(),ii.html(A.m.aj()),ai.attr(o("6b6f1f3d"),A.m.hj()),Ho.html(A.m.Fd()),zo.width(100*A.m.Pf()/A.m.Rf()+o("039137c3")),Vo.html(A.m.Pf()+o("b6624a799ff93ae88c7f")+A.m.Rf()),Wo.html(A.m.Of()),_a.val(A.m.Bd())):(Vt.toggle(!A.wg()),ii.html(ii.data(o("0a7cb9787deb"))),ai.attr(o("b6340a2a"),Ml),Ho.html(o("a12313")),zo.width(o("a5a6")),Vo.html(""),Wo.html(1),_a.val(b.I.Zb(b.I.Xi)))}),A.u.wh(function(){c.ae.vc(A.u.vh())})},Z.prototype.bb=function(){M.C(b.i.Wb,500),M.C(b.i.$b,1),M.C(b.i.ac,500),M.C(b.i.bc,500),M.g(b.i.dc,50),M.g(b.i.Eb,50),M.C(b.i.fc,500),M.g(b.i.Qb,50),M.g(b.i.hc,50),M.g(b.i.ic,50),M.g(b.i.jc,50),M.g(b.i.kc,50),M.g(b.i.lc,50)},Z.prototype.ni=function(){M.C(re,500),M.C(oe,500),M.C(ki,500),M.g(ve,100)},Z.prototype.Dl=function(){M.g(re,100),M.g(oe,100),M.g(ki,100),M.C(ve,500)},Z.prototype.hf=function(c,f){this.df!==c&&(this.df=c),c=O.Ad(Math.floor(100*f),0,100),this.Oh!==c&&(It.css(o("d1353a60212e"),c+o("374d0b9f")),pa.html(c+o("c0b43023e12733")))},Z.prototype.ba=function(){this.ae.ld(!0)},Z.prototype.Wd=function(){this.ae.ld(!1)},Z.prototype.la=function(){this.ae.la()},Z.prototype.Va=function(){this.ae.Va()},Z.prototype.Bd=function(){return _a.val()},Z.prototype.ui=function(){return Ga.val()},Z.prototype.Bp=function(){var c,f;A.wg()||(Vt.show(),c=O.N(o("5cc4f04b05498cd405d8c3190558c3d542d0cb51056fc7ad18aad52c2b22d3a50fe3cd27e123a7")),f=encodeURIComponent(O.N(o("f58f19cc1c92d5cb9c831a9eec936ada2b9be2d6fcd47ed26191ecabc2697aaa6628f4a7f46f5aa2795ef3b1d8"))),ma.append($('<a class="mm-skin-over-button" id="mm-skin-over-fb" target="_blank" href="https://www.facebook.com/dialog/share?app_id=861926850619051&display=popup&href=https%3A%2F%2Fwormate.io&redirect_uri=https%3A%2F%2Fwormate.io&hashtag=%23wormateio&quote='+f+'"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDQ1NiA0NTYiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik0yNDQuMyA0NTZWMjc5LjdoLTU5LjN2LTcxLjloNTkuM3YtNjAuNGMwLTQzLjkgMzUuNi03OS41IDc5LjUtNzkuNWg2MnY2NC42aC00NC40Yy0xMy45IDAtMjUuMyAxMS4zLTI1LjMgMjUuM3Y1MGg2OC41bC05LjUgNzEuOWgtNTkuMVY0NTZ6IiBmaWxsPSIjZmZmIi8+PC9zdmc+"/>'+o("7064818007b5d7295d7aff")+c+o("984ce9a8b9df981cd0108cd697b0c344eb5cd8bdcdd8dd3a")).click(function(){A.Pl(),O.fa(function(){Vt.hide()},3e3)})))},Z),b.ro=((Z=O.da(b.i,function(){b.i.call(this,b.ab.dd)})).prototype.B=function(){},Z.prototype.bb=function(){M.g(b.i.Wb,50),M.g(b.i.$b,1),M.g(b.i.ac,50),M.g(b.i.bc,50),M.g(b.i.dc,50),M.g(b.i.Eb,50),M.g(b.i.fc,50),M.g(b.i.Qb,50),M.g(b.i.hc,50),M.g(b.i.ic,50),M.g(b.i.jc,50),M.g(b.i.kc,50),M.g(b.i.lc,50)},Z),b.zn=((Z=O.da(b.i,function(){b.i.call(this,b.ab.dd)})).prototype.B=function(){},Z.prototype.bb=function(){M.C(b.i.Wb,500),M.C(b.i.$b,1),M.g(b.i.ac,50),M.g(b.i.bc,50),M.g(b.i.dc,50),M.g(b.i.Eb,50),M.g(b.i.fc,50),M.g(b.i.Qb,50),M.g(b.i.hc,50),M.g(b.i.ic,50),M.C(b.i.jc,500),M.g(b.i.kc,50),M.g(b.i.lc,50)},Z.prototype.ba=function(){},Z),b.Jn=(Gl=$(o("7f95b3c177db6485f3ddfbd778c86c9de4")),(Z=O.da(b.i,function(){b.i.call(this,b.ab.dd),this.oe=[],this.qe=null})).prototype.B=function(){},Z.prototype.bb=function(){M.C(b.i.Wb,500),M.C(b.i.$b,1),M.g(b.i.ac,50),M.C(b.i.bc,500),M.g(b.i.dc,50),M.g(b.i.Eb,50),M.g(b.i.fc,50),M.g(b.i.Qb,50),M.C(b.i.hc,500),M.g(b.i.ic,50),M.g(b.i.jc,50),M.g(b.i.kc,50),M.g(b.i.lc,50)},Z.prototype.ba=function(){this.Ei()},Z.prototype.fp=function(){return this.qe!=null||0<this.oe.length},Z.prototype.Cg=function(c){this.oe.unshift(c),O.fa(function(){A.h.Rh()},0)},Z.prototype.nk=function(c){this.oe.push(c),O.fa(function(){A.h.Rh()},0)},Z.prototype.Ei=function(){var c,f,g=this;this.qe==null&&(this.oe.length===0?A.h.Yd():(c=this.oe.shift(),f=(this.qe=c).$c(),M.C(f,300),Gl.append(f),c.te=function(){f.fadeOut(300),O.fa(function(){f.remove()},300),g.qe===c&&(g.qe=null),g.Ei()},c.ba()))},Z),b.ab={dd:0,af:1},b.j=(Bl=$(o("0236f62676f8b8ec7a36a17860eafdcd7341b149")),Yo=$(o("79cfc99f8d810fc5f1df6ed16b83aadbe69365cf209ce0b8")),$o=$(o("fb89cfdd0fdff18773996893e9cda49964d5638da2b6f06e")),$(o("3d0b8dc3b15d3381351baa9da74f669e2c5da4")).click(function(){A.h.Yd()}),Yo.click(function(){A.m.v&&A.h.J(A.h.uf)}),(Xe=O.da(b.i,function(c,f){b.i.call(this,b.ab.af),this.xb=c,this.zm=f,this.yf=[]})).prototype.B=function(){Xe.parent.prototype.B.call(this),Xe.Jm||(Xe.Jm=!0,A.m.xh(function(){A.m.v?$o.html(A.m.Fd()):$o.html(o("dc1d"))})),M.g(b.j.Ng,100)},Xe.tb=$(o("786c88f81fa2d721f37cb4bae1a2")),Xe.ub=$(o("039137c5ebdde89e6ece7ed3f9a9f475")),Xe.wb=$(o("1e8ad28252418b534fdb8d945c52894a")),Xe.yb=$(o("1f7513a1cf3bc2ff49755ff3ce2b")),Xe.zb=$(o("66d21aca191e5809079157725ff55de001")),Xe.Ab=$(o("d96f693f2e25b67e927f157d0021")),Xe.Bb=$(o("984ce8d8ef99b11dc55c949ac182")),Xe.Cb=$(o("992f29ff6a6bfea28c644ab152")),Xe.Fb=$(o("ddeb6da316bb97fc81a406ef44b984f29ebb01d45c949ac182")),Xe.Hb=$(o("11a7a177f1e37b2d6defb62dfeed70254fe68e22ccf350")),Xe.Ng=$(o("23f11725d7b4cc7b58b90069ce89c50f458d5051")),Xe.prototype.bb=function(){M.C(b.i.Wb,1),M.C(b.i.$b,500),M.C(b.i.ac,200),M.C(b.i.bc,200),M.g(b.i.dc,200),M.g(b.i.Eb,200),M.g(b.i.fc,200),M.C(b.i.Qb,200),M.g(b.i.hc,200),M.g(b.i.ic,200),M.g(b.i.jc,200),M.g(b.i.kc,200),M.g(b.i.lc,200),Bl.html(this.xb),Yo.toggle(this.zm),this.eb()},Xe.prototype.eb=function(){},Xe.prototype.Me=function(c){var f=this,g=2147483647&O.Wn();return this.yf.push(g),M.C(b.j.Ng,100),O.fa(function(){f.xj(g)},c),new w5(this,g)},Xe.prototype.xj=function(c){(c=this.yf.indexOf(c))<0||(this.yf.splice(c,1),this.yf.length===0&&M.g(b.j.Ng,100))},Xe),Rf.prototype.dp=function(){this.Mn.xj(this.Rn)};var kl,Ul,Ll,Nl,jl,Xl,Vi,sc,rc,nc,oc,cc,dc,hc,oi,Hl,Wi,zl,Vl,Wl,Yl,$l,Kl,ql,Zl,Ql,Jl,ef,tf,Yi,er,tr,ar,af,sf,rf,nf,ir,ci,of,cf,lc,sr,fc,$i,df,rr,hf,lf,at,ff,uf,bf,pf,Ki,gf,mf,nr,uc,qi,_f,bc,pc,gc,mc,Zi,yf,xf,ot,Qi,vf,Tf,Ji,lt,or,Sf,Da,wf,Af,Z,_c,Ta,Ef,Pf,w5=Rf;function Rf(c,f){this.Mn=c,this.Rn=f}function es(c,f){this.pe=c,this.Sc=0,this.Rb=f}function ia(c,f,g){this.pe=c,this.ra=f,this.gd=g,this.qf={},this.Za=[[]],this.Tf=this.Jd=-10}function yc(){this.te=function(){}}function Mf(){var S=_c[o("783ed3af08a5")](),c=_c[o("8fa8f46b74ac61")](),f=Ta[o("18862f1f791f098644850a")](),g=Ta[o("6fcf049696d6bd831ecf119e")](),y=Ef[o("3d41ca84a4400b912c51af8c")](),x=Pf[o("dda12ae404a0abf18cb10fec")](),S=Math.min(1,Math.min((c-x-y)/g,S/f));S=o("7d1a8d516f01ef55f1132f153c4aae0eb85b3d0334b0a369a0b6327a2ca3be7eadfd7c314df78b").concat(S,o("caf2")),Ta[o("2575d4ab")](o("11afe421f7ed7e3c34fee92df3fd793f53ff"),S),Ta[o("8cbebd2c")](o("d8847744a6006add81df51558b474b"),S),Ta[o("a6541b4a")](o("cd9322f37cb6a1e5bbb531e72ba7"),S),Ta[o("ae5c0332")](o("37455687cf1edcc04c162ec0ae"),S),Ta[o("b307c6d5")](o("6b681f3f8153970d0149"),S),A.la(),b.Xb[o("16d4bbdb7547b07971")](0,1)}b.ym=(kl=$(o("fdcb4d83f2866cc660dbe5cdf0d768d36490fc9fa03026f42536")),Ul=$(o("4a7e3e6e3dab7f93374e76102fca7b8633056f326bdf10c152")),Ll=$(o("69ffd9af9eaa00d214cf91d18ccb14c7108488f3ccd84f80b1")),Nl=$(o("9a8e6e9eed5b0f43c79e06c0df1a0b56c3d51fe2990f4071")),jl=$(o("fa2e8e3e8dfbafe3673ea6607fbaabf66375bf423dade591")),Xl=$(o("82b676a6f563276befb62ee8f732334efbcd27faa7156d19")),(Vi=O.da(b.j,function(){b.j.call(this,O.N(o("d8c0744fb95530c881dc471d945a56c29897475e824800dc9fa85c30da3157a5")),!1),kl.click(function(){o("3b8f5247d1839e0371c17506f7")}),Ul.click(function(){o("7664576014f863b84e3f7021")}),Ll.click(function(){o("31c1dc0ddbd568590f9a8b5c")}),Nl.click(function(){o("26d487d04448b30a1e8fc0")}),jl.click(function(){o("c47669fea6ea5528fe283e")}),Xl.click(function(){o("84b6a93ee62a95eabee8fe")})})).prototype.B=function(){Vi.parent.prototype.B.call(this)},Vi.prototype.eb=function(){M.C(b.j.tb,200),M.g(b.j.ub,50),M.g(b.j.wb,50),M.g(b.j.yb,50),M.g(b.j.zb,50),M.g(b.j.Ab,50),M.g(b.j.Bb,50),M.g(b.j.Cb,50),M.g(b.j.Fb,50),M.g(b.j.Hb,50)},Vi.prototype.ba=function(){},Vi),b.Im=(sc=$(o("e5f355ab01b38cf49ebd00d214cf87c5978a12")),rc=$(o("706480f018a0d7231d3bc9e61eb8ca3bef3fefbfe1a3a33b")),nc=$(o("f94f491f110b9e546400f019e703734c6614a654e419673372ede121")),oc=$(o("d72deb7937693c2aba62927f016111228876c4310270012d")),cc=o("4a3975112ba9758d"),dc=o("c79ab072229b256dac6fa327"),hc=o("7cafc704e93daea0c5bba21fed38ae88e4b2ba2c"),(oi=O.da(b.j,function(){b.j.call(this,O.N(o("011bed50e00e295f6817ee12fd117f3561acfe21fbf339247cebff29effd312440f0")),!0);var c=this;this.mh={},this.Gc={rh:{gd:rc,yh:cc},xo:{gd:nc,yh:dc},Ao:{gd:oc,yh:hc}},rc.click(function(){c.Ye(c.Gc.rh)}),nc.click(function(){c.Ye(c.Gc.xo)}),oc.click(function(){c.Ye(c.Gc.Ao)})})).prototype.B=function(){oi.parent.prototype.B.call(this)},oi.prototype.eb=function(){M.g(b.j.tb,50),M.C(b.j.ub,200),M.g(b.j.wb,50),M.g(b.j.yb,50),M.g(b.j.zb,50),M.g(b.j.Ab,50),M.g(b.j.Bb,50),M.g(b.j.Cb,50),M.g(b.j.Fb,50),M.g(b.j.Hb,50)},oi.prototype.ba=function(){var c=this,f=this.Me(5e3),g=Jt+o("4276361336a26afc781d60382fbb759321");O.nc(g,function(){c.mh={[cc]:[],[dc]:[],[hc]:[]},c.Ye(c.mg??c.Gc.rh),f.dp()},function(y){c.mh=y,c.Ye(c.mg??c.Gc.rh),f.dp()})},oi.prototype.Ye=function(c){for(var f in this.mg=c,this.Gc)this.Gc.hasOwnProperty(f)&&this.Gc[f].gd.removeClass(o("f7588b0f085f180a"));this.mg.gd.addClass(o("de1fd2149180c191")),c=this.mh[this.mg.yh];for(var f="",g=0;g<c.length;g++){var y=c[g];f+='<div class="table-row"><span>'.concat(g+1,'</span><span><img src="').concat(y[o("2ede86a04622861044ab")],'"/></span><span>').concat(y[o("d77daa2f29623c23ba")],o("a85cd9b889cfa80cc0e09c268740d3b4fbfa8a6ad228cdca")).concat(y[o("2a57894b4bd3")],o("61f7d0d7c0e421eb19bb85b9de9b4a93329183c59bc344ed")).concat(y[o("7d0696576921e05bf713")],o("b420c5c49dbbbc78cc6c90aaf3d42720876676f6a6bc395e")).concat(y[o("2f0854c3d737ddc9431b")],o("9361a7b6327a5fafa97c")).concat(y[o("b2a81da9da34")],o("649095744d0becc81cdcc01a430497f037e084011c20ccee4f88"))}sc.empty(),sc.append(f)},oi),b.Xm=(Hl=$(o("382c48b84ce20e7a303ceefc23fce83a2f7e")),$(o("94c0e454e806aa9eecc0b200c7188cdec297")).remove(),(Wi=O.da(b.j,function(){var c=this;b.j.call(this,O.N(o("57e137aebef4f3a93efd04fc93fb95a317b604bf85e9c3b200c7188cddd09484")),!1),Hl.click(function(){var f=c.Me(1e4);O.fa(function(){A.m.op(function(){f.dp()})},500)})})).prototype.B=function(){Wi.parent.prototype.B.call(this)},Wi.prototype.eb=function(){M.g(b.j.tb,50),M.g(b.j.ub,50),M.g(b.j.wb,50),M.C(b.j.yb,200),M.g(b.j.zb,50),M.g(b.j.Ab,50),M.g(b.j.Bb,50),M.g(b.j.Cb,50),M.g(b.j.Fb,50),M.g(b.j.Hb,50)},Wi.prototype.ba=function(){},Wi),b.Rm=(zl=$(o("9e0a5202d2c10bd3cf5b0d14cbcd0dc9cf4d")),Vl=$(o("66d21aca1a09431b0793552c07f051f71866556c")),Wl=$(o("28dc58485c0f0199596d17ae51fd06624a601fe55fe8536d2163")),Yl=$(o("a7fd9b295bae4278c68cd40f569c4543c581dc4458891058de9c")),$l=$(o("fb89cfdd0fc2ee946ad860dbebddff9f67")),Kl=$(o("ae1a4272c2b11ba3df2b1d64c9bf1db99327e936aa80e7bab432")),ql=$(o("1523a5fbe97874aa7462fafdd26642a00874c2abdd495eae5b77d981dd765a8950")),Zl=$(o("fa2e8e3e8efdaff76b7fa13875e3a9ed2770a57162ec")),Ql=$(o("59efe9bfadbc30f608be86b996a206ec44b28efd89ad07cf0591")),Jl=$(o("f94f491f0d1c9056681ee619f602664c241dea51e80d5f2c70fbf620")),ef=$(o("a054d0c0d4878911c1158fd6df898f0b9df59d77d569a2eed5eca97bd9638a")),tf=$(o("1523a5fbe97874aa7462fafdd26642a00864c2bfc0695fae4c6ac68fdf66529050")),(Yi=O.da(b.j,function(){b.j.call(this,O.N(o("d5af39ec3cb2f5ebbca33abe11bd93e195f80afd07afc5ec9fb109c91d87ddd09484")),!0)})).prototype.B=function(){Yi.parent.prototype.B.call(this)},Yi.prototype.eb=function(){M.g(b.j.tb,50),M.g(b.j.ub,50),M.C(b.j.wb,200),M.g(b.j.yb,50),M.g(b.j.zb,50),M.g(b.j.Ab,50),M.g(b.j.Bb,50),M.g(b.j.Cb,50),M.g(b.j.Fb,50),M.g(b.j.Hb,50)},Yi.prototype.ba=function(){var c=A.m.oo(),c=window.moment([c.year,c.month-1,c.day]).format(o("902d9e"));Vl.html(A.m.aj()),zl.attr(o("4ceefc7c"),A.m.hj()),Wl.width(100*A.m.Pf()/A.m.Rf()+o("b6624a7c")),Yl.html(A.m.Pf()+o("c11771c4600481ddfb0a")+A.m.Rf()),$l.html(A.m.Of()),Kl.html(A.m.Kn()),ql.html(O.Ai(A.m.Qn())),Zl.html(A.m.Un()),Ql.html(A.m.$n()),Jl.html(A.m.fo()),ef.html(O.Ai(A.m.ko())),tf.html(c)},Yi),b.$m=(er=$(o("84f0f464fb3cbeafe5b3a92cbd0ca790fd86fb02f608b887f989f31cd7189690cc")),tr=$(o("7aae0ebe0d6a3465ebfd23e6ab642e61a7fe22fcec733545bfd023cce24430")),ar=$(o("23f11725d4bddd6e42b24a6d8293d94d44c95b47da8dca07489b545adc98")),af=$(o("3d0b8dc3b15d3381351bab97ae553e88")),sf=$(o("e5f355ab19b59be99df303cf168d86d0d88518c60d8b92c2989c")),rf=$(o("82b676a6f678386cfab628f8e27a2444bfc237c6f952365d")),nf=$(o("28dc58485c121e8a402c16e658e00262156819e853f8107b6d72edfd30f4ef792d6b")),ir=$(o("34a0443448660afe4ca009663479e6e125e2ab742777f9fe22e9")),(ci=O.da(b.j,function(){b.j.call(this,O.N(o("a65e065dcfc342dacf52156fc2ac04b0c669152cd4be52bedb3bf438acb4f7fbb236ea")),!1);var c=this;er.click(function(){var f=!!er.prop(o("5042fac637cef343"));b.I.vb(b.I.Ii,f)}),tr.click(function(){var f=!!tr.prop(o("8032aab6e7bea333"));b.I.vb(b.I.Ni,f)}),ar.click(function(){}),af.click(function(){c.Me(500),A.m.Uh()}),rf.click(function(){A.m.v&&A.h.J(A.h.Gi)}),ir.click(function(){A.od()&&A.h.J(A.h.yi)})})).prototype.B=function(){var c;ci.parent.prototype.B.call(this),c=b.I.Zb(b.I.Ii)!==o("e77e88361879"),er.prop(o("ef439907104f1002"),c),c=b.I.Zb(b.I.Ni)!==o("5e89419d1116"),tr.prop(o("a5f54f3d4af1ce38"),c),c=b.I.Zb(b.I.Fi)!==o("a6510955d9de"),ar.prop(o("97abf16f78a7786a"),c),A.m.Uj(function(){sf.toggle(A.m.v),nf.toggle(A.m.v)})},ci.prototype.eb=function(){M.g(b.j.tb,50),M.g(b.j.ub,50),M.g(b.j.wb,50),M.g(b.j.yb,50),M.C(b.j.zb,200),M.g(b.j.Ab,50),M.g(b.j.Bb,50),M.g(b.j.Cb,50),M.g(b.j.Fb,50),M.g(b.j.Hb,50)},ci.prototype.ba=function(){A.od()?ir.show():ir.hide()},ci.prototype.Ji=function(){return ar.prop(o("95e57f2d7ae1fe28"))},ci),b.jn=(of=$(o("e73ddb691868022c8a0d870b1653580596468f")),cf=$(o("a2965686d55c015787df09cecd4d1931c6aa1bab9b331d31ce")),lc=$(o("2216d60655dc81d7075c9e525bcfdda5573097375fb78ca05525d1395bb774")),sr=$(o("887cf8e8ffa9a12df54cbe8cf78eb303b50bbb99")),fc=$(o("84f0f464fb2da5a9e9f0a230f30ab787b987b715b51dbf93e8")),$i=$(o("08fc78687f2921ad75cc30166d4834926c9d3505")),df=$(o("350385dbca5e549e5803d684a45f6e84375fa49d")),rr=$(o("f381c7d504dc16989e819a9c10c5f181")),hf=$(o("acd8dc4cc3f59d71d12880eeddfed77bce6888")),lf=$(o("a4d0d444db0d8589c9d09816d5f6df6dd17d82")),(at=O.da(b.j,function(){b.j.call(this,O.N(o("354fd98cdc52158b5c43dadeb15d33813518aa9da74f658f2657a173ff363266")),!0)})).prototype.oa=async function(){var c=this;this.Lc=null,this.Mc=[],this.Ak={},this.Ra=new b.Lg,await this.Ra.oa(of),$i.click(function(){c.$o()}),hf.click(function(){c.Lc.gp()}),lf.click(function(){c.Lc.kp()})},at.prototype.B=function(){at.parent.prototype.B.call(this);var c=this;A.A.zg(function(){var f=A.A.Ja.cb;c.Mc=[];for(var g=0;g<f[o("77db128395eb8f810ac0c08071d57cb2eedbfd")].length;g++)c.Mc.push(new ff(c,f[o("b79bd24355ab4f41ca80804031953c72ae9bbd")][g]));for(c.Ak={},g=0;g<f[o("898960d563bffdb2f07b57ad7672")].length;g++){var y=f[o("9ad837c4f06e1243c3ca20dcc543")][g];c.Ak[y[o("7b4519")]]=y}c.Qk()}),this.uc(!1),A.u.wh(function(){c.uc(!1)})},at.prototype.eb=function(){M.g(b.j.tb,50),M.g(b.j.ub,50),M.g(b.j.wb,50),M.g(b.j.yb,50),M.g(b.j.zb,50),M.C(b.j.Ab,200),M.g(b.j.Bb,50),M.g(b.j.Cb,50),M.g(b.j.Fb,50),M.g(b.j.Hb,50)},at.prototype.ba=function(){this.Qk(),this.Ra.ld(!0)},at.prototype.Wd=function(){this.Ra.ld(!1)},at.prototype.la=function(){this.Ra.la()},at.prototype.Va=function(){this.Ra.Va()},at.prototype.Qk=function(){var c=this,f=this;rr.empty();for(var g=0;g<this.Mc.length;g++)(R=>{var F=c.Mc[R],k=(R=b.d.createElement(o("edb206")),rr.append(R),R=$(R),F.Rb.img);k?R.html('<img src="'+k+'" height="40">'):R.html(F.wp()),R.click(function(){f.ei(F)}),F.ii=R})(g);if(0<this.Mc.length){for(var g=A.u.na(b.s.Y),y=0;y<this.Mc.length;y++)for(var x=this.Mc[y],S=x.Rb.list,E=0;E<S.length;E++)if(S[E]===g)return x.Sc=E,void this.ei(x);this.ei(this.Mc[0])}},at.prototype.ei=function(c){this.Lc!==c&&(this.Lc=c,rr.children().removeClass(o("ddbe2df512a186f0")),this.Lc.ii&&this.Lc.ii.addClass(o("21e2d131d6e5423c")),lc.html(""),c.Rb!=null&&(c=A.A.Ja.cb[o("0a6fa9657adbb9c266")][c.Rb[o("a7bccc6948ae446edb89de4c")]])!=null&&lc.html(O.pm(O.le(c))),this.uc(!0))},at.prototype.ri=function(){return this.Lc==null?b.Rc.xg():this.Lc.yg()},at.prototype.$o=function(){var c=this.ri();c.nf()&&this.Ql(c.Tb())},at.prototype.Ql=function(c){var f,g,y,x,S,E,R=A.u.cf(c,b.s.Y);R==null||(R=R.Ve,A.m.Fd()<R)||(f=A.u.na(b.s.Y),g=A.u.na(b.s.sa),y=A.u.na(b.s.xa),x=A.u.na(b.s.za),S=A.u.na(b.s.ya),E=this.Me(5e3),A.m.zk(c,b.s.Y,function(){E.dp(),A.h.J(A.h.mb)},function(){A.m.Ch(function(){A.u.aa(f,b.s.Y),A.u.aa(g,b.s.sa),A.u.aa(y,b.s.xa),A.u.aa(x,b.s.za),A.u.aa(S,b.s.ya),A.u.aa(c,b.s.Y),E.dp()})}))},at.prototype.uc=function(c){var f,g,y=A.u.vh(),x=this.ri();x.nf()&&(x=x.Tb(),f=A.u.cf(x,b.s.Y),g=!1,A.u.rc(x,b.s.Y)?(sr.hide(),$i.hide()):f==null||f.Xe?(g=!0,sr.show(),$i.hide(),fc.text(O.N(o("0ef6bec5775bfa4277cabd876a44ac586e818dd44c46ca4652d89adc0457835e45da94"))),f!=null&&f.Xe&&(f=A.A.Ja.cb[o("77dc1c928fe8948d0b")][f.kk])!=null&&fc.text(O.le(f))):(sr.hide(),$i.show(),df.html(f.Ve)),cf.html(o("c33d819374396c88fb")+x),this.Ra.vc(y.Wl(x)),this.Ra.ao(g),c)&&A.u.aa(x,b.s.Y)},es.prototype.gp=function(){--this.Sc<0&&(this.Sc=this.Rb.list.length-1),this.pe.uc(!0)},es.prototype.kp=function(){++this.Sc>=this.Rb.list.length&&(this.Sc=0),this.pe.uc(!0)},es.prototype.wp=function(){return O.le(this.Rb.name)},es.prototype.yg=function(){return this.Sc>=this.Rb.list.length?b.Rc.xg():b.Rc.vi(this.Rb.list[this.Sc])},ff=es,at),b.rn=(uf=$(o("e17751271622886a8c770c73403d80499f115e460012834797")),bf=$(o("ddeb6da312a68ce680fb00f744a980f583ad42c2049687cb9b")),pf=$(o("84f0f464fb2da5a9e9f0a930bd16b782e6c8b412ec1db585")),(Ki=O.da(b.j,function(){b.j.call(this,O.N(o("ac94801bd5f9dc64d56893a9c8e68a7ecc2393eaaee42c60b07a74f2e6ed6b79")),!0),uf.click(function(){A.h.J(A.h.uf)}),bf.click(function(){A.h.J(A.h.Nf)}),pf.click(function(){A.h.J(A.h.ah)})})).prototype.B=function(){Ki.parent.prototype.B.call(this)},Ki.prototype.eb=function(){M.g(b.j.tb,50),M.g(b.j.ub,50),M.g(b.j.wb,50),M.g(b.j.yb,50),M.g(b.j.zb,50),M.g(b.j.Ab,50),M.C(b.j.Bb,200),M.g(b.j.Cb,50),M.g(b.j.Fb,50),M.g(b.j.Hb,50)},Ki.prototype.ba=function(){},Ki),b.vn=(gf=$(o("72a606b60162597b57fd55e809222370ece5")),mf=$(o("9044e0d0e380b715b50dbf98ff9fb71fd4188d9d8981830fdc")),nr=$(o("4fa563f1a4e1b4b47ae436a9b0e9b9e33df113")),uc=$(o("8553350b7e1fea4ea01260237ae7f769f7e765656defe338")),qi=$(o("f94f491f0a0b9e422c10f64da814724c7d15e5")),_f=$(o("a93f19ef5a7bce929c4b4781580bc79ad0495e")),bc=$(o("2a1ede0e59da91b31f268d2045ea9abc4e3f9323")),pc=$(o("3d0b8dc3b6572286685ba88dbd5238d12f4bbb74be2c")),gc=$(o("0ddbbdf3e66772b63861fba9ea797ebf306ceaa4d57d4d")),mc=$(o("e97f592f1a3b8e52dc0a1250064b955d8d1e1442")),Zi=$(o("5d6bed239637026648228e769d77087402319c4583")),yf=$(o("6a5e1e4e199a51735ff55de0012a487b1ffd")),xf=$(o("f6a28aba8d6edd7fd3f9a9f4753eaa707ee3")),(ot=O.da(b.j,function(){b.j.call(this,O.N(o("140c38837d91740c7d003bc1509e1206545b0b92468c440c491c1cd1446010")),!0)})).prototype.oa=async function(){var c=this,f=this;this.wd=[],this.sa=new Qi(this,b.s.sa,bc),this.xa=new Qi(this,b.s.xa,pc),this.za=new Qi(this,b.s.za,gc),this.ya=new Qi(this,b.s.ya,mc),this.Wi=this.Si=this.Pi=this.Ki=this.Hi=this.Ub=null,this.Ra=new b.Lg,await this.Ra.oa(gf),qi.click(function(){f.Km()}),yf.click(function(){f.Ub.Om()}),xf.click(function(){f.Ub.Sm()}),bc.click(function(){f.Ae(c.sa)}),pc.click(function(){f.Ae(c.xa)}),gc.click(function(){f.Ae(c.za)}),mc.click(function(){f.Ae(c.ya)}),this.wd.push(this.sa),this.wd.push(this.xa),this.wd.push(this.za),this.wd.push(this.ya)},ot.prototype.B=function(){ot.parent.prototype.B.call(this);var c=this;A.A.zg(function(){var f=A.A.Ja.cb;c.Hi=f[o("b78dc04f48a8544dcb")],c.Ki=f[o("92ce3bd0e24f1c40f9df")],c.Pi=f[o("23b34977d4abcc696fb54e6a")],c.Si=f[o("156ef6bcdd6378b8")],c.Wi=f[o("56847785351958043d9b")],c.sa.Gf(f[o("2bb9547bdcb6d0505a855b52f69acb4b42")]),c.sa.Jf(c.Hi),c.xa.Gf(f[o("bc6091fab4f95472b67c67f9bcd87869ad64")]),c.xa.Jf(c.Ki),c.za.Gf(f[o("87dfe59b78cf688dd9a1e36b72aa6147e5baf873")]),c.za.Jf(c.Pi),c.ya.Gf(f[o("835ce40251597b13ea52f93f7d3270fb")]),c.ya.Jf(c.Si)}),this.uc(!1),A.u.wh(function(){c.uc(!1)})},ot.prototype.eb=function(){M.g(b.j.tb,50),M.g(b.j.ub,50),M.g(b.j.wb,50),M.g(b.j.yb,50),M.g(b.j.zb,50),M.g(b.j.Ab,50),M.g(b.j.Bb,50),M.C(b.j.Cb,200),M.g(b.j.Fb,50),M.g(b.j.Hb,50)},ot.prototype.ba=function(){this.Ae(this.Ub??this.sa),this.Ra.ld(!0)},ot.prototype.Wd=function(){this.Ra.ld(!1)},ot.prototype.la=function(){this.Ra.la()},ot.prototype.Va=function(){this.Ra.Va()},ot.prototype.Ae=function(c){for(this.Ub=c,c=0;c<this.wd.length;c++)this.wd[c].gd.removeClass(o("d778ab2f287f382a"));this.Ub.gd.addClass(o("74b5c4220b3adfaf")),this.Ub.bb()},ot.prototype.mj=function(){return this.Ub==null?b.Rc.xg():b.Rc.vi({T:this.Ub.yg(),ra:this.Ub.ra})},ot.prototype.Km=function(){var c=this.mj();c.nf()&&(c=c.Tb(),this.kn(c.T,c.ra))},ot.prototype.kn=function(c,f){var g,y,x,S,E,R,F=A.u.cf(c,f);F==null||(F=F.Ve,A.m.Fd()<F)||(g=A.u.na(b.s.Y),y=A.u.na(b.s.sa),x=A.u.na(b.s.xa),S=A.u.na(b.s.za),E=A.u.na(b.s.ya),R=this.Me(5e3),A.m.zk(c,f,function(){R.dp(),A.h.J(A.h.mb)},function(){A.m.Ch(function(){A.u.aa(g,b.s.Y),A.u.aa(y,b.s.sa),A.u.aa(x,b.s.xa),A.u.aa(S,b.s.za),A.u.aa(E,b.s.ya),A.u.aa(c,f),R.dp()})}))},ot.prototype.uc=function(c){var f=A.u.vh();if((g=this.mj()).nf()){var g=g.Tb(),y=A.u.cf(g.T,g.ra),x=!1;switch(A.u.rc(g.T,g.ra)?(nr.hide(),qi.hide()):y==null||y.Xe?(x=!0,nr.show(),qi.hide(),uc.text(O.N(o("5048fcc731ddb8403944ff852cc2ee5a101fcfd60ac088441c56d8de42d1c15c1b24d6"))),y!=null&&y.Xe&&(y=A.A.Ja.cb[o("173c7cf2ef08f4ed6b")][y.kk])!=null&&uc.text(O.le(y))):(nr.hide(),qi.show(),_f.html(y.Ve)),mf.html("ID: "+g.T+" TYPE: "+g.ra),y=this.Ra,g.ra){case b.s.sa:y.vc(f.cm(g.T)),y.lo(x);break;case b.s.xa:y.vc(f.im(g.T)),y.po(x);break;case b.s.za:y.vc(f.sm(g.T)),y.wo(x);break;case b.s.ya:y.vc(f.om(g.T)),y.so(x)}c&&A.u.aa(g.T,g.ra)}},ia.prototype.Gf=function(c){this.Za=c},ia.prototype.Jf=function(c){this.qf=c},ia.prototype.bb=function(){for(var c=A.u.na(this.ra),f=0;f<this.Za.length;f++)for(var g=0;g<this.Za[f].length;g++)if(this.Za[f][g]===c)return this.Uf(f),void this.ie(g);this.Uf(0),this.ie(0)},ia.prototype.Om=function(){var c=this.Jd-1;c<0&&(c=this.Za.length-1),this.Uf(c),this.ie(this.Tf%this.Za[c].length)},ia.prototype.Sm=function(){var c=this.Jd+1;c>=this.Za.length&&(c=0),this.Uf(c),this.ie(this.Tf%this.Za[c].length)},ia.prototype.Uf=function(c){var f=this;if(!(c<0||c>=this.Za.length)){this.Jd=c,Zi.empty();var g=this.Za[this.Jd];if(1<g.length)for(c=0;c<g.length;c++)(y=>{var x=f.qf[g[y]],x=o("ec181c8c")+f.pe.Wi[x[o("9819a882f188")]];(x=$('<div style="border-color:'+x+'"></div>')).click(function(){f.ie(y)}),Zi.append(x)})(c)}},ia.prototype.ie=function(c){c<0||c>=this.Za[this.Jd].length||(this.Tf=c,Zi.children().css(o("487bebf827fafc70254ff68e37cafa482a"),o("3f0433d3ad07b5d7351d27ce")),(c=Zi.children(o("c43035d6a6ed6236af7567f3b489")+(1+c)+o("451f"))).css(o("075a6819e05bff117a2e75aff02bf9e965"),c.css(o("63760a24837d9b77087301319d"))),this.pe.uc(!0))},ia.prototype.yg=function(){return this.Za[this.Jd][this.Tf]},Qi=ia,ot),b.gm=(vf=$(o("fa2e8e3e89e6b4f96661a5622bf4a7f7797ea26923e6b5d2")),Tf=$(o("499ff94fbad73be835b0b2f3f8a538e62aafb5f8f0a030")),(Ji=O.da(b.j,function(){b.j.call(this,O.N(o("19e3f528f8f6313740ffc67ad5f9572d59b4c639c3eb01035eccc001dbd2191c58c8")),!1),vf.click(function(){A.od()?(A.h.J(A.h.ma),A.eh(!1,!0),A.h.Dc.Cg(new b.gh)):A.h.Yd()}),Tf.click(function(){A.h.Yd()})})).prototype.B=function(){Ji.parent.prototype.B.call(this)},Ji.prototype.eb=function(){M.g(b.j.tb,50),M.g(b.j.ub,50),M.g(b.j.wb,50),M.g(b.j.yb,50),M.g(b.j.zb,50),M.g(b.j.Ab,50),M.g(b.j.Bb,50),M.g(b.j.Cb,50),M.C(b.j.Fb,200),M.g(b.j.Hb,50)},Ji.prototype.ba=function(){},Ji),b.rm=(lt=$(o("d96f693f392bb37595374e750635886d872e466804338a52")),or=$(o("2e9ac2f25626982042a2d5a85928933850bb2da82720")),Sf=$(o("dba9effd3bf50db797f1c8b704fb06af85e8c0b000")),(Da=O.da(b.j,function(){b.j.call(this,O.N(o("4b95235aaa78ff2532693068a767a93f2b22302bb165cf360678002282369d3b09")),!1),or.click(function(){A.m.v?(A.m.zl(),A.m.Uh()):A.h.Yd()}),Sf.click(function(){A.h.Yd()}),this.Zf=[]})).prototype.B=function(){Da.parent.prototype.B.call(this)},Da.prototype.eb=function(){M.g(b.j.tb,50),M.g(b.j.ub,50),M.g(b.j.wb,50),M.g(b.j.yb,50),M.g(b.j.zb,50),M.g(b.j.Ab,50),M.g(b.j.Bb,50),M.g(b.j.Cb,50),M.g(b.j.Fb,50),M.C(b.j.Hb,200)},Da.prototype.ba=function(){M.g(or,1),M.C(lt,1),lt.text(o("c35aeb937548788aee4efd9061")),this.Sn(),this.dq(function(){lt.text(o("904ffcc6a6d5ef42aa59f4c5"))},1e3),this.dq(function(){lt.text(o("9cc3f04a9241dad696c5c859"))},2e3),this.dq(function(){lt.text(o("318c9d418796004d0b9a9542"))},3e3),this.dq(function(){lt.text(o("4ef13ec46053224064d736c7"))},4e3),this.dq(function(){lt.text(o("f8e7146ece7d0bea32e16c7d"))},5e3),this.dq(function(){lt.text(o("ead582d8dc4f84a4c0339a2b"))},6e3),this.dq(function(){lt.text(o("1e81ce941003d7101487c697"))},7e3),this.dq(function(){lt.text(o("778657cfc99ccfcb4d80afdc"))},8e3),this.dq(function(){lt.text(o("34ab58220a394bae0ebd5021"))},9e3),this.dq(function(){M.C(or,300),M.g(lt,1)},1e4)},Da.prototype.dq=function(c,f){c=O.fa(c,f),this.Zf.push(c)},Da.prototype.Sn=function(){for(var c=0;c<this.Zf.length;c++)O.Yl(this.Zf[c]);this.Zf=[]},Da),b.Td=(yc.prototype.$c=function(){},yc.prototype.ba=function(){},yc),b.Qo=((Z=O.da(b.Td,function(c){b.Td.call(this);var f=O.Lb()+o("6985")+Math.floor(1e3+8999*Math.random()),g=(this.Hc=$('<div id="'.concat(f,'" class="toaster toaster-coins"><img class="toaster-coins-img" alt="Wormate Coin" src="/images/coin_320.png" /><div class="toaster-coins-val">').concat(c,'</div><div class="toaster-coins-close">').concat(O.N(o("a65e065dcfc342dacf52156fc6ac15b6c2220a67d9a412b9d721f534")),o("de4a9332c7c1e2918f018d4aafde9fbecb4df6e59b759136b3"))),this);this.Hc.find(o("51eca7ebb4b523ed2be7b8e3b4a02cbd02be8ce780")).click(function(){g.te()})})).prototype.$c=function(){return this.Hc},Z.prototype.ba=function(){},Z),b.Lo=((Z=O.da(b.Td,function(c){b.Td.call(this);var f=O.Lb()+o("b5f9")+Math.floor(1e3+8999*Math.random()),g=(this.Hc=$('<div id="'.concat(f,'" class="toaster toaster-levelup"><img class="toaster-levelup-img" alt="Wormate Level Up Star" src="/images/level-star.svg" /><div class="toaster-levelup-val">').concat(c,'</div><div class="toaster-levelup-text">').concat(O.N(o("0f297fe6f63cbbe176257ca4ef23fcfd6b3553bccf31d3f34b2d59")),'</div><div class="toaster-levelup-close">').concat(O.N(o("ab35c3fa4a181fc5d209d088430758d9cf09cf805c1f2fc6aa1ab0d3")),o("1e8ad3f20701a2514fc1cd8a6f1edf7e0b8db6a55b35d17673"))),this);this.Hc.find(o("7867cea41dbeca2af27caeb6f2b0aa22f874a9b7e3aeab")).click(function(){g.te()})})).prototype.$c=function(){return this.Hc},Z.prototype.ba=function(){},Z),b.gh=((Z=O.da(b.Td,function(){b.Td.call(this);var c=this,f=O.Lb()+o("8806")+Math.floor(1e3+8999*Math.random());this.Hc=$('<div id="'+f+'" class="toaster toaster-consent-accepted">    <img class="toaster-consent-accepted-logo" src="'+g5+'" alt="Wormate.io logo"/>    <div class="toaster-consent-accepted-container">        <span class="toaster-consent-accepted-text">'+O.N(o("241c08934d81441c4d100bd1446e13f040e004295b6614f859e30a213474fae7")).replaceAll(o("ab799fae"),o("19afa97af3ec6c2004a1e1")).replaceAll("",o("23f11655c5aa8c286df91e5b"))+o("a054d1b081c7a004d81884de9fb8")+'        <a class="toaster-consent-accepted-link" href="/privacy-policy">'+O.N(o("f42c58a39db1142c9d205be174be2320703034f96bb6242869333af17c883c08"))+o("89df38ff28ccc9a1b43156")+o("245054c70dcb5a5e1e4d4bcd002441c011b73063517f5fb879")+'    <div class="toaster-consent-close">'+O.N(o("1ba5736afaa88f7542b94038d3b7c8695fb95f30cc8fdf51568a4108dea9da495e9c49"))+o("5a4e2f2e7bdd66950b05014623")+o("6256173643c56e9d030d094e2b")),this.sh=this.Hc.find(o("66d95c960b0858181cd2536e1cf051eb022a5b6515f859")),this.sh.hide(),this.sh.click(function(){A.od()&&A.eh(!0,!0),c.te()})})).prototype.$c=function(){return this.Hc},Z.prototype.ba=function(){var c=this;A.od()&&!A.If()?O.fa(function(){c.sh.fadeIn(300)},2e3):O.fa(function(){c.te()},0)},Z),b.Zn=(wf=$(o("f46004f49dbb48248e6059ae74b435327d7825b866b72f38783421b13d933717661c")),(Z=O.da(b.i,function(){b.i.call(this,b.ab.dd),wf.click(function(){A.h.zc.Ik(),A.h.J(A.h.zc),O.fa(function(){var c=Jt+o("e5f355de19af89b9df9807c5108e87ccb68e12cb12cfc9ea8d8711d7");O.nc(c,function(){A.h.J(A.h.mb)},function(){A.h.zc.Wo(),A.A.Ih(function(){A.h.J(A.h.ma)},function(){A.h.J(A.h.mb)},function(f,g){A.h.zc.hf(f,g)})})},2e3)})})).prototype.B=function(){},Z.prototype.bb=function(){M.C(b.i.Wb,500),M.C(b.i.$b,1),M.g(b.i.ac,50),M.g(b.i.bc,50),M.g(b.i.dc,50),M.g(b.i.Eb,50),M.g(b.i.fc,50),M.g(b.i.Qb,50),M.g(b.i.hc,50),M.g(b.i.ic,50),M.g(b.i.jc,50),M.C(b.i.kc,500),M.g(b.i.lc,50)},Z.prototype.ba=function(){},Z),b.jo=(Af=$(o("61f7d1a780a415f71bf78cfd80bb42c31e8c9dc196921ec717c789c9899c06")),(Z=O.da(b.i,function(){b.i.call(this,b.ab.dd),Af.click(function(){A.h.J(A.h.ma)})})).prototype.B=function(){},Z.prototype.bb=function(){M.C(b.i.Wb,500),M.C(b.i.$b,1),M.g(b.i.ac,50),M.g(b.i.bc,50),M.g(b.i.dc,50),M.g(b.i.Eb,50),M.g(b.i.fc,50),M.g(b.i.Qb,50),M.g(b.i.hc,50),M.g(b.i.ic,50),M.g(b.i.jc,50),M.g(b.i.kc,50),M.C(b.i.lc,500)},Z.prototype.ba=function(){},Z),O.uo=function(){return(c={$j:!1}).ck=O.Lb(),c.Xd=0,c.Kh=0,c.Zd=null,c.Tp=Cl,c.Up=qs,c.l=null,c.A=null,c.Ne=null,c.fk=null,c.h=null,c.u=null,c.m=null,c.B=async function(){c.l=new b.So,c.l.ff=new b.pp(c.l),c.A=new b.Ha,await c.A.oa(),c.Ne=new b.ol,await c.Ne.oa(),c.fk=new b.wm,c.h=new b.Bl,await c.h.oa(),c.u=new b.qn,c.m=new b.np,c.l.Gk=function(){c.h.J(c.h.Nj)},c.l.Jk=function(){c.h.ma.ui(),c.h.J(c.h.D.We())},c.l.Ok=function(){var f,g;$(o("996874a864"))[o("fee7a5f8657bb0")](),c.A.Ih(null,null,null),f=Math.floor(c.l.U.Nb),g=c.l.pg,c.m.v?c.m.Ch(function(){c.Vk(f,g)}):c.Vk(f,g)},c.l.Zk=function(f){f(c.h.D.oc,c.h.D.Jb)},c.m.Uj(function(){var f=c.h.jp();f!=null&&f.ra===b.ab.af&&c.h.J(c.h.ma),c.m.v&&c.m.Jg(),c.od()&&c.m.v&&!c.m.If()?(c.eh(!1,!1),c.h.Dc.Cg(new b.gh)):c.fi(!0)}),c.l.B(),c.h.B(),c.u.B(),c.A.B(),c.h.ma.Dl(),c.h.J(c.h.ma),c.Ne.B(function(){c.fk.B(),c.m.B(),c.A.Ih(function(){c.h.ma.ni(),c.h.J(c.h.ma)},function(){c.h.ma.ni(),c.h.J(c.h.mb)},function(f,g){c.h.zc.hf(f,g),c.h.ma.hf(f,g)}),c.od()&&!c.If()?c.h.Dc.Cg(new b.gh):c.fi(!0)})},c.rl=function(f){var g;c.m.v&&(g=c.m.Qc,f=Jt+o("72a606c306725a2c48cd4bf8176b6523c4")+g+o("51e7e1c2b6a939fb3ca4afa9ef883cf800bc84f1")+o("992f288a6b6ff3a5c4371090")+encodeURIComponent(f),O.nc(f,function(){},function(){}))},c.ai=function(){c.si()},c.si=function(f,g){var y,x,S;ua(1),c.l.Jl()&&(c.h.zc.Ik(),c.h.J(c.h.zc),y=c.h.ma.ui(),b.I.vb(b.I.Ui,y),x=c.h.tf.Ji(),b.I.vb(b.I.Fi,x),x=0,c.Zd!=null&&(x=c.Zd[o("dc4e71c092d551")][o("28950b0f45091b9b55")],S=c.Zd[o("9e4c0f5ed0d717")][o("43982a58a091bd4f2f99")],x=Math.max(0,Math.min(32767,(x+90)/180*32768))<<1|1|Math.max(0,Math.min(65535,(S+180)/360*65536))<<16),c.m.v?(G.Df=g,c.Rl(y,x,f)):(f=c.h.ma.Bd(),b.I.vb(b.I.Xi,f),b.I.vb(b.I.Zi,c.u.na(b.s.Y)),c.Xl(y,x)))},Fi=function(f,g){c.si(f,g)},c.Rl=function(f,g,y=null){var x=c.m.Qc,N=c.h.ma.Bd(),S=(G.qk=N,c.u.na(b.s.Y)),E=c.u.na(b.s.sa),R=c.u.na(b.s.xa),F=c.u.na(b.s.za),k=c.u.na(b.s.ya),N=N.substring(0,24);N=(N=(N=(N=(N=(N=(N+="\uFFFE")+String.fromCharCode(S))+String.fromCharCode(k))+String.fromCharCode(E))+String.fromCharCode(R))+String.fromCharCode(F))+String.fromCharCode(j["1y"]),G.Bi(0),G.Vj(0),f=Jt+o("b583052e49dfd9498fe8480528d6e64683")+x+o("a054d0b5d7818705dc")+o("1206e76371c6b5cc5744b8483b9ca4")+encodeURIComponent(f)+o("bc28ccb9a7f9272080")+g+o("8e3a6217fcca37cef846354cbf9818")+encodeURIComponent(N)+o("5eca12c711184d1b2f930dca2e")+encodeURIComponent(S)+o("46f23aef2f22692e07bb35d216")+encodeURIComponent(E)+o("afc583145e8b4052dfa1dd0f08a8")+encodeURIComponent(R)+o("d3a1e7f030e438b9a8e9ae873bb55296")+encodeURIComponent(F)+o("3d0b8dc6a95337bd2113f4bc")+encodeURIComponent(k),O.nc(f,function(){c.h.J(c.h.mb)},function(z){z[o("1565f8acfc")]===1460?c.h.J(c.h.vg):z[o("f42659a39d")]!==1200?c.h.J(c.h.mb):(G.th=!0,G.Ke=y||z[o("7cbedb3df634b08cf1a7aa")],c.l.dm(G.Ke,x))})},c.Xl=function(f,g){var y=c.h.ma.Bd(),x=c.u.na(b.s.Y);f=Jt+o("6eda024702f656a044414f7c13ef19bf38")+o("819576d17682")+o("c0b43055b76167e5bc")+o("08fc791d6b3c23ba5d8e3606315612")+encodeURIComponent(f)+o("984ce8ddfb85fb5ce4")+g+o("1c486cd94e9801184a140b920dca2e")+encodeURIComponent(y)+o("2c585cc9436a1bed7de153347c")+encodeURIComponent(x),O.nc(f,function(){c.h.J(c.h.mb)},function(S){S[o("1240bb4173")]===1460?c.h.J(c.h.vg):S[o("883aa5bfe9")]!==1200?c.h.J(c.h.mb):(S=S[o("72f051f700624a560ff950")],c.l.jm(S,y,x))})},c.Vk=function(f,g){var y=c.h.ma.Bd();c.h.D.Do(f,g,y),c.h.J(c.h.D.Fh())},c.ql=function(){var f;return c.wg()&&(f=parseInt(b.I.Zb(b.I.Zi)))!=null&&c.u.rc(f,b.s.Y)?f:c.u.bk()},c.Pl=function(){b.I.vb(b.I.fj,o("edaa1dd514"))},c.wg=function(){return b.I.Zb(b.I.fj)===o("2ecb82b457")},c.fi=function(f){f!==c.$j&&(c.$j=f,o("289a05155f18008b5565"),o("188e3e1b6e2e318153940c07"))},c.eh=function(f,g){b.I.vb(b.I.Ci,o(f?"a16651a140":"b302d4ca440d")),g&&c.rl(f),c.fi(f)},c.If=function(){return b.I.Zb(b.I.Ci)===o("ebe89fab0a")},c.od=function(){try{return!!b.Xb[o("61bb90ddb59f09dd2c9b")]||c.Zd!=null&&!!_5.gn(c.Zd[o("df738e3d117016")][o("f9061a58141a8a5464")],c.Zd[o("782ad5a40ea9cd")][o("cc7161f1b7c86656b040")])}catch{return!0}},c.Va=function(){c.Xd=O.Lb(),c.Kh=c.Xd-c.ck,c.l.Ie(c.Xd,c.Kh),c.h.Ie(c.Xd,c.Kh),c.ck=c.Xd},c.la=function(){c.h.la()},c;var c},b.So=function(){o("3f0532d7e646f5c5330a20d9bf");var c={Em:30,Wc:new Float32Array(100),bj:0,ye:0,Be:0,Yc:0,Ed:0,dn:0,Ga:0,wa:null,pj:300,Jk:function(){},Ok:function(){},Zk:function(){},Gk:function(){},K:new b.Ud,ff:null,U:null,Oc:{},qb:{},jk:12.5,Cd:40,He:1,sj:-1,tj:1,hi:1,yj:-1,Bj:-1,Dj:1,Ij:1,Lj:-1,pg:500,Xj:500};return c.K.Jc=500,c.U=new b.Sf(c.K),c.B=function(){c.U.Hj(A.h.D.H),setInterval(function(){j["1y"]!=0&&G.k&&G.k.readyState===WebSocket.OPEN&&G.k.send(Ks(JSON.stringify({[o("11e3")]:1,[o("54c7")]:c.U.ga[0],[o("1ecc")]:c.U.ga[1],[o("1f34")]:c.U.K.Jc}))),c.Zk(function(f,g){c.ho(f,g)})},10)},c.bn=function(f,g,y,x){c.sj=f,c.tj=g,c.hi=y,c.yj=x,c.Qj()},c.qo=function(f){c.He=f,c.Qj()},c.Qj=function(){c.Bj=c.sj-c.He,c.Dj=c.tj+c.He,c.Ij=c.hi-c.He,c.Lj=c.yj+c.He},c.Ie=function(f,g){c.Be+=g,c.ye-=.2*c.bj*g,c.ff.yl(),c.wa==null||c.Ga!==2&&c.Ga!==3||(c.vo(f,g),c.Cd=4+c.jk*c.U.sb),f=1e3/Math.max(1,g);for(var y=g=0;y<c.Wc.length-1;y++)g+=c.Wc[y],c.Wc[y]=c.Wc[y+1];c.Wc[c.Wc.length-1]=f,c.Em=(g+f)/c.Wc.length},c.ig=function(f,g){return c.Bj<f&&f<c.Dj&&c.Ij<g&&g<c.Lj},c.vo=function(f,g){var y,x,S=(c.Be+c.ye-c.Yc)/(c.Ed-c.Yc),E=(c.U.Hf(f,g),c.U.Mf(f,g,S,c.ig),0);for(y in c.qb){var R=c.qb[y];R.Hf(f,g),R.Mf(f,g,S,c.ig),R.nb&&R.sb>E&&(E=R.sb),R.ed||!(R.Ta<.005)&&R.nb||(R.Oe(),delete c.qb[R.S.T])}for(x in c.qo(3*E),c.Oc)S=c.Oc[x],S.Hf(f,g),S.Mf(f,g,c.ig),S.Zh&&(S.Ta<.005||!c.ig(S.Bg,S.Dg))&&(S.Oe(),delete c.Oc[S.S.T])},c.pn=function(f,g){c.Ga===1&&(c.Ga=2,c.Jk());var y=A.Xd;(c.dn=f)===0?(c.Yc=y-95,c.Ed=y,c.Be=c.Yc,c.ye=0):(c.Yc=c.Ed,c.Ed+=g),c.bj=(c.Be+c.ye-c.Yc)/(c.Ed-c.Yc)},c.up=function(){var f;c.Ga!==1&&c.Ga!==2||(c.Ga=3,f=c.wa,O.fa(function(){c.Ga===3&&(c.Ga=0),f!=null&&f===c.wa&&(c.wa[o("ce3cfc0ea186")](),c.wa=null)},5e3),c.Ok())},c.Jl=function(){return c.Ga=1,c.ff.ki(),c.Oc={},c.qb={},c.U.li(),c.wa!=null&&(c.wa[o("e1310f7b1633")](),c.wa=null),!0},c.Ah=function(){c.wa=null,c.ff.ki(),c.Ga!==3&&c.Gk(),c.Ga=0},c.dm=function(f,g){c.dk(f,function(){var y=Math.min(2048,g.length),x=new b.Mh(6+2*y),S=new b.Yh(new b.ng(x));S.ee(129),S.fe(2800),S.ee(1),S.fe(y);for(var E=0;E<y;E++)S.fe(g.charCodeAt(E));c.Gh(x)})},c.jm=function(f,g,y){c.dk(f,function(){var x=Math.min(32,g.length),S=new b.Mh(7+2*x),E=new b.Yh(new b.ng(S));E.ee(129),E.fe(2800),E.ee(0),E.fe(y),E.ee(x);for(var R=0;R<x;R++)E.fe(g.charCodeAt(R));c.Gh(S)})},c.Gh=function(f){try{c.wa!=null&&c.wa.readyState===WebSocket.OPEN&&c.wa.send(f)}catch{c.Ah()}},c.ho=function(f,g){f=255&((g?128:0)|O.Am(f)/6.283185307179586*128&127),c.pj!==f&&(g=new b.Mh(1),new b.Yh(new b.ng(g)).ee(f),c.Gh(g),c.pj=f)},c.dk=function(f,g){G.k=new WebSocket(G.Um+Ks(JSON.stringify({[o("e93b")]:f,[o("a336")]:G.Kd,[o("edbd")]:G.qk,[o("c8fd")]:j["1y"]}))),G.k[o("407eecfc34f0e8")]=function(){this.Th=setInterval(()=>{this.send(o("3516"))},1e4)},G.k[o("c31babd52b173adf")]=function(){this.Th&&(clearInterval(this.Th),this.Th=0),this===G.k&&(G.k=null)},G.k[o("cc7260f2b5d26142b340")]=function(S){try{var E=JSON.parse(o(S.data));if(E[o("6fc1")]===0&&(Ja.Wf(E[o("7caf")]),ei.Wf(E[o("aad8")])),E[o("5848")]===1){let fe=E.b;fe==3333&&0<G.E.length&&(fe=G.E[Math.floor(Math.random()*G.E.length)]),G.E.includes(fe)&&A.l.U.Ca.Yj(fe)}if(E[o("5040")]===2&&je.ad(),E[o("69bb")]===3){var R=E[o("6377")];if(R){G.Oj=R;var F=E[o("8cbf")];if(F){try{delete F[G.Oj]}catch{}for(var k in G.Sb){var N,z,H,K=F[k],Ee=G.Sb[k];K?(N=K[o("6212")],z=K[o("471a")],H=K[o("2092")],Ee.position.x=N/H*A.h.D.H.c.Fa,Ee.position.y=z/H*A.h.D.H.c.Fa):(A.h.D.H.c.removeChild(Ee),delete G.Sb[k])}for(var Te in F){var ce,Be,At,ze,be=F[Te];G.Sb[Te]||(ce=be[o("a335")],Be=be[o("584b")],At=be[o("4fe3")],G.Sb[Te]=new Ye,(ze=G.Sb[Te])[o("9e55295fc6d61c")]=1,ze[o("5cccf25f0850")]=.9,ze.clear(),ze.circle(0,0,.08*A.h.D.H.c.Fa),ze.stroke({width:2,color:0}),ze.fill(65280),ze.position.x=ce/At*A.h.D.H.c.Fa,ze.position.y=Be/At*A.h.D.H.c.Fa,A.h.D.H.c.addChild(ze))}}}}}catch{}};var y=c.wa=new WebSocket(f);let x=G.k;y[o("2d7cc68ed0504ab04c56d2")]=o("b6260a3bdbb21eb8d829e523"),y[o("a01e8c9cd49088")]=function(){for(var S in G.zf=!0,G.Sb)A.h.D.H.c.removeChild(G.Sb[S]),delete G.Sb[S];c.wa===y&&g()},y[o("87d7e79967d37e9b")]=function(){new Date>G.Wk&&location.reload(),G.zf=!1,x&&x.close(),c.wa===y&&c.Ah()},y[o("b0ee9c66c67799f5")]=function(){G.zf=!1,c.wa===y&&c.Ah()},y[o("9c82b002c5029192c390")]=function(S){c.wa===y&&c.ff.ml(S.data)}},c},window.addEventListener(o("241609995c9c120f4118008a"),function(c){return c.preventDefault(),c.stopPropagation(),!1}),O.Li(o("74e084015d7bfcaa0ca4cd61e73eadb4e8b0e834e734efe9cab7bd7aa227b393fdc0e526fb05b38ef299f005d3"),null,function(){window.gapi[o("f906144d19")](o("a0109787ccc7"),function(){var c=window.gapi[o("d5a722fc31f8")],f=c[o("798395c589")],g={};g[o("1a48b0447bc194ee4b57")]=o("2c445bc6043347b20db7473400240be14dbf4d637974b2fc2cadea702c2be3f822ffe26d3247f0cf35d7a2466a4fb4ca2cdded01075ecdd408d0d3440d4bc9d402c9cb51046fd1ac19"),vt=f.call(c,g)})}),O.Li(o("5563e54efc781d6d2d27ac3e863d0c730933c97b86374e2e2b349c05c3240348141291478b0755460e")),await(A=O.uo()).B(),function c(){requestAnimationFrame(c),A.Va()}(),_c=$(o("77ca168e82")),Ta=$(o("fa2e8e3e8dfbb2f47670ac3864f8b0")),Ef=$(o("1c486cdc4d90101851054b9f4d980e1e5e")),Pf=$(o("4fa563f1bee5a7ad22f874acb4e3a9ab2d")),Mf(),$(b.Xb)[o("0a69a96e67e5b5")](Mf)});})();
